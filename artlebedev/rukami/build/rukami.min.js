/**
 * rukami v1.0.0 build Sat, 28 Nov 2020 19:45:29 GMT
 * Copyright 2020 Senya Pugach
 * @license UNLICENSED
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Rukami=t()}(this,(function(){"use strict";const e=100,t=1e3,n=1001,i=1002,r=1003,a=1006,o=1008,s=1009,c=1012,l=1014,u=1015,h=1016,d=1020,f=1022,p=1023,m=1026,A=1027,g=2300,v=2301,y=2302,E=2400,x=2401,b=2402,B=2500,C=3e3,w=7680,M=35044,D=35048,S="300 es";function _(){}Object.assign(_.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e)}}});const T=[];for(let e=0;e<256;e++)T[e]=(e<16?"0":"")+e.toString(16);let I=1234567;const F={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(T[255&e]+T[e>>8&255]+T[e>>16&255]+T[e>>24&255]+"-"+T[255&t]+T[t>>8&255]+"-"+T[t>>16&15|64]+T[t>>24&255]+"-"+T[63&n|128]+T[n>>8&255]+"-"+T[n>>16&255]+T[n>>24&255]+T[255&i]+T[i>>8&255]+T[i>>16&255]+T[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(I=e%2147483647),I=16807*I%2147483647,(I-1)/2147483646},degToRad:function(e){return e*F.DEG2RAD},radToDeg:function(e){return e*F.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const a=Math.cos,o=Math.sin,s=a(n/2),c=o(n/2),l=a((t+i)/2),u=o((t+i)/2),h=a((t-i)/2),d=o((t-i)/2),f=a((i-t)/2),p=o((i-t)/2);switch(r){case"XYX":e.set(s*u,c*h,c*d,s*l);break;case"YZY":e.set(c*d,s*u,c*h,s*l);break;case"ZXZ":e.set(c*h,c*d,s*u,s*l);break;case"XZX":e.set(s*u,c*p,c*f,s*l);break;case"YXY":e.set(c*f,s*u,c*p,s*l);break;case"ZYZ":e.set(c*p,c*f,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class L{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class R{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,a,o,s,c){const l=this.elements;return l[0]=e,l[1]=i,l[2]=o,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],m=i[3],A=i[6],g=i[1],v=i[4],y=i[7],E=i[2],x=i[5],b=i[8];return r[0]=a*p+o*g+s*E,r[3]=a*m+o*v+s*x,r[6]=a*A+o*y+s*b,r[1]=c*p+l*g+u*E,r[4]=c*m+l*v+u*x,r[7]=c*A+l*y+u*b,r[2]=h*p+d*g+f*E,r[5]=h*m+d*v+f*x,r[8]=h*A+d*y+f*b,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-n*r*l+n*o*s+i*r*c-i*a*s}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],f=d*c-l*h,p=l*u-d*s,m=h*s-c*u,A=r*f+a*p+o*m;if(0===A)return this.set(0,0,0,0,0,0,0,0,0);const g=1/A;return i[0]=f*g,i[1]=(o*h-d*a)*g,i[2]=(l*a-o*c)*g,i[3]=p*g,i[4]=(d*r-o*u)*g,i[5]=(o*s-l*r)*g,i[6]=m*g,i[7]=(a*u-h*r)*g,i[8]=(c*r-a*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).getInverse(this).transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,o){const s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*a+c*o)+a+e,-i*c,i*s,-i*(-c*a+s*o)+o+t,0,0,1)}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],c=i[4],l=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*c,i[6]=t*o+n*l,i[1]=-n*r+t*s,i[4]=-n*a+t*c,i[7]=-n*o+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}let P;const O={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===P&&(P=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),P.width=e.width,P.height=e.height;const n=P.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=P}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let N=0;function U(e,t,i,r,c,l,u,h,d,f){Object.defineProperty(this,"id",{value:N++}),this.uuid=F.generateUUID(),this.name="",this.image=void 0!==e?e:U.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:U.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:n,this.wrapT=void 0!==r?r:n,this.magFilter=void 0!==c?c:a,this.minFilter=void 0!==l?l:o,this.anisotropy=void 0!==d?d:1,this.format=void 0!==u?u:p,this.internalFormat=null,this.type=void 0!==h?h:s,this.offset=new L(0,0),this.repeat=new L(1,1),this.center=new L(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new R,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:C,this.version=0,this.onUpdate=null}U.DEFAULT_IMAGE=void 0,U.DEFAULT_MAPPING=300,U.prototype=Object.assign(Object.create(_.prototype),{constructor:U,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=F.generateUUID()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)t.push(O.getDataURL(i[e]))}else t=O.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case t:e.x=e.x-Math.floor(e.x);break;case n:e.x=e.x<0?0:1;break;case i:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case t:e.y=e.y-Math.floor(e.y);break;case n:e.y=e.y<0?0:1;break;case i:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(U.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});class G{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,o=.1,s=e.elements,c=s[0],l=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],A=s[10];if(Math.abs(l-h)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(l+h)<o&&Math.abs(u+p)<o&&Math.abs(f+m)<o&&Math.abs(c+d+A-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(c+1)/2,s=(d+1)/2,g=(A+1)/2,v=(l+h)/4,y=(u+p)/4,E=(f+m)/4;return e>s&&e>g?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=v/n,r=y/n):s>g?s<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=v/i,r=E/i):g<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=y/r,i=E/r),this.set(n,i,r,t),this}let g=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-l)*(h-l));return Math.abs(g)<.001&&(g=1),this.x=(m-f)/g,this.y=(u-p)/g,this.z=(h-l)/g,this.w=Math.acos((c+d+A-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function H(e,t,n){this.width=e,this.height=t,this.scissor=new G(0,0,e,t),this.scissorTest=!1,this.viewport=new G(0,0,e,t),n=n||{},this.texture=new U(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:a,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Q(e,t,n){H.call(this,e,t,n),this.samples=4}H.prototype=Object.assign(Object.create(_.prototype),{constructor:H,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Q.prototype=Object.assign(Object.create(H.prototype),{constructor:Q,isWebGLMultisampleRenderTarget:!0,copy:function(e){return H.prototype.copy.call(this,e),this.samples=e.samples,this}});class k{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return n.copy(e).slerp(t,i)}static slerpFlat(e,t,n,i,r,a,o){let s=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3];const h=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(u!==p||s!==h||c!==d||l!==f){let e=1-o;const t=s*h+c*d+l*f+u*p,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,o=Math.sin(o*a)/r}const r=o*n;if(s=s*e+h*r,c=c*e+d*r,l=l*e+f*r,u=u*e+p*r,e===1-o){const e=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=e,c*=e,l*=e,u*=e}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const o=n[i],s=n[i+1],c=n[i+2],l=n[i+3],u=r[a],h=r[a+1],d=r[a+2],f=r[a+3];return e[t]=o*f+l*u+s*d-c*h,e[t+1]=s*f+l*h+c*u-o*d,e[t+2]=c*f+l*d+o*h-s*u,e[t+3]=l*f-o*u-s*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,s=Math.sin,c=o(n/2),l=o(i/2),u=o(r/2),h=s(n/2),d=s(i/2),f=s(r/2);switch(a){case"XYZ":this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f;break;case"YXZ":this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f;break;case"ZXY":this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f;break;case"ZYX":this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f;break;case"YZX":this._x=h*l*u+c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u-h*d*f;break;case"XZY":this._x=h*l*u-c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],c=t[2],l=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-s)*e,this._y=(r-c)*e,this._z=(a-i)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(l-s)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+c)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(r-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(s+l)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-i)/e,this._x=(r+c)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(F.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+a*o+i*c-r*s,this._y=i*l+a*s+r*o-n*c,this._z=r*l+a*c+n*s-i*o,this._w=a*l-n*o-i*s-r*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(s),l=Math.atan2(c,o),u=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class z{constructor(e=0,t=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(W.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(W.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*i-o*n,l=s*n+o*t-r*i,u=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=c*s+h*-r+l*-o-u*-a,this.y=l*s+h*-a+u*-r-c*-o,this.z=u*s+h*-o+c*-a-l*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return V.copy(this).projectOnVector(e),this.sub(V)}reflect(e){return this.sub(V.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(F.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const V=new z,W=new k;class j{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new z(1/0,1/0,1/0),this.max=void 0!==t?t:new z(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0;for(let s=0,c=e.length;s<c;s+=3){const c=e[s],l=e[s+1],u=e[s+2];c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>a&&(a=l),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0;for(let s=0,c=e.count;s<c;s++){const c=e.getX(s),l=e.getY(s),u=e.getZ(s);c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>a&&(a=l),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=X.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new z),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new z),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),q.copy(t.boundingBox),q.applyMatrix4(e.matrixWorld),this.union(q));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new z),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,X),X.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ie),re.subVectors(this.max,ie),K.subVectors(e.a,ie),Z.subVectors(e.b,ie),$.subVectors(e.c,ie),ee.subVectors(Z,K),te.subVectors($,Z),ne.subVectors(K,$);let t=[0,-ee.z,ee.y,0,-te.z,te.y,0,-ne.z,ne.y,ee.z,0,-ee.x,te.z,0,-te.x,ne.z,0,-ne.x,-ee.y,ee.x,0,-te.y,te.x,0,-ne.y,ne.x,0];return!!J(t,K,Z,$,re)&&(t=[1,0,0,0,1,0,0,0,1],!!J(t,K,Z,$,re)&&(ae.crossVectors(ee,te),t=[ae.x,ae.y,ae.z],J(t,K,Z,$,re)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new z),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return X.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(X).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Y[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Y[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Y[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Y[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Y[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Y[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Y[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Y[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Y)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function J(e,t,n,i,r){for(let a=0,o=e.length-3;a<=o;a+=3){oe.fromArray(e,a);const o=r.x*Math.abs(oe.x)+r.y*Math.abs(oe.y)+r.z*Math.abs(oe.z),s=t.dot(oe),c=n.dot(oe),l=i.dot(oe);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>o)return!1}return!0}const Y=[new z,new z,new z,new z,new z,new z,new z,new z],X=new z,q=new j,K=new z,Z=new z,$=new z,ee=new z,te=new z,ne=new z,ie=new z,re=new z,ae=new z,oe=new z,se=new j;class ce{constructor(e,t){this.center=void 0!==e?e:new z,this.radius=void 0!==t?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):se.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new z),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new j),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const le=new z,ue=new z,he=new z,de=new z,fe=new z,pe=new z,me=new z;class Ae{constructor(e,t){this.origin=void 0!==e?e:new z,this.direction=void 0!==t?t:new z(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new z),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,le)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new z),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=le.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(le.copy(this.direction).multiplyScalar(t).add(this.origin),le.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){ue.copy(e).add(t).multiplyScalar(.5),he.copy(t).sub(e).normalize(),de.copy(this.origin).sub(ue);const r=.5*e.distanceTo(t),a=-this.direction.dot(he),o=de.dot(this.direction),s=-de.dot(he),c=de.lengthSq(),l=Math.abs(1-a*a);let u,h,d,f;if(l>0)if(u=a*s-o,h=a*o-s,f=r*l,u>=0)if(h>=-f)if(h<=f){const e=1/l;u*=e,h*=e,d=u*(u+a*h+2*o)+h*(a*u+h+2*s)+c}else h=r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+c;else h=-r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+c;else h<=-f?(u=Math.max(0,-(-a*r+o)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+c):h<=f?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+c):(u=Math.max(0,-(a*r+o)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+c);else h=a>0?-r:r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(he).multiplyScalar(h).add(ue),d}intersectSphere(e,t){le.subVectors(e.center,this.origin);const n=le.dot(this.direction),i=le.dot(le)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,o,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),l>=0?(r=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(r=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,le)}intersectTriangle(e,t,n,i,r){fe.subVectors(t,e),pe.subVectors(n,e),me.crossVectors(fe,pe);let a,o=this.direction.dot(me);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}de.subVectors(this.origin,e);const s=a*this.direction.dot(pe.crossVectors(de,pe));if(s<0)return null;const c=a*this.direction.dot(fe.cross(de));if(c<0)return null;if(s+c>o)return null;const l=-a*de.dot(me);return l<0?null:this.at(l/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class ge{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,a,o,s,c,l,u,h,d,f,p,m){const A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=i,A[1]=r,A[5]=a,A[9]=o,A[13]=s,A[2]=c,A[6]=l,A[10]=u,A[14]=h,A[3]=d,A[7]=f,A[11]=p,A[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ge).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/ve.setFromMatrixColumn(e,0).length(),r=1/ve.setFromMatrixColumn(e,1).length(),a=1/ve.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*l,n=a*u,i=o*l,r=o*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=n+i*c,t[5]=e-r*c,t[9]=-o*s,t[2]=r-e*c,t[6]=i+n*c,t[10]=a*s}else if("YXZ"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e+r*o,t[4]=i*o-n,t[8]=a*c,t[1]=a*u,t[5]=a*l,t[9]=-o,t[2]=n*o-i,t[6]=r+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e-r*o,t[4]=-a*u,t[8]=i+n*o,t[1]=n+i*o,t[5]=a*l,t[9]=r-e*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*l,n=a*u,i=o*l,r=o*u;t[0]=s*l,t[4]=i*c-n,t[8]=e*c+r,t[1]=s*u,t[5]=r*c+e,t[9]=n*c-i,t[2]=-c,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*c,i=o*s,r=o*c;t[0]=s*l,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*l,t[9]=-o*l,t[2]=-c*l,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*s,n=a*c,i=o*s,r=o*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=e*u+r,t[5]=a*l,t[9]=n*u-i,t[2]=i*u-n,t[6]=o*l,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ee,e,xe)}lookAt(e,t,n){const i=this.elements;return Ce.subVectors(e,t),0===Ce.lengthSq()&&(Ce.z=1),Ce.normalize(),be.crossVectors(n,Ce),0===be.lengthSq()&&(1===Math.abs(n.z)?Ce.x+=1e-4:Ce.z+=1e-4,Ce.normalize(),be.crossVectors(n,Ce)),be.normalize(),Be.crossVectors(Ce,be),i[0]=be.x,i[4]=Be.x,i[8]=Ce.x,i[1]=be.y,i[5]=Be.y,i[9]=Ce.y,i[2]=be.z,i[6]=Be.z,i[10]=Ce.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],A=n[14],g=n[3],v=n[7],y=n[11],E=n[15],x=i[0],b=i[4],B=i[8],C=i[12],w=i[1],M=i[5],D=i[9],S=i[13],_=i[2],T=i[6],I=i[10],F=i[14],L=i[3],R=i[7],P=i[11],O=i[15];return r[0]=a*x+o*w+s*_+c*L,r[4]=a*b+o*M+s*T+c*R,r[8]=a*B+o*D+s*I+c*P,r[12]=a*C+o*S+s*F+c*O,r[1]=l*x+u*w+h*_+d*L,r[5]=l*b+u*M+h*T+d*R,r[9]=l*B+u*D+h*I+d*P,r[13]=l*C+u*S+h*F+d*O,r[2]=f*x+p*w+m*_+A*L,r[6]=f*b+p*M+m*T+A*R,r[10]=f*B+p*D+m*I+A*P,r[14]=f*C+p*S+m*F+A*O,r[3]=g*x+v*w+y*_+E*L,r[7]=g*b+v*M+y*T+E*R,r[11]=g*B+v*D+y*I+E*P,r[15]=g*C+v*S+y*F+E*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*c*u-r*o*h+n*c*h+i*o*d-n*s*d)+e[7]*(+t*s*d-t*c*h+r*a*h-i*a*d+i*c*l-r*s*l)+e[11]*(+t*c*u-t*o*d-r*a*u+n*a*d+r*o*l-n*c*l)+e[15]*(-i*o*l-t*s*u+t*o*h+i*a*u-n*a*h+n*s*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],A=i[12],g=i[13],v=i[14],y=i[15],E=f*v*h-g*p*h+g*u*m-l*v*m-f*u*y+l*p*y,x=A*p*h-d*v*h-A*u*m+c*v*m+d*u*y-c*p*y,b=d*g*h-A*f*h+A*l*m-c*g*m-d*l*y+c*f*y,B=A*f*u-d*g*u-A*l*p+c*g*p+d*l*v-c*f*v,C=r*E+a*x+o*b+s*B;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/C;return n[0]=E*w,n[1]=(g*p*s-f*v*s-g*o*m+a*v*m+f*o*y-a*p*y)*w,n[2]=(l*v*s-g*u*s+g*o*h-a*v*h-l*o*y+a*u*y)*w,n[3]=(f*u*s-l*p*s-f*o*h+a*p*h+l*o*m-a*u*m)*w,n[4]=x*w,n[5]=(d*v*s-A*p*s+A*o*m-r*v*m-d*o*y+r*p*y)*w,n[6]=(A*u*s-c*v*s-A*o*h+r*v*h+c*o*y-r*u*y)*w,n[7]=(c*p*s-d*u*s+d*o*h-r*p*h-c*o*m+r*u*m)*w,n[8]=b*w,n[9]=(A*f*s-d*g*s-A*a*m+r*g*m+d*a*y-r*f*y)*w,n[10]=(c*g*s-A*l*s+A*a*h-r*g*h-c*a*y+r*l*y)*w,n[11]=(d*l*s-c*f*s-d*a*h+r*f*h+c*a*m-r*l*m)*w,n[12]=B*w,n[13]=(d*g*o-A*f*o+A*a*p-r*g*p-d*a*v+r*f*v)*w,n[14]=(A*l*o-c*g*o-A*a*u+r*g*u+c*a*v-r*l*v)*w,n[15]=(c*f*o-d*l*o+d*a*u-r*f*u-c*a*p+r*l*p)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,c=r*a,l=r*o;return this.set(c*a+n,c*o-i*s,c*s+i*o,0,c*o+i*s,l*o+n,l*s-i*a,0,c*s-i*o,l*s+i*a,r*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,c=r+r,l=a+a,u=o+o,h=r*c,d=r*l,f=r*u,p=a*l,m=a*u,A=o*u,g=s*c,v=s*l,y=s*u,E=n.x,x=n.y,b=n.z;return i[0]=(1-(p+A))*E,i[1]=(d+y)*E,i[2]=(f-v)*E,i[3]=0,i[4]=(d-y)*x,i[5]=(1-(h+A))*x,i[6]=(m+g)*x,i[7]=0,i[8]=(f+v)*b,i[9]=(m-g)*b,i[10]=(1-(h+p))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=ve.set(i[0],i[1],i[2]).length();const a=ve.set(i[4],i[5],i[6]).length(),o=ve.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],ye.copy(this);const s=1/r,c=1/a,l=1/o;return ye.elements[0]*=s,ye.elements[1]*=s,ye.elements[2]*=s,ye.elements[4]*=c,ye.elements[5]*=c,ye.elements[6]*=c,ye.elements[8]*=l,ye.elements[9]*=l,ye.elements[10]*=l,t.setFromRotationMatrix(ye),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,s=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),u=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,a){const o=this.elements,s=1/(t-e),c=1/(n-i),l=1/(a-r),u=(t+e)*s,h=(n+i)*c,d=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ve=new z,ye=new ge,Ee=new z(0,0,0),xe=new z(1,1,1),be=new z,Be=new z,Ce=new z;class we{constructor(e=0,t=0,n=0,i=we.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const i=F.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],c=r[1],l=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Me.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Me,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return De.setFromEuler(this),this.setFromQuaternion(De,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new z(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}we.DefaultOrder="XYZ",we.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Me=new ge,De=new k;class Se{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let _e=0;const Te=new z,Ie=new k,Fe=new ge,Le=new z,Re=new z,Pe=new z,Oe=new k,Ne=new z(1,0,0),Ue=new z(0,1,0),Ge=new z(0,0,1),He={type:"added"},Qe={type:"removed"};function ke(){Object.defineProperty(this,"id",{value:_e++}),this.uuid=F.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ke.DefaultUp.clone();const e=new z,t=new we,n=new k,i=new z(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ge},normalMatrix:{value:new R}}),this.matrix=new ge,this.matrixWorld=new ge,this.matrixAutoUpdate=ke.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Se,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}ke.DefaultUp=new z(0,1,0),ke.DefaultMatrixAutoUpdate=!0,ke.prototype=Object.assign(Object.create(_.prototype),{constructor:ke,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Ie.setFromAxisAngle(e,t),this.quaternion.multiply(Ie),this},rotateOnWorldAxis:function(e,t){return Ie.setFromAxisAngle(e,t),this.quaternion.premultiply(Ie),this},rotateX:function(e){return this.rotateOnAxis(Ne,e)},rotateY:function(e){return this.rotateOnAxis(Ue,e)},rotateZ:function(e){return this.rotateOnAxis(Ge,e)},translateOnAxis:function(e,t){return Te.copy(e).applyQuaternion(this.quaternion),this.position.add(Te.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Ne,e)},translateY:function(e){return this.translateOnAxis(Ue,e)},translateZ:function(e){return this.translateOnAxis(Ge,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Fe.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Le.copy(e):Le.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Re.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fe.lookAt(Re,Le,this.up):Fe.lookAt(Le,Re,this.up),this.quaternion.setFromRotationMatrix(Fe),i&&(Fe.extractRotation(i.matrixWorld),Ie.setFromRotationMatrix(Fe),this.quaternion.premultiply(Ie.inverse()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(He)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Qe)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Qe)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),Fe.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fe.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fe),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new z),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new k),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Re,e,Pe),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new z),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Re,Oe,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new z),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),o=a(e.images),s=a(e.shapes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}});const ze=new z,Ve=new z,We=new R;class je{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new z(1,0,0),this.constant=void 0!==t?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=ze.subVectors(n,t).cross(Ve.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new z),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new z);const n=e.delta(ze),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new z),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||We.getNormalMatrix(e),i=this.coplanarPoint(ze).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const Je=new z,Ye=new z,Xe=new z,qe=new z,Ke=new z,Ze=new z,$e=new z,et=new z,tt=new z,nt=new z;class it{constructor(e,t,n){this.a=void 0!==e?e:new z,this.b=void 0!==t?t:new z,this.c=void 0!==n?n:new z}static getNormal(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new z),i.subVectors(n,t),Je.subVectors(e,t),i.cross(Je);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Je.subVectors(i,t),Ye.subVectors(n,t),Xe.subVectors(e,t);const a=Je.dot(Je),o=Je.dot(Ye),s=Je.dot(Xe),c=Ye.dot(Ye),l=Ye.dot(Xe),u=a*c-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new z),0===u)return r.set(-2,-1,-1);const h=1/u,d=(c*s-o*l)*h,f=(a*l-o*s)*h;return r.set(1-d-f,f,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,qe),qe.x>=0&&qe.y>=0&&qe.x+qe.y<=1}static getUV(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,qe),s.set(0,0),s.addScaledVector(r,qe.x),s.addScaledVector(a,qe.y),s.addScaledVector(o,qe.z),s}static isFrontFacing(e,t,n,i){return Je.subVectors(n,t),Ye.subVectors(e,t),Je.cross(Ye).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Je.subVectors(this.c,this.b),Ye.subVectors(this.a,this.b),.5*Je.cross(Ye).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new z),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return it.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new je),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return it.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return it.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return it.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return it.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new z);const n=this.a,i=this.b,r=this.c;let a,o;Ke.subVectors(i,n),Ze.subVectors(r,n),et.subVectors(e,n);const s=Ke.dot(et),c=Ze.dot(et);if(s<=0&&c<=0)return t.copy(n);tt.subVectors(e,i);const l=Ke.dot(tt),u=Ze.dot(tt);if(l>=0&&u<=l)return t.copy(i);const h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return a=s/(s-l),t.copy(n).addScaledVector(Ke,a);nt.subVectors(e,r);const d=Ke.dot(nt),f=Ze.dot(nt);if(f>=0&&d<=f)return t.copy(r);const p=d*c-s*f;if(p<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(n).addScaledVector(Ze,o);const m=l*f-d*u;if(m<=0&&u-l>=0&&d-f>=0)return $e.subVectors(r,i),o=(u-l)/(u-l+(d-f)),t.copy(i).addScaledVector($e,o);const A=1/(m+p+h);return a=p*A,o=h*A,t.copy(n).addScaledVector(Ke,a).addScaledVector(Ze,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},at={h:0,s:0,l:0},ot={h:0,s:0,l:0};function st(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function ct(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function lt(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class ut{constructor(e,t,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=F.euclideanModulo(e,1),t=F.clamp(t,0,1),n=F.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=st(r,i,e+1/3),this.g=st(r,i,e),this.b=st(r,i,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let e;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[5]),this;if(e=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[5]),this;break;case"hsl":case"hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){const n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[5]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=rt[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t){void 0===t&&(t=2);const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=ct(e.r),this.g=ct(e.g),this.b=ct(e.b),this}copyLinearToSRGB(e){return this.r=lt(e.r),this.g=lt(e.g),this.b=lt(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),a=Math.min(t,n,i);let o,s;const c=(a+r)/2;if(a===r)o=0,s=0;else{const e=r-a;switch(s=c<=.5?e/(r+a):e/(2-r-a),r){case t:o=(n-i)/e+(n<i?6:0);break;case n:o=(i-t)/e+2;break;case i:o=(t-n)/e+4}o/=6}return e.h=o,e.s=s,e.l=c,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(at),at.h+=e,at.s+=t,at.l+=n,this.setHSL(at.h,at.s,at.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpHSL(e,t){this.getHSL(at),e.getHSL(ot);const n=F.lerp(at.h,ot.h,t),i=F.lerp(at.s,ot.s,t),r=F.lerp(at.l,ot.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ut.NAMES=rt,ut.prototype.r=1,ut.prototype.g=1,ut.prototype.b=1;class ht{constructor(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new z,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new ut,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let dt=0;function ft(){Object.defineProperty(this,"id",{value:dt++}),this.uuid=F.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=e,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=w,this.stencilZFail=w,this.stencilZPass=w,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function pt(e){ft.call(this),this.type="MeshBasicMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}ft.prototype=Object.assign(Object.create(_.prototype),{constructor:ft,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ft.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),pt.prototype=Object.create(ft.prototype),pt.prototype.constructor=pt,pt.prototype.isMeshBasicMaterial=!0,pt.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const mt=new z,At=new L;function gt(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=M,this.updateRange={offset:0,count:-1},this.version=0}function vt(e,t,n){gt.call(this,new Int8Array(e),t,n)}function yt(e,t,n){gt.call(this,new Uint8Array(e),t,n)}function Et(e,t,n){gt.call(this,new Uint8ClampedArray(e),t,n)}function xt(e,t,n){gt.call(this,new Int16Array(e),t,n)}function bt(e,t,n){gt.call(this,new Uint16Array(e),t,n)}function Bt(e,t,n){gt.call(this,new Int32Array(e),t,n)}function Ct(e,t,n){gt.call(this,new Uint32Array(e),t,n)}function wt(e,t,n){gt.call(this,new Float32Array(e),t,n)}function Mt(e,t,n){gt.call(this,new Float64Array(e),t,n)}Object.defineProperty(gt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(gt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new ut),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new L),t[n++]=r.x,t[n++]=r.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new z),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new G),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)At.fromBufferAttribute(this,t),At.applyMatrix3(e),this.setXY(t,At.x,At.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)mt.fromBufferAttribute(this,t),mt.applyMatrix3(e),this.setXYZ(t,mt.x,mt.y,mt.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)mt.x=this.getX(t),mt.y=this.getY(t),mt.z=this.getZ(t),mt.applyMatrix4(e),this.setXYZ(t,mt.x,mt.y,mt.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)mt.x=this.getX(t),mt.y=this.getY(t),mt.z=this.getZ(t),mt.applyNormalMatrix(e),this.setXYZ(t,mt.x,mt.y,mt.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)mt.x=this.getX(t),mt.y=this.getY(t),mt.z=this.getZ(t),mt.transformDirection(e),this.setXYZ(t,mt.x,mt.y,mt.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),vt.prototype=Object.create(gt.prototype),vt.prototype.constructor=vt,yt.prototype=Object.create(gt.prototype),yt.prototype.constructor=yt,Et.prototype=Object.create(gt.prototype),Et.prototype.constructor=Et,xt.prototype=Object.create(gt.prototype),xt.prototype.constructor=xt,bt.prototype=Object.create(gt.prototype),bt.prototype.constructor=bt,Bt.prototype=Object.create(gt.prototype),Bt.prototype.constructor=Bt,Ct.prototype=Object.create(gt.prototype),Ct.prototype.constructor=Ct,wt.prototype=Object.create(gt.prototype),wt.prototype.constructor=wt,Mt.prototype=Object.create(gt.prototype),Mt.prototype.constructor=Mt;class Dt{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let n,i,r=void 0;const a=e.faces;for(i=0;i<a.length;i++){const e=a[i];e.materialIndex!==r&&(r=e.materialIndex,void 0!==n&&(n.count=3*i-n.start,t.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,t.push(n)),this.groups=t}fromGeometry(e){const t=e.faces,n=e.vertices,i=e.faceVertexUvs,r=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,o=e.morphTargets,s=o.length;let c;if(s>0){c=[];for(let e=0;e<s;e++)c[e]={name:o[e].name,data:[]};this.morphTargets.position=c}const l=e.morphNormals,u=l.length;let h;if(u>0){h=[];for(let e=0;e<u;e++)h[e]={name:l[e].name,data:[]};this.morphTargets.normal=h}const d=e.skinIndices,f=e.skinWeights,p=d.length===n.length,m=f.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<t.length;e++){const A=t[e];this.vertices.push(n[A.a],n[A.b],n[A.c]);const g=A.vertexNormals;if(3===g.length)this.normals.push(g[0],g[1],g[2]);else{const e=A.normal;this.normals.push(e,e,e)}const v=A.vertexColors;if(3===v.length)this.colors.push(v[0],v[1],v[2]);else{const e=A.color;this.colors.push(e,e,e)}if(!0===r){const t=i[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new L,new L,new L))}if(!0===a){const t=i[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new L,new L,new L))}for(let e=0;e<s;e++){const t=o[e].vertices;c[e].data.push(t[A.a],t[A.b],t[A.c])}for(let t=0;t<u;t++){const n=l[t].vertexNormals[e];h[t].data.push(n.a,n.b,n.c)}p&&this.skinIndices.push(d[A.a],d[A.b],d[A.c]),m&&this.skinWeights.push(f[A.a],f[A.b],f[A.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}function St(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}let _t=1;const Tt=new ge,It=new ke,Ft=new z,Lt=new j,Rt=new j,Pt=new z;function Ot(){Object.defineProperty(this,"id",{value:_t+=2}),this.uuid=F.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ot.prototype=Object.assign(Object.create(_.prototype),{constructor:Ot,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(St(e)>65535?Ct:bt)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new R).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Tt.makeRotationX(e),this.applyMatrix4(Tt),this},rotateY:function(e){return Tt.makeRotationY(e),this.applyMatrix4(Tt),this},rotateZ:function(e){return Tt.makeRotationZ(e),this.applyMatrix4(Tt),this},translate:function(e,t,n){return Tt.makeTranslation(e,t,n),this.applyMatrix4(Tt),this},scale:function(e,t,n){return Tt.makeScale(e,t,n),this.applyMatrix4(Tt),this},lookAt:function(e){return It.lookAt(e),It.updateMatrix(),this.applyMatrix4(It.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ft).negate(),this.translate(Ft.x,Ft.y,Ft.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const e=new wt(3*t.vertices.length,3),n=new wt(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new wt(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new wt(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Dt).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new gt(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const t=new Float32Array(3*e.normals.length);this.setAttribute("normal",new gt(t,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const t=new Float32Array(3*e.colors.length);this.setAttribute("color",new gt(t,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const t=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new gt(t,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const t=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new gt(t,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const t in e.morphTargets){const n=[],i=e.morphTargets[t];for(let e=0,t=i.length;e<t;e++){const t=i[e],r=new wt(3*t.data.length,3);r.name=t.name,n.push(r.copyVector3sArray(t.data))}this.morphAttributes[t]=n}if(e.skinIndices.length>0){const t=new wt(4*e.skinIndices.length,4);this.setAttribute("skinIndex",t.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const t=new wt(4*e.skinWeights.length,4);this.setAttribute("skinWeight",t.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new j);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Lt.setFromBufferAttribute(n),this.morphTargetsRelative?(Pt.addVectors(this.boundingBox.min,Lt.min),this.boundingBox.expandByPoint(Pt),Pt.addVectors(this.boundingBox.max,Lt.max),this.boundingBox.expandByPoint(Pt)):(this.boundingBox.expandByPoint(Lt.min),this.boundingBox.expandByPoint(Lt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ce);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new z,1/0);if(e){const n=this.boundingSphere.center;if(Lt.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Rt.setFromBufferAttribute(n),this.morphTargetsRelative?(Pt.addVectors(Lt.min,Rt.min),Lt.expandByPoint(Pt),Pt.addVectors(Lt.max,Rt.max),Lt.expandByPoint(Pt)):(Lt.expandByPoint(Rt.min),Lt.expandByPoint(Rt.max))}Lt.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Pt.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Pt));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],o=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)Pt.fromBufferAttribute(a,t),o&&(Ft.fromBufferAttribute(e,t),Pt.add(Ft)),i=Math.max(i,n.distanceToSquared(Pt))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new gt(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new z,r=new z,a=new z,o=new z,s=new z,c=new z,l=new z,u=new z;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),l.subVectors(a,r),u.subVectors(i,r),l.cross(u),o.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),c.fromBufferAttribute(n,p),o.add(l),s.add(l),c.add(l),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,c.x,c.y,c.z)}else for(let e=0,o=t.count;e<o;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),l.subVectors(a,r),u.subVectors(i,r),l.cross(u),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,a=e.attributes[i],o=a.array,s=a.itemSize*t,c=Math.min(o.length,r.length-s);for(let e=0,t=s;e<c;e++,t++)r[t]=o[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Pt.fromBufferAttribute(e,t),Pt.normalize(),e.setXYZ(t,Pt.x,Pt.y,Pt.z)},toNonIndexed:function(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let o=0,s=0;for(let e=0,r=t.length;e<r;e++){o=t[e]*i;for(let e=0;e<i;e++)a[s++]=n[o++]}return new gt(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new Ot,n=this.index.array,i=this.attributes;for(const r in i){const a=e(i[r],n);t.setAttribute(r,a)}const r=this.morphAttributes;for(const i in r){const a=[],o=r[i];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);a.push(i)}t.morphAttributes[i]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),e.data.attributes[t]=r}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),a.push(r)}a.length>0&&(i[t]=a,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e},clone:function(){return(new Ot).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Nt=new ge,Ut=new Ae,Gt=new ce,Ht=new z,Qt=new z,kt=new z,zt=new z,Vt=new z,Wt=new z,jt=new z,Jt=new z,Yt=new z,Xt=new L,qt=new L,Kt=new L,Zt=new z,$t=new z;function en(e,t){ke.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ot,this.material=void 0!==t?t:new pt,this.updateMorphTargets()}function tn(e,t,n,i,r,a,o,s){let c;if(c=1===t.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==t.side,s),null===c)return null;$t.copy(s),$t.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo($t);return l<n.near||l>n.far?null:{distance:l,point:$t.clone(),object:e}}function nn(e,t,n,i,r,a,o,s,c,l,u,h){Ht.fromBufferAttribute(r,l),Qt.fromBufferAttribute(r,u),kt.fromBufferAttribute(r,h);const d=e.morphTargetInfluences;if(t.morphTargets&&a&&d){jt.set(0,0,0),Jt.set(0,0,0),Yt.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=d[e],n=a[e];0!==t&&(zt.fromBufferAttribute(n,l),Vt.fromBufferAttribute(n,u),Wt.fromBufferAttribute(n,h),o?(jt.addScaledVector(zt,t),Jt.addScaledVector(Vt,t),Yt.addScaledVector(Wt,t)):(jt.addScaledVector(zt.sub(Ht),t),Jt.addScaledVector(Vt.sub(Qt),t),Yt.addScaledVector(Wt.sub(kt),t)))}Ht.add(jt),Qt.add(Jt),kt.add(Yt)}e.isSkinnedMesh&&(e.boneTransform(l,Ht),e.boneTransform(u,Qt),e.boneTransform(h,kt));const f=tn(e,t,n,i,Ht,Qt,kt,Zt);if(f){s&&(Xt.fromBufferAttribute(s,l),qt.fromBufferAttribute(s,u),Kt.fromBufferAttribute(s,h),f.uv=it.getUV(Zt,Ht,Qt,kt,Xt,qt,Kt,new L)),c&&(Xt.fromBufferAttribute(c,l),qt.fromBufferAttribute(c,u),Kt.fromBufferAttribute(c,h),f.uv2=it.getUV(Zt,Ht,Qt,kt,Xt,qt,Kt,new L));const e=new ht(l,u,h);it.getNormal(Ht,Qt,kt,e.normal),f.face=e}return f}en.prototype=Object.assign(Object.create(ke.prototype),{constructor:en,isMesh:!0,copy:function(e){return ke.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Gt.copy(n.boundingSphere),Gt.applyMatrix4(r),!1===e.ray.intersectsSphere(Gt))return;if(Nt.getInverse(r),Ut.copy(e.ray).applyMatrix4(Nt),null!==n.boundingBox&&!1===Ut.intersectsBox(n.boundingBox))return;let a;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,f=h.length;n<f;n++){const f=h[n],p=i[f.materialIndex];for(let n=Math.max(f.start,d.start),i=Math.min(f.start+f.count,d.start+d.count);n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);a=nn(this,p,e,Ut,o,s,c,l,u,i,h,d),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=f.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);n<h;n+=3){const h=r.getX(n),d=r.getX(n+1),f=r.getX(n+2);a=nn(this,i,e,Ut,o,s,c,l,u,h,d,f),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}else if(void 0!==o)if(Array.isArray(i))for(let n=0,r=h.length;n<r;n++){const r=h[n],f=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(r.start+r.count,d.start+d.count);n<i;n+=3){a=nn(this,f,e,Ut,o,s,c,l,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=r.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),r=Math.min(o.count,d.start+d.count);n<r;n+=3){a=nn(this,i,e,Ut,o,s,c,l,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}}else if(n.isGeometry){const r=Array.isArray(i),o=n.vertices,s=n.faces;let c;const l=n.faceVertexUvs[0];l.length>0&&(c=l);for(let n=0,l=s.length;n<l;n++){const l=s[n],u=r?i[l.materialIndex]:i;if(void 0===u)continue;const h=o[l.a],d=o[l.b],f=o[l.c];if(a=tn(this,u,e,Ut,h,d,f,Zt),a){if(c&&c[n]){const e=c[n];Xt.copy(e[0]),qt.copy(e[1]),Kt.copy(e[2]),a.uv=it.getUV(Zt,h,d,f,Xt,qt,Kt,new L)}a.face=l,a.faceIndex=n,t.push(a)}}}}});class rn extends Ot{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const o=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const s=[],c=[],l=[],u=[];let h=0,d=0;function f(e,t,n,i,r,a,f,p,m,A,g){const v=a/m,y=f/A,E=a/2,x=f/2,b=p/2,B=m+1,C=A+1;let w=0,M=0;const D=new z;for(let a=0;a<C;a++){const o=a*y-x;for(let s=0;s<B;s++){const h=s*v-E;D[e]=h*i,D[t]=o*r,D[n]=b,c.push(D.x,D.y,D.z),D[e]=0,D[t]=0,D[n]=p>0?1:-1,l.push(D.x,D.y,D.z),u.push(s/m),u.push(1-a/A),w+=1}}for(let e=0;e<A;e++)for(let t=0;t<m;t++){const n=h+t+B*e,i=h+t+B*(e+1),r=h+(t+1)+B*(e+1),a=h+(t+1)+B*e;s.push(n,i,a),s.push(i,r,a),M+=6}o.addGroup(d,M,g),d+=M,h+=w}f("z","y","x",-1,-1,n,t,e,a,r,0),f("z","y","x",1,-1,n,t,-e,a,r,1),f("x","z","y",1,1,e,n,t,i,a,2),f("x","z","y",1,-1,e,n,-t,i,a,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new wt(c,3)),this.setAttribute("normal",new wt(l,3)),this.setAttribute("uv",new wt(u,2))}}function an(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function on(e){const t={};for(let n=0;n<e.length;n++){const i=an(e[n]);for(const e in i)t[e]=i[e]}return t}const sn={clone:an,merge:on};function cn(e){ft.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function ln(){ke.call(this),this.type="Camera",this.matrixWorldInverse=new ge,this.projectionMatrix=new ge,this.projectionMatrixInverse=new ge}function un(e,t,n,i){ln.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}cn.prototype=Object.create(ft.prototype),cn.prototype.constructor=cn,cn.prototype.isShaderMaterial=!0,cn.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=an(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},cn.prototype.toJSON=function(e){const t=ft.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},ln.prototype=Object.assign(Object.create(ke.prototype),{constructor:ln,isCamera:!0,copy:function(e,t){return ke.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new z),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){ke.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){ke.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),un.prototype=Object.assign(Object.create(ln.prototype),{constructor:un,isPerspectiveCamera:!0,copy:function(e,t){return ln.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*F.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*F.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*F.RAD2DEG*Math.atan(Math.tan(.5*F.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*F.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/o,i*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=ke.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const hn=90;function dn(e,t,n){if(ke.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new un(hn,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new z(1,0,0)),this.add(i);const r=new un(hn,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new z(-1,0,0)),this.add(r);const a=new un(hn,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new z(0,1,0)),this.add(a);const o=new un(hn,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new z(0,-1,0)),this.add(o);const s=new un(hn,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new z(0,0,1)),this.add(s);const c=new un(hn,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new z(0,0,-1)),this.add(c),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const l=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=l}}function fn(e,t,n,i,r,a,o,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:301,o=void 0!==o?o:f,U.call(this,e,t,n,i,r,a,o,s,c,l),this.flipY=!1,this._needsFlipEnvMap=!0}function pn(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),H.call(this,e,e,t),t=t||{},this.texture=new fn(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}function mn(e,t,n,i,a,o,s,c,l,u,h,d){U.call(this,null,o,s,c,l,u,i,a,h,d),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:r,this.minFilter=void 0!==u?u:r,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}dn.prototype=Object.create(ke.prototype),dn.prototype.constructor=dn,fn.prototype=Object.create(U.prototype),fn.prototype.constructor=fn,fn.prototype.isCubeTexture=!0,Object.defineProperty(fn.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),pn.prototype=Object.create(H.prototype),pn.prototype.constructor=pn,pn.prototype.isWebGLCubeRenderTarget=!0,pn.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=p,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},i=new rn(5,5,5),r=new cn({name:"CubemapFromEquirect",uniforms:an(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const s=new en(i,r),c=t.minFilter;t.minFilter===o&&(t.minFilter=a);return new dn(1,10,this).update(e,s),t.minFilter=c,s.geometry.dispose(),s.material.dispose(),this},pn.prototype.clear=function(e,t,n,i){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)},mn.prototype=Object.create(U.prototype),mn.prototype.constructor=mn,mn.prototype.isDataTexture=!0;const An=new ce,gn=new z;class vn{constructor(e,t,n,i,r,a){this.planes=[void 0!==e?e:new je,void 0!==t?t:new je,void 0!==n?n:new je,void 0!==i?i:new je,void 0!==r?r:new je,void 0!==a?a:new je]}set(e,t,n,i,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],A=n[13],g=n[14],v=n[15];return t[0].setComponents(o-i,u-s,p-h,v-m).normalize(),t[1].setComponents(o+i,u+s,p+h,v+m).normalize(),t[2].setComponents(o+r,u+c,p+d,v+A).normalize(),t[3].setComponents(o-r,u-c,p-d,v-A).normalize(),t[4].setComponents(o-a,u-l,p-f,v-g).normalize(),t[5].setComponents(o+a,u+l,p+f,v+g).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),An.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(An)}intersectsSprite(e){return An.center.set(0,0,0),An.radius=.7071067811865476,An.applyMatrix4(e.matrixWorld),this.intersectsSphere(An)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(gn.x=i.normal.x>0?e.max.x:e.min.x,gn.y=i.normal.y>0?e.max.y:e.min.y,gn.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(gn)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}function yn(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function En(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){var a=i.get(t);return void((!a||a.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=i.get(t);void 0===o?i.set(t,function(t,n){const i=t.array,r=t.usage,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();let o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(!function(t,i,r){const a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,r),o.version=t.version)}}}class xn extends Ot{constructor(e,t,n,i){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=(e=e||1)/2,a=(t=t||1)/2,o=Math.floor(n)||1,s=Math.floor(i)||1,c=o+1,l=s+1,u=e/o,h=t/s,d=[],f=[],p=[],m=[];for(let e=0;e<l;e++){const t=e*h-a;for(let n=0;n<c;n++){const i=n*u-r;f.push(i,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){const n=t+c*e,i=t+c*(e+1),r=t+1+c*(e+1),a=t+1+c*e;d.push(n,i,a),d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new wt(f,3)),this.setAttribute("normal",new wt(p,3)),this.setAttribute("uv",new wt(m,2))}}const bn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Bn={common:{diffuse:{value:new ut(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new R},uv2Transform:{value:new R},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new L(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new R}},sprite:{diffuse:{value:new ut(15658734)},opacity:{value:1},center:{value:new L(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new R}}},Cn={basic:{uniforms:on([Bn.common,Bn.specularmap,Bn.envmap,Bn.aomap,Bn.lightmap,Bn.fog]),vertexShader:bn.meshbasic_vert,fragmentShader:bn.meshbasic_frag},lambert:{uniforms:on([Bn.common,Bn.specularmap,Bn.envmap,Bn.aomap,Bn.lightmap,Bn.emissivemap,Bn.fog,Bn.lights,{emissive:{value:new ut(0)}}]),vertexShader:bn.meshlambert_vert,fragmentShader:bn.meshlambert_frag},phong:{uniforms:on([Bn.common,Bn.specularmap,Bn.envmap,Bn.aomap,Bn.lightmap,Bn.emissivemap,Bn.bumpmap,Bn.normalmap,Bn.displacementmap,Bn.fog,Bn.lights,{emissive:{value:new ut(0)},specular:{value:new ut(1118481)},shininess:{value:30}}]),vertexShader:bn.meshphong_vert,fragmentShader:bn.meshphong_frag},standard:{uniforms:on([Bn.common,Bn.envmap,Bn.aomap,Bn.lightmap,Bn.emissivemap,Bn.bumpmap,Bn.normalmap,Bn.displacementmap,Bn.roughnessmap,Bn.metalnessmap,Bn.fog,Bn.lights,{emissive:{value:new ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},toon:{uniforms:on([Bn.common,Bn.aomap,Bn.lightmap,Bn.emissivemap,Bn.bumpmap,Bn.normalmap,Bn.displacementmap,Bn.gradientmap,Bn.fog,Bn.lights,{emissive:{value:new ut(0)}}]),vertexShader:bn.meshtoon_vert,fragmentShader:bn.meshtoon_frag},matcap:{uniforms:on([Bn.common,Bn.bumpmap,Bn.normalmap,Bn.displacementmap,Bn.fog,{matcap:{value:null}}]),vertexShader:bn.meshmatcap_vert,fragmentShader:bn.meshmatcap_frag},points:{uniforms:on([Bn.points,Bn.fog]),vertexShader:bn.points_vert,fragmentShader:bn.points_frag},dashed:{uniforms:on([Bn.common,Bn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bn.linedashed_vert,fragmentShader:bn.linedashed_frag},depth:{uniforms:on([Bn.common,Bn.displacementmap]),vertexShader:bn.depth_vert,fragmentShader:bn.depth_frag},normal:{uniforms:on([Bn.common,Bn.bumpmap,Bn.normalmap,Bn.displacementmap,{opacity:{value:1}}]),vertexShader:bn.normal_vert,fragmentShader:bn.normal_frag},sprite:{uniforms:on([Bn.sprite,Bn.fog]),vertexShader:bn.sprite_vert,fragmentShader:bn.sprite_frag},background:{uniforms:{uvTransform:{value:new R},t2D:{value:null}},vertexShader:bn.background_vert,fragmentShader:bn.background_frag},cube:{uniforms:on([Bn.envmap,{opacity:{value:1}}]),vertexShader:bn.cube_vert,fragmentShader:bn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bn.equirect_vert,fragmentShader:bn.equirect_frag},distanceRGBA:{uniforms:on([Bn.common,Bn.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bn.distanceRGBA_vert,fragmentShader:bn.distanceRGBA_frag},shadow:{uniforms:on([Bn.lights,Bn.fog,{color:{value:new ut(0)},opacity:{value:1}}]),vertexShader:bn.shadow_vert,fragmentShader:bn.shadow_frag}};function wn(e,t,n,i,r){const a=new ut(0);let o,s,c=0,l=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),c=void 0!==t?t:1,d(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,d(a,c)},render:function(n,r,f,p){let m=!0===r.isScene?r.background:null;m&&m.isTexture&&(m=t.get(m));const A=e.xr,g=A.getSession&&A.getSession();g&&"additive"===g.environmentBlendMode&&(m=null),null===m?d(a,c):m&&m.isColor&&(d(m,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||306===m.mapping)?(void 0===s&&(s=new en(new rn(1,1,1),new cn({name:"BackgroundCubeMaterial",uniforms:an(Cn.cube.uniforms),vertexShader:Cn.cube.vertexShader,fragmentShader:Cn.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),m.isWebGLCubeRenderTarget&&(m=m.texture),s.material.uniforms.envMap.value=m,s.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,l===m&&u===m.version&&h===e.toneMapping||(s.material.needsUpdate=!0,l=m,u=m.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):m&&m.isTexture&&(void 0===o&&(o=new en(new xn(2,2),new cn({name:"BackgroundMaterial",uniforms:an(Cn.background.uniforms),vertexShader:Cn.background.vertexShader,fragmentShader:Cn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),o.material.uniforms.uvTransform.value.copy(m.matrix),l===m&&u===m.version&&h===e.toneMapping||(o.material.needsUpdate=!0,l=m,u=m.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Mn(e,t,n,i){const r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},c=d(null);let l=c;function u(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,r){const a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function A(){const t=l.newAttributes,n=l.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function g(t,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,s):e.vertexAttribIPointer(t,n,r,o,s)}function v(){y(),l!==c&&(l=c,u(l.object))}function y(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(r,c,h,v,y){let E=!1;if(o){const t=function(t,n,r){const o=!0===r.wireframe;let c=s[t.id];void 0===c&&(c={},s[t.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[o];void 0===u&&(u=d(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=u);return u}(v,h,c);l!==t&&(l=t,u(l.object)),E=function(e,t){const n=l.attributes,i=e.attributes;if(Object.keys(n).length!==Object.keys(i).length)return!0;for(const e in i){const t=n[e],r=i[e];if(void 0===t)return!0;if(t.attribute!==r)return!0;if(t.data!==r.data)return!0}return l.index!==t}(v,y),E&&function(e,t){const n={},i=e.attributes;for(const e in i){const t=i[e],r={};r.attribute=t,t.data&&(r.data=t.data),n[e]=r}l.attributes=n,l.index=t}(v,y)}else{const e=!0===c.wireframe;l.geometry===v.id&&l.program===h.id&&l.wireframe===e||(l.geometry=v.id,l.program=h.id,l.wireframe=e,E=!0)}!0===r.isInstancedMesh&&(E=!0),null!==y&&n.update(y,34963),E&&(!function(r,a,o,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const c=s.attributes,l=o.getAttributes(),u=a.defaultAttributeValues;for(const t in l){const i=l[t];if(i>=0){const a=c[t];if(void 0!==a){const t=a.normalized,r=a.itemSize,o=n.get(a);if(void 0===o)continue;const c=o.buffer,l=o.type,u=o.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,o=n.stride,h=a.offset;n&&n.isInstancedInterleavedBuffer?(m(i,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(i),e.bindBuffer(34962,c),g(i,r,l,t,o*u,h*u)}else a.isInstancedBufferAttribute?(m(i,a.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)):p(i),e.bindBuffer(34962,c),g(i,r,l,t,0,0)}else if("instanceMatrix"===t){const t=n.get(r.instanceMatrix);if(void 0===t)continue;const a=t.buffer,o=t.type;m(i+0,1),m(i+1,1),m(i+2,1),m(i+3,1),e.bindBuffer(34962,a),e.vertexAttribPointer(i+0,4,o,!1,64,0),e.vertexAttribPointer(i+1,4,o,!1,64,16),e.vertexAttribPointer(i+2,4,o,!1,64,32),e.vertexAttribPointer(i+3,4,o,!1,64,48)}else if("instanceColor"===t){const t=n.get(r.instanceColor);if(void 0===t)continue;const a=t.buffer,o=t.type;m(i,1),e.bindBuffer(34962,a),e.vertexAttribPointer(i,3,o,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i,n);break;case 3:e.vertexAttrib3fv(i,n);break;case 4:e.vertexAttrib4fv(i,n);break;default:e.vertexAttrib1fv(i,n)}}}}A()}(r,c,h,v),null!==y&&e.bindBuffer(34963,n.get(y).buffer))},reset:v,resetDefaultState:y,dispose:function(){v();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:A}}function Dn(e,t,n,i){const r=i.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,i){e.drawArrays(a,t,i),n.update(i,a,1)},this.renderInstances=function(i,o,s){if(0===s)return;let c,l;if(r)c=e,l="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](a,i,o,s),n.update(o,a,s)}}function Sn(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),f=e.getParameter(34921),p=e.getParameter(36347),m=e.getParameter(36348),A=e.getParameter(36349),g=u>0,v=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;const n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:A,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:a?e.getParameter(36183):0}}function _n(e){const t=this;let n=null,i=0,r=!1,a=!1;const o=new je,s=new R,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const a=null!==e?e.length:0;let l=null;if(0!==a){if(l=c.value,!0!==r||null===l){const t=i+4*a,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===l||l.length<t)&&(l=new Float32Array(t));for(let t=0,n=i;t!==a;++t,n+=4)o.copy(e[t]).applyMatrix4(r,s),o.normal.toArray(l,n),l[n+3]=o.constant}c.value=l,c.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const o=0!==e.length||t||0!==i||r;return r=t,n=u(e,a,0),i=e.length,o},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,l()},this.setState=function(t,o,s){const h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!r||null===h||0===h.length||a&&!f)a?u(null):l();else{const e=a?0:i,t=4*e;let r=p.clippingState||null;c.value=r,r=u(h,o,t,s);for(let e=0;e!==t;++e)r[e]=n[e];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Tn(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(303===a||304===a){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const o=e.getRenderList(),s=e.getRenderTarget(),c=e.getRenderState(),l=new pn(a.height/2);return l.fromEquirectangularTexture(e,r),t.set(r,l),e.setRenderTarget(s),e.setRenderList(o),e.setRenderState(c),r.addEventListener("dispose",i),n(l.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}function In(e){const t={};return{has:function(n){if(void 0!==t[n])return null!==t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,null!==i},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function Fn(e,t,n,i){const r=new WeakMap,a=new WeakMap;function o(e){const s=e.target,c=r.get(s);null!==c.index&&t.remove(c.index);for(const e in c.attributes)t.remove(c.attributes[e]);s.removeEventListener("dispose",o),r.delete(s);const l=a.get(c);l&&(t.remove(l),a.delete(c)),i.releaseStatesOfGeometry(c),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let o=0;if(null!==i){const e=i.array;o=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{const e=r.array;o=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const s=new(St(n)>65535?Ct:bt)(n,1);s.version=o;const c=a.get(e);c&&t.remove(c),a.set(e,s)}return{get:function(e,t){let i=r.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ot).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const i=e.morphAttributes;for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Ln(e,t,n,i){const r=i.isWebGL2;let a,o,s;this.setMode=function(e){a=e},this.setIndex=function(e){o=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(a,i,o,t*s),n.update(i,a,1)},this.renderInstances=function(i,c,l){if(0===l)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,c,o,i*s,l),n.update(c,a,l)}}function Rn(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Pn(e,t){return e[0]-t[0]}function On(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Nn(e){const t={},n=new Float32Array(8),i=[];for(let e=0;e<8;e++)i[e]=[e,0];return{update:function(r,a,o,s){const c=r.morphTargetInfluences,l=void 0===c?0:c.length;let u=t[a.id];if(void 0===u){u=[];for(let e=0;e<l;e++)u[e]=[e,0];t[a.id]=u}for(let e=0;e<l;e++){const t=u[e];t[0]=e,t[1]=c[e]}u.sort(On);for(let e=0;e<8;e++)e<l&&u[e][1]?(i[e][0]=u[e][0],i[e][1]=u[e][1]):(i[e][0]=Number.MAX_SAFE_INTEGER,i[e][1]=0);i.sort(Pn);const h=o.morphTargets&&a.morphAttributes.position,d=o.morphNormals&&a.morphAttributes.normal;let f=0;for(let e=0;e<8;e++){const t=i[e],r=t[0],o=t[1];r!==Number.MAX_SAFE_INTEGER&&o?(h&&a.getAttribute("morphTarget"+e)!==h[r]&&a.setAttribute("morphTarget"+e,h[r]),d&&a.getAttribute("morphNormal"+e)!==d[r]&&a.setAttribute("morphNormal"+e,d[r]),n[e]=o,f+=o):(h&&void 0!==a.getAttribute("morphTarget"+e)&&a.deleteAttribute("morphTarget"+e),d&&void 0!==a.getAttribute("morphNormal"+e)&&a.deleteAttribute("morphNormal"+e),n[e]=0)}const p=a.morphTargetsRelative?1:1-f;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Un(e,t,n,i){let r=new WeakMap;return{update:function(e){const a=i.render.frame,o=e.geometry,s=t.get(e,o);return r.get(s)!==a&&(o.isGeometry&&s.updateFromObject(e),t.update(s),r.set(s,a)),e.isInstancedMesh&&(n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),s},dispose:function(){r=new WeakMap}}}function Gn(e,t,i,a){U.call(this,null),this.image={data:e||null,width:t||1,height:i||1,depth:a||1},this.magFilter=r,this.minFilter=r,this.wrapR=n,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Hn(e,t,i,a){U.call(this,null),this.image={data:e||null,width:t||1,height:i||1,depth:a||1},this.magFilter=r,this.minFilter=r,this.wrapR=n,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Cn.physical={uniforms:on([Cn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new L(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ut(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},Gn.prototype=Object.create(U.prototype),Gn.prototype.constructor=Gn,Gn.prototype.isDataTexture2DArray=!0,Hn.prototype=Object.create(U.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isDataTexture3D=!0;const Qn=new U,kn=new Gn,zn=new Hn,Vn=new fn,Wn=[],jn=[],Jn=new Float32Array(16),Yn=new Float32Array(9),Xn=new Float32Array(4);function qn(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=Wn[r];if(void 0===a&&(a=new Float32Array(r),Wn[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function Kn(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Zn(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function $n(e,t){let n=jn[t];void 0===n&&(n=new Int32Array(t),jn[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function ei(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ti(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Kn(n,t))return;e.uniform2fv(this.addr,t),Zn(n,t)}}function ni(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Kn(n,t))return;e.uniform3fv(this.addr,t),Zn(n,t)}}function ii(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Kn(n,t))return;e.uniform4fv(this.addr,t),Zn(n,t)}}function ri(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Kn(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Zn(n,t)}else{if(Kn(n,i))return;Xn.set(i),e.uniformMatrix2fv(this.addr,!1,Xn),Zn(n,i)}}function ai(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Kn(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Zn(n,t)}else{if(Kn(n,i))return;Yn.set(i),e.uniformMatrix3fv(this.addr,!1,Yn),Zn(n,i)}}function oi(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Kn(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Zn(n,t)}else{if(Kn(n,i))return;Jn.set(i),e.uniformMatrix4fv(this.addr,!1,Jn),Zn(n,i)}}function si(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Qn,r)}function ci(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||kn,r)}function li(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||zn,r)}function ui(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Vn,r)}function hi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function di(e,t){const n=this.cache;Kn(n,t)||(e.uniform2iv(this.addr,t),Zn(n,t))}function fi(e,t){const n=this.cache;Kn(n,t)||(e.uniform3iv(this.addr,t),Zn(n,t))}function pi(e,t){const n=this.cache;Kn(n,t)||(e.uniform4iv(this.addr,t),Zn(n,t))}function mi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ai(e,t){e.uniform1fv(this.addr,t)}function gi(e,t){e.uniform1iv(this.addr,t)}function vi(e,t){e.uniform2iv(this.addr,t)}function yi(e,t){e.uniform3iv(this.addr,t)}function Ei(e,t){e.uniform4iv(this.addr,t)}function xi(e,t){const n=qn(t,this.size,2);e.uniform2fv(this.addr,n)}function bi(e,t){const n=qn(t,this.size,3);e.uniform3fv(this.addr,n)}function Bi(e,t){const n=qn(t,this.size,4);e.uniform4fv(this.addr,n)}function Ci(e,t){const n=qn(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function wi(e,t){const n=qn(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Mi(e,t){const n=qn(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Di(e,t,n){const i=t.length,r=$n(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTexture2D(t[e]||Qn,r[e])}function Si(e,t,n){const i=t.length,r=$n(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTextureCube(t[e]||Vn,r[e])}function _i(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ei;case 35664:return ti;case 35665:return ni;case 35666:return ii;case 35674:return ri;case 35675:return ai;case 35676:return oi;case 5124:case 35670:return hi;case 35667:case 35671:return di;case 35668:case 35672:return fi;case 35669:case 35673:return pi;case 5125:return mi;case 35678:case 36198:case 36298:case 36306:case 35682:return si;case 35679:case 36299:case 36307:return li;case 35680:case 36300:case 36308:case 36293:return ui;case 36289:case 36303:case 36311:case 36292:return ci}}(t.type)}function Ti(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ai;case 35664:return xi;case 35665:return bi;case 35666:return Bi;case 35674:return Ci;case 35675:return wi;case 35676:return Mi;case 5124:case 35670:return gi;case 35667:case 35671:return vi;case 35668:case 35672:return yi;case 35669:case 35673:return Ei;case 35678:case 36198:case 36298:case 36306:case 35682:return Di;case 35680:case 36300:case 36308:case 36293:return Si}}(t.type)}function Ii(e){this.id=e,this.seq=[],this.map={}}Ti.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Zn(t,e)},Ii.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}};const Fi=/([\w\d_]+)(\])?(\[|\.)?/g;function Li(e,t){e.seq.push(t),e.map[t.id]=t}function Ri(e,t,n){const i=e.name,r=i.length;for(Fi.lastIndex=0;;){const a=Fi.exec(i),o=Fi.lastIndex;let s=a[1];const c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){Li(n,void 0===l?new _i(s,e,t):new Ti(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Ii(s),Li(n,e)),n=e}}}function Pi(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Ri(n,e.getUniformLocation(t,n.name),this)}}function Oi(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Pi.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Pi.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},Pi.upload=function(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,i)}},Pi.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let Ni=0;function Ui(e){switch(e){case C:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Gi(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Hi(e,t){const n=Ui(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Qi(e,t){const n=Ui(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ki(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function zi(e){return""!==e}function Vi(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Wi(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ji=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ji(e){return e.replace(ji,Yi)}function Yi(e,t){const n=bn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ji(n)}const Xi=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,qi=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ki(e){return e.replace(qi,$i).replace(Xi,Zi)}function Zi(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),$i(e,t,n,i)}function $i(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function er(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function tr(e,t,n,i){const r=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const c=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zi).join("\n")}(n),p=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),m=r.createProgram();let A,g,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(A=[p].filter(zi).join("\n"),A.length>0&&(A+="\n"),g=[f,p].filter(zi).join("\n"),g.length>0&&(g+="\n")):(A=[er(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zi).join("\n"),g=[f,er(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?bn.tonemapping_pars_fragment:"",0!==n.toneMapping?ki("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",bn.encodings_pars_fragment,n.map?Hi("mapTexelToLinear",n.mapEncoding):"",n.matcap?Hi("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Hi("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Hi("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Hi("lightMapTexelToLinear",n.lightMapEncoding):"",Qi("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(zi).join("\n")),o=Ji(o),o=Vi(o,n),o=Wi(o,n),s=Ji(s),s=Vi(s,n),s=Wi(s,n),o=Ki(o),s=Ki(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",A=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+A,g=["#define varying in",n.glslVersion===S?"":"out highp vec4 pc_fragColor;",n.glslVersion===S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const y=v+g+s,E=Oi(r,35633,v+A+o),x=Oi(r,35632,y);if(r.attachShader(m,E),r.attachShader(m,x),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(E).trim(),n=r.getShaderInfoLog(x).trim();let i=!0,a=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const t=Gi(r,E,"vertex"),n=Gi(r,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(a=!1);a&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:A},fragmentShader:{log:n,prefix:g}})}let b,B;return r.deleteShader(E),r.deleteShader(x),this.getUniforms=function(){return void 0===b&&(b=new Pi(r,m)),b},this.getAttributes=function(){return void 0===B&&(B=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r).name;n[i]=e.getAttribLocation(t,i)}return n}(r,m)),B},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Ni++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=x,this}function nr(e,t,n,i,r,a){const o=[],s=i.isWebGL2,c=i.logarithmicDepthBuffer,l=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let d=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(e){let t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=C,t}return{getParameters:function(r,o,p,A,g){const v=A.fog,y=r.isMeshStandardMaterial?A.environment:null,E=t.get(r.envMap||y),x=f[r.type],b=g.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(l)return 1024;{const e=u,n=Math.floor((e-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}}(g):0;let B,C;if(null!==r.precision&&(d=i.getMaxPrecision(r.precision),d!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead.")),x){const e=Cn[x];B=e.vertexShader,C=e.fragmentShader}else B=r.vertexShader,C=r.fragmentShader;const w=e.getRenderTarget();return{isWebGL2:s,shaderID:x,shaderName:r.type,vertexShader:B,fragmentShader:C,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:d,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null!==w?m(w.texture):e.outputEncoding,map:!!r.map,mapEncoding:m(r.map),matcap:!!r.matcap,matcapEncoding:m(r.matcap),envMap:!!E,envMapMode:E&&E.mapping,envMapEncoding:m(E),envMapCubeUV:!!E&&(306===E.mapping||307===E.mapping),lightMap:!!r.lightMap,lightMapEncoding:m(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:m(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!v,useFog:r.fog,fogExp2:v&&v.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:c,skinning:r.skinning&&b>0,maxBones:b,useVertexTexture:l,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Cn[t];n=sn.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=o.length;e<t;e++){const t=o[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new tr(e,n,t,r),o.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function ir(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function rr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ar(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function or(e){const t=[];let n=0;const i=[],r=[],a={id:-1};function o(i,r,o,s,c,l){let u=t[n];const h=e.get(o);return void 0===u?(u={id:i.id,object:i,geometry:r,material:o,program:h.program||a,groupOrder:s,renderOrder:i.renderOrder,z:c,group:l},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=o,u.program=h.program||a,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=c,u.group=l),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,t,n,a,s,c){const l=o(e,t,n,a,s,c);(!0===n.transparent?r:i).push(l)},unshift:function(e,t,n,a,s,c){const l=o(e,t,n,a,s,c);(!0===n.transparent?r:i).unshift(l)},finish:function(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){i.length>1&&i.sort(e||rr),r.length>1&&r.sort(t||ar)}}}function sr(e){let t=new WeakMap;return{get:function(n,i){const r=t.get(n);let a;return void 0===r?(a=new or(e),t.set(n,new WeakMap),t.get(n).set(i,a)):(a=r.get(i),void 0===a&&(a=new or(e),r.set(i,a))),a},dispose:function(){t=new WeakMap}}}function cr(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new z,color:new ut};break;case"SpotLight":n={position:new z,direction:new z,color:new ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new z,color:new ut,distance:0,decay:0};break;case"HemisphereLight":n={direction:new z,skyColor:new ut,groundColor:new ut};break;case"RectAreaLight":n={color:new ut,position:new z,halfWidth:new z,halfHeight:new z}}return e[t.id]=n,n}}}let lr=0;function ur(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function hr(e,t){const n=new cr,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new L};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new L,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new z);const a=new z,o=new ge,s=new ge;return{setup:function(c,l,u){let h=0,d=0,f=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let p=0,m=0,A=0,g=0,v=0,y=0,E=0,x=0;const b=u.matrixWorldInverse;c.sort(ur);for(let e=0,t=c.length;e<t;e++){const t=c[e],l=t.color,u=t.intensity,B=t.distance,C=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)h+=l.r*u,d+=l.g*u,f+=l.b*u;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],u);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(b),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[p]=n,r.directionalShadowMap[p]=C,r.directionalShadowMatrix[p]=t.shadow.matrix,y++}r.directional[p]=e,p++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(b),e.color.copy(l).multiplyScalar(u),e.distance=B,e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(b),e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.spotShadow[A]=n,r.spotShadowMap[A]=C,r.spotShadowMatrix[A]=t.shadow.matrix,x++}r.spot[A]=e,A++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(l).multiplyScalar(u),e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(b),s.identity(),o.copy(t.matrixWorld),o.premultiply(b),s.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),r.rectArea[g]=e,g++}else if(t.isPointLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(b),e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[m]=n,r.pointShadowMap[m]=C,r.pointShadowMatrix[m]=t.shadow.matrix,E++}r.point[m]=e,m++}else if(t.isHemisphereLight){const e=n.get(t);e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(b),e.direction.normalize(),e.skyColor.copy(t.color).multiplyScalar(u),e.groundColor.copy(t.groundColor).multiplyScalar(u),r.hemi[v]=e,v++}}g>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Bn.LTC_FLOAT_1,r.rectAreaLTC2=Bn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Bn.LTC_HALF_1,r.rectAreaLTC2=Bn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=f;const B=r.hash;B.directionalLength===p&&B.pointLength===m&&B.spotLength===A&&B.rectAreaLength===g&&B.hemiLength===v&&B.numDirectionalShadows===y&&B.numPointShadows===E&&B.numSpotShadows===x||(r.directional.length=p,r.spot.length=A,r.rectArea.length=g,r.point.length=m,r.hemi.length=v,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=E,r.spotShadowMatrix.length=x,B.directionalLength=p,B.pointLength=m,B.spotLength=A,B.rectAreaLength=g,B.hemiLength=v,B.numDirectionalShadows=y,B.numPointShadows=E,B.numSpotShadows=x,r.version=lr++)},state:r}}function dr(e,t){const n=new hr(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,r,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function fr(e,t){let n=new WeakMap;return{get:function(i,r){let a;return!1===n.has(i)?(a=new dr(e,t),n.set(i,new WeakMap),n.get(i).set(r,a)):!1===n.get(i).has(r)?(a=new dr(e,t),n.get(i).set(r,a)):a=n.get(i).get(r),a},dispose:function(){n=new WeakMap}}}function pr(e){ft.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function mr(e){ft.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new z,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}pr.prototype=Object.create(ft.prototype),pr.prototype.constructor=pr,pr.prototype.isMeshDepthMaterial=!0,pr.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},mr.prototype=Object.create(ft.prototype),mr.prototype.constructor=mr,mr.prototype.isMeshDistanceMaterial=!0,mr.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Ar(e,t,n){let i=new vn;const o=new L,s=new L,c=new G,l=[],u=[],h={},d={0:1,1:0,2:2},f=new cn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new L},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=f.clone();m.defines.HORIZONAL_PASS=1;const A=new Ot;A.setAttribute("position",new gt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new en(A,f),v=this;function y(n,i){const r=t.update(g);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,f,g,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,m,g,null)}function E(e,t,n){const i=e<<0|t<<1|n<<2;let r=l[i];return void 0===r&&(r=new pr({depthPacking:3201,morphTargets:e,skinning:t}),l[i]=r),r}function x(e,t,n){const i=e<<0|t<<1|n<<2;let r=u[i];return void 0===r&&(r=new mr({morphTargets:e,skinning:t}),u[i]=r),r}function b(t,n,i,r,a,o,s){let c=null,l=E,u=t.customDepthMaterial;if(!0===r.isPointLight&&(l=x,u=t.customDistanceMaterial),void 0===u){let e=!1;!0===i.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));c=l(e,r,!0===t.isInstancedMesh)}else c=u;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const e=c.uuid,t=i.uuid;let n=h[e];void 0===n&&(n={},h[e]=n);let r=n[t];void 0===r&&(r=c.clone(),n[t]=r),c=r}return c.visible=i.visible,c.wireframe=i.wireframe,c.side=3===s?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:d[i.side],c.clipShadows=i.clipShadows,c.clippingPlanes=i.clippingPlanes,c.clipIntersection=i.clipIntersection,c.wireframeLinewidth=i.wireframeLinewidth,c.linewidth=i.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=a,c.farDistance=o),c}function B(n,r,a,o,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let c=0,l=t.length;c<l;c++){const l=t[c],u=r[l.materialIndex];if(u&&u.visible){const t=b(n,i,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,i,t,n,l)}}}else if(r.visible){const t=b(n,i,r,o,a.near,a.far,s);e.renderBufferDirect(a,null,i,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)B(c[e],r,a,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,l,u){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===t.length)return;const h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.state;m.setBlending(0),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(let h=0,d=t.length;h<d;h++){const d=t[h],f=d.shadow;if(void 0===f){console.warn("THREE.WebGLShadowMap:",d,"has no shadow.");continue}if(!1===f.autoUpdate&&!1===f.needsUpdate)continue;o.copy(f.mapSize);const A=f.getFrameExtents();if(o.multiply(A),s.copy(f.mapSize),(o.x>n||o.y>n)&&(o.x>n&&(s.x=Math.floor(n/A.x),o.x=s.x*A.x,f.mapSize.x=s.x),o.y>n&&(s.y=Math.floor(n/A.y),o.y=s.y*A.y,f.mapSize.y=s.y)),null===f.map&&!f.isPointLightShadow&&3===this.type){const e={minFilter:a,magFilter:a,format:p};f.map=new H(o.x,o.y,e),f.map.texture.name=d.name+".shadowMap",f.mapPass=new H(o.x,o.y,e),f.camera.updateProjectionMatrix()}if(null===f.map){const e={minFilter:r,magFilter:r,format:p};f.map=new H(o.x,o.y,e),f.map.texture.name=d.name+".shadowMap",f.camera.updateProjectionMatrix()}e.setRenderTarget(f.map),e.clear();const g=f.getViewportCount();for(let e=0;e<g;e++){const t=f.getViewport(e);c.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),m.viewport(c),f.updateMatrices(d,e),i=f.getFrustum(),B(l,u,f.camera,d,this.type)}f.isPointLightShadow||3!==this.type||y(f,u),f.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(h,d,f)}}function gr(t,n,i){const r=i.isWebGL2;const a=new function(){let e=!1;const n=new G;let i=null;const r=new G(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(e){e?R(2929):P(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},s=new function(){let e=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(t){e||(t?R(2960):P(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&s===n&&c===i||(t.stencilOp(e,n,i),o=e,s=n,c=i)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null}}};let c={},l=null,u=null,h=null,d=null,f=null,p=null,m=null,A=null,g=null,v=!1,y=null,E=null,x=null,b=null,B=null;const C=t.getParameter(35661);let w=!1,M=0;const D=t.getParameter(7938);-1!==D.indexOf("WebGL")?(M=parseFloat(/^WebGL\ ([0-9])/.exec(D)[1]),w=M>=1):-1!==D.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(D)[1]),w=M>=2);let S=null,_={};const T=new G,I=new G;function F(e,n,i){const r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return a}const L={};function R(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function P(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}L[3553]=F(3553,3553,1),L[34067]=F(34067,34069,6),a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),R(2929),o.setFunc(3),H(!1),Q(1),R(2884),U(0);const O={[e]:32774,101:32778,102:32779};if(r)O[103]=32775,O[104]=32776;else{const e=n.get("EXT_blend_minmax");null!==e&&(O[103]=e.MIN_EXT,O[104]=e.MAX_EXT)}const N={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function U(n,i,r,a,o,s,c,l){if(0!==n){if(u||(R(3042),u=!0),5===n)o=o||i,s=s||r,c=c||a,i===d&&o===m||(t.blendEquationSeparate(O[i],O[o]),d=i,m=o),r===f&&a===p&&s===A&&c===g||(t.blendFuncSeparate(N[r],N[a],N[s],N[c]),f=r,p=a,A=s,g=c),h=n,v=null;else if(n!==h||l!==v){if(d===e&&m===e||(t.blendEquation(32774),d=e,m=e),l)switch(n){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",n)}else switch(n){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",n)}f=null,p=null,A=null,g=null,h=n,v=l}}else u&&(P(3042),u=!1)}function H(e){y!==e&&(e?t.frontFace(2304):t.frontFace(2305),y=e)}function Q(e){0!==e?(R(2884),e!==E&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):P(2884),E=e}function k(e,n,i){e?(R(32823),b===n&&B===i||(t.polygonOffset(n,i),b=n,B=i)):P(32823)}function z(e){void 0===e&&(e=33984+C-1),S!==e&&(t.activeTexture(e),S=e)}return{buffers:{color:a,depth:o,stencil:s},enable:R,disable:P,useProgram:function(e){return l!==e&&(t.useProgram(e),l=e,!0)},setBlending:U,setMaterial:function(e,t){2===e.side?P(2884):R(2884);let n=1===e.side;t&&(n=!n),H(n),1===e.blending&&!1===e.transparent?U(0):U(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),a.setMask(e.colorWrite);const i=e.stencilWrite;s.setTest(i),i&&(s.setMask(e.stencilWriteMask),s.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),k(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:H,setCullFace:Q,setLineWidth:function(e){e!==x&&(w&&t.lineWidth(e),x=e)},setPolygonOffset:k,setScissorTest:function(e){e?R(3089):P(3089)},activeTexture:z,bindTexture:function(e,n){null===S&&z();let i=_[S];void 0===i&&(i={type:void 0,texture:void 0},_[S]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||L[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=_[S];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===T.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),T.copy(e))},viewport:function(e){!1===I.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),I.copy(e))},reset:function(){c={},S=null,_={},l=null,h=null,y=null,E=null,a.reset(),o.reset(),s.reset()}}}function vr(e,s,g,v,y,E,x){const b=y.isWebGL2,B=y.maxTextures,C=y.maxCubemapSize,w=y.maxTextureSize,M=y.maxSamples,D=new WeakMap;let S,_=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function T(e,t){return _?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function I(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?F.floorPowerOfTwo:Math.floor,a=i(r*e.width),o=i(r*e.height);void 0===S&&(S=T(a,o));const s=n?T(a,o):S;s.width=a,s.height=o;return s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function L(e){return F.isPowerOfTwo(e.width)&&F.isPowerOfTwo(e.height)}function R(e,t){return e.generateMipmaps&&t&&e.minFilter!==r&&e.minFilter!==a}function P(t,n,i,r){e.generateMipmap(t);v.get(n).__maxMipLevel=Math.log(Math.max(i,r))*Math.LOG2E}function O(t,n,i){if(!1===b)return n;if(null!==t){if(void 0!==e[t])return e[t];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+t+"'")}let r=n;return 6403===n&&(5126===i&&(r=33326),5131===i&&(r=33325),5121===i&&(r=33321)),6407===n&&(5126===i&&(r=34837),5131===i&&(r=34843),5121===i&&(r=32849)),6408===n&&(5126===i&&(r=34836),5131===i&&(r=34842),5121===i&&(r=32856)),33325!==r&&33326!==r&&34842!==r&&34836!==r||s.get("EXT_color_buffer_float"),r}function N(e){return e===r||1004===e||1005===e?9728:9729}function U(t){const n=t.target;n.removeEventListener("dispose",U),function(t){const n=v.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),v.remove(t)}(n),n.isVideoTexture&&D.delete(n),x.memory.textures--}function G(t){const n=t.target;n.removeEventListener("dispose",G),function(t){const n=v.get(t),i=v.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);v.remove(t.texture),v.remove(t)}(n),x.memory.textures--}let H=0;function Q(e,t){const n=v.get(e);if(e.isVideoTexture&&function(e){const t=x.render.frame;D.get(e)!==t&&(D.set(e,t),e.update())}(e),e.version>0&&n.__version!==e.version){const i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void J(n,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}g.activeTexture(33984+t),g.bindTexture(3553,n.__webglTexture)}function k(t,n){const i=v.get(t);t.version>0&&i.__version!==t.version?function(t,n,i){if(6!==n.image.length)return;j(t,n),g.activeTexture(33984+i),g.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,n.flipY);const r=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),a=n.image[0]&&n.image[0].isDataTexture,o=[];for(let e=0;e<6;e++)o[e]=r||a?a?n.image[e].image:n.image[e]:I(n.image[e],!1,!0,C);const s=o[0],c=L(s)||b,l=E.convert(n.format),u=E.convert(n.type),h=O(n.internalFormat,l,u);let d;if(W(34067,n,c),r){for(let e=0;e<6;e++){d=o[e].mipmaps;for(let t=0;t<d.length;t++){const i=d[t];n.format!==p&&n.format!==f?null!==l?g.compressedTexImage2D(34069+e,t,h,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(34069+e,t,h,i.width,i.height,0,l,u,i.data)}}t.__maxMipLevel=d.length-1}else{d=n.mipmaps;for(let e=0;e<6;e++)if(a){g.texImage2D(34069+e,0,h,o[e].width,o[e].height,0,l,u,o[e].data);for(let t=0;t<d.length;t++){const n=d[t].image[e].image;g.texImage2D(34069+e,t+1,h,n.width,n.height,0,l,u,n.data)}}else{g.texImage2D(34069+e,0,h,l,u,o[e]);for(let t=0;t<d.length;t++){const n=d[t];g.texImage2D(34069+e,t+1,h,l,u,n.image[e])}}t.__maxMipLevel=d.length}R(n,c)&&P(34067,n,s.width,s.height);t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(i,t,n):(g.activeTexture(33984+n),g.bindTexture(34067,i.__webglTexture))}const z={[t]:10497,[n]:33071,[i]:33648},V={[r]:9728,1004:9984,1005:9986,[a]:9729,1007:9985,[o]:9987};function W(t,i,o){o?(e.texParameteri(t,10242,z[i.wrapS]),e.texParameteri(t,10243,z[i.wrapT]),32879!==t&&35866!==t||e.texParameteri(t,32882,z[i.wrapR]),e.texParameteri(t,10240,V[i.magFilter]),e.texParameteri(t,10241,V[i.minFilter])):(e.texParameteri(t,10242,33071),e.texParameteri(t,10243,33071),32879!==t&&35866!==t||e.texParameteri(t,32882,33071),i.wrapS===n&&i.wrapT===n||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(t,10240,N(i.magFilter)),e.texParameteri(t,10241,N(i.minFilter)),i.minFilter!==r&&i.minFilter!==a&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const c=s.get("EXT_texture_filter_anisotropic");if(c){if(i.type===u&&null===s.get("OES_texture_float_linear"))return;if(i.type===h&&null===(b||s.get("OES_texture_half_float_linear")))return;(i.anisotropy>1||v.get(i).__currentAnisotropy)&&(e.texParameterf(t,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,y.getMaxAnisotropy())),v.get(i).__currentAnisotropy=i.anisotropy)}}function j(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",U),t.__webglTexture=e.createTexture(),x.memory.textures++)}function J(t,i,o){let s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),j(t,i),g.activeTexture(33984+o),g.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);const h=function(e){return!b&&(e.wrapS!==n||e.wrapT!==n||e.minFilter!==r&&e.minFilter!==a)}(i)&&!1===L(i.image),v=I(i.image,h,!1,w),y=L(v)||b,x=E.convert(i.format);let B,C=E.convert(i.type),M=O(i.internalFormat,x,C);W(s,i,y);const D=i.mipmaps;if(i.isDepthTexture)M=6402,b?M=i.type===u?36012:i.type===l?33190:i.type===d?35056:33189:i.type===u&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===m&&6402===M&&i.type!==c&&i.type!==l&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=c,C=E.convert(i.type)),i.format===A&&6402===M&&(M=34041,i.type!==d&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=d,C=E.convert(i.type))),g.texImage2D(3553,0,M,v.width,v.height,0,x,C,null);else if(i.isDataTexture)if(D.length>0&&y){for(let e=0,t=D.length;e<t;e++)B=D[e],g.texImage2D(3553,e,M,B.width,B.height,0,x,C,B.data);i.generateMipmaps=!1,t.__maxMipLevel=D.length-1}else g.texImage2D(3553,0,M,v.width,v.height,0,x,C,v.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=D.length;e<t;e++)B=D[e],i.format!==p&&i.format!==f?null!==x?g.compressedTexImage2D(3553,e,M,B.width,B.height,0,B.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(3553,e,M,B.width,B.height,0,x,C,B.data);t.__maxMipLevel=D.length-1}else if(i.isDataTexture2DArray)g.texImage3D(35866,0,M,v.width,v.height,v.depth,0,x,C,v.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)g.texImage3D(32879,0,M,v.width,v.height,v.depth,0,x,C,v.data),t.__maxMipLevel=0;else if(D.length>0&&y){for(let e=0,t=D.length;e<t;e++)B=D[e],g.texImage2D(3553,e,M,x,C,B);i.generateMipmaps=!1,t.__maxMipLevel=D.length-1}else g.texImage2D(3553,0,M,x,C,v),t.__maxMipLevel=0;R(i,y)&&P(s,i,v.width,v.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function Y(t,n,i,r){const a=E.convert(n.texture.format),o=E.convert(n.texture.type),s=O(n.texture.internalFormat,a,o);g.texImage2D(r,0,s,n.width,n.height,0,a,o,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,i,r,v.get(n.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function X(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===u?r=36012:t.type===l&&(r=33190));const i=K(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=K(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=E.convert(n.texture.format),r=E.convert(n.texture.type),a=O(n.texture.internalFormat,t,r);if(i){const t=K(n);e.renderbufferStorageMultisample(36161,t,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function q(t){const n=v.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");v.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),Q(n.depthTexture,0);const i=v.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===m)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==A)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)e.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=e.createRenderbuffer(),X(n.__webglDepthbuffer[i],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),X(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function K(e){return b&&e.isWebGLMultisampleRenderTarget?Math.min(M,e.samples):0}let Z=!1,$=!1;this.allocateTextureUnit=function(){const e=H;return e>=B&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+B),H+=1,e},this.resetTextureUnits=function(){H=0},this.setTexture2D=Q,this.setTexture2DArray=function(e,t){const n=v.get(e);e.version>0&&n.__version!==e.version?J(n,e,t):(g.activeTexture(33984+t),g.bindTexture(35866,n.__webglTexture))},this.setTexture3D=function(e,t){const n=v.get(e);e.version>0&&n.__version!==e.version?J(n,e,t):(g.activeTexture(33984+t),g.bindTexture(32879,n.__webglTexture))},this.setTextureCube=k,this.setupRenderTarget=function(t){const n=v.get(t),i=v.get(t.texture);t.addEventListener("dispose",G),i.__webglTexture=e.createTexture(),x.memory.textures++;const r=!0===t.isWebGLCubeRenderTarget,a=!0===t.isWebGLMultisampleRenderTarget,o=L(t)||b;if(!b||t.texture.format!==f||t.texture.type!==u&&t.texture.type!==h||(t.texture.format=p,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),r){n.__webglFramebuffer=[];for(let t=0;t<6;t++)n.__webglFramebuffer[t]=e.createFramebuffer()}else if(n.__webglFramebuffer=e.createFramebuffer(),a)if(b){n.__webglMultisampledFramebuffer=e.createFramebuffer(),n.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,n.__webglColorRenderbuffer);const i=E.convert(t.texture.format),r=E.convert(t.texture.type),a=O(t.texture.internalFormat,i,r),o=K(t);e.renderbufferStorageMultisample(36161,o,a,t.width,t.height),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,n.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(n.__webglDepthRenderbuffer=e.createRenderbuffer(),X(n.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(r){g.bindTexture(34067,i.__webglTexture),W(34067,t.texture,o);for(let e=0;e<6;e++)Y(n.__webglFramebuffer[e],t,36064,34069+e);R(t.texture,o)&&P(34067,t.texture,t.width,t.height),g.bindTexture(34067,null)}else g.bindTexture(3553,i.__webglTexture),W(3553,t.texture,o),Y(n.__webglFramebuffer,t,36064,3553),R(t.texture,o)&&P(3553,t.texture,t.width,t.height),g.bindTexture(3553,null);t.depthBuffer&&q(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(R(t,L(e)||b)){const n=e.isWebGLCubeRenderTarget?34067:3553,i=v.get(t).__webglTexture;g.bindTexture(n,i),P(n,t,e.width,e.height),g.bindTexture(n,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(b){const n=v.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const i=t.width,r=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,i,r,0,0,i,r,a,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===Z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Z=!0),e=e.texture),Q(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===$&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),$=!0),e=e.texture),k(e,t)}}function yr(e,t,n){const i=n.isWebGL2;return{convert:function(e){let n;if(e===s)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===c)return 5123;if(1013===e)return 5124;if(e===l)return 5125;if(e===u)return 5126;if(e===h)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(e===f)return 6407;if(e===p)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===m)return 6402;if(e===A)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===d?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Er(e){un.call(this),this.cameras=e||[]}function xr(){ke.call(this),this.type="Group"}function br(){this._targetRay=null,this._grip=null,this._hand=null}function Br(e,t){const n=this;let i=null,r=1,a=null,o="local-floor",s=null;const c=[],l=new Map,u=new un;u.layers.enable(1),u.viewport=new G;const h=new un;h.layers.enable(2),h.viewport=new G;const d=[u,h],f=new Er;f.layers.enable(1),f.layers.enable(2);let p=null,m=null;function A(e){const t=l.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function g(){l.forEach((function(e,t){e.disconnect(t)})),l.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),C.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(e){a=e,C.setContext(i),C.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function y(e){const t=i.inputSources;for(let e=0;e<c.length;e++)l.set(t[e],c[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=l.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),l.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=l.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=c[e];return void 0===t&&(t=new br,c[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=c[e];return void 0===t&&(t=new br,c[e]=t),t.getGripSpace()},this.getHand=function(e){let t=c[e];return void 0===t&&(t=new br,c[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=function(e){if(i=e,null!==i){i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",g);const e=t.getContextAttributes();!0!==e.xrCompatible&&t.makeXRCompatible();const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r},a=new XRWebGLLayer(i,t,n);i.updateRenderState({baseLayer:a}),i.requestReferenceSpace(o).then(v),i.addEventListener("inputsourceschange",y)}};const E=new z,x=new z;function b(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){f.near=h.near=u.near=e.near,f.far=h.far=u.far=e.far,p===f.near&&m===f.far||(i.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,m=f.far);const t=e.parent,n=f.cameras;b(f,t);for(let e=0;e<n.length;e++)b(n[e],t);e.matrixWorld.copy(f.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){E.setFromMatrixPosition(t.matrixWorld),x.setFromMatrixPosition(n.matrixWorld);const i=E.distanceTo(x),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),c=(r[9]+1)/r[5],l=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=o*u,f=o*h,p=i/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);const A=o+p,g=s+p,v=d-m,y=f+(i-m),b=c*s/g*A,B=l*s/g*A;e.projectionMatrix.makePerspective(v,y,b,B,A,g)}(f,u,h):f.projectionMatrix.copy(u.projectionMatrix),f};let B=null;const C=new yn;C.setAnimationLoop((function(t,n){if(s=n.getViewerPose(a),null!==s){const t=s.views,n=i.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let r=!1;t.length!==f.cameras.length&&(f.cameras.length=0,r=!0);for(let e=0;e<t.length;e++){const i=t[e],a=n.getViewport(i),o=d[e];o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(a.x,a.y,a.width,a.height),0===e&&f.matrix.copy(o.matrix),!0===r&&f.cameras.push(o)}}const r=i.inputSources;for(let e=0;e<c.length;e++){const t=c[e],i=r[e];t.update(i,n,a)}B&&B(t,n)})),this.setAnimationLoop=function(e){B=e},this.dispose=function(){}}function Cr(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const r=e.get(i).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,a;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,a){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i),i.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,i):n(e,i)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function wr(e){const t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,c=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,d=void 0!==e.powerPreference?e.powerPreference:"default",f=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let m=null,A=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=C,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const g=this;let v=!1,y=null,E=0,x=0,b=null,B=null,w=-1,M=null,D=null;const S=new G,_=new G;let T=null,I=t.width,R=t.height,P=1,O=null,N=null;const U=new G(0,0,I,R),H=new G(0,0,I,R);let Q=!1;const k=new vn;let V=!1,W=!1;const j=new ge,J=new z,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===b?P:1}let q,K,Z,$,ee,te,ne,ie,re,ae,oe,se,ce,le,ue,he,de,fe,pe,me,Ae,ve=n;function ye(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:d,failIfMajorPerformanceCaveat:f};if(t.addEventListener("webglcontextlost",Be,!1),t.addEventListener("webglcontextrestored",Ce,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Ee(){q=new In(ve),K=new Sn(ve,q,e),!1===K.isWebGL2&&(q.get("WEBGL_depth_texture"),q.get("OES_texture_float"),q.get("OES_texture_half_float"),q.get("OES_texture_half_float_linear"),q.get("OES_standard_derivatives"),q.get("OES_element_index_uint"),q.get("OES_vertex_array_object"),q.get("ANGLE_instanced_arrays")),q.get("OES_texture_float_linear"),me=new yr(ve,q,K),Z=new gr(ve,q,K),Z.scissor(_.copy(H).multiplyScalar(P).floor()),Z.viewport(S.copy(U).multiplyScalar(P).floor()),$=new Rn(ve),ee=new ir,te=new vr(ve,q,Z,ee,K,me,$),ne=new Tn(g),ie=new En(ve,K),Ae=new Mn(ve,q,ie,K),re=new Fn(ve,ie,$,Ae),ae=new Un(ve,re,ie,$),de=new Nn(ve),ue=new _n(ee),oe=new nr(g,ne,q,K,Ae,ue),se=new Cr(ee),ce=new sr(ee),le=new fr(q,K),he=new wn(g,ne,Z,ae,c),fe=new Dn(ve,q,$,K),pe=new Ln(ve,q,$,K),$.programs=oe.programs,g.capabilities=K,g.extensions=q,g.properties=ee,g.renderLists=ce,g.state=Z,g.info=$}Ee();const xe=new Br(g,ve);this.xr=xe;const be=new Ar(g,ae,K.maxTextureSize);function Be(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Ce(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1,Ee()}function we(e){const t=e.target;t.removeEventListener("dispose",we),function(e){Me(e),ee.remove(e)}(t)}function Me(e){const t=ee.get(e).program;void 0!==t&&oe.releaseProgram(t)}this.shadowMap=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(I,R,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new L),e.set(I,R)},this.setSize=function(e,n,i){xe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=e,R=n,t.width=Math.floor(e*P),t.height=Math.floor(n*P),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new L),e.set(I*P,R*P).floor()},this.setDrawingBufferSize=function(e,n,i){I=e,R=n,P=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new G),e.copy(S)},this.getViewport=function(e){return e.copy(U)},this.setViewport=function(e,t,n,i){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,n,i),Z.viewport(S.copy(U).multiplyScalar(P).floor())},this.getScissor=function(e){return e.copy(H)},this.setScissor=function(e,t,n,i){e.isVector4?H.set(e.x,e.y,e.z,e.w):H.set(e,t,n,i),Z.scissor(_.copy(H).multiplyScalar(P).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(e){Z.setScissorTest(Q=e)},this.setOpaqueSort=function(e){O=e},this.setTransparentSort=function(e){N=e},this.getClearColor=function(){return he.getClearColor()},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),ve.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Be,!1),t.removeEventListener("webglcontextrestored",Ce,!1),ce.dispose(),le.dispose(),ee.dispose(),ne.dispose(),ae.dispose(),Ae.dispose(),xe.dispose(),Se.stop()},this.renderBufferImmediate=function(e,t){Ae.initAttributes();const n=ee.get(e);e.hasPositions&&!n.position&&(n.position=ve.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ve.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ve.createBuffer()),e.hasColors&&!n.color&&(n.color=ve.createBuffer());const i=t.getAttributes();e.hasPositions&&(ve.bindBuffer(34962,n.position),ve.bufferData(34962,e.positionArray,35048),Ae.enableAttribute(i.position),ve.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(ve.bindBuffer(34962,n.normal),ve.bufferData(34962,e.normalArray,35048),Ae.enableAttribute(i.normal),ve.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(ve.bindBuffer(34962,n.uv),ve.bufferData(34962,e.uvArray,35048),Ae.enableAttribute(i.uv),ve.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(ve.bindBuffer(34962,n.color),ve.bufferData(34962,e.colorArray,35048),Ae.enableAttribute(i.color),ve.vertexAttribPointer(i.color,3,5126,!1,0,0)),Ae.disableUnusedAttributes(),ve.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=Y);const o=r.isMesh&&r.matrixWorld.determinant()<0,s=Le(e,t,i,r);Z.setMaterial(i,o);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,h=1;!0===i.wireframe&&(c=re.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&de.update(r,n,i,s),Ae.setup(r,i,s,n,c);let d=fe;null!==c&&(u=ie.get(c),d=pe,d.setIndex(u));const f=null!==c?c.count:l.count,p=n.drawRange.start*h,m=n.drawRange.count*h,A=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,v=Math.max(p,A),y=Math.min(f,p+m,A+g)-1,E=Math.max(0,y-v+1);if(0!==E){if(r.isMesh)!0===i.wireframe?(Z.setLineWidth(i.wireframeLinewidth*X()),d.setMode(1)):d.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),Z.setLineWidth(e*X()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(v,E,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(v,E,e)}else d.render(v,E)}},this.compile=function(e,t){A=le.get(e,t),A.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(A.pushLight(e),e.castShadow&&A.pushShadow(e))})),A.setupLights(t);const n=new WeakMap;e.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];!1===n.has(a)&&(Fe(a,e,t),n.set(a))}else!1===n.has(i)&&(Fe(i,e,t),n.set(i))}))};let De=null;const Se=new yn;function _e(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)A.pushLight(e),e.castShadow&&A.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){i&&J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);const t=ae.update(e),r=e.material;r.visible&&m.push(e,t,r,n,J.z,null)}}else if(e.isImmediateRenderObject)i&&J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j),m.push(e,null,e.material,n,J.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==$.render.frame&&(e.skeleton.update(),e.skeleton.frame=$.render.frame),!e.frustumCulled||k.intersectsObject(e))){i&&J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);const t=ae.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let a=0,o=i.length;a<o;a++){const o=i[a],s=r[o.materialIndex];s&&s.visible&&m.push(e,t,s,n,J.z,o)}}else r.visible&&m.push(e,t,r,n,J.z,null)}const r=e.children;for(let e=0,a=r.length;e<a;e++)_e(r[e],t,n,i)}function Te(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],o=a.object,s=a.geometry,c=null===i?a.material:i,l=a.group;if(n.isArrayCamera){D=n;const e=n.cameras;for(let n=0,i=e.length;n<i;n++){const i=e[n];o.layers.test(i.layers)&&(Z.viewport(S.copy(i.viewport)),A.setupLights(i),Ie(o,t,i,s,c,l))}}else D=null,Ie(o,t,n,s,c,l)}}function Ie(e,t,n,i,r,a){if(e.onBeforeRender(g,t,n,i,r,a),A=le.get(t,D||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const i=Le(n,t,r,e);Z.setMaterial(r),Ae.reset(),function(e,t){e.render((function(e){g.renderBufferImmediate(e,t)}))}(e,i)}else g.renderBufferDirect(n,t,i,r,e,a);e.onAfterRender(g,t,n,i,r,a),A=le.get(t,D||n)}function Fe(e,t,n){!0!==t.isScene&&(t=Y);const i=ee.get(e),r=A.state.lights,a=A.state.shadowsArray,o=r.state.version,s=oe.getParameters(e,r.state,a,t,n),c=oe.getProgramCacheKey(s);let l=i.program,u=!0;if(void 0===l)e.addEventListener("dispose",we);else if(l.cacheKey!==c)Me(e);else if(i.lightsStateVersion!==o)u=!1;else{if(void 0!==s.shaderID){const n=e.isMeshStandardMaterial?t.environment:null;return void(i.envMap=ne.get(e.envMap||n))}u=!1}u&&(s.uniforms=oe.getUniforms(e),e.onBeforeCompile(s,g),l=oe.acquireProgram(s,c),i.program=l,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);const h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=ue.numPlanes,i.numIntersection=ue.numIntersection,h.clippingPlanes=ue.uniform),i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=ne.get(e.envMap||i.environment),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=i.program.getUniforms(),f=Pi.seqWithValue(d.seq,h);i.uniformsList=f}function Le(e,t,n,i){!0!==t.isScene&&(t=Y),te.resetTextureUnits();const r=t.fog,a=n.isMeshStandardMaterial?t.environment:null,o=null===b?g.outputEncoding:b.texture.encoding,s=ne.get(n.envMap||a),c=ee.get(n),l=A.state.lights;if(!0===V&&(!0===W||e!==M)){const t=e===M&&n.id===w;ue.setState(n,e,t)}n.version===c.__version?n.fog&&c.fog!==r||c.environment!==a||c.needsLights&&c.lightsStateVersion!==l.state.version?Fe(n,t,i):void 0===c.numClippingPlanes||c.numClippingPlanes===ue.numPlanes&&c.numIntersection===ue.numIntersection?(c.outputEncoding!==o||c.envMap!==s)&&Fe(n,t,i):Fe(n,t,i):(Fe(n,t,i),c.__version=n.version);let h=!1,d=!1,f=!1;const m=c.program,v=m.getUniforms(),y=c.uniforms;if(Z.useProgram(m.program)&&(h=!0,d=!0,f=!0),n.id!==w&&(w=n.id,d=!0),h||M!==e){if(v.setValue(ve,"projectionMatrix",e.projectionMatrix),K.logarithmicDepthBuffer&&v.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),M!==e&&(M=e,d=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=v.map.cameraPosition;void 0!==t&&t.setValue(ve,J.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&v.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&v.setValue(ve,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){v.setOptional(ve,i,"bindMatrix"),v.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;if(e){const t=e.bones;if(K.floatVertexTextures){if(void 0===e.boneTexture){let n=Math.sqrt(4*t.length);n=F.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(e.boneMatrices);const r=new mn(i,n,n,p,u);e.boneMatrices=i,e.boneTexture=r,e.boneTextureSize=n}v.setValue(ve,"boneTexture",e.boneTexture,te),v.setValue(ve,"boneTextureSize",e.boneTextureSize)}else v.setOptional(ve,e,"boneMatrices")}}var E,x;return(d||c.receiveShadow!==i.receiveShadow)&&(c.receiveShadow=i.receiveShadow,v.setValue(ve,"receiveShadow",i.receiveShadow)),d&&(v.setValue(ve,"toneMappingExposure",g.toneMappingExposure),c.needsLights&&(x=f,(E=y).ambientLightColor.needsUpdate=x,E.lightProbe.needsUpdate=x,E.directionalLights.needsUpdate=x,E.directionalLightShadows.needsUpdate=x,E.pointLights.needsUpdate=x,E.pointLightShadows.needsUpdate=x,E.spotLights.needsUpdate=x,E.spotLightShadows.needsUpdate=x,E.rectAreaLights.needsUpdate=x,E.hemisphereLights.needsUpdate=x),r&&n.fog&&se.refreshFogUniforms(y,r),se.refreshMaterialUniforms(y,n,P,R),Pi.upload(ve,c.uniformsList,y,te)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Pi.upload(ve,c.uniformsList,y,te),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(ve,"center",i.center),v.setValue(ve,"modelViewMatrix",i.modelViewMatrix),v.setValue(ve,"normalMatrix",i.normalMatrix),v.setValue(ve,"modelMatrix",i.matrixWorld),m}Se.setAnimationLoop((function(e){xe.isPresenting||De&&De(e)})),"undefined"!=typeof window&&Se.setContext(window),this.setAnimationLoop=function(e){De=e,xe.setAnimationLoop(e),null===e?Se.stop():Se.start()},this.render=function(e,t){let n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===v)return;Ae.resetDefaultState(),w=-1,M=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===xe.enabled&&!0===xe.isPresenting&&(t=xe.getCamera(t)),!0===e.isScene&&e.onBeforeRender(g,e,t,n||b),A=le.get(e,t),A.init(),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(j),W=this.localClippingEnabled,V=ue.init(this.clippingPlanes,W,t),m=ce.get(e,t),m.init(),_e(e,t,0,g.sortObjects),m.finish(),!0===g.sortObjects&&m.sort(O,N),!0===V&&ue.beginShadows();const r=A.state.shadowsArray;be.render(r,e,t),A.setupLights(t),!0===V&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),he.render(m,e,t,i);const a=m.opaque,o=m.transparent;a.length>0&&Te(a,e,t),o.length>0&&Te(o,e,t),!0===e.isScene&&e.onAfterRender(g,e,t),null!==b&&(te.updateRenderTargetMipmap(b),te.updateMultisampleRenderTarget(b)),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1),m=null,A=null},this.setFramebuffer=function(e){y!==e&&null===b&&ve.bindFramebuffer(36160,e),y=e},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return x},this.getRenderList=function(){return m},this.setRenderList=function(e){m=e},this.getRenderState=function(){return A},this.setRenderState=function(e){A=e},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e,t=0,n=0){b=e,E=t,x=n,e&&void 0===ee.get(e).__webglFramebuffer&&te.setupRenderTarget(e);let i=y,r=!1;if(e){const n=ee.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=n[t],r=!0):i=e.isWebGLMultisampleRenderTarget?ee.get(e).__webglMultisampledFramebuffer:n,S.copy(e.viewport),_.copy(e.scissor),T=e.scissorTest}else S.copy(U).multiplyScalar(P).floor(),_.copy(H).multiplyScalar(P).floor(),T=Q;if(B!==i&&(ve.bindFramebuffer(36160,i),B=i),Z.viewport(S),Z.scissor(_),Z.setScissorTest(T),r){const i=ee.get(e.texture);ve.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let c=ee.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(c=c[o]),c){let o=!1;c!==B&&(ve.bindFramebuffer(36160,c),o=!0);try{const c=e.texture,l=c.format,d=c.type;if(l!==p&&me.convert(l)!==ve.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(d===s||me.convert(d)===ve.getParameter(35738)||d===u&&(K.isWebGL2||q.get("OES_texture_float")||q.get("WEBGL_color_buffer_float"))||d===h&&(K.isWebGL2?q.get("EXT_color_buffer_float"):q.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ve.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ve.readPixels(t,n,i,r,me.convert(l),me.convert(d),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&ve.bindFramebuffer(36160,B)}}},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i),o=me.convert(t.format);te.setTexture2D(t,0),ve.copyTexImage2D(3553,n,o,e.x,e.y,r,a,0),Z.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){void 0===i&&(i=0);const r=t.image.width,a=t.image.height,o=me.convert(n.format),s=me.convert(n.type);te.setTexture2D(n,0),ve.pixelStorei(37440,n.flipY),ve.pixelStorei(37441,n.premultiplyAlpha),ve.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(3553,i,e.x,e.y,r,a,o,s,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ve.texSubImage2D(3553,i,e.x,e.y,o,s,t.image),0===i&&n.generateMipmaps&&ve.generateMipmap(3553),Z.unbindTexture()},this.initTexture=function(e){te.setTexture2D(e,0),Z.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Mr(e){wr.call(this,e)}Er.prototype=Object.assign(Object.create(un.prototype),{constructor:Er,isArrayCamera:!0}),xr.prototype=Object.assign(Object.create(ke.prototype),{constructor:xr,isGroup:!0}),Object.assign(br.prototype,{constructor:br,getHandSpace:function(){if(null===this._hand&&(this._hand=new xr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const e=new xr;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new xr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new xr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,a=null;const o=this._targetRay,s=this._grip,c=this._hand;if(e)if(c&&e.hand){a=!0;for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++)if(e.hand[i]){const r=t.getJointPose(e.hand[i],n),a=c.joints[i];null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=r.radius),a.visible=null!==r;const o=c.joints[window.XRHand.INDEX_PHALANX_TIP],s=c.joints[window.XRHand.THUMB_PHALANX_TIP],l=o.position.distanceTo(s.position),u=.02,h=.005;c.inputState.pinching&&l>u+h?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&l<=u-h&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==o&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==c&&(c.visible=null!==a),this}}),Object.assign(Br.prototype,_.prototype),Mr.prototype=Object.assign(Object.create(wr.prototype),{constructor:Mr,isWebGL1Renderer:!0});function Dr(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=M,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=F.generateUUID()}Object.defineProperty(Dr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Dr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=F.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new Dr(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=F.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Sr=new z;function _r(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Tr(e){ft.call(this),this.type="SpriteMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let Ir;Object.defineProperties(_r.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(_r.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)Sr.x=this.getX(t),Sr.y=this.getY(t),Sr.z=this.getZ(t),Sr.applyMatrix4(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new gt(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _r(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Tr.prototype=Object.create(ft.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isSpriteMaterial=!0,Tr.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const Fr=new z,Lr=new z,Rr=new z,Pr=new L,Or=new L,Nr=new ge,Ur=new z,Gr=new z,Hr=new z,Qr=new L,kr=new L,zr=new L;function Vr(e){if(ke.call(this),this.type="Sprite",void 0===Ir){Ir=new Ot;const e=new Dr(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ir.setIndex([0,1,2,0,2,3]),Ir.setAttribute("position",new _r(e,3,0,!1)),Ir.setAttribute("uv",new _r(e,2,3,!1))}this.geometry=Ir,this.material=void 0!==e?e:new Tr,this.center=new L(.5,.5)}function Wr(e,t,n,i,r,a){Pr.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Or.x=a*Pr.x-r*Pr.y,Or.y=r*Pr.x+a*Pr.y):Or.copy(Pr),e.copy(t),e.x+=Or.x,e.y+=Or.y,e.applyMatrix4(Nr)}Vr.prototype=Object.assign(Object.create(ke.prototype),{constructor:Vr,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Lr.setFromMatrixScale(this.matrixWorld),Nr.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rr.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Lr.multiplyScalar(-Rr.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;Wr(Ur.set(-.5,-.5,0),Rr,a,Lr,i,r),Wr(Gr.set(.5,-.5,0),Rr,a,Lr,i,r),Wr(Hr.set(.5,.5,0),Rr,a,Lr,i,r),Qr.set(0,0),kr.set(1,0),zr.set(1,1);let o=e.ray.intersectTriangle(Ur,Gr,Hr,!1,Fr);if(null===o&&(Wr(Gr.set(-.5,.5,0),Rr,a,Lr,i,r),kr.set(0,1),o=e.ray.intersectTriangle(Ur,Hr,Gr,!1,Fr),null===o))return;const s=e.ray.origin.distanceTo(Fr);s<e.near||s>e.far||t.push({distance:s,point:Fr.clone(),uv:it.getUV(Fr,Ur,Gr,Hr,Qr,kr,zr,new L),face:null,object:this})},copy:function(e){return ke.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const jr=new z,Jr=new z;function Yr(){ke.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Xr(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),en.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ge,this.bindMatrixInverse=new ge}Yr.prototype=Object.assign(Object.create(ke.prototype),{constructor:Yr,isLOD:!0,copy:function(e){ke.prototype.copy.call(this,e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){jr.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(jr);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){jr.setFromMatrixPosition(e.matrixWorld),Jr.setFromMatrixPosition(this.matrixWorld);const n=jr.distanceTo(Jr)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=ke.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,i=n.length;e<i;e++){const i=n[e];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}),Xr.prototype=Object.assign(Object.create(en.prototype),{constructor:Xr,isSkinnedMesh:!0,copy:function(e){return en.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new G,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){en.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new z,t=new G,n=new G,i=new z,r=new ge;return function(a,o){const s=this.skeleton,c=this.geometry;t.fromBufferAttribute(c.attributes.skinIndex,a),n.fromBufferAttribute(c.attributes.skinWeight,a),e.fromBufferAttribute(c.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let a=0;a<4;a++){const c=n.getComponent(a);if(0!==c){const n=t.getComponent(a);r.multiplyMatrices(s.bones[n].matrixWorld,s.boneInverses[n]),o.addScaledVector(i.copy(e).applyMatrix4(r),c)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});const qr=new ge,Kr=new ge;function Zr(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new ge)}}function $r(){ke.call(this),this.type="Bone"}Object.assign(Zr.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const t=new ge;this.bones[e]&&t.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:Kr;qr.multiplyMatrices(r,t[i]),qr.toArray(n,16*i)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new Zr(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),$r.prototype=Object.assign(Object.create(ke.prototype),{constructor:$r,isBone:!0});const ea=new ge,ta=new ge,na=[],ia=new en;function ra(e,t,n){en.call(this,e,t),this.instanceMatrix=new gt(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function aa(e){ft.call(this),this.type="LineBasicMaterial",this.color=new ut(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}ra.prototype=Object.assign(Object.create(en.prototype),{constructor:ra,isInstancedMesh:!0,copy:function(e){return en.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new gt(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(ia.geometry=this.geometry,ia.material=this.material,void 0!==ia.material)for(let r=0;r<i;r++){this.getMatrixAt(r,ea),ta.multiplyMatrices(n,ea),ia.matrixWorld=ta,ia.raycast(e,na);for(let e=0,n=na.length;e<n;e++){const n=na[e];n.instanceId=r,n.object=this,t.push(n)}na.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),aa.prototype=Object.create(ft.prototype),aa.prototype.constructor=aa,aa.prototype.isLineBasicMaterial=!0,aa.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const oa=new z,sa=new z,ca=new ge,la=new Ae,ua=new ce;function ha(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ke.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ot,this.material=void 0!==t?t:new aa,this.updateMorphTargets()}ha.prototype=Object.assign(Object.create(ke.prototype),{constructor:ha,isLine:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)oa.fromBufferAttribute(t,e-1),sa.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=oa.distanceTo(sa);e.setAttribute("lineDistance",new wt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let e=1,i=t.length;e<i;e++)n[e]=n[e-1],n[e]+=t[e-1].distanceTo(t[e])}return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),ua.copy(n.boundingSphere),ua.applyMatrix4(i),ua.radius+=r,!1===e.ray.intersectsSphere(ua))return;ca.getInverse(i),la.copy(e.ray).applyMatrix4(ca);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new z,c=new z,l=new z,u=new z,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,a=n.length-1;i<a;i+=h){const a=n[i],h=n[i+1];s.fromBufferAttribute(r,a),c.fromBufferAttribute(r,h);if(la.distanceSqToSegment(s,c,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(u);d<e.near||d>e.far||t.push({distance:d,point:l.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,i=r.count-1;n<i;n+=h){s.fromBufferAttribute(r,n),c.fromBufferAttribute(r,n+1);if(la.distanceSqToSegment(s,c,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(u);i<e.near||i>e.far||t.push({distance:i,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const i=n.vertices,r=i.length;for(let n=0;n<r-1;n+=h){if(la.distanceSqToSegment(i[n],i[n+1],u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const da=new z,fa=new z;function pa(e,t){ha.call(this,e,t),this.type="LineSegments"}function ma(e,t){ha.call(this,e,t),this.type="LineLoop"}function Aa(e){ft.call(this),this.type="PointsMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}pa.prototype=Object.assign(Object.create(ha.prototype),{constructor:pa,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)da.fromBufferAttribute(t,e),fa.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+da.distanceTo(fa);e.setAttribute("lineDistance",new wt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let e=0,i=t.length;e<i;e+=2)da.copy(t[e]),fa.copy(t[e+1]),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+da.distanceTo(fa)}return this}}),ma.prototype=Object.assign(Object.create(ha.prototype),{constructor:ma,isLineLoop:!0}),Aa.prototype=Object.create(ft.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isPointsMaterial=!0,Aa.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const ga=new ge,va=new Ae,ya=new ce,Ea=new z;function xa(e,t){ke.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ot,this.material=void 0!==t?t:new Aa,this.updateMorphTargets()}function ba(e,t,n,i,r,a,o){const s=va.distanceSqToPoint(e);if(s<n){const n=new z;va.closestPointToPoint(e,n),n.applyMatrix4(i);const c=r.ray.origin.distanceTo(n);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o})}}function Ba(e,t,n,i,r,o,s,c,l){U.call(this,e,t,n,i,r,o,s,c,l),this.format=void 0!==s?s:f,this.minFilter=void 0!==o?o:a,this.magFilter=void 0!==r?r:a,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function Ca(e,t,n,i,r,a,o,s,c,l,u,h){U.call(this,null,a,o,s,c,l,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function wa(e,t,n,i,r,a,o,s,c){U.call(this,e,t,n,i,r,a,o,s,c),this.needsUpdate=!0}function Ma(e,t,n,i,a,o,s,l,u,h){if((h=void 0!==h?h:m)!==m&&h!==A)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&h===m&&(n=c),void 0===n&&h===A&&(n=d),U.call(this,null,i,a,o,s,l,h,n,u),this.image={width:e,height:t},this.magFilter=void 0!==s?s:r,this.minFilter=void 0!==l?l:r,this.flipY=!1,this.generateMipmaps=!1}xa.prototype=Object.assign(Object.create(ke.prototype),{constructor:xa,isPoints:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),ya.copy(n.boundingSphere),ya.applyMatrix4(i),ya.radius+=r,!1===e.ray.intersectsSphere(ya))return;ga.getInverse(i),va.copy(e.ray).applyMatrix4(ga);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,s=n.length;r<s;r++){const s=n[r];Ea.fromBufferAttribute(a,s),ba(Ea,s,o,i,e,t,this)}}else for(let n=0,r=a.count;n<r;n++)Ea.fromBufferAttribute(a,n),ba(Ea,n,o,i,e,t,this)}else{const r=n.vertices;for(let n=0,a=r.length;n<a;n++)ba(r[n],n,o,i,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Ba.prototype=Object.assign(Object.create(U.prototype),{constructor:Ba,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ca.prototype=Object.create(U.prototype),Ca.prototype.constructor=Ca,Ca.prototype.isCompressedTexture=!0,wa.prototype=Object.create(U.prototype),wa.prototype.constructor=wa,wa.prototype.isCanvasTexture=!0,Ma.prototype=Object.create(U.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isDepthTexture=!0;let Da=0;const Sa=new ge,_a=new ke,Ta=new z;function Ia(){Object.defineProperty(this,"id",{value:Da+=2}),this.uuid=F.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Ia.prototype=Object.assign(Object.create(_.prototype),{constructor:Ia,isGeometry:!0,applyMatrix4:function(e){const t=(new R).getNormalMatrix(e);for(let t=0,n=this.vertices.length;t<n;t++){this.vertices[t].applyMatrix4(e)}for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];n.normal.applyMatrix3(t).normalize();for(let e=0,i=n.vertexNormals.length;e<i;e++)n.vertexNormals[e].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Sa.makeRotationX(e),this.applyMatrix4(Sa),this},rotateY:function(e){return Sa.makeRotationY(e),this.applyMatrix4(Sa),this},rotateZ:function(e){return Sa.makeRotationZ(e),this.applyMatrix4(Sa),this},translate:function(e,t,n){return Sa.makeTranslation(e,t,n),this.applyMatrix4(Sa),this},scale:function(e,t,n){return Sa.makeScale(e,t,n),this.applyMatrix4(Sa),this},lookAt:function(e){return _a.lookAt(e),_a.updateMatrix(),this.applyMatrix4(_a.matrix),this},fromBufferGeometry:function(e){const t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,a=i.normal,o=i.color,s=i.uv,c=i.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(let e=0;e<r.count;e++)t.vertices.push((new z).fromBufferAttribute(r,e)),void 0!==o&&t.colors.push((new ut).fromBufferAttribute(o,e));function l(e,n,i,r){const l=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],u=void 0===a?[]:[(new z).fromBufferAttribute(a,e),(new z).fromBufferAttribute(a,n),(new z).fromBufferAttribute(a,i)],h=new ht(e,n,i,u,l,r);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([(new L).fromBufferAttribute(s,e),(new L).fromBufferAttribute(s,n),(new L).fromBufferAttribute(s,i)]),void 0!==c&&t.faceVertexUvs[1].push([(new L).fromBufferAttribute(c,e),(new L).fromBufferAttribute(c,n),(new L).fromBufferAttribute(c,i)])}const u=e.groups;if(u.length>0)for(let e=0;e<u.length;e++){const t=u[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)void 0!==n?l(n.getX(e),n.getX(e+1),n.getX(e+2),t.materialIndex):l(e,e+1,e+2,t.materialIndex)}else if(void 0!==n)for(let e=0;e<n.count;e+=3)l(n.getX(e),n.getX(e+1),n.getX(e+2));else for(let e=0;e<r.count;e+=3)l(e,e+1,e+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ta).negate(),this.translate(Ta.x,Ta.y,Ta.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new ge;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const e=new z,t=new z;for(let n=0,i=this.faces.length;n<i;n++){const i=this.faces[n],r=this.vertices[i.a],a=this.vertices[i.b],o=this.vertices[i.c];e.subVectors(o,a),t.subVectors(r,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);const t=new Array(this.vertices.length);for(let e=0,n=this.vertices.length;e<n;e++)t[e]=new z;if(e){const e=new z,n=new z;for(let i=0,r=this.faces.length;i<r;i++){const r=this.faces[i],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),n.subVectors(a,o),e.cross(n),t[r.a].add(e),t[r.b].add(e),t[r.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let e=0,n=this.vertices.length;e<n;e++)t[e].normalize();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(t[n.a]),i[1].copy(t[n.b]),i[2].copy(t[n.c])):(i[0]=t[n.a].clone(),i[1]=t[n.b].clone(),i[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,n=t.vertexNormals.length;e<n;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const e=new Ia;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,i=this.faces.length;t<i;t++){const t=new z,i={a:new z,b:new z,c:new z};e.push(t),n.push(i)}}const n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],i=n.faceNormals[e],r=n.vertexNormals[e];i.copy(t.normal),r.a.copy(t.vertexNormals[0]),r.b.copy(t.vertexNormals[1]),r.c.copy(t.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new j),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ce),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let i;const r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,l=this.colors,u=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new R).getNormalMatrix(t));for(let e=0,n=o.length;e<n;e++){const n=o[e].clone();void 0!==t&&n.applyMatrix4(t),a.push(n)}for(let e=0,t=u.length;e<t;e++)l.push(u[e].clone());for(let e=0,t=c.length;e<t;e++){const t=c[e];let a,o;const l=t.vertexNormals,u=t.vertexColors,h=new ht(t.a+r,t.b+r,t.c+r);h.normal.copy(t.normal),void 0!==i&&h.normal.applyMatrix3(i).normalize();for(let e=0,t=l.length;e<t;e++)a=l[e].clone(),void 0!==i&&a.applyMatrix3(i).normalize(),h.vertexNormals.push(a);h.color.copy(t.color);for(let e=0,t=u.length;e<t;e++)o=u[e],h.vertexColors.push(o.clone());h.materialIndex=t.materialIndex+n,s.push(h)}for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++)r.push(i[e].clone());this.faceVertexUvs[t].push(r)}}},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){const e={},t=[],n=[],i=Math.pow(10,4);for(let r=0,a=this.vertices.length;r<a;r++){const a=this.vertices[r],o=Math.round(a.x*i)+"_"+Math.round(a.y*i)+"_"+Math.round(a.z*i);void 0===e[o]?(e[o]=r,t.push(this.vertices[r]),n[r]=t.length-1):n[r]=n[e[o]]}const r=[];for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.a=n[t.a],t.b=n[t.b],t.c=n[t.c];const i=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(i[t]===i[(t+1)%3]){r.push(e);break}}for(let e=r.length-1;e>=0;e--){const t=r[e];this.faces.splice(t,1);for(let e=0,n=this.faceVertexUvs.length;e<n;e++)this.faceVertexUvs[e].splice(t,1)}const a=this.vertices.length-t.length;return this.vertices=t,a},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];this.vertices.push(new z(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));const n=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let r,a;n&&n.length===t&&(r=[]),i&&i.length===t&&(a=[]);for(let o=0;o<t;o++){const t=e[o]._id;r&&r.push(n[t]),a&&a.push(i[t])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}const t=[];for(let e=0;e<this.vertices.length;e++){const n=this.vertices[e];t.push(n.x,n.y,n.z)}const n=[],i=[],r={},a=[],o={},s=[],c={};for(let e=0;e<this.faces.length;e++){const t=this.faces[e],i=!0,r=!1,a=void 0!==this.faceVertexUvs[0][e],o=t.normal.length()>0,s=t.vertexNormals.length>0,c=1!==t.color.r||1!==t.color.g||1!==t.color.b,f=t.vertexColors.length>0;let p=0;if(p=l(p,0,0),p=l(p,1,i),p=l(p,2,r),p=l(p,3,a),p=l(p,4,o),p=l(p,5,s),p=l(p,6,c),p=l(p,7,f),n.push(p),n.push(t.a,t.b,t.c),n.push(t.materialIndex),a){const t=this.faceVertexUvs[0][e];n.push(d(t[0]),d(t[1]),d(t[2]))}if(o&&n.push(u(t.normal)),s){const e=t.vertexNormals;n.push(u(e[0]),u(e[1]),u(e[2]))}if(c&&n.push(h(t.color)),f){const e=t.vertexColors;n.push(h(e[0]),h(e[1]),h(e[2]))}}function l(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==r[t]||(r[t]=i.length/3,i.push(e.x,e.y,e.z)),r[t]}function h(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==o[t]||(o[t]=a.length,a.push(e.getHex())),o[t]}function d(e){const t=e.x.toString()+e.y.toString();return void 0!==c[t]||(c[t]=s.length/2,s.push(e.x,e.y)),c[t]}return e.data={},e.data.vertices=t,e.data.normals=i,a.length>0&&(e.data.colors=a),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e},clone:function(){return(new Ia).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let e=0,n=t.length;e<n;e++)this.vertices.push(t[e].clone());const n=e.colors;for(let e=0,t=n.length;e<t;e++)this.colors.push(n[e].clone());const i=e.faces;for(let e=0,t=i.length;e<t;e++)this.faces.push(i[e].clone());for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];r.push(t.clone())}this.faceVertexUvs[t].push(r)}}const r=e.morphTargets;for(let e=0,t=r.length;e<t;e++){const t={};if(t.name=r[e].name,void 0!==r[e].vertices){t.vertices=[];for(let n=0,i=r[e].vertices.length;n<i;n++)t.vertices.push(r[e].vertices[n].clone())}if(void 0!==r[e].normals){t.normals=[];for(let n=0,i=r[e].normals.length;n<i;n++)t.normals.push(r[e].normals[n].clone())}this.morphTargets.push(t)}const a=e.morphNormals;for(let e=0,t=a.length;e<t;e++){const t={};if(void 0!==a[e].vertexNormals){t.vertexNormals=[];for(let n=0,i=a[e].vertexNormals.length;n<i;n++){const i=a[e].vertexNormals[n],r={};r.a=i.a.clone(),r.b=i.b.clone(),r.c=i.c.clone(),t.vertexNormals.push(r)}}if(void 0!==a[e].faceNormals){t.faceNormals=[];for(let n=0,i=a[e].faceNormals.length;n<i;n++)t.faceNormals.push(a[e].faceNormals[n].clone())}this.morphNormals.push(t)}const o=e.skinWeights;for(let e=0,t=o.length;e<t;e++)this.skinWeights.push(o[e].clone());const s=e.skinIndices;for(let e=0,t=s.length;e<t;e++)this.skinIndices.push(s[e].clone());const c=e.lineDistances;for(let e=0,t=c.length;e<t;e++)this.lineDistances.push(c[e]);const l=e.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});new z,new z,new z,new it;const Fa=function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let a=La(e,0,r,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,c,l,u,h,d,f;if(i&&(a=function(e,t,n,i){const r=[];let a,o,s,c,l;for(a=0,o=t.length;a<o;a++)s=t[a]*i,c=a<o-1?t[a+1]*i:e.length,l=La(e,s,c,i,!1),l===l.next&&(l.steiner=!0),r.push(Va(l));for(r.sort(Ha),a=0;a<r.length;a++)Qa(r[a],n),n=Ra(n,n.next);return n}(e,t,a,n)),e.length>80*n){s=l=e[0],c=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);f=Math.max(l-s,u-c),f=0!==f?1/f:0}return Pa(a,o,n,s,c,f),o};function La(e,t,n,i,r){let a,o;if(r===function(e,t,n,i){let r=0;for(let a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=eo(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=eo(a,e[a],e[a+1],o);return o&&Ya(o,o.next)&&(to(o),o=o.next),o}function Ra(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!Ya(i,i.next)&&0!==Ja(i.prev,i,i.next))i=i.next;else{if(to(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Pa(e,t,n,i,r,a,o){if(!e)return;!o&&a&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=za(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,a,o,s,c,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ,i);t++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(o>1)}(r)}(e,i,r,a);let s,c,l=e;for(;e.prev!==e.next;)if(s=e.prev,c=e.next,a?Na(e,i,r,a):Oa(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),to(e),e=c.next,l=c.next;else if((e=c)===l){o?1===o?Pa(e=Ua(Ra(e),t,n),t,n,i,r,a,2):2===o&&Ga(e,t,n,i,r,a):Pa(Ra(e),t,n,i,r,a,1);break}}function Oa(e){const t=e.prev,n=e,i=e.next;if(Ja(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(Wa(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ja(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Na(e,t,n,i){const r=e.prev,a=e,o=e.next;if(Ja(r,a,o)>=0)return!1;const s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,c=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=za(s,c,t,n,i),d=za(l,u,t,n,i);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&Wa(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ja(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&Wa(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ja(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Wa(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ja(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Wa(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ja(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ua(e,t,n){let i=e;do{const r=i.prev,a=i.next.next;!Ya(r,a)&&Xa(r,i,i.next,a)&&Za(r,a)&&Za(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),to(i),to(i.next),i=e=a),i=i.next}while(i!==e);return Ra(i)}function Ga(e,t,n,i,r,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&ja(o,e)){let s=$a(o,e);return o=Ra(o,o.next),s=Ra(s,s.next),Pa(o,t,n,i,r,a),void Pa(s,t,n,i,r,a)}e=e.next}o=o.next}while(o!==e)}function Ha(e,t){return e.x-t.x}function Qa(e,t){if(t=function(e,t){let n=t;const i=e.x,r=e.y;let a,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>o){if(o=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(i===o)return a;const s=a,c=a.x,l=a.y;let u,h=1/0;n=a;do{i>=n.x&&n.x>=c&&i!==n.x&&Wa(r<l?i:o,r,c,l,r<l?o:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),Za(n,e)&&(u<h||u===h&&(n.x>a.x||n.x===a.x&&ka(a,n)))&&(a=n,h=u)),n=n.next}while(n!==s);return a}(e,t)){const n=$a(t,e);Ra(t,t.next),Ra(n,n.next)}}function ka(e,t){return Ja(e.prev,e,t.prev)<0&&Ja(t.next,e,e.next)<0}function za(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Va(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Wa(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function ja(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Xa(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Za(e,t)&&Za(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Ja(e.prev,e,t.prev)||Ja(e,t.prev,t))||Ya(e,t)&&Ja(e.prev,e,e.next)>0&&Ja(t.prev,t,t.next)>0)}function Ja(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ya(e,t){return e.x===t.x&&e.y===t.y}function Xa(e,t,n,i){const r=Ka(Ja(e,t,n)),a=Ka(Ja(e,t,i)),o=Ka(Ja(n,i,e)),s=Ka(Ja(n,i,t));return r!==a&&o!==s||(!(0!==r||!qa(e,n,t))||(!(0!==a||!qa(e,i,t))||(!(0!==o||!qa(n,e,i))||!(0!==s||!qa(n,t,i)))))}function qa(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ka(e){return e>0?1:e<0?-1:0}function Za(e,t){return Ja(e.prev,e,e.next)<0?Ja(e,t,e.next)>=0&&Ja(e,e.prev,t)>=0:Ja(e,t,e.prev)<0||Ja(e,e.next,t)<0}function $a(e,t){const n=new no(e.i,e.x,e.y),i=new no(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function eo(e,t,n,i){const r=new no(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function to(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function no(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const io={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return io.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];ro(e),ao(n,e);let a=e.length;t.forEach(ro);for(let e=0;e<t.length;e++)i.push(a),a+=t[e].length,ao(n,t[e]);const o=Fa(n,i);for(let e=0;e<o.length;e+=3)r.push(o.slice(e,e+3));return r}};function ro(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ao(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class oo extends Ot{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++){a(e[t])}function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:so;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);let A,g,v,y,E,x=!1;p&&(A=p.getSpacedPoints(s),x=!0,l=!1,g=p.computeFrenetFrames(s,!1),v=new z,y=new z,E=new z),l||(f=0,u=0,h=0,d=0);const b=e.extractPoints(o);let B=b.shape;const C=b.holes;if(!io.isClockWise(B)){B=B.reverse();for(let e=0,t=C.length;e<t;e++){const t=C[e];io.isClockWise(t)&&(C[e]=t.reverse())}}const w=io.triangulateShape(B,C),M=B;for(let e=0,t=C.length;e<t;e++){const t=C[e];B=B.concat(t)}function D(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const S=B.length,_=w.length;function T(e,t,n){let i,r,a;const o=e.x-t.x,s=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=o*o+s*s,h=o*l-s*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),f=t.x-s/h,p=t.y+o/h,m=((n.x-l/d-f)*l-(n.y+c/d-p)*c)/(o*l-s*c);i=f+o*m-e.x,r=p+s*m-e.y;const A=i*i+r*r;if(A<=2)return new L(i,r);a=Math.sqrt(A/2)}else{let e=!1;o>Number.EPSILON?c>Number.EPSILON&&(e=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(l)&&(e=!0),e?(i=-s,r=o,a=Math.sqrt(u)):(i=o,r=s,a=Math.sqrt(u/2))}return new L(i/a,r/a)}const I=[];for(let e=0,t=M.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),I[e]=T(M[e],M[n],M[i]);const F=[];let R,P=I.concat();for(let e=0,t=C.length;e<t;e++){const t=C[e];R=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),R[e]=T(t[e],t[i],t[r]);F.push(R),P=P.concat(R)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=D(M[e],I[e],i);U(t.x,t.y,-n)}for(let e=0,t=C.length;e<t;e++){const t=C[e];R=F[e];for(let e=0,r=t.length;e<r;e++){const r=D(t[e],R[e],i);U(r.x,r.y,-n)}}}const O=h+d;for(let e=0;e<S;e++){const t=l?D(B[e],P[e],O):B[e];x?(y.copy(g.normals[0]).multiplyScalar(t.x),v.copy(g.binormals[0]).multiplyScalar(t.y),E.copy(A[0]).add(y).add(v),U(E.x,E.y,E.z)):U(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<S;t++){const n=l?D(B[t],P[t],O):B[t];x?(y.copy(g.normals[e]).multiplyScalar(n.x),v.copy(g.binormals[e]).multiplyScalar(n.y),E.copy(A[e]).add(y).add(v),U(E.x,E.y,E.z)):U(n.x,n.y,c/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=D(M[e],I[e],i);U(t.x,t.y,c+n)}for(let e=0,t=C.length;e<t;e++){const t=C[e];R=F[e];for(let e=0,r=t.length;e<r;e++){const r=D(t[e],R[e],i);x?U(r.x,r.y+A[s-1].y,A[s-1].x+n):U(r.x,r.y,c+n)}}}function N(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=S*e,a=S*(e+1);H(t+i+n,t+r+n,t+r+a,t+i+a)}}}function U(e,t,n){a.push(e),a.push(t),a.push(n)}function G(e,t,r){Q(e),Q(t),Q(r);const a=i.length/3,o=m.generateTopUV(n,i,a-3,a-2,a-1);k(o[0]),k(o[1]),k(o[2])}function H(e,t,r,a){Q(e),Q(t),Q(a),Q(t),Q(r),Q(a);const o=i.length/3,s=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);k(s[0]),k(s[1]),k(s[3]),k(s[1]),k(s[2]),k(s[3])}function Q(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function k(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(l){let e=0,t=S*e;for(let e=0;e<_;e++){const n=w[e];G(n[2]+t,n[1]+t,n[0]+t)}e=s+2*f,t=S*e;for(let e=0;e<_;e++){const n=w[e];G(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<_;e++){const t=w[e];G(t[2],t[1],t[0])}for(let e=0;e<_;e++){const t=w[e];G(t[0]+S*s,t[1]+S*s,t[2]+S*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;N(M,t),t+=M.length;for(let e=0,n=C.length;e<n;e++){const n=C[e];N(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new wt(i,3)),this.setAttribute("uv",new wt(r,2)),this.computeVertexNormals()}toJSON(){const e=Ot.prototype.toJSON.call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}const so={generateTopUV:function(e,t,n,i,r){const a=t[3*n],o=t[3*n+1],s=t[3*i],c=t[3*i+1],l=t[3*r],u=t[3*r+1];return[new L(a,o),new L(s,c),new L(l,u)]},generateSideWallUV:function(e,t,n,i,r,a){const o=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*a],A=t[3*a+1],g=t[3*a+2];return Math.abs(s-u)<.01?[new L(o,1-c),new L(l,1-h),new L(d,1-p),new L(m,1-g)]:[new L(s,1-c),new L(u,1-h),new L(f,1-p),new L(A,1-g)]}};class co extends Ia{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new oo(e,t)),this.mergeVertices()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}function lo(e,t,n){Ot.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],a=[],o=[],s=1e-5,c=new z,l=new z,u=new z,h=new z,d=new z;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=t+1;for(let i=0;i<=n;i++){const f=i/n;for(let n=0;n<=t;n++){const i=n/t;e(i,f,l),r.push(l.x,l.y,l.z),i-s>=0?(e(i-s,f,u),h.subVectors(l,u)):(e(i+s,f,u),h.subVectors(u,l)),f-s>=0?(e(i,f-s,u),d.subVectors(l,u)):(e(i,f+s,u),d.subVectors(u,l)),c.crossVectors(h,d).normalize(),a.push(c.x,c.y,c.z),o.push(i,f)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*f+n,r=e*f+n+1,a=(e+1)*f+n+1,o=(e+1)*f+n;i.push(t,r,o),i.push(r,a,o)}this.setIndex(i),this.setAttribute("position",new wt(r,3)),this.setAttribute("normal",new wt(a,3)),this.setAttribute("uv",new wt(o,2))}function uo(e,t,n){Ia.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new lo(e,t,n)),this.mergeVertices()}lo.prototype=Object.create(Ot.prototype),lo.prototype.constructor=lo,uo.prototype=Object.create(Ia.prototype),uo.prototype.constructor=uo;class ho extends Ot{constructor(e,t){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;const n=[],i=[],r=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))c(e);else for(let t=0;t<e.length;t++)c(e[t]),this.addGroup(o,s,t),o+=s,s=0;function c(e){const o=i.length/3,c=e.extractPoints(t);let l=c.shape;const u=c.holes;!1===io.isClockWise(l)&&(l=l.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===io.isClockWise(t)&&(u[e]=t.reverse())}const h=io.triangulateShape(l,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];l=l.concat(t)}for(let e=0,t=l.length;e<t;e++){const t=l[e];i.push(t.x,t.y,0),r.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],i=t[0]+o,r=t[1]+o,a=t[2]+o;n.push(i,r,a),s+=3}}this.setIndex(n),this.setAttribute("position",new wt(i,3)),this.setAttribute("normal",new wt(r,3)),this.setAttribute("uv",new wt(a,2))}toJSON(){const e=Ot.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class fo extends Ia{constructor(e,t){super(),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ho(e,t)),this.mergeVertices()}toJSON(){const e=Ia.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}function po(e){ft.call(this),this.type="ShadowMaterial",this.color=new ut(0),this.transparent=!0,this.setValues(e)}function mo(e){cn.call(this,e),this.type="RawShaderMaterial"}function Ao(e){ft.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function go(e){Ao.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new L(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=F.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function vo(e){ft.call(this),this.type="MeshPhongMaterial",this.color=new ut(16777215),this.specular=new ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yo(e){ft.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Eo(e){ft.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xo(e){ft.call(this),this.type="MeshLambertMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function bo(e){ft.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Bo(e){aa.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}po.prototype=Object.create(ft.prototype),po.prototype.constructor=po,po.prototype.isShadowMaterial=!0,po.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this},mo.prototype=Object.create(cn.prototype),mo.prototype.constructor=mo,mo.prototype.isRawShaderMaterial=!0,Ao.prototype=Object.create(ft.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isMeshStandardMaterial=!0,Ao.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},go.prototype=Object.create(Ao.prototype),go.prototype.constructor=go,go.prototype.isMeshPhysicalMaterial=!0,go.prototype.copy=function(e){return Ao.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new ut).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},vo.prototype=Object.create(ft.prototype),vo.prototype.constructor=vo,vo.prototype.isMeshPhongMaterial=!0,vo.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yo.prototype=Object.create(ft.prototype),yo.prototype.constructor=yo,yo.prototype.isMeshToonMaterial=!0,yo.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Eo.prototype=Object.create(ft.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isMeshNormalMaterial=!0,Eo.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xo.prototype=Object.create(ft.prototype),xo.prototype.constructor=xo,xo.prototype.isMeshLambertMaterial=!0,xo.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},bo.prototype=Object.create(ft.prototype),bo.prototype.constructor=bo,bo.prototype.isMeshMatcapMaterial=!0,bo.prototype.copy=function(e){return ft.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Bo.prototype=Object.create(aa.prototype),Bo.prototype.constructor=Bo,Bo.prototype.isLineDashedMaterial=!0,Bo.prototype.copy=function(e){return aa.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Co=Object.freeze({__proto__:null,ShadowMaterial:po,SpriteMaterial:Tr,RawShaderMaterial:mo,ShaderMaterial:cn,PointsMaterial:Aa,MeshPhysicalMaterial:go,MeshStandardMaterial:Ao,MeshPhongMaterial:vo,MeshToonMaterial:yo,MeshNormalMaterial:Eo,MeshLambertMaterial:xo,MeshDepthMaterial:pr,MeshDistanceMaterial:mr,MeshBasicMaterial:pt,MeshMatcapMaterial:bo,LineDashedMaterial:Bo,LineBasicMaterial:aa,Material:ft});const wo={arraySlice:function(e,t,n){return wo.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,o=0;o!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[o++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,a=e[0];for(;void 0!==a&&void 0===a[i];)a=e[r++];if(void 0===a)return;let o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)},subclip:function(e,t,n,i,r){r=r||30;const a=e.clone();a.name=t;const o=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],s=t.getValueSize(),c=[],l=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*r;if(!(a<n||a>=i)){c.push(t.times[e]);for(let n=0;n<s;++n)l.push(t.values[e*s+n])}}0!==c.length&&(t.times=wo.convertArray(c,t.times.constructor),t.values=wo.convertArray(l,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===i||i<=0)&&(i=30);const r=n.tracks.length,a=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const o=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===o)continue;let s=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);let l=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=i.times.length-1;let d;if(a<=i.times[0]){const e=s,t=c-s;d=wo.arraySlice(i.values,e,t)}else if(a>=i.times[h]){const e=h*c+s,t=e+c-s;d=wo.arraySlice(i.values,e,t)}else{const e=i.createInterpolant(),t=s,n=c-s;e.evaluate(a),d=wo.arraySlice(e.resultBuffer,t,n)}if("quaternion"===r){(new k).fromArray(d).normalize().conjugate().toArray(d)}const f=o.times.length;for(let e=0;e<f;++e){const t=e*u+l;if("quaternion"===r)k.multiplyQuaternionsFlat(o.values,t,d,0,o.values,t);else{const e=u-2*l;for(let n=0;n<e;++n)o.values[t+n]-=d[n]}}}return e.blendMode=2501,e}};function Mo(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Do(e,t,n,i){Mo.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function So(e,t,n,i){Mo.call(this,e,t,n,i)}function _o(e,t,n,i){Mo.call(this,e,t,n,i)}function To(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wo.convertArray(t,this.TimeBufferType),this.values=wo.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Io(e,t,n){To.call(this,e,t,n)}function Fo(e,t,n,i){To.call(this,e,t,n,i)}function Lo(e,t,n,i){To.call(this,e,t,n,i)}function Ro(e,t,n,i){Mo.call(this,e,t,n,i)}function Po(e,t,n,i){To.call(this,e,t,n,i)}function Oo(e,t,n,i){To.call(this,e,t,n,i)}function No(e,t,n,i){To.call(this,e,t,n,i)}function Uo(e,t,n,i){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==i?i:B,this.uuid=F.generateUUID(),this.duration<0&&this.resetDuration()}function Go(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lo;case"vector":case"vector2":case"vector3":case"vector4":return No;case"color":return Fo;case"quaternion":return Po;case"bool":case"boolean":return Io;case"string":return Oo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];wo.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Mo.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(e>=r)break e;{const o=t[1];e<o&&(n=2,r=o);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0}}for(;n<a;){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Mo.prototype,{beforeStart_:Mo.prototype.copySampleValue_,afterEnd_:Mo.prototype.copySampleValue_}),Do.prototype=Object.assign(Object.create(Mo.prototype),{constructor:Do,DefaultSettings_:{endingStart:E,endingEnd:E},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case x:r=e,o=2*t-n;break;case b:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case x:a=e,s=2*n-t;break;case b:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}const c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=a*l},interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,A=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,y=d*m-d*p;for(let e=0;e!==o;++e)r[e]=A*a[l+e]+g*a[c+e]+v*a[s+e]+y*a[u+e];return r}}),So.prototype=Object.assign(Object.create(Mo.prototype),{constructor:So,interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(n-t)/(i-t),u=1-l;for(let e=0;e!==o;++e)r[e]=a[c+e]*u+a[s+e]*l;return r}}),_o.prototype=Object.assign(Object.create(Mo.prototype),{constructor:_o,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(To,{toJSON:function(e){const t=e.constructor;let n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:wo.convertArray(e.times,Array),values:wo.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}}),Object.assign(To.prototype,{constructor:To,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:v,InterpolantFactoryMethodDiscrete:function(e){return new _o(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new So(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Do(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case g:t=this.InterpolantFactoryMethodDiscrete;break;case v:t=this.InterpolantFactoryMethodLinear;break;case y:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return g;case this.InterpolantFactoryMethodLinear:return v;case this.InterpolantFactoryMethodSmooth:return y}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=wo.arraySlice(n,r,a),this.values=wo.arraySlice(this.values,r*e,a*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==a&&a>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,a),e=!1;break}a=i}if(void 0!==i&&wo.isTypedArray(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e},optimize:function(){const e=wo.arraySlice(this.times),t=wo.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===y,r=e.length-1;let a=1;for(let o=1;o<r;++o){let r=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==s[0]))if(i)r=!0;else{const e=o*n,i=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[i+o]||n!==t[a+o]){r=!0;break}}}if(r){if(o!==a){e[a]=e[o];const i=o*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,o=0;o!==n;++o)t[i+o]=t[e+o];++a}return a!==e.length?(this.times=wo.arraySlice(e,0,a),this.values=wo.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this},clone:function(){const e=wo.arraySlice(this.times,0),t=wo.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Io.prototype=Object.assign(Object.create(To.prototype),{constructor:Io,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:g,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Fo.prototype=Object.assign(Object.create(To.prototype),{constructor:Fo,ValueTypeName:"color"}),Lo.prototype=Object.assign(Object.create(To.prototype),{constructor:Lo,ValueTypeName:"number"}),Ro.prototype=Object.assign(Object.create(Mo.prototype),{constructor:Ro,interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t);let c=e*o;for(let e=c+o;c!==e;c+=4)k.slerpFlat(r,0,a,c-o,a,c,s);return r}}),Po.prototype=Object.assign(Object.create(To.prototype),{constructor:Po,ValueTypeName:"quaternion",DefaultInterpolation:v,InterpolantFactoryMethodLinear:function(e){return new Ro(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Oo.prototype=Object.assign(Object.create(To.prototype),{constructor:Oo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:g,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),No.prototype=Object.assign(Object.create(To.prototype),{constructor:No,ValueTypeName:"vector"}),Object.assign(Uo,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(Go(n[e]).scale(i));return new Uo(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(To.toJSON(n[e]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,a=[];for(let e=0;e<r;e++){let o=[],s=[];o.push((e+r-1)%r,e,(e+1)%r),s.push(0,1,0);const c=wo.getKeyframeOrder(o);o=wo.sortedArray(o,1,c),s=wo.sortedArray(s,1,c),i||0!==o[0]||(o.push(r),s.push(s[0])),a.push(new Lo(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new Uo(e,-1,a)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(r);if(a&&a.length>1){const e=a[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const a=[];for(const e in i)a.push(Uo.CreateFromMorphTargetSequence(e,i[e],t,n));return a},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],o=[];wo.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const c=e.hierarchy||[];for(let e=0;e<c.length;e++){const r=c[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),a.push(i.morphTarget===n?1:0)}i.push(new Lo(".morphTargetInfluence["+n+"]",e,a))}s=e.length*(a||1)}else{const a=".bones["+t[e].name+"]";n(No,a+".position",r,"pos",i),n(Po,a+".quaternion",r,"rot",i),n(No,a+".scale",r,"scl",i)}}if(0===i.length)return null;return new Uo(r,s,i,o)}}),Object.assign(Uo.prototype,{resetDuration:function(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Uo(this.name,this.duration,e,this.blendMode)}});const Ho={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const Qo=new function(e,t,n){const i=this;let r=!1,a=0,o=0,s=void 0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}};function ko(e){this.manager=void 0!==e?e:Qo,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(ko.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const zo={};function Vo(e){ko.call(this,e)}function Wo(e){ko.call(this,e)}function jo(e){ko.call(this,e)}function Jo(e){ko.call(this,e)}function Yo(e){ko.call(this,e)}function Xo(e){ko.call(this,e)}function qo(e){ko.call(this,e)}function Ko(){this.type="Curve",this.arcLengthDivisions=200}function Zo(e,t,n,i,r,a,o,s){Ko.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function $o(e,t,n,i,r,a){Zo.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function es(){let e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){let c=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(i-t)/(o+s)+(i-n)/s;c*=o,l*=o,r(t,n,c,l)},calc:function(r){const a=r*r;return e+t*r+n*a+i*(a*r)}}}Vo.prototype=Object.assign(Object.create(ko.prototype),{constructor:Vo,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Ho.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0!==zo[e])return void zo[e].push({onLoad:t,onProgress:n,onError:i});const o=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(o){const n=o[1],a=!!o[2];let s=o[3];s=decodeURIComponent(s),a&&(s=atob(s));try{let i;const a=(this.responseType||"").toLowerCase();switch(a){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);i="blob"===a?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;i=t.parseFromString(s,n);break;case"json":i=JSON.parse(s);break;default:i=s}setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{zo[e]=[],zo[e].push({onLoad:t,onProgress:n,onError:i}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,i=zo[e];if(delete zo[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ho.add(e,n);for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onLoad&&t.onLoad(n)}r.manager.itemEnd(e)}else{for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=zo[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onProgress&&i.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=zo[e];delete zo[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=zo[e];delete zo[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return r.manager.itemStart(e),s},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Wo.prototype=Object.assign(Object.create(ko.prototype),{constructor:Wo,load:function(e,t,n,i){const r=this,a=new Vo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=Uo.parse(e[n]);t.push(i)}return t}}),jo.prototype=Object.assign(Object.create(ko.prototype),{constructor:jo,load:function(e,t,n,i){const r=this,o=[],s=new Ca;s.image=o;const c=new Vo(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(r.withCredentials);let l=0;function u(u){c.load(e[u],(function(e){const n=r.parse(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=a),s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,i)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)u(t);else c.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=a),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,i);return s}}),Jo.prototype=Object.assign(Object.create(ko.prototype),{constructor:Jo,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Ho.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),Ho.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}),Yo.prototype=Object.assign(Object.create(ko.prototype),{constructor:Yo,load:function(e,t,n,i){const r=new fn,a=new Jo(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],(function(e){r.images[n]=e,o++,6===o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let t=0;t<e.length;++t)s(t);return r}}),Xo.prototype=Object.assign(Object.create(ko.prototype),{constructor:Xo,load:function(e,t,i,r){const s=this,c=new mn,l=new Vo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,(function(e){const i=s.parse(e);i&&(void 0!==i.image?c.image=i.image:void 0!==i.data&&(c.image.width=i.width,c.image.height=i.height,c.image.data=i.data),c.wrapS=void 0!==i.wrapS?i.wrapS:n,c.wrapT=void 0!==i.wrapT?i.wrapT:n,c.magFilter=void 0!==i.magFilter?i.magFilter:a,c.minFilter=void 0!==i.minFilter?i.minFilter:a,c.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(c.format=i.format),void 0!==i.type&&(c.type=i.type),void 0!==i.mipmaps&&(c.mipmaps=i.mipmaps,c.minFilter=o),1===i.mipmapCount&&(c.minFilter=a),c.needsUpdate=!0,t&&t(c,i))}),i,r),c}}),qo.prototype=Object.assign(Object.create(ko.prototype),{constructor:qo,load:function(e,t,n,i){const r=new U,a=new Jo(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){r.image=n;const i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?f:p,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}),Object.assign(Ko.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let o,s=0,c=r-1;for(;s<=c;)if(i=Math.floor(s+(c-s)/2),o=n[i]-a,o<0)s=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(i=c,n[i]===a)return i/(r-1);const l=n[i];return(i+(a-l)/(n[i+1]-l))/(r-1)},getTangent:function(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),o=this.getPoint(r),s=t||(a.isVector2?new L:new z);return s.copy(o).sub(a).normalize(),s},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new z,i=[],r=[],a=[],o=new z,s=new ge;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new z),i[t].normalize()}r[0]=new z,a[0]=new z;let c=Number.MAX_VALUE;const l=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(i[t-1],i[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(F.clamp(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(F.clamp(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Zo.prototype=Object.create(Ko.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isEllipseCurve=!0,Zo.prototype.getPoint=function(e,t){const n=t||new L,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const o=this.aStartAngle+e*r;let s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,i=c-this.aY;s=n*e-i*t+this.aX,c=n*t+i*e+this.aY}return n.set(s,c)},Zo.prototype.copy=function(e){return Ko.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Zo.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Zo.prototype.fromJSON=function(e){return Ko.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},$o.prototype=Object.create(Zo.prototype),$o.prototype.constructor=$o,$o.prototype.isArcCurve=!0;const ts=new z,ns=new es,is=new es,rs=new es;function as(e,t,n,i){Ko.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function os(e,t,n,i,r){const a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function ss(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function cs(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function ls(e,t,n,i){Ko.call(this),this.type="CubicBezierCurve",this.v0=e||new L,this.v1=t||new L,this.v2=n||new L,this.v3=i||new L}function us(e,t,n,i){Ko.call(this),this.type="CubicBezierCurve3",this.v0=e||new z,this.v1=t||new z,this.v2=n||new z,this.v3=i||new z}function hs(e,t){Ko.call(this),this.type="LineCurve",this.v1=e||new L,this.v2=t||new L}function ds(e,t){Ko.call(this),this.type="LineCurve3",this.v1=e||new z,this.v2=t||new z}function fs(e,t,n){Ko.call(this),this.type="QuadraticBezierCurve",this.v0=e||new L,this.v1=t||new L,this.v2=n||new L}function ps(e,t,n){Ko.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new z,this.v1=t||new z,this.v2=n||new z}function ms(e){Ko.call(this),this.type="SplineCurve",this.points=e||[]}as.prototype=Object.create(Ko.prototype),as.prototype.constructor=as,as.prototype.isCatmullRomCurve3=!0,as.prototype.getPoint=function(e,t){const n=t||new z,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let o,s,c=Math.floor(a),l=a-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:0===l&&c===r-1&&(c=r-2,l=1),this.closed||c>0?o=i[(c-1)%r]:(ts.subVectors(i[0],i[1]).add(i[0]),o=ts);const u=i[c%r],h=i[(c+1)%r];if(this.closed||c+2<r?s=i[(c+2)%r]:(ts.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=ts),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),ns.initNonuniformCatmullRom(o.x,u.x,h.x,s.x,t,n,i),is.initNonuniformCatmullRom(o.y,u.y,h.y,s.y,t,n,i),rs.initNonuniformCatmullRom(o.z,u.z,h.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(ns.initCatmullRom(o.x,u.x,h.x,s.x,this.tension),is.initCatmullRom(o.y,u.y,h.y,s.y,this.tension),rs.initCatmullRom(o.z,u.z,h.z,s.z,this.tension));return n.set(ns.calc(l),is.calc(l),rs.calc(l)),n},as.prototype.copy=function(e){Ko.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},as.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},as.prototype.fromJSON=function(e){Ko.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new z).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ls.prototype=Object.create(Ko.prototype),ls.prototype.constructor=ls,ls.prototype.isCubicBezierCurve=!0,ls.prototype.getPoint=function(e,t){const n=t||new L,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(cs(e,i.x,r.x,a.x,o.x),cs(e,i.y,r.y,a.y,o.y)),n},ls.prototype.copy=function(e){return Ko.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ls.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ls.prototype.fromJSON=function(e){return Ko.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},us.prototype=Object.create(Ko.prototype),us.prototype.constructor=us,us.prototype.isCubicBezierCurve3=!0,us.prototype.getPoint=function(e,t){const n=t||new z,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(cs(e,i.x,r.x,a.x,o.x),cs(e,i.y,r.y,a.y,o.y),cs(e,i.z,r.z,a.z,o.z)),n},us.prototype.copy=function(e){return Ko.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},us.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},us.prototype.fromJSON=function(e){return Ko.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},hs.prototype=Object.create(Ko.prototype),hs.prototype.constructor=hs,hs.prototype.isLineCurve=!0,hs.prototype.getPoint=function(e,t){const n=t||new L;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},hs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},hs.prototype.getTangent=function(e,t){const n=t||new L;return n.copy(this.v2).sub(this.v1).normalize(),n},hs.prototype.copy=function(e){return Ko.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},hs.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},hs.prototype.fromJSON=function(e){return Ko.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ds.prototype=Object.create(Ko.prototype),ds.prototype.constructor=ds,ds.prototype.isLineCurve3=!0,ds.prototype.getPoint=function(e,t){const n=t||new z;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ds.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ds.prototype.copy=function(e){return Ko.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ds.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ds.prototype.fromJSON=function(e){return Ko.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fs.prototype=Object.create(Ko.prototype),fs.prototype.constructor=fs,fs.prototype.isQuadraticBezierCurve=!0,fs.prototype.getPoint=function(e,t){const n=t||new L,i=this.v0,r=this.v1,a=this.v2;return n.set(ss(e,i.x,r.x,a.x),ss(e,i.y,r.y,a.y)),n},fs.prototype.copy=function(e){return Ko.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},fs.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},fs.prototype.fromJSON=function(e){return Ko.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ps.prototype=Object.create(Ko.prototype),ps.prototype.constructor=ps,ps.prototype.isQuadraticBezierCurve3=!0,ps.prototype.getPoint=function(e,t){const n=t||new z,i=this.v0,r=this.v1,a=this.v2;return n.set(ss(e,i.x,r.x,a.x),ss(e,i.y,r.y,a.y),ss(e,i.z,r.z,a.z)),n},ps.prototype.copy=function(e){return Ko.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ps.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ps.prototype.fromJSON=function(e){return Ko.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ms.prototype=Object.create(Ko.prototype),ms.prototype.constructor=ms,ms.prototype.isSplineCurve=!0,ms.prototype.getPoint=function(e,t){const n=t||new L,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],c=i[a],l=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(os(o,s.x,c.x,l.x,u.x),os(o,s.y,c.y,l.y,u.y)),n},ms.prototype.copy=function(e){Ko.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this},ms.prototype.toJSON=function(){const e=Ko.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e},ms.prototype.fromJSON=function(e){Ko.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new L).fromArray(n))}return this};var As=Object.freeze({__proto__:null,ArcCurve:$o,CatmullRomCurve3:as,CubicBezierCurve:ls,CubicBezierCurve3:us,EllipseCurve:Zo,LineCurve:hs,LineCurve3:ds,QuadraticBezierCurve:fs,QuadraticBezierCurve3:ps,SplineCurve:ms});function gs(){Ko.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function vs(e){gs.call(this),this.type="Path",this.currentPoint=new L,e&&this.setFromPoints(e)}function ys(e){vs.call(this,e),this.uuid=F.generateUUID(),this.type="Shape",this.holes=[]}function Es(e,t){ke.call(this),this.type="Light",this.color=new ut(e),this.intensity=void 0!==t?t:1}function xs(e,t,n){Es.call(this,e,n),this.type="HemisphereLight",this.position.copy(ke.DefaultUp),this.updateMatrix(),this.groundColor=new ut(t)}function bs(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new L(512,512),this.map=null,this.mapPass=null,this.matrix=new ge,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vn,this._frameExtents=new L(1,1),this._viewportCount=1,this._viewports=[new G(0,0,1,1)]}function Bs(){bs.call(this,new un(50,1,.5,500)),this.focus=1}function Cs(e,t,n,i,r,a){Es.call(this,e,t),this.type="SpotLight",this.position.copy(ke.DefaultUp),this.updateMatrix(),this.target=new ke,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Bs}function ws(){bs.call(this,new un(90,1,.5,500)),this._frameExtents=new L(4,2),this._viewportCount=6,this._viewports=[new G(2,1,1,1),new G(0,1,1,1),new G(3,1,1,1),new G(1,1,1,1),new G(3,0,1,1),new G(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}function Ms(e,t,n,i){Es.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new ws}function Ds(e,t,n,i,r,a){ln.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Ss(){bs.call(this,new Ds(-5,5,5,-5,.5,500))}function _s(e,t){Es.call(this,e,t),this.type="DirectionalLight",this.position.copy(ke.DefaultUp),this.updateMatrix(),this.target=new ke,this.shadow=new Ss}function Ts(e,t){Es.call(this,e,t),this.type="AmbientLight"}function Is(e,t,n,i){Es.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}gs.prototype=Object.assign(Object.create(Ko.prototype),{constructor:gs,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new hs(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const e=n[i]-t,r=this.curves[i],a=r.getLength(),o=0===a?0:1-e/a;return r.getPointAt(o)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Ko.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Ko.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Ko.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new As[n.type]).fromJSON(n))}return this}}),vs.prototype=Object.assign(Object.create(gs.prototype),{constructor:vs,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new hs(this.currentPoint.clone(),new L(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new fs(this.currentPoint.clone(),new L(e,t),new L(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,a){const o=new ls(this.currentPoint.clone(),new L(e,t),new L(n,i),new L(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this},splineThru:function(e){const t=new ms([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this},absarc:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this},ellipse:function(e,t,n,i,r,a,o,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,i,r,a,o,s),this},absellipse:function(e,t,n,i,r,a,o,s){const c=new Zo(e,t,n,i,r,a,o,s);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(e){return gs.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=gs.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return gs.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),ys.prototype=Object.assign(Object.create(vs.prototype),{constructor:ys,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){vs.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){const e=vs.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){vs.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new vs).fromJSON(n))}return this}}),Es.prototype=Object.assign(Object.create(ke.prototype),{constructor:Es,isLight:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=ke.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),xs.prototype=Object.assign(Object.create(Es.prototype),{constructor:xs,isHemisphereLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(bs.prototype,{_projScreenMatrix:new ge,_lightPositionWorld:new z,_lookTarget:new z,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Bs.prototype=Object.assign(Object.create(bs.prototype),{constructor:Bs,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=2*F.RAD2DEG*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),bs.prototype.updateMatrices.call(this,e)}}),Cs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Cs,isSpotLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ws.prototype=Object.assign(Object.create(bs.prototype),{constructor:ws,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),Ms.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ms,isPointLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ds.prototype=Object.assign(Object.create(ln.prototype),{constructor:Ds,isOrthographicCamera:!0,copy:function(e,t){return ln.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=ke.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Ss.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ss,isDirectionalLightShadow:!0,updateMatrices:function(e){bs.prototype.updateMatrices.call(this,e)}}),_s.prototype=Object.assign(Object.create(Es.prototype),{constructor:_s,isDirectionalLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ts.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ts,isAmbientLight:!0}),Is.prototype=Object.assign(Object.create(Es.prototype),{constructor:Is,isRectAreaLight:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=Es.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class Fs{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}function Ls(e,t){Es.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new Fs}function Rs(e){ko.call(this,e),this.textures={}}Ls.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ls,isLightProbe:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=Es.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),Rs.prototype=Object.assign(Object.create(ko.prototype),{constructor:Rs,load:function(e,t,n,i){const r=this,a=new Vo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=new Co[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new ut).setHex(e.sheen)),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const r=e.uniforms[t];switch(i.uniforms[t]={},r.type){case"t":i.uniforms[t].value=n(r.value);break;case"c":i.uniforms[t].value=(new ut).setHex(r.value);break;case"v2":i.uniforms[t].value=(new L).fromArray(r.value);break;case"v3":i.uniforms[t].value=(new z).fromArray(r.value);break;case"v4":i.uniforms[t].value=(new G).fromArray(r.value);break;case"m3":i.uniforms[t].value=(new R).fromArray(r.value);break;case"m4":i.uniforms[t].value=(new ge).fromArray(r.value);break;default:i.uniforms[t].value=r.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)i.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new L).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new L).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const Ps=function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function Os(){Ot.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Ns(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),gt.call(this,e,t,n),this.meshPerAttribute=i||1}function Us(e){ko.call(this,e)}Os.prototype=Object.assign(Object.create(Ot.prototype),{constructor:Os,isInstancedBufferGeometry:!0,copy:function(e){return Ot.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=Ot.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Ns.prototype=Object.assign(Object.create(gt.prototype),{constructor:Ns,isInstancedBufferAttribute:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=gt.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Us.prototype=Object.assign(Object.create(ko.prototype),{constructor:Us,load:function(e,t,n,i){const r=this,a=new Vo(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers[t],r=new Uint32Array(i).buffer;return n[t]=r,r}(e,r.buffer),o=new Dr(new Gs[r.type](a),r.stride);return o.uuid=r.uuid,t[i]=o,o}const r=e.isInstancedBufferGeometry?new Os:new Ot,a=e.data.index;if(void 0!==a){const e=new Gs[a.type](a.array);r.setIndex(new gt(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let a;if(n.isInterleavedBufferAttribute){a=new _r(i(e.data,n.data),n.itemSize,n.offset,n.normalized)}else{const e=new Gs[n.type](n.array);a=new(n.isInstancedBufferAttribute?Ns:gt)(e,n.itemSize,n.normalized)}void 0!==n.name&&(a.name=n.name),r.setAttribute(t,a)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],a=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];let o;if(r.isInterleavedBufferAttribute){o=new _r(i(e.data,r.data),r.itemSize,r.offset,r.normalized)}else{o=new gt(new Gs[r.type](r.array),r.itemSize,r.normalized)}void 0!==r.name&&(o.name=r.name),a.push(o)}r.morphAttributes[t]=a}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let e=0,t=c.length;e!==t;++e){const t=c[e];r.addGroup(t.start,t.count,t.materialIndex)}const l=e.data.boundingSphere;if(void 0!==l){const e=new z;void 0!==l.center&&e.fromArray(l.center),r.boundingSphere=new ce(e,l.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});const Gs={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Hs(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),ko.call(this,e),this.options={premultiplyAlpha:"none"}}function Qs(){this.type="ShapePath",this.color=new ut,this.subPaths=[],this.currentPath=null}function ks(e){this.type="Font",this.data=e}function zs(e,t,n,i,r){const a=r.glyphs[e]||r.glyphs["?"];if(!a)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const o=new Qs;let s,c,l,u,h,d,f,p;if(a.o){const e=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let r=0,a=e.length;r<a;){switch(e[r++]){case"m":s=e[r++]*t+n,c=e[r++]*t+i,o.moveTo(s,c);break;case"l":s=e[r++]*t+n,c=e[r++]*t+i,o.lineTo(s,c);break;case"q":l=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,o.quadraticCurveTo(h,d,l,u);break;case"b":l=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,f=e[r++]*t+n,p=e[r++]*t+i,o.bezierCurveTo(h,d,f,p,l,u)}}}return{offsetX:a.ha*t,path:o}}function Vs(e){ko.call(this,e)}let Ws;Hs.prototype=Object.assign(Object.create(ko.prototype),{constructor:Hs,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Ho.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(n){Ho.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(Qs.prototype,{moveTo:function(e,t){return this.currentPath=new vs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new ys;r.curves=i.curves,t.push(r)}return t}function i(e,t){const n=t.length;let i=!1;for(let r=n-1,a=0;a<n;r=a++){let n=t[r],o=t[a],s=o.x-n.x,c=o.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=t[a],s=-s,o=t[r],c=-c),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=c*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return i}const r=io.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);let o,s,c;const l=[];if(1===a.length)return s=a[0],c=new ys,c.curves=s.curves,l.push(c),l;let u=!r(a[0].getPoints());u=e?!u:u;const h=[],d=[];let f,p,m=[],A=0;d[A]=void 0,m[A]=[];for(let t=0,n=a.length;t<n;t++)s=a[t],f=s.getPoints(),o=r(f),o=e?!o:o,o?(!u&&d[A]&&A++,d[A]={s:new ys,p:f},d[A].s.curves=s.curves,u&&A++,m[A]=[]):m[A].push({h:s,p:f[0]});if(!d[0])return n(a);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,r=d.length;n<r;n++){const r=m[n];for(let a=0;a<r.length;a++){const o=r[a];let s=!0;for(let r=0;r<d.length;r++)i(o.p,d[r].p)&&(n!==r&&t.push({froms:n,tos:r,hole:a}),s?(s=!1,h[r].push(o)):e=!0);s&&h[n].push(o)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){c=d[e].s,l.push(c),p=m[e];for(let e=0,t=p.length;e<t;e++)c.holes.push(p[e].h)}return l}}),Object.assign(ks.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);const n=[],i=function(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[];let s=0,c=0;for(let e=0;e<i.length;e++){const t=i[e];if("\n"===t)s=0,c-=a;else{const e=zs(t,r,s,c,n);s+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data);for(let e=0,t=i.length;e<t;e++)Array.prototype.push.apply(n,i[e].toShapes());return n}}),Vs.prototype=Object.assign(Object.create(ko.prototype),{constructor:Vs,load:function(e,t,n,i){const r=this,a=new Vo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new ks(e)}});const js=function(){return void 0===Ws&&(Ws=new(window.AudioContext||window.webkitAudioContext)),Ws};function Js(e){ko.call(this,e)}function Ys(e,t,n){Ls.call(this,void 0,n);const i=(new ut).set(e),r=(new ut).set(t),a=new z(i.r,i.g,i.b),o=new z(r.r,r.g,r.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}function Xs(e,t){Ls.call(this,void 0,t);const n=(new ut).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Js.prototype=Object.assign(Object.create(ko.prototype),{constructor:Js,load:function(e,t,n,i){const r=this,a=new Vo(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{const e=n.slice(0);js().decodeAudioData(e,(function(e){t(e)}))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}}),Ys.prototype=Object.assign(Object.create(Ls.prototype),{constructor:Ys,isHemisphereLightProbe:!0,copy:function(e){return Ls.prototype.copy.call(this,e),this},toJSON:function(e){return Ls.prototype.toJSON.call(this,e)}}),Xs.prototype=Object.assign(Object.create(Ls.prototype),{constructor:Xs,isAmbientLightProbe:!0,copy:function(e){return Ls.prototype.copy.call(this,e),this},toJSON:function(e){return Ls.prototype.toJSON.call(this,e)}});const qs=new ge,Ks=new ge;Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new un,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new un,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),i=t.eyeSep/2,r=i*t.near/t.focus,a=t.near*Math.tan(F.DEG2RAD*t.fov*.5)/t.zoom;let o,s;Ks.elements[12]=-i,qs.elements[12]=i,o=-a*t.aspect+r,s=a*t.aspect+r,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(n),o=-a*t.aspect-r,s=a*t.aspect-r,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ks),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qs)}});function Zs(e,t,n){let i,r,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Zs.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)n[r+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=a},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){o.setValue(n,i);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]},_slerp:function(e,t,n,i){k.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const a=this._workIndex*r;k.multiplyQuaternionsFlat(e,a,e,t,e,n),k.slerpFlat(e,t,e,t,e,a,i)},_lerp:function(e,t,n,i,r){const a=1-i;for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]*a+e[n+o]*i}},_lerpAdditive:function(e,t,n,i,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[n+a]*i}}});const $s="\\[\\]\\.:\\/",ec=new RegExp("[\\[\\]\\.:\\/]","g"),tc="[^\\[\\]\\.:\\/]",nc="[^"+$s.replace("\\.","")+"]",ic=/((?:WC+[\/:])*)/.source.replace("WC",tc),rc=/(WCOD+)?/.source.replace("WCOD",nc),ac=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tc),oc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tc),sc=new RegExp("^"+ic+rc+ac+oc+"$"),cc=["material","materials","bones"];function lc(e,t,n){const i=n||uc.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function uc(e,t,n){this.path=t,this.parsedPath=n||uc.parseTrackName(t),this.node=uc.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(lc.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(uc,{Composite:lc,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new uc.Composite(e,t,n):new uc(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(ec,"")},parseTrackName:function(e){const t=sc.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==cc.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(uc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=uc.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(uc.prototype,{_getValue_unbound:uc.prototype.getValue,_setValue_unbound:uc.prototype.setValue}),Object.assign(function(){this.uuid=F.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let o=void 0,s=e.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=a;e!==t;++e)r[e].push(new uc(u,n[e],i[e]))}else if(d<c){o=e[d];const s=--c,l=e[s];t[l.uuid]=d,e[d]=l,t[h]=s,e[s]=u;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[s];let o=t[d];t[d]=a,void 0===o&&(o=new uc(u,n[e],i[e])),t[s]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a],s=o.uuid,c=t[s];if(void 0!==c&&c>=r){const a=r++,l=e[a];t[l.uuid]=c,e[c]=l,t[s]=a,e[a]=o;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[c]=i,t[a]=r}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o].uuid,c=t[s];if(void 0!==c)if(delete t[s],c<r){const o=--r,s=e[o],l=--a,u=e[l];t[s.uuid]=c,e[c]=s,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[l];t[c]=i,t[o]=r,t.pop()}}else{const r=--a,o=e[r];r>0&&(t[o.uuid]=c),e[c]=o,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[c]=t[r],t.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(u);for(let n=l,i=s.length;n!==i;++n){const i=s[n];u[n]=new uc(i,e,t)}return u},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}});class hc{constructor(e,t,n,i){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=i||t.blendMode;const r=t.tracks,a=r.length,o=new Array(a),s={endingStart:E,endingEnd:E};for(let e=0;e!==a;++e){const t=r[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,a=n/i;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,c=o.sampleValues;return s[0]=r,s[1]=r+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);break;case B:default:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=2202===n;if(0===e)return-1===r?i:a&&1==(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=x,i.endingEnd=x):(i.endingStart=e?this.zeroSlopeAtStart?x:E:b,i.endingEnd=t?this.zeroSlopeAtEnd?x:E:b)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}function dc(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}dc.prototype=Object.assign(Object.create(_.prototype),{constructor:dc,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let e=0;e!==r;++e){const r=i[e],c=r.name;let u=l[c];if(void 0!==u)a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,c));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;u=new Zs(uc.create(n,c,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,c),a[e]=u}o[e].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new So(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let a="string"==typeof e?Uo.findByName(i,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let c=null;if(void 0===n&&(n=null!==a?a.blendMode:B),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;c=s.knownActions[0],null===a&&(a=c._clip)}if(null===a)return null;const l=new hc(this,a,t,n);return this._bindAction(l,c),this._addInactiveAction(l,o,r),l},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?Uo.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o){t[o]._update(i,e,r,a)}const o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this},setTime:function(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class fc{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new fc(void 0===this.value.clone?this.value:this.value.clone())}}function pc(e,t,n){Dr.call(this,e,t),this.meshPerAttribute=n||1}function mc(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function Ac(e,t,n,i){this.ray=new Ae(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Se,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function gc(e,t){return e.distance-t.distance}function vc(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)vc(i[e],t,n,!0)}}pc.prototype=Object.assign(Object.create(Dr.prototype),{constructor:pc,isInstancedInterleavedBuffer:!0,copy:function(e){return Dr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Dr.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Dr.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(mc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(mc.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(Ac.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const i=n||[];return vc(e,this,i,t),i.sort(gc),i},intersectObjects:function(e,t,n){const i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let n=0,r=e.length;n<r;n++)vc(e[n],this,i,t);return i.sort(gc),i}});const yc=new L;function Ec(e){ke.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}function xc(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),as.call(this,e),this.type="catmullrom"}Ec.prototype=Object.create(ke.prototype),Ec.prototype.constructor=Ec,Ec.prototype.isImmediateRenderObject=!0,Ko.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ko.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(gs.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Ia;for(let n=0,i=e.length;n<i;n++){const i=e[n];t.vertices.push(new z(i.x,i.y,i.z||0))}return t}}),Object.assign(vs.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),xc.prototype=Object.create(as.prototype),Object.assign(xc.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Object.assign(ko.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ps(e)}}),ko.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(class{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new L(1/0,1/0),this.max=void 0!==t?t:new L(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new L),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new L),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new L),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new L),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return yc.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(j.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ce.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),vn.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Object.assign(F,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),F.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),F.ceilPowerOfTwo(e)}}),Object.assign(R.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(ge.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new z).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),je.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},k.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ae.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(it.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(it,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),it.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),it.getNormal(e,t,n,i)}}),Object.assign(ys.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new co(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new fo(this,e)}}),Object.assign(L.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(z.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(G.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ia.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(ke.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(ke.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(en.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(en.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Yr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Zr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Xr.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ko.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),un.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Es.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(gt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===D},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(D)}}}),Object.assign(gt.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?D:M),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ot.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new gt(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Ot.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Os.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(Ac.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Dr.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===D},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Dr.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?D:M),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(oo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(class extends ke{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(fc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ft.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ut}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(vo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(go.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(cn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(wr.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(wr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:C}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Ar.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(H.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(class extends ke{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e){if(void 0===e&&(e=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Js).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),dn.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},dn.prototype.clear=function(e,t,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,i)},O.crossOrigin=void 0,O.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new qo;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},O.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Yo;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},O.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},O.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"122"}}));"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function bc(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}const Bc=100,Cc=300,wc=301,Mc=302,Dc=303,Sc=304,_c=306,Tc=307,Ic=1e3,Fc=1001,Lc=1002,Rc=1003,Pc=1004,Oc=1005,Nc=1006,Uc=1007,Gc=1008,Hc=1009,Qc=1012,kc=1014,zc=1015,Vc=1016,Wc=1020,jc=1022,Jc=1023,Yc=1024,Xc=1026,qc=1027,Kc=1028,Zc=1030,$c=33776,el=33777,tl=33778,nl=33779,il=35840,rl=35841,al=35842,ol=35843,sl=37492,cl=37496,ll=2300,ul=2301,hl=2302,dl=2400,fl=2401,pl=2402,ml=2500,Al=2501,gl=3e3,vl=3001,yl=3007,El=3002,xl=3004,bl=3005,Bl=3006,Cl=3201,wl=7680,Ml=35044,Dl=35048,Sl="300 es";function _l(){}Object.assign(_l.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e)}}});const Tl=[];for(let e=0;e<256;e++)Tl[e]=(e<16?"0":"")+e.toString(16);let Il=1234567;const Fl={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Tl[255&e]+Tl[e>>8&255]+Tl[e>>16&255]+Tl[e>>24&255]+"-"+Tl[255&t]+Tl[t>>8&255]+"-"+Tl[t>>16&15|64]+Tl[t>>24&255]+"-"+Tl[63&n|128]+Tl[n>>8&255]+"-"+Tl[n>>16&255]+Tl[n>>24&255]+Tl[255&i]+Tl[i>>8&255]+Tl[i>>16&255]+Tl[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Il=e%2147483647),Il=16807*Il%2147483647,(Il-1)/2147483646},degToRad:function(e){return e*Fl.DEG2RAD},radToDeg:function(e){return e*Fl.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const a=Math.cos,o=Math.sin,s=a(n/2),c=o(n/2),l=a((t+i)/2),u=o((t+i)/2),h=a((t-i)/2),d=o((t-i)/2),f=a((i-t)/2),p=o((i-t)/2);switch(r){case"XYX":e.set(s*u,c*h,c*d,s*l);break;case"YZY":e.set(c*d,s*u,c*h,s*l);break;case"ZXZ":e.set(c*h,c*d,s*u,s*l);break;case"XZX":e.set(s*u,c*p,c*f,s*l);break;case"YXY":e.set(c*f,s*u,c*p,s*l);break;case"ZYZ":e.set(c*p,c*f,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class Ll{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Rl{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,a,o,s,c){const l=this.elements;return l[0]=e,l[1]=i,l[2]=o,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],m=i[3],A=i[6],g=i[1],v=i[4],y=i[7],E=i[2],x=i[5],b=i[8];return r[0]=a*p+o*g+s*E,r[3]=a*m+o*v+s*x,r[6]=a*A+o*y+s*b,r[1]=c*p+l*g+u*E,r[4]=c*m+l*v+u*x,r[7]=c*A+l*y+u*b,r[2]=h*p+d*g+f*E,r[5]=h*m+d*v+f*x,r[8]=h*A+d*y+f*b,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-n*r*l+n*o*s+i*r*c-i*a*s}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],f=d*c-l*h,p=l*u-d*s,m=h*s-c*u,A=r*f+a*p+o*m;if(0===A)return this.set(0,0,0,0,0,0,0,0,0);const g=1/A;return i[0]=f*g,i[1]=(o*h-d*a)*g,i[2]=(l*a-o*c)*g,i[3]=p*g,i[4]=(d*r-o*u)*g,i[5]=(o*s-l*r)*g,i[6]=m*g,i[7]=(a*u-h*r)*g,i[8]=(c*r-a*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).getInverse(this).transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,o){const s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*a+c*o)+a+e,-i*c,i*s,-i*(-c*a+s*o)+o+t,0,0,1)}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],c=i[4],l=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*c,i[6]=t*o+n*l,i[1]=-n*r+t*s,i[4]=-n*a+t*c,i[7]=-n*o+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}let Pl;const Ol={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Pl&&(Pl=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Pl.width=e.width,Pl.height=e.height;const n=Pl.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Pl}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let Nl=0;function Ul(e,t,n,i,r,a,o,s,c,l){Object.defineProperty(this,"id",{value:Nl++}),this.uuid=Fl.generateUUID(),this.name="",this.image=void 0!==e?e:Ul.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Ul.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Fc,this.wrapT=void 0!==i?i:Fc,this.magFilter=void 0!==r?r:Nc,this.minFilter=void 0!==a?a:Gc,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:Jc,this.internalFormat=null,this.type=void 0!==s?s:Hc,this.offset=new Ll(0,0),this.repeat=new Ll(1,1),this.center=new Ll(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rl,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:gl,this.version=0,this.onUpdate=null}Ul.DEFAULT_IMAGE=void 0,Ul.DEFAULT_MAPPING=Cc,Ul.prototype=Object.assign(Object.create(_l.prototype),{constructor:Ul,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=Fl.generateUUID()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)t.push(Ol.getDataURL(i[e]))}else t=Ol.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==Cc)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ic:e.x=e.x-Math.floor(e.x);break;case Fc:e.x=e.x<0?0:1;break;case Lc:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ic:e.y=e.y-Math.floor(e.y);break;case Fc:e.y=e.y<0?0:1;break;case Lc:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Ul.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});class Gl{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,o=.1,s=e.elements,c=s[0],l=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],A=s[10];if(Math.abs(l-h)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(l+h)<o&&Math.abs(u+p)<o&&Math.abs(f+m)<o&&Math.abs(c+d+A-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(c+1)/2,s=(d+1)/2,g=(A+1)/2,v=(l+h)/4,y=(u+p)/4,E=(f+m)/4;return e>s&&e>g?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=v/n,r=y/n):s>g?s<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=v/i,r=E/i):g<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=y/r,i=E/r),this.set(n,i,r,t),this}let g=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-l)*(h-l));return Math.abs(g)<.001&&(g=1),this.x=(m-f)/g,this.y=(u-p)/g,this.z=(h-l)/g,this.w=Math.acos((c+d+A-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Hl(e,t,n){this.width=e,this.height=t,this.scissor=new Gl(0,0,e,t),this.scissorTest=!1,this.viewport=new Gl(0,0,e,t),n=n||{},this.texture=new Ul(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Nc,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ql(e,t,n){Hl.call(this,e,t,n),this.samples=4}Hl.prototype=Object.assign(Object.create(_l.prototype),{constructor:Hl,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ql.prototype=Object.assign(Object.create(Hl.prototype),{constructor:Ql,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Hl.prototype.copy.call(this,e),this.samples=e.samples,this}});class kl{constructor(e=0,t=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return n.copy(e).slerp(t,i)}static slerpFlat(e,t,n,i,r,a,o){let s=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3];const h=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(u!==p||s!==h||c!==d||l!==f){let e=1-o;const t=s*h+c*d+l*f+u*p,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),a=Math.atan2(r,t*n);e=Math.sin(e*a)/r,o=Math.sin(o*a)/r}const r=o*n;if(s=s*e+h*r,c=c*e+d*r,l=l*e+f*r,u=u*e+p*r,e===1-o){const e=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=e,c*=e,l*=e,u*=e}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,a){const o=n[i],s=n[i+1],c=n[i+2],l=n[i+3],u=r[a],h=r[a+1],d=r[a+2],f=r[a+3];return e[t]=o*f+l*u+s*d-c*h,e[t+1]=s*f+l*h+c*u-o*d,e[t+2]=c*f+l*d+o*h-s*u,e[t+3]=l*f-o*u-s*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,s=Math.sin,c=o(n/2),l=o(i/2),u=o(r/2),h=s(n/2),d=s(i/2),f=s(r/2);switch(a){case"XYZ":this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f;break;case"YXZ":this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f;break;case"ZXY":this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f;break;case"ZYX":this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f;break;case"YZX":this._x=h*l*u+c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u-h*d*f;break;case"XZY":this._x=h*l*u-c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],c=t[2],l=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-s)*e,this._y=(r-c)*e,this._z=(a-i)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(l-s)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+c)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(r-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(s+l)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-i)/e,this._x=(r+c)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fl.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+a*o+i*c-r*s,this._y=i*l+a*s+r*o-n*c,this._z=r*l+a*c+n*s-i*o,this._w=a*l-n*o-i*s-r*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(s),l=Math.atan2(c,o),u=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class zl{constructor(e=0,t=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Wl.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Wl.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*i-o*n,l=s*n+o*t-r*i,u=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=c*s+h*-r+l*-o-u*-a,this.y=l*s+h*-a+u*-r-c*-o,this.z=u*s+h*-o+c*-a-l*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Vl.copy(this).projectOnVector(e),this.sub(Vl)}reflect(e){return this.sub(Vl.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Fl.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Vl=new zl,Wl=new kl;class jl{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new zl(1/0,1/0,1/0),this.max=void 0!==t?t:new zl(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0;for(let s=0,c=e.length;s<c;s+=3){const c=e[s],l=e[s+1],u=e[s+2];c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>a&&(a=l),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0;for(let s=0,c=e.count;s<c;s++){const c=e.getX(s),l=e.getY(s),u=e.getZ(s);c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>a&&(a=l),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Xl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new zl),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new zl),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ql.copy(t.boundingBox),ql.applyMatrix4(e.matrixWorld),this.union(ql));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new zl),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xl),Xl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(iu),ru.subVectors(this.max,iu),Kl.subVectors(e.a,iu),Zl.subVectors(e.b,iu),$l.subVectors(e.c,iu),eu.subVectors(Zl,Kl),tu.subVectors($l,Zl),nu.subVectors(Kl,$l);let t=[0,-eu.z,eu.y,0,-tu.z,tu.y,0,-nu.z,nu.y,eu.z,0,-eu.x,tu.z,0,-tu.x,nu.z,0,-nu.x,-eu.y,eu.x,0,-tu.y,tu.x,0,-nu.y,nu.x,0];return!!Jl(t,Kl,Zl,$l,ru)&&(t=[1,0,0,0,1,0,0,0,1],!!Jl(t,Kl,Zl,$l,ru)&&(au.crossVectors(eu,tu),t=[au.x,au.y,au.z],Jl(t,Kl,Zl,$l,ru)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new zl),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Xl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Xl).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Yl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yl)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function Jl(e,t,n,i,r){for(let a=0,o=e.length-3;a<=o;a+=3){ou.fromArray(e,a);const o=r.x*Math.abs(ou.x)+r.y*Math.abs(ou.y)+r.z*Math.abs(ou.z),s=t.dot(ou),c=n.dot(ou),l=i.dot(ou);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>o)return!1}return!0}const Yl=[new zl,new zl,new zl,new zl,new zl,new zl,new zl,new zl],Xl=new zl,ql=new jl,Kl=new zl,Zl=new zl,$l=new zl,eu=new zl,tu=new zl,nu=new zl,iu=new zl,ru=new zl,au=new zl,ou=new zl,su=new jl;class cu{constructor(e,t){this.center=void 0!==e?e:new zl,this.radius=void 0!==t?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):su.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new zl),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new jl),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const lu=new zl,uu=new zl,hu=new zl,du=new zl,fu=new zl,pu=new zl,mu=new zl;class Au{constructor(e,t){this.origin=void 0!==e?e:new zl,this.direction=void 0!==t?t:new zl(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new zl),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lu)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new zl),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=lu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(lu.copy(this.direction).multiplyScalar(t).add(this.origin),lu.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){uu.copy(e).add(t).multiplyScalar(.5),hu.copy(t).sub(e).normalize(),du.copy(this.origin).sub(uu);const r=.5*e.distanceTo(t),a=-this.direction.dot(hu),o=du.dot(this.direction),s=-du.dot(hu),c=du.lengthSq(),l=Math.abs(1-a*a);let u,h,d,f;if(l>0)if(u=a*s-o,h=a*o-s,f=r*l,u>=0)if(h>=-f)if(h<=f){const e=1/l;u*=e,h*=e,d=u*(u+a*h+2*o)+h*(a*u+h+2*s)+c}else h=r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+c;else h=-r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+c;else h<=-f?(u=Math.max(0,-(-a*r+o)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+c):h<=f?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+c):(u=Math.max(0,-(a*r+o)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+c);else h=a>0?-r:r,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*s)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(hu).multiplyScalar(h).add(uu),d}intersectSphere(e,t){lu.subVectors(e.center,this.origin);const n=lu.dot(this.direction),i=lu.dot(lu)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,o,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),l>=0?(r=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(r=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,lu)}intersectTriangle(e,t,n,i,r){fu.subVectors(t,e),pu.subVectors(n,e),mu.crossVectors(fu,pu);let a,o=this.direction.dot(mu);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}du.subVectors(this.origin,e);const s=a*this.direction.dot(pu.crossVectors(du,pu));if(s<0)return null;const c=a*this.direction.dot(fu.cross(du));if(c<0)return null;if(s+c>o)return null;const l=-a*du.dot(mu);return l<0?null:this.at(l/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class gu{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,r,a,o,s,c,l,u,h,d,f,p,m){const A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=i,A[1]=r,A[5]=a,A[9]=o,A[13]=s,A[2]=c,A[6]=l,A[10]=u,A[14]=h,A[3]=d,A[7]=f,A[11]=p,A[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new gu).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/vu.setFromMatrixColumn(e,0).length(),r=1/vu.setFromMatrixColumn(e,1).length(),a=1/vu.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*l,n=a*u,i=o*l,r=o*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=n+i*c,t[5]=e-r*c,t[9]=-o*s,t[2]=r-e*c,t[6]=i+n*c,t[10]=a*s}else if("YXZ"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e+r*o,t[4]=i*o-n,t[8]=a*c,t[1]=a*u,t[5]=a*l,t[9]=-o,t[2]=n*o-i,t[6]=r+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e-r*o,t[4]=-a*u,t[8]=i+n*o,t[1]=n+i*o,t[5]=a*l,t[9]=r-e*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*l,n=a*u,i=o*l,r=o*u;t[0]=s*l,t[4]=i*c-n,t[8]=e*c+r,t[1]=s*u,t[5]=r*c+e,t[9]=n*c-i,t[2]=-c,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*c,i=o*s,r=o*c;t[0]=s*l,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=a*l,t[9]=-o*l,t[2]=-c*l,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=a*s,n=a*c,i=o*s,r=o*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=e*u+r,t[5]=a*l,t[9]=n*u-i,t[2]=i*u-n,t[6]=o*l,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Eu,e,xu)}lookAt(e,t,n){const i=this.elements;return Cu.subVectors(e,t),0===Cu.lengthSq()&&(Cu.z=1),Cu.normalize(),bu.crossVectors(n,Cu),0===bu.lengthSq()&&(1===Math.abs(n.z)?Cu.x+=1e-4:Cu.z+=1e-4,Cu.normalize(),bu.crossVectors(n,Cu)),bu.normalize(),Bu.crossVectors(Cu,bu),i[0]=bu.x,i[4]=Bu.x,i[8]=Cu.x,i[1]=bu.y,i[5]=Bu.y,i[9]=Cu.y,i[2]=bu.z,i[6]=Bu.z,i[10]=Cu.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],A=n[14],g=n[3],v=n[7],y=n[11],E=n[15],x=i[0],b=i[4],B=i[8],C=i[12],w=i[1],M=i[5],D=i[9],S=i[13],_=i[2],T=i[6],I=i[10],F=i[14],L=i[3],R=i[7],P=i[11],O=i[15];return r[0]=a*x+o*w+s*_+c*L,r[4]=a*b+o*M+s*T+c*R,r[8]=a*B+o*D+s*I+c*P,r[12]=a*C+o*S+s*F+c*O,r[1]=l*x+u*w+h*_+d*L,r[5]=l*b+u*M+h*T+d*R,r[9]=l*B+u*D+h*I+d*P,r[13]=l*C+u*S+h*F+d*O,r[2]=f*x+p*w+m*_+A*L,r[6]=f*b+p*M+m*T+A*R,r[10]=f*B+p*D+m*I+A*P,r[14]=f*C+p*S+m*F+A*O,r[3]=g*x+v*w+y*_+E*L,r[7]=g*b+v*M+y*T+E*R,r[11]=g*B+v*D+y*I+E*P,r[15]=g*C+v*S+y*F+E*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*c*u-r*o*h+n*c*h+i*o*d-n*s*d)+e[7]*(+t*s*d-t*c*h+r*a*h-i*a*d+i*c*l-r*s*l)+e[11]*(+t*c*u-t*o*d-r*a*u+n*a*d+r*o*l-n*c*l)+e[15]*(-i*o*l-t*s*u+t*o*h+i*a*u-n*a*h+n*s*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}getInverse(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],A=i[12],g=i[13],v=i[14],y=i[15],E=f*v*h-g*p*h+g*u*m-l*v*m-f*u*y+l*p*y,x=A*p*h-d*v*h-A*u*m+c*v*m+d*u*y-c*p*y,b=d*g*h-A*f*h+A*l*m-c*g*m-d*l*y+c*f*y,B=A*f*u-d*g*u-A*l*p+c*g*p+d*l*v-c*f*v,C=r*E+a*x+o*b+s*B;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/C;return n[0]=E*w,n[1]=(g*p*s-f*v*s-g*o*m+a*v*m+f*o*y-a*p*y)*w,n[2]=(l*v*s-g*u*s+g*o*h-a*v*h-l*o*y+a*u*y)*w,n[3]=(f*u*s-l*p*s-f*o*h+a*p*h+l*o*m-a*u*m)*w,n[4]=x*w,n[5]=(d*v*s-A*p*s+A*o*m-r*v*m-d*o*y+r*p*y)*w,n[6]=(A*u*s-c*v*s-A*o*h+r*v*h+c*o*y-r*u*y)*w,n[7]=(c*p*s-d*u*s+d*o*h-r*p*h-c*o*m+r*u*m)*w,n[8]=b*w,n[9]=(A*f*s-d*g*s-A*a*m+r*g*m+d*a*y-r*f*y)*w,n[10]=(c*g*s-A*l*s+A*a*h-r*g*h-c*a*y+r*l*y)*w,n[11]=(d*l*s-c*f*s-d*a*h+r*f*h+c*a*m-r*l*m)*w,n[12]=B*w,n[13]=(d*g*o-A*f*o+A*a*p-r*g*p-d*a*v+r*f*v)*w,n[14]=(A*l*o-c*g*o-A*a*u+r*g*u+c*a*v-r*l*v)*w,n[15]=(c*f*o-d*l*o+d*a*u-r*f*u-c*a*p+r*l*p)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,c=r*a,l=r*o;return this.set(c*a+n,c*o-i*s,c*s+i*o,0,c*o+i*s,l*o+n,l*s-i*a,0,c*s-i*o,l*s+i*a,r*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,c=r+r,l=a+a,u=o+o,h=r*c,d=r*l,f=r*u,p=a*l,m=a*u,A=o*u,g=s*c,v=s*l,y=s*u,E=n.x,x=n.y,b=n.z;return i[0]=(1-(p+A))*E,i[1]=(d+y)*E,i[2]=(f-v)*E,i[3]=0,i[4]=(d-y)*x,i[5]=(1-(h+A))*x,i[6]=(m+g)*x,i[7]=0,i[8]=(f+v)*b,i[9]=(m-g)*b,i[10]=(1-(h+p))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=vu.set(i[0],i[1],i[2]).length();const a=vu.set(i[4],i[5],i[6]).length(),o=vu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],yu.copy(this);const s=1/r,c=1/a,l=1/o;return yu.elements[0]*=s,yu.elements[1]*=s,yu.elements[2]*=s,yu.elements[4]*=c,yu.elements[5]*=c,yu.elements[6]*=c,yu.elements[8]*=l,yu.elements[9]*=l,yu.elements[10]*=l,t.setFromRotationMatrix(yu),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,s=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),u=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,a){const o=this.elements,s=1/(t-e),c=1/(n-i),l=1/(a-r),u=(t+e)*s,h=(n+i)*c,d=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const vu=new zl,yu=new gu,Eu=new zl(0,0,0),xu=new zl(1,1,1),bu=new zl,Bu=new zl,Cu=new zl;class wu{constructor(e=0,t=0,n=0,i=wu.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const i=Fl.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],c=r[1],l=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,f),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,f));break;case"XZY":this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Mu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Mu,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Du.setFromEuler(this),this.setFromQuaternion(Du,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new zl(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}wu.DefaultOrder="XYZ",wu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Mu=new gu,Du=new kl;class Su{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let _u=0;const Tu=new zl,Iu=new kl,Fu=new gu,Lu=new zl,Ru=new zl,Pu=new zl,Ou=new kl,Nu=new zl(1,0,0),Uu=new zl(0,1,0),Gu=new zl(0,0,1),Hu={type:"added"},Qu={type:"removed"};function ku(){Object.defineProperty(this,"id",{value:_u++}),this.uuid=Fl.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ku.DefaultUp.clone();const e=new zl,t=new wu,n=new kl,i=new zl(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new gu},normalMatrix:{value:new Rl}}),this.matrix=new gu,this.matrixWorld=new gu,this.matrixAutoUpdate=ku.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Su,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}ku.DefaultUp=new zl(0,1,0),ku.DefaultMatrixAutoUpdate=!0,ku.prototype=Object.assign(Object.create(_l.prototype),{constructor:ku,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Iu.setFromAxisAngle(e,t),this.quaternion.multiply(Iu),this},rotateOnWorldAxis:function(e,t){return Iu.setFromAxisAngle(e,t),this.quaternion.premultiply(Iu),this},rotateX:function(e){return this.rotateOnAxis(Nu,e)},rotateY:function(e){return this.rotateOnAxis(Uu,e)},rotateZ:function(e){return this.rotateOnAxis(Gu,e)},translateOnAxis:function(e,t){return Tu.copy(e).applyQuaternion(this.quaternion),this.position.add(Tu.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Nu,e)},translateY:function(e){return this.translateOnAxis(Uu,e)},translateZ:function(e){return this.translateOnAxis(Gu,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Fu.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Lu.copy(e):Lu.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ru.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fu.lookAt(Ru,Lu,this.up):Fu.lookAt(Lu,Ru,this.up),this.quaternion.setFromRotationMatrix(Fu),i&&(Fu.extractRotation(i.matrixWorld),Iu.setFromRotationMatrix(Fu),this.quaternion.premultiply(Iu.inverse()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Hu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Qu)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Qu)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),Fu.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fu),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new zl),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new kl),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ru,e,Pu),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new zl),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ru,Ou,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new zl),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),o=a(e.images),s=a(e.shapes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}});const zu=new zl,Vu=new zl,Wu=new Rl;class ju{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new zl(1,0,0),this.constant=void 0!==t?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=zu.subVectors(n,t).cross(Vu.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new zl),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new zl);const n=e.delta(zu),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new zl),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Wu.getNormalMatrix(e),i=this.coplanarPoint(zu).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const Ju=new zl,Yu=new zl,Xu=new zl,qu=new zl,Ku=new zl,Zu=new zl,$u=new zl,eh=new zl,th=new zl,nh=new zl;class ih{constructor(e,t,n){this.a=void 0!==e?e:new zl,this.b=void 0!==t?t:new zl,this.c=void 0!==n?n:new zl}static getNormal(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new zl),i.subVectors(n,t),Ju.subVectors(e,t),i.cross(Ju);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Ju.subVectors(i,t),Yu.subVectors(n,t),Xu.subVectors(e,t);const a=Ju.dot(Ju),o=Ju.dot(Yu),s=Ju.dot(Xu),c=Yu.dot(Yu),l=Yu.dot(Xu),u=a*c-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new zl),0===u)return r.set(-2,-1,-1);const h=1/u,d=(c*s-o*l)*h,f=(a*l-o*s)*h;return r.set(1-d-f,f,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,qu),qu.x>=0&&qu.y>=0&&qu.x+qu.y<=1}static getUV(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,qu),s.set(0,0),s.addScaledVector(r,qu.x),s.addScaledVector(a,qu.y),s.addScaledVector(o,qu.z),s}static isFrontFacing(e,t,n,i){return Ju.subVectors(n,t),Yu.subVectors(e,t),Ju.cross(Yu).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ju.subVectors(this.c,this.b),Yu.subVectors(this.a,this.b),.5*Ju.cross(Yu).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new zl),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ih.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ju),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ih.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return ih.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return ih.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ih.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new zl);const n=this.a,i=this.b,r=this.c;let a,o;Ku.subVectors(i,n),Zu.subVectors(r,n),eh.subVectors(e,n);const s=Ku.dot(eh),c=Zu.dot(eh);if(s<=0&&c<=0)return t.copy(n);th.subVectors(e,i);const l=Ku.dot(th),u=Zu.dot(th);if(l>=0&&u<=l)return t.copy(i);const h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return a=s/(s-l),t.copy(n).addScaledVector(Ku,a);nh.subVectors(e,r);const d=Ku.dot(nh),f=Zu.dot(nh);if(f>=0&&d<=f)return t.copy(r);const p=d*c-s*f;if(p<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(n).addScaledVector(Zu,o);const m=l*f-d*u;if(m<=0&&u-l>=0&&d-f>=0)return $u.subVectors(r,i),o=(u-l)/(u-l+(d-f)),t.copy(i).addScaledVector($u,o);const A=1/(m+p+h);return a=p*A,o=h*A,t.copy(n).addScaledVector(Ku,a).addScaledVector(Zu,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ah={h:0,s:0,l:0},oh={h:0,s:0,l:0};function sh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function ch(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function lh(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class uh{constructor(e,t,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Fl.euclideanModulo(e,1),t=Fl.clamp(t,0,1),n=Fl.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=sh(r,i,e+1/3),this.g=sh(r,i,e),this.b=sh(r,i,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let e;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[5]),this;if(e=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[5]),this;break;case"hsl":case"hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){const n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[5]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=rh[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t){void 0===t&&(t=2);const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=ch(e.r),this.g=ch(e.g),this.b=ch(e.b),this}copyLinearToSRGB(e){return this.r=lh(e.r),this.g=lh(e.g),this.b=lh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),a=Math.min(t,n,i);let o,s;const c=(a+r)/2;if(a===r)o=0,s=0;else{const e=r-a;switch(s=c<=.5?e/(r+a):e/(2-r-a),r){case t:o=(n-i)/e+(n<i?6:0);break;case n:o=(i-t)/e+2;break;case i:o=(t-n)/e+4}o/=6}return e.h=o,e.s=s,e.l=c,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(ah),ah.h+=e,ah.s+=t,ah.l+=n,this.setHSL(ah.h,ah.s,ah.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpHSL(e,t){this.getHSL(ah),e.getHSL(oh);const n=Fl.lerp(ah.h,oh.h,t),i=Fl.lerp(ah.s,oh.s,t),r=Fl.lerp(ah.l,oh.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}uh.NAMES=rh,uh.prototype.r=1,uh.prototype.g=1,uh.prototype.b=1;class hh{constructor(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new zl,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new uh,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let dh=0;function fh(){Object.defineProperty(this,"id",{value:dh++}),this.uuid=Fl.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Bc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wl,this.stencilZFail=wl,this.stencilZPass=wl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function ph(e){fh.call(this),this.type="MeshBasicMaterial",this.color=new uh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}fh.prototype=Object.assign(Object.create(_l.prototype),{constructor:fh,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(fh.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),ph.prototype=Object.create(fh.prototype),ph.prototype.constructor=ph,ph.prototype.isMeshBasicMaterial=!0,ph.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const mh=new zl,Ah=new Ll;function gh(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Ml,this.updateRange={offset:0,count:-1},this.version=0}function vh(e,t,n){gh.call(this,new Int8Array(e),t,n)}function yh(e,t,n){gh.call(this,new Uint8Array(e),t,n)}function Eh(e,t,n){gh.call(this,new Uint8ClampedArray(e),t,n)}function xh(e,t,n){gh.call(this,new Int16Array(e),t,n)}function bh(e,t,n){gh.call(this,new Uint16Array(e),t,n)}function Bh(e,t,n){gh.call(this,new Int32Array(e),t,n)}function Ch(e,t,n){gh.call(this,new Uint32Array(e),t,n)}function wh(e,t,n){gh.call(this,new Float32Array(e),t,n)}function Mh(e,t,n){gh.call(this,new Float64Array(e),t,n)}Object.defineProperty(gh.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(gh.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new uh),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Ll),t[n++]=r.x,t[n++]=r.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new zl),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Gl),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ah.fromBufferAttribute(this,t),Ah.applyMatrix3(e),this.setXY(t,Ah.x,Ah.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)mh.fromBufferAttribute(this,t),mh.applyMatrix3(e),this.setXYZ(t,mh.x,mh.y,mh.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)mh.x=this.getX(t),mh.y=this.getY(t),mh.z=this.getZ(t),mh.applyMatrix4(e),this.setXYZ(t,mh.x,mh.y,mh.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)mh.x=this.getX(t),mh.y=this.getY(t),mh.z=this.getZ(t),mh.applyNormalMatrix(e),this.setXYZ(t,mh.x,mh.y,mh.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)mh.x=this.getX(t),mh.y=this.getY(t),mh.z=this.getZ(t),mh.transformDirection(e),this.setXYZ(t,mh.x,mh.y,mh.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),vh.prototype=Object.create(gh.prototype),vh.prototype.constructor=vh,yh.prototype=Object.create(gh.prototype),yh.prototype.constructor=yh,Eh.prototype=Object.create(gh.prototype),Eh.prototype.constructor=Eh,xh.prototype=Object.create(gh.prototype),xh.prototype.constructor=xh,bh.prototype=Object.create(gh.prototype),bh.prototype.constructor=bh,Bh.prototype=Object.create(gh.prototype),Bh.prototype.constructor=Bh,Ch.prototype=Object.create(gh.prototype),Ch.prototype.constructor=Ch,wh.prototype=Object.create(gh.prototype),wh.prototype.constructor=wh,Mh.prototype=Object.create(gh.prototype),Mh.prototype.constructor=Mh;class Dh{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let n,i,r=void 0;const a=e.faces;for(i=0;i<a.length;i++){const e=a[i];e.materialIndex!==r&&(r=e.materialIndex,void 0!==n&&(n.count=3*i-n.start,t.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,t.push(n)),this.groups=t}fromGeometry(e){const t=e.faces,n=e.vertices,i=e.faceVertexUvs,r=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,o=e.morphTargets,s=o.length;let c;if(s>0){c=[];for(let e=0;e<s;e++)c[e]={name:o[e].name,data:[]};this.morphTargets.position=c}const l=e.morphNormals,u=l.length;let h;if(u>0){h=[];for(let e=0;e<u;e++)h[e]={name:l[e].name,data:[]};this.morphTargets.normal=h}const d=e.skinIndices,f=e.skinWeights,p=d.length===n.length,m=f.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<t.length;e++){const A=t[e];this.vertices.push(n[A.a],n[A.b],n[A.c]);const g=A.vertexNormals;if(3===g.length)this.normals.push(g[0],g[1],g[2]);else{const e=A.normal;this.normals.push(e,e,e)}const v=A.vertexColors;if(3===v.length)this.colors.push(v[0],v[1],v[2]);else{const e=A.color;this.colors.push(e,e,e)}if(!0===r){const t=i[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new Ll,new Ll,new Ll))}if(!0===a){const t=i[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new Ll,new Ll,new Ll))}for(let e=0;e<s;e++){const t=o[e].vertices;c[e].data.push(t[A.a],t[A.b],t[A.c])}for(let t=0;t<u;t++){const n=l[t].vertexNormals[e];h[t].data.push(n.a,n.b,n.c)}p&&this.skinIndices.push(d[A.a],d[A.b],d[A.c]),m&&this.skinWeights.push(f[A.a],f[A.b],f[A.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}function Sh(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}let _h=1;const Th=new gu,Ih=new ku,Fh=new zl,Lh=new jl,Rh=new jl,Ph=new zl;function Oh(){Object.defineProperty(this,"id",{value:_h+=2}),this.uuid=Fl.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Oh.prototype=Object.assign(Object.create(_l.prototype),{constructor:Oh,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(Sh(e)>65535?Ch:bh)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Rl).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Th.makeRotationX(e),this.applyMatrix4(Th),this},rotateY:function(e){return Th.makeRotationY(e),this.applyMatrix4(Th),this},rotateZ:function(e){return Th.makeRotationZ(e),this.applyMatrix4(Th),this},translate:function(e,t,n){return Th.makeTranslation(e,t,n),this.applyMatrix4(Th),this},scale:function(e,t,n){return Th.makeScale(e,t,n),this.applyMatrix4(Th),this},lookAt:function(e){return Ih.lookAt(e),Ih.updateMatrix(),this.applyMatrix4(Ih.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fh).negate(),this.translate(Fh.x,Fh.y,Fh.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const e=new wh(3*t.vertices.length,3),n=new wh(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new wh(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new wh(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Dh).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new gh(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const t=new Float32Array(3*e.normals.length);this.setAttribute("normal",new gh(t,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const t=new Float32Array(3*e.colors.length);this.setAttribute("color",new gh(t,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const t=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new gh(t,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const t=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new gh(t,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const t in e.morphTargets){const n=[],i=e.morphTargets[t];for(let e=0,t=i.length;e<t;e++){const t=i[e],r=new wh(3*t.data.length,3);r.name=t.name,n.push(r.copyVector3sArray(t.data))}this.morphAttributes[t]=n}if(e.skinIndices.length>0){const t=new wh(4*e.skinIndices.length,4);this.setAttribute("skinIndex",t.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const t=new wh(4*e.skinWeights.length,4);this.setAttribute("skinWeight",t.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new jl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new zl(-1/0,-1/0,-1/0),new zl(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Lh.setFromBufferAttribute(n),this.morphTargetsRelative?(Ph.addVectors(this.boundingBox.min,Lh.min),this.boundingBox.expandByPoint(Ph),Ph.addVectors(this.boundingBox.max,Lh.max),this.boundingBox.expandByPoint(Ph)):(this.boundingBox.expandByPoint(Lh.min),this.boundingBox.expandByPoint(Lh.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new cu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new zl,1/0);if(e){const n=this.boundingSphere.center;if(Lh.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Rh.setFromBufferAttribute(n),this.morphTargetsRelative?(Ph.addVectors(Lh.min,Rh.min),Lh.expandByPoint(Ph),Ph.addVectors(Lh.max,Rh.max),Lh.expandByPoint(Ph)):(Lh.expandByPoint(Rh.min),Lh.expandByPoint(Rh.max))}Lh.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Ph.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Ph));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],o=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)Ph.fromBufferAttribute(a,t),o&&(Fh.fromBufferAttribute(e,t),Ph.add(Fh)),i=Math.max(i,n.distanceToSquared(Ph))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new gh(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new zl,r=new zl,a=new zl,o=new zl,s=new zl,c=new zl,l=new zl,u=new zl;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),l.subVectors(a,r),u.subVectors(i,r),l.cross(u),o.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),c.fromBufferAttribute(n,p),o.add(l),s.add(l),c.add(l),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,c.x,c.y,c.z)}else for(let e=0,o=t.count;e<o;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),l.subVectors(a,r),u.subVectors(i,r),l.cross(u),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,a=e.attributes[i],o=a.array,s=a.itemSize*t,c=Math.min(o.length,r.length-s);for(let e=0,t=s;e<c;e++,t++)r[t]=o[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ph.fromBufferAttribute(e,t),Ph.normalize(),e.setXYZ(t,Ph.x,Ph.y,Ph.z)},toNonIndexed:function(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let o=0,s=0;for(let e=0,r=t.length;e<r;e++){o=t[e]*i;for(let e=0;e<i;e++)a[s++]=n[o++]}return new gh(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new Oh,n=this.index.array,i=this.attributes;for(const r in i){const a=e(i[r],n);t.setAttribute(r,a)}const r=this.morphAttributes;for(const i in r){const a=[],o=r[i];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);a.push(i)}t.morphAttributes[i]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),e.data.attributes[t]=r}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),a.push(r)}a.length>0&&(i[t]=a,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e},clone:function(){return(new Oh).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Nh=new gu,Uh=new Au,Gh=new cu,Hh=new zl,Qh=new zl,kh=new zl,zh=new zl,Vh=new zl,Wh=new zl,jh=new zl,Jh=new zl,Yh=new zl,Xh=new Ll,qh=new Ll,Kh=new Ll,Zh=new zl,$h=new zl;function ed(e,t){ku.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Oh,this.material=void 0!==t?t:new ph,this.updateMorphTargets()}function td(e,t,n,i,r,a,o,s){let c;if(c=1===t.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==t.side,s),null===c)return null;$h.copy(s),$h.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo($h);return l<n.near||l>n.far?null:{distance:l,point:$h.clone(),object:e}}function nd(e,t,n,i,r,a,o,s,c,l,u,h){Hh.fromBufferAttribute(r,l),Qh.fromBufferAttribute(r,u),kh.fromBufferAttribute(r,h);const d=e.morphTargetInfluences;if(t.morphTargets&&a&&d){jh.set(0,0,0),Jh.set(0,0,0),Yh.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=d[e],n=a[e];0!==t&&(zh.fromBufferAttribute(n,l),Vh.fromBufferAttribute(n,u),Wh.fromBufferAttribute(n,h),o?(jh.addScaledVector(zh,t),Jh.addScaledVector(Vh,t),Yh.addScaledVector(Wh,t)):(jh.addScaledVector(zh.sub(Hh),t),Jh.addScaledVector(Vh.sub(Qh),t),Yh.addScaledVector(Wh.sub(kh),t)))}Hh.add(jh),Qh.add(Jh),kh.add(Yh)}e.isSkinnedMesh&&(e.boneTransform(l,Hh),e.boneTransform(u,Qh),e.boneTransform(h,kh));const f=td(e,t,n,i,Hh,Qh,kh,Zh);if(f){s&&(Xh.fromBufferAttribute(s,l),qh.fromBufferAttribute(s,u),Kh.fromBufferAttribute(s,h),f.uv=ih.getUV(Zh,Hh,Qh,kh,Xh,qh,Kh,new Ll)),c&&(Xh.fromBufferAttribute(c,l),qh.fromBufferAttribute(c,u),Kh.fromBufferAttribute(c,h),f.uv2=ih.getUV(Zh,Hh,Qh,kh,Xh,qh,Kh,new Ll));const e=new hh(l,u,h);ih.getNormal(Hh,Qh,kh,e.normal),f.face=e}return f}ed.prototype=Object.assign(Object.create(ku.prototype),{constructor:ed,isMesh:!0,copy:function(e){return ku.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Gh.copy(n.boundingSphere),Gh.applyMatrix4(r),!1===e.ray.intersectsSphere(Gh))return;if(Nh.getInverse(r),Uh.copy(e.ray).applyMatrix4(Nh),null!==n.boundingBox&&!1===Uh.intersectsBox(n.boundingBox))return;let a;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,f=h.length;n<f;n++){const f=h[n],p=i[f.materialIndex];for(let n=Math.max(f.start,d.start),i=Math.min(f.start+f.count,d.start+d.count);n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);a=nd(this,p,e,Uh,o,s,c,l,u,i,h,d),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=f.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);n<h;n+=3){const h=r.getX(n),d=r.getX(n+1),f=r.getX(n+2);a=nd(this,i,e,Uh,o,s,c,l,u,h,d,f),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}else if(void 0!==o)if(Array.isArray(i))for(let n=0,r=h.length;n<r;n++){const r=h[n],f=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(r.start+r.count,d.start+d.count);n<i;n+=3){a=nd(this,f,e,Uh,o,s,c,l,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),a.face.materialIndex=r.materialIndex,t.push(a))}}else{for(let n=Math.max(0,d.start),r=Math.min(o.count,d.start+d.count);n<r;n+=3){a=nd(this,i,e,Uh,o,s,c,l,u,n,n+1,n+2),a&&(a.faceIndex=Math.floor(n/3),t.push(a))}}}else if(n.isGeometry){const r=Array.isArray(i),o=n.vertices,s=n.faces;let c;const l=n.faceVertexUvs[0];l.length>0&&(c=l);for(let n=0,l=s.length;n<l;n++){const l=s[n],u=r?i[l.materialIndex]:i;if(void 0===u)continue;const h=o[l.a],d=o[l.b],f=o[l.c];if(a=td(this,u,e,Uh,h,d,f,Zh),a){if(c&&c[n]){const e=c[n];Xh.copy(e[0]),qh.copy(e[1]),Kh.copy(e[2]),a.uv=ih.getUV(Zh,h,d,f,Xh,qh,Kh,new Ll)}a.face=l,a.faceIndex=n,t.push(a)}}}}});class id extends Oh{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const o=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const s=[],c=[],l=[],u=[];let h=0,d=0;function f(e,t,n,i,r,a,f,p,m,A,g){const v=a/m,y=f/A,E=a/2,x=f/2,b=p/2,B=m+1,C=A+1;let w=0,M=0;const D=new zl;for(let a=0;a<C;a++){const o=a*y-x;for(let s=0;s<B;s++){const h=s*v-E;D[e]=h*i,D[t]=o*r,D[n]=b,c.push(D.x,D.y,D.z),D[e]=0,D[t]=0,D[n]=p>0?1:-1,l.push(D.x,D.y,D.z),u.push(s/m),u.push(1-a/A),w+=1}}for(let e=0;e<A;e++)for(let t=0;t<m;t++){const n=h+t+B*e,i=h+t+B*(e+1),r=h+(t+1)+B*(e+1),a=h+(t+1)+B*e;s.push(n,i,a),s.push(i,r,a),M+=6}o.addGroup(d,M,g),d+=M,h+=w}f("z","y","x",-1,-1,n,t,e,a,r,0),f("z","y","x",1,-1,n,t,-e,a,r,1),f("x","z","y",1,1,e,n,t,i,a,2),f("x","z","y",1,-1,e,n,-t,i,a,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new wh(c,3)),this.setAttribute("normal",new wh(l,3)),this.setAttribute("uv",new wh(u,2))}}function rd(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function ad(e){const t={};for(let n=0;n<e.length;n++){const i=rd(e[n]);for(const e in i)t[e]=i[e]}return t}const od={clone:rd,merge:ad};function sd(e){fh.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function cd(){ku.call(this),this.type="Camera",this.matrixWorldInverse=new gu,this.projectionMatrix=new gu,this.projectionMatrixInverse=new gu}function ld(e,t,n,i){cd.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}sd.prototype=Object.create(fh.prototype),sd.prototype.constructor=sd,sd.prototype.isShaderMaterial=!0,sd.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rd(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},sd.prototype.toJSON=function(e){const t=fh.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},cd.prototype=Object.assign(Object.create(ku.prototype),{constructor:cd,isCamera:!0,copy:function(e,t){return ku.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new zl),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){ku.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){ku.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ld.prototype=Object.assign(Object.create(cd.prototype),{constructor:ld,isPerspectiveCamera:!0,copy:function(e,t){return cd.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Fl.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*Fl.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Fl.RAD2DEG*Math.atan(Math.tan(.5*Fl.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*Fl.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/o,i*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=ku.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const ud=90;function hd(e,t,n){if(ku.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new ld(ud,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new zl(1,0,0)),this.add(i);const r=new ld(ud,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new zl(-1,0,0)),this.add(r);const a=new ld(ud,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new zl(0,1,0)),this.add(a);const o=new ld(ud,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new zl(0,-1,0)),this.add(o);const s=new ld(ud,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new zl(0,0,1)),this.add(s);const c=new ld(ud,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new zl(0,0,-1)),this.add(c),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const l=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=l}}function dd(e,t,n,i,r,a,o,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:wc,o=void 0!==o?o:jc,Ul.call(this,e,t,n,i,r,a,o,s,c,l),this.flipY=!1,this._needsFlipEnvMap=!0}function fd(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),Hl.call(this,e,e,t),t=t||{},this.texture=new dd(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}function pd(e,t,n,i,r,a,o,s,c,l,u,h){Ul.call(this,null,a,o,s,c,l,i,r,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==c?c:Rc,this.minFilter=void 0!==l?l:Rc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}hd.prototype=Object.create(ku.prototype),hd.prototype.constructor=hd,dd.prototype=Object.create(Ul.prototype),dd.prototype.constructor=dd,dd.prototype.isCubeTexture=!0,Object.defineProperty(dd.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),fd.prototype=Object.create(Hl.prototype),fd.prototype.constructor=fd,fd.prototype.isWebGLCubeRenderTarget=!0,fd.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=Jc,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},i=new id(5,5,5),r=new sd({name:"CubemapFromEquirect",uniforms:rd(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const a=new ed(i,r),o=t.minFilter;t.minFilter===Gc&&(t.minFilter=Nc);return new hd(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this},fd.prototype.clear=function(e,t,n,i){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)},pd.prototype=Object.create(Ul.prototype),pd.prototype.constructor=pd,pd.prototype.isDataTexture=!0;const md=new cu,Ad=new zl;class gd{constructor(e,t,n,i,r,a){this.planes=[void 0!==e?e:new ju,void 0!==t?t:new ju,void 0!==n?n:new ju,void 0!==i?i:new ju,void 0!==r?r:new ju,void 0!==a?a:new ju]}set(e,t,n,i,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],A=n[13],g=n[14],v=n[15];return t[0].setComponents(o-i,u-s,p-h,v-m).normalize(),t[1].setComponents(o+i,u+s,p+h,v+m).normalize(),t[2].setComponents(o+r,u+c,p+d,v+A).normalize(),t[3].setComponents(o-r,u-c,p-d,v-A).normalize(),t[4].setComponents(o-a,u-l,p-f,v-g).normalize(),t[5].setComponents(o+a,u+l,p+f,v+g).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),md.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(md)}intersectsSprite(e){return md.center.set(0,0,0),md.radius=.7071067811865476,md.applyMatrix4(e.matrixWorld),this.intersectsSphere(md)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ad.x=i.normal.x>0?e.max.x:e.min.x,Ad.y=i.normal.y>0?e.max.y:e.min.y,Ad.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ad)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}function vd(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function yd(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){var a=i.get(t);return void((!a||a.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=i.get(t);void 0===o?i.set(t,function(t,n){const i=t.array,r=t.usage,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();let o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(!function(t,i,r){const a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,r),o.version=t.version)}}}class Ed extends Oh{constructor(e,t,n,i){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=(e=e||1)/2,a=(t=t||1)/2,o=Math.floor(n)||1,s=Math.floor(i)||1,c=o+1,l=s+1,u=e/o,h=t/s,d=[],f=[],p=[],m=[];for(let e=0;e<l;e++){const t=e*h-a;for(let n=0;n<c;n++){const i=n*u-r;f.push(i,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){const n=t+c*e,i=t+c*(e+1),r=t+1+c*(e+1),a=t+1+c*e;d.push(n,i,a),d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new wh(f,3)),this.setAttribute("normal",new wh(p,3)),this.setAttribute("uv",new wh(m,2))}}const xd={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},bd={common:{diffuse:{value:new uh(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Rl},uv2Transform:{value:new Rl},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ll(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new uh(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new uh(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rl}},sprite:{diffuse:{value:new uh(15658734)},opacity:{value:1},center:{value:new Ll(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rl}}},Bd={basic:{uniforms:ad([bd.common,bd.specularmap,bd.envmap,bd.aomap,bd.lightmap,bd.fog]),vertexShader:xd.meshbasic_vert,fragmentShader:xd.meshbasic_frag},lambert:{uniforms:ad([bd.common,bd.specularmap,bd.envmap,bd.aomap,bd.lightmap,bd.emissivemap,bd.fog,bd.lights,{emissive:{value:new uh(0)}}]),vertexShader:xd.meshlambert_vert,fragmentShader:xd.meshlambert_frag},phong:{uniforms:ad([bd.common,bd.specularmap,bd.envmap,bd.aomap,bd.lightmap,bd.emissivemap,bd.bumpmap,bd.normalmap,bd.displacementmap,bd.fog,bd.lights,{emissive:{value:new uh(0)},specular:{value:new uh(1118481)},shininess:{value:30}}]),vertexShader:xd.meshphong_vert,fragmentShader:xd.meshphong_frag},standard:{uniforms:ad([bd.common,bd.envmap,bd.aomap,bd.lightmap,bd.emissivemap,bd.bumpmap,bd.normalmap,bd.displacementmap,bd.roughnessmap,bd.metalnessmap,bd.fog,bd.lights,{emissive:{value:new uh(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xd.meshphysical_vert,fragmentShader:xd.meshphysical_frag},toon:{uniforms:ad([bd.common,bd.aomap,bd.lightmap,bd.emissivemap,bd.bumpmap,bd.normalmap,bd.displacementmap,bd.gradientmap,bd.fog,bd.lights,{emissive:{value:new uh(0)}}]),vertexShader:xd.meshtoon_vert,fragmentShader:xd.meshtoon_frag},matcap:{uniforms:ad([bd.common,bd.bumpmap,bd.normalmap,bd.displacementmap,bd.fog,{matcap:{value:null}}]),vertexShader:xd.meshmatcap_vert,fragmentShader:xd.meshmatcap_frag},points:{uniforms:ad([bd.points,bd.fog]),vertexShader:xd.points_vert,fragmentShader:xd.points_frag},dashed:{uniforms:ad([bd.common,bd.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xd.linedashed_vert,fragmentShader:xd.linedashed_frag},depth:{uniforms:ad([bd.common,bd.displacementmap]),vertexShader:xd.depth_vert,fragmentShader:xd.depth_frag},normal:{uniforms:ad([bd.common,bd.bumpmap,bd.normalmap,bd.displacementmap,{opacity:{value:1}}]),vertexShader:xd.normal_vert,fragmentShader:xd.normal_frag},sprite:{uniforms:ad([bd.sprite,bd.fog]),vertexShader:xd.sprite_vert,fragmentShader:xd.sprite_frag},background:{uniforms:{uvTransform:{value:new Rl},t2D:{value:null}},vertexShader:xd.background_vert,fragmentShader:xd.background_frag},cube:{uniforms:ad([bd.envmap,{opacity:{value:1}}]),vertexShader:xd.cube_vert,fragmentShader:xd.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xd.equirect_vert,fragmentShader:xd.equirect_frag},distanceRGBA:{uniforms:ad([bd.common,bd.displacementmap,{referencePosition:{value:new zl},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xd.distanceRGBA_vert,fragmentShader:xd.distanceRGBA_frag},shadow:{uniforms:ad([bd.lights,bd.fog,{color:{value:new uh(0)},opacity:{value:1}}]),vertexShader:xd.shadow_vert,fragmentShader:xd.shadow_frag}};function Cd(e,t,n,i,r){const a=new uh(0);let o,s,c=0,l=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),c=void 0!==t?t:1,d(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,d(a,c)},render:function(n,r,f,p){let m=!0===r.isScene?r.background:null;m&&m.isTexture&&(m=t.get(m));const A=e.xr,g=A.getSession&&A.getSession();g&&"additive"===g.environmentBlendMode&&(m=null),null===m?d(a,c):m&&m.isColor&&(d(m,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.mapping===_c)?(void 0===s&&(s=new ed(new id(1,1,1),new sd({name:"BackgroundCubeMaterial",uniforms:rd(Bd.cube.uniforms),vertexShader:Bd.cube.vertexShader,fragmentShader:Bd.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),m.isWebGLCubeRenderTarget&&(m=m.texture),s.material.uniforms.envMap.value=m,s.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,l===m&&u===m.version&&h===e.toneMapping||(s.material.needsUpdate=!0,l=m,u=m.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):m&&m.isTexture&&(void 0===o&&(o=new ed(new Ed(2,2),new sd({name:"BackgroundMaterial",uniforms:rd(Bd.background.uniforms),vertexShader:Bd.background.vertexShader,fragmentShader:Bd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),o.material.uniforms.uvTransform.value.copy(m.matrix),l===m&&u===m.version&&h===e.toneMapping||(o.material.needsUpdate=!0,l=m,u=m.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function wd(e,t,n,i){const r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},c=d(null);let l=c;function u(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,r){const a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function A(){const t=l.newAttributes,n=l.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function g(t,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,s):e.vertexAttribIPointer(t,n,r,o,s)}function v(){y(),l!==c&&(l=c,u(l.object))}function y(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(r,c,h,v,y){let E=!1;if(o){const t=function(t,n,r){const o=!0===r.wireframe;let c=s[t.id];void 0===c&&(c={},s[t.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[o];void 0===u&&(u=d(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=u);return u}(v,h,c);l!==t&&(l=t,u(l.object)),E=function(e,t){const n=l.attributes,i=e.attributes;if(Object.keys(n).length!==Object.keys(i).length)return!0;for(const e in i){const t=n[e],r=i[e];if(void 0===t)return!0;if(t.attribute!==r)return!0;if(t.data!==r.data)return!0}return l.index!==t}(v,y),E&&function(e,t){const n={},i=e.attributes;for(const e in i){const t=i[e],r={};r.attribute=t,t.data&&(r.data=t.data),n[e]=r}l.attributes=n,l.index=t}(v,y)}else{const e=!0===c.wireframe;l.geometry===v.id&&l.program===h.id&&l.wireframe===e||(l.geometry=v.id,l.program=h.id,l.wireframe=e,E=!0)}!0===r.isInstancedMesh&&(E=!0),null!==y&&n.update(y,34963),E&&(!function(r,a,o,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const c=s.attributes,l=o.getAttributes(),u=a.defaultAttributeValues;for(const t in l){const i=l[t];if(i>=0){const a=c[t];if(void 0!==a){const t=a.normalized,r=a.itemSize,o=n.get(a);if(void 0===o)continue;const c=o.buffer,l=o.type,u=o.bytesPerElement;if(a.isInterleavedBufferAttribute){const n=a.data,o=n.stride,h=a.offset;n&&n.isInstancedInterleavedBuffer?(m(i,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(i),e.bindBuffer(34962,c),g(i,r,l,t,o*u,h*u)}else a.isInstancedBufferAttribute?(m(i,a.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)):p(i),e.bindBuffer(34962,c),g(i,r,l,t,0,0)}else if("instanceMatrix"===t){const t=n.get(r.instanceMatrix);if(void 0===t)continue;const a=t.buffer,o=t.type;m(i+0,1),m(i+1,1),m(i+2,1),m(i+3,1),e.bindBuffer(34962,a),e.vertexAttribPointer(i+0,4,o,!1,64,0),e.vertexAttribPointer(i+1,4,o,!1,64,16),e.vertexAttribPointer(i+2,4,o,!1,64,32),e.vertexAttribPointer(i+3,4,o,!1,64,48)}else if("instanceColor"===t){const t=n.get(r.instanceColor);if(void 0===t)continue;const a=t.buffer,o=t.type;m(i,1),e.bindBuffer(34962,a),e.vertexAttribPointer(i,3,o,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i,n);break;case 3:e.vertexAttrib3fv(i,n);break;case 4:e.vertexAttrib4fv(i,n);break;default:e.vertexAttrib1fv(i,n)}}}}A()}(r,c,h,v),null!==y&&e.bindBuffer(34963,n.get(y).buffer))},reset:v,resetDefaultState:y,dispose:function(){v();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:A}}function Md(e,t,n,i){const r=i.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,i){e.drawArrays(a,t,i),n.update(i,a,1)},this.renderInstances=function(i,o,s){if(0===s)return;let c,l;if(r)c=e,l="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](a,i,o,s),n.update(o,a,s)}}function Dd(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),f=e.getParameter(34921),p=e.getParameter(36347),m=e.getParameter(36348),A=e.getParameter(36349),g=u>0,v=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;const n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:A,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:a?e.getParameter(36183):0}}function Sd(e){const t=this;let n=null,i=0,r=!1,a=!1;const o=new ju,s=new Rl,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,r){const a=null!==e?e.length:0;let l=null;if(0!==a){if(l=c.value,!0!==r||null===l){const t=i+4*a,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===l||l.length<t)&&(l=new Float32Array(t));for(let t=0,n=i;t!==a;++t,n+=4)o.copy(e[t]).applyMatrix4(r,s),o.normal.toArray(l,n),l[n+3]=o.constant}c.value=l,c.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){const o=0!==e.length||t||0!==i||r;return r=t,n=u(e,a,0),i=e.length,o},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1,l()},this.setState=function(t,o,s){const h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!r||null===h||0===h.length||a&&!f)a?u(null):l();else{const e=a?0:i,t=4*e;let r=p.clippingState||null;c.value=r,r=u(h,o,t,s);for(let e=0;e!==t;++e)r[e]=n[e];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function _d(e){let t=new WeakMap;function n(e,t){return t===Dc?e.mapping=wc:t===Sc&&(e.mapping=Mc),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(a===Dc||a===Sc){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const o=e.getRenderList(),s=e.getRenderTarget(),c=e.getRenderState(),l=new fd(a.height/2);return l.fromEquirectangularTexture(e,r),t.set(r,l),e.setRenderTarget(s),e.setRenderList(o),e.setRenderState(c),r.addEventListener("dispose",i),n(l.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}function Td(e){const t={};return{has:function(n){if(void 0!==t[n])return null!==t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,null!==i},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function Id(e,t,n,i){const r=new WeakMap,a=new WeakMap;function o(e){const s=e.target,c=r.get(s);null!==c.index&&t.remove(c.index);for(const e in c.attributes)t.remove(c.attributes[e]);s.removeEventListener("dispose",o),r.delete(s);const l=a.get(c);l&&(t.remove(l),a.delete(c)),i.releaseStatesOfGeometry(c),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let o=0;if(null!==i){const e=i.array;o=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{const e=r.array;o=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const s=new(Sh(n)>65535?Ch:bh)(n,1);s.version=o;const c=a.get(e);c&&t.remove(c),a.set(e,s)}return{get:function(e,t){let i=r.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Oh).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const i=e.morphAttributes;for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Fd(e,t,n,i){const r=i.isWebGL2;let a,o,s;this.setMode=function(e){a=e},this.setIndex=function(e){o=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(a,i,o,t*s),n.update(i,a,1)},this.renderInstances=function(i,c,l){if(0===l)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,c,o,i*s,l),n.update(c,a,l)}}function Ld(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Rd(e,t){return e[0]-t[0]}function Pd(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Od(e){const t={},n=new Float32Array(8),i=[];for(let e=0;e<8;e++)i[e]=[e,0];return{update:function(r,a,o,s){const c=r.morphTargetInfluences,l=void 0===c?0:c.length;let u=t[a.id];if(void 0===u){u=[];for(let e=0;e<l;e++)u[e]=[e,0];t[a.id]=u}for(let e=0;e<l;e++){const t=u[e];t[0]=e,t[1]=c[e]}u.sort(Pd);for(let e=0;e<8;e++)e<l&&u[e][1]?(i[e][0]=u[e][0],i[e][1]=u[e][1]):(i[e][0]=Number.MAX_SAFE_INTEGER,i[e][1]=0);i.sort(Rd);const h=o.morphTargets&&a.morphAttributes.position,d=o.morphNormals&&a.morphAttributes.normal;let f=0;for(let e=0;e<8;e++){const t=i[e],r=t[0],o=t[1];r!==Number.MAX_SAFE_INTEGER&&o?(h&&a.getAttribute("morphTarget"+e)!==h[r]&&a.setAttribute("morphTarget"+e,h[r]),d&&a.getAttribute("morphNormal"+e)!==d[r]&&a.setAttribute("morphNormal"+e,d[r]),n[e]=o,f+=o):(h&&void 0!==a.getAttribute("morphTarget"+e)&&a.deleteAttribute("morphTarget"+e),d&&void 0!==a.getAttribute("morphNormal"+e)&&a.deleteAttribute("morphNormal"+e),n[e]=0)}const p=a.morphTargetsRelative?1:1-f;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Nd(e,t,n,i){let r=new WeakMap;return{update:function(e){const a=i.render.frame,o=e.geometry,s=t.get(e,o);return r.get(s)!==a&&(o.isGeometry&&s.updateFromObject(e),t.update(s),r.set(s,a)),e.isInstancedMesh&&(n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),s},dispose:function(){r=new WeakMap}}}function Ud(e,t,n,i){Ul.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Rc,this.minFilter=Rc,this.wrapR=Fc,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Gd(e,t,n,i){Ul.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Rc,this.minFilter=Rc,this.wrapR=Fc,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Bd.physical={uniforms:ad([Bd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ll(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new uh(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:xd.meshphysical_vert,fragmentShader:xd.meshphysical_frag},Ud.prototype=Object.create(Ul.prototype),Ud.prototype.constructor=Ud,Ud.prototype.isDataTexture2DArray=!0,Gd.prototype=Object.create(Ul.prototype),Gd.prototype.constructor=Gd,Gd.prototype.isDataTexture3D=!0;const Hd=new Ul,Qd=new Ud,kd=new Gd,zd=new dd,Vd=[],Wd=[],jd=new Float32Array(16),Jd=new Float32Array(9),Yd=new Float32Array(4);function Xd(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=Vd[r];if(void 0===a&&(a=new Float32Array(r),Vd[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function qd(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Kd(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Zd(e,t){let n=Wd[t];void 0===n&&(n=new Int32Array(t),Wd[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function $d(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ef(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(qd(n,t))return;e.uniform2fv(this.addr,t),Kd(n,t)}}function tf(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(qd(n,t))return;e.uniform3fv(this.addr,t),Kd(n,t)}}function nf(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(qd(n,t))return;e.uniform4fv(this.addr,t),Kd(n,t)}}function rf(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(qd(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Kd(n,t)}else{if(qd(n,i))return;Yd.set(i),e.uniformMatrix2fv(this.addr,!1,Yd),Kd(n,i)}}function af(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(qd(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Kd(n,t)}else{if(qd(n,i))return;Jd.set(i),e.uniformMatrix3fv(this.addr,!1,Jd),Kd(n,i)}}function of(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(qd(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Kd(n,t)}else{if(qd(n,i))return;jd.set(i),e.uniformMatrix4fv(this.addr,!1,jd),Kd(n,i)}}function sf(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Hd,r)}function cf(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Qd,r)}function lf(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||kd,r)}function uf(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||zd,r)}function hf(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function df(e,t){const n=this.cache;qd(n,t)||(e.uniform2iv(this.addr,t),Kd(n,t))}function ff(e,t){const n=this.cache;qd(n,t)||(e.uniform3iv(this.addr,t),Kd(n,t))}function pf(e,t){const n=this.cache;qd(n,t)||(e.uniform4iv(this.addr,t),Kd(n,t))}function mf(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Af(e,t){e.uniform1fv(this.addr,t)}function gf(e,t){e.uniform1iv(this.addr,t)}function vf(e,t){e.uniform2iv(this.addr,t)}function yf(e,t){e.uniform3iv(this.addr,t)}function Ef(e,t){e.uniform4iv(this.addr,t)}function xf(e,t){const n=Xd(t,this.size,2);e.uniform2fv(this.addr,n)}function bf(e,t){const n=Xd(t,this.size,3);e.uniform3fv(this.addr,n)}function Bf(e,t){const n=Xd(t,this.size,4);e.uniform4fv(this.addr,n)}function Cf(e,t){const n=Xd(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function wf(e,t){const n=Xd(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Mf(e,t){const n=Xd(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Df(e,t,n){const i=t.length,r=Zd(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTexture2D(t[e]||Hd,r[e])}function Sf(e,t,n){const i=t.length,r=Zd(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTextureCube(t[e]||zd,r[e])}function _f(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return $d;case 35664:return ef;case 35665:return tf;case 35666:return nf;case 35674:return rf;case 35675:return af;case 35676:return of;case 5124:case 35670:return hf;case 35667:case 35671:return df;case 35668:case 35672:return ff;case 35669:case 35673:return pf;case 5125:return mf;case 35678:case 36198:case 36298:case 36306:case 35682:return sf;case 35679:case 36299:case 36307:return lf;case 35680:case 36300:case 36308:case 36293:return uf;case 36289:case 36303:case 36311:case 36292:return cf}}(t.type)}function Tf(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Af;case 35664:return xf;case 35665:return bf;case 35666:return Bf;case 35674:return Cf;case 35675:return wf;case 35676:return Mf;case 5124:case 35670:return gf;case 35667:case 35671:return vf;case 35668:case 35672:return yf;case 35669:case 35673:return Ef;case 35678:case 36198:case 36298:case 36306:case 35682:return Df;case 35680:case 36300:case 36308:case 36293:return Sf}}(t.type)}function If(e){this.id=e,this.seq=[],this.map={}}Tf.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Kd(t,e)},If.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}};const Ff=/([\w\d_]+)(\])?(\[|\.)?/g;function Lf(e,t){e.seq.push(t),e.map[t.id]=t}function Rf(e,t,n){const i=e.name,r=i.length;for(Ff.lastIndex=0;;){const a=Ff.exec(i),o=Ff.lastIndex;let s=a[1];const c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){Lf(n,void 0===l?new _f(s,e,t):new Tf(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new If(s),Lf(n,e)),n=e}}}function Pf(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Rf(n,e.getUniformLocation(t,n.name),this)}}function Of(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Pf.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Pf.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},Pf.upload=function(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,i)}},Pf.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let Nf=0;function Uf(e){switch(e){case gl:return["Linear","( value )"];case vl:return["sRGB","( value )"];case El:return["RGBE","( value )"];case xl:return["RGBM","( value, 7.0 )"];case bl:return["RGBM","( value, 16.0 )"];case Bl:return["RGBD","( value, 256.0 )"];case yl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Gf(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Hf(e,t){const n=Uf(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Qf(e,t){const n=Uf(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function kf(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function zf(e){return""!==e}function Vf(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Wf(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const jf=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jf(e){return e.replace(jf,Yf)}function Yf(e,t){const n=xd[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Jf(n)}const Xf=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,qf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Kf(e){return e.replace(qf,$f).replace(Xf,Zf)}function Zf(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),$f(e,t,n,i)}function $f(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function ep(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function tp(e,t,n,i){const r=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const c=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case wc:case Mc:t="ENVMAP_TYPE_CUBE";break;case _c:case Tc:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Mc:case Tc:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zf).join("\n")}(n),p=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),m=r.createProgram();let A,g,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(A=[p].filter(zf).join("\n"),A.length>0&&(A+="\n"),g=[f,p].filter(zf).join("\n"),g.length>0&&(g+="\n")):(A=[ep(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zf).join("\n"),g=[f,ep(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?xd.tonemapping_pars_fragment:"",0!==n.toneMapping?kf("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",xd.encodings_pars_fragment,n.map?Hf("mapTexelToLinear",n.mapEncoding):"",n.matcap?Hf("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Hf("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Hf("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Hf("lightMapTexelToLinear",n.lightMapEncoding):"",Qf("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(zf).join("\n")),o=Jf(o),o=Vf(o,n),o=Wf(o,n),s=Jf(s),s=Vf(s,n),s=Wf(s,n),o=Kf(o),s=Kf(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",A=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+A,g=["#define varying in",n.glslVersion===Sl?"":"out highp vec4 pc_fragColor;",n.glslVersion===Sl?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const y=v+g+s,E=Of(r,35633,v+A+o),x=Of(r,35632,y);if(r.attachShader(m,E),r.attachShader(m,x),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(E).trim(),n=r.getShaderInfoLog(x).trim();let i=!0,a=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const t=Gf(r,E,"vertex"),n=Gf(r,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(a=!1);a&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:A},fragmentShader:{log:n,prefix:g}})}let b,B;return r.deleteShader(E),r.deleteShader(x),this.getUniforms=function(){return void 0===b&&(b=new Pf(r,m)),b},this.getAttributes=function(){return void 0===B&&(B=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r).name;n[i]=e.getAttribLocation(t,i)}return n}(r,m)),B},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Nf++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=x,this}function np(e,t,n,i,r,a){const o=[],s=i.isWebGL2,c=i.logarithmicDepthBuffer,l=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let d=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(e){let t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=gl,t}return{getParameters:function(r,o,p,A,g){const v=A.fog,y=r.isMeshStandardMaterial?A.environment:null,E=t.get(r.envMap||y),x=f[r.type],b=g.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(l)return 1024;{const e=u,n=Math.floor((e-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}}(g):0;let B,C;if(null!==r.precision&&(d=i.getMaxPrecision(r.precision),d!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead.")),x){const e=Bd[x];B=e.vertexShader,C=e.fragmentShader}else B=r.vertexShader,C=r.fragmentShader;const w=e.getRenderTarget();return{isWebGL2:s,shaderID:x,shaderName:r.type,vertexShader:B,fragmentShader:C,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:d,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null!==w?m(w.texture):e.outputEncoding,map:!!r.map,mapEncoding:m(r.map),matcap:!!r.matcap,matcapEncoding:m(r.matcap),envMap:!!E,envMapMode:E&&E.mapping,envMapEncoding:m(E),envMapCubeUV:!!E&&(E.mapping===_c||E.mapping===Tc),lightMap:!!r.lightMap,lightMapEncoding:m(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:m(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!v,useFog:r.fog,fogExp2:v&&v.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:c,skinning:r.skinning&&b>0,maxBones:b,useVertexTexture:l,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Bd[t];n=od.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=o.length;e<t;e++){const t=o[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new tp(e,n,t,r),o.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function ip(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function rp(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ap(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function op(e){const t=[];let n=0;const i=[],r=[],a={id:-1};function o(i,r,o,s,c,l){let u=t[n];const h=e.get(o);return void 0===u?(u={id:i.id,object:i,geometry:r,material:o,program:h.program||a,groupOrder:s,renderOrder:i.renderOrder,z:c,group:l},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=o,u.program=h.program||a,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=c,u.group=l),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,t,n,a,s,c){const l=o(e,t,n,a,s,c);(!0===n.transparent?r:i).push(l)},unshift:function(e,t,n,a,s,c){const l=o(e,t,n,a,s,c);(!0===n.transparent?r:i).unshift(l)},finish:function(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){i.length>1&&i.sort(e||rp),r.length>1&&r.sort(t||ap)}}}function sp(e){let t=new WeakMap;return{get:function(n,i){const r=t.get(n);let a;return void 0===r?(a=new op(e),t.set(n,new WeakMap),t.get(n).set(i,a)):(a=r.get(i),void 0===a&&(a=new op(e),r.set(i,a))),a},dispose:function(){t=new WeakMap}}}function cp(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new zl,color:new uh};break;case"SpotLight":n={position:new zl,direction:new zl,color:new uh,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new zl,color:new uh,distance:0,decay:0};break;case"HemisphereLight":n={direction:new zl,skyColor:new uh,groundColor:new uh};break;case"RectAreaLight":n={color:new uh,position:new zl,halfWidth:new zl,halfHeight:new zl}}return e[t.id]=n,n}}}let lp=0;function up(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function hp(e,t){const n=new cp,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ll};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ll,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)r.probe.push(new zl);const a=new zl,o=new gu,s=new gu;return{setup:function(c,l,u){let h=0,d=0,f=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let p=0,m=0,A=0,g=0,v=0,y=0,E=0,x=0;const b=u.matrixWorldInverse;c.sort(up);for(let e=0,t=c.length;e<t;e++){const t=c[e],l=t.color,u=t.intensity,B=t.distance,C=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)h+=l.r*u,d+=l.g*u,f+=l.b*u;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],u);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(b),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[p]=n,r.directionalShadowMap[p]=C,r.directionalShadowMatrix[p]=t.shadow.matrix,y++}r.directional[p]=e,p++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(b),e.color.copy(l).multiplyScalar(u),e.distance=B,e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(b),e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.spotShadow[A]=n,r.spotShadowMap[A]=C,r.spotShadowMatrix[A]=t.shadow.matrix,x++}r.spot[A]=e,A++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(l).multiplyScalar(u),e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(b),s.identity(),o.copy(t.matrixWorld),o.premultiply(b),s.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),r.rectArea[g]=e,g++}else if(t.isPointLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(b),e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[m]=n,r.pointShadowMap[m]=C,r.pointShadowMatrix[m]=t.shadow.matrix,E++}r.point[m]=e,m++}else if(t.isHemisphereLight){const e=n.get(t);e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(b),e.direction.normalize(),e.skyColor.copy(t.color).multiplyScalar(u),e.groundColor.copy(t.groundColor).multiplyScalar(u),r.hemi[v]=e,v++}}g>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=bd.LTC_FLOAT_1,r.rectAreaLTC2=bd.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=bd.LTC_HALF_1,r.rectAreaLTC2=bd.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=f;const B=r.hash;B.directionalLength===p&&B.pointLength===m&&B.spotLength===A&&B.rectAreaLength===g&&B.hemiLength===v&&B.numDirectionalShadows===y&&B.numPointShadows===E&&B.numSpotShadows===x||(r.directional.length=p,r.spot.length=A,r.rectArea.length=g,r.point.length=m,r.hemi.length=v,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=E,r.spotShadowMatrix.length=x,B.directionalLength=p,B.pointLength=m,B.spotLength=A,B.rectAreaLength=g,B.hemiLength=v,B.numDirectionalShadows=y,B.numPointShadows=E,B.numSpotShadows=x,r.version=lp++)},state:r}}function dp(e,t){const n=new hp(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,r,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function fp(e,t){let n=new WeakMap;return{get:function(i,r){let a;return!1===n.has(i)?(a=new dp(e,t),n.set(i,new WeakMap),n.get(i).set(r,a)):!1===n.get(i).has(r)?(a=new dp(e,t),n.get(i).set(r,a)):a=n.get(i).get(r),a},dispose:function(){n=new WeakMap}}}function pp(e){fh.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function mp(e){fh.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new zl,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}pp.prototype=Object.create(fh.prototype),pp.prototype.constructor=pp,pp.prototype.isMeshDepthMaterial=!0,pp.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},mp.prototype=Object.create(fh.prototype),mp.prototype.constructor=mp,mp.prototype.isMeshDistanceMaterial=!0,mp.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Ap(e,t,n){let i=new gd;const r=new Ll,a=new Ll,o=new Gl,s=[],c=[],l={},u={0:1,1:0,2:2},h=new sd({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ll},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONAL_PASS=1;const f=new Oh;f.setAttribute("position",new gh(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new ed(f,h),m=this;function A(n,i){const r=t.update(p);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,h,p,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,d,p,null)}function g(e,t,n){const i=e<<0|t<<1|n<<2;let r=s[i];return void 0===r&&(r=new pp({depthPacking:Cl,morphTargets:e,skinning:t}),s[i]=r),r}function v(e,t,n){const i=e<<0|t<<1|n<<2;let r=c[i];return void 0===r&&(r=new mp({morphTargets:e,skinning:t}),c[i]=r),r}function y(t,n,i,r,a,o,s){let c=null,h=g,d=t.customDepthMaterial;if(!0===r.isPointLight&&(h=v,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===i.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));c=h(e,r,!0===t.isInstancedMesh)}else c=d;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const e=c.uuid,t=i.uuid;let n=l[e];void 0===n&&(n={},l[e]=n);let r=n[t];void 0===r&&(r=c.clone(),n[t]=r),c=r}return c.visible=i.visible,c.wireframe=i.wireframe,c.side=3===s?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],c.clipShadows=i.clipShadows,c.clippingPlanes=i.clippingPlanes,c.clipIntersection=i.clipIntersection,c.wireframeLinewidth=i.wireframeLinewidth,c.linewidth=i.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=a,c.farDistance=o),c}function E(n,r,a,o,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let c=0,l=t.length;c<l;c++){const l=t[c],u=r[l.materialIndex];if(u&&u.visible){const t=y(n,i,u,o,a.near,a.far,s);e.renderBufferDirect(a,null,i,t,n,l)}}}else if(r.visible){const t=y(n,i,r,o,a.near,a.far,s);e.renderBufferDirect(a,null,i,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)E(c[e],r,a,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,s,c){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,u=t.length;l<u;l++){const u=t[l],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const f=h.getFrameExtents();if(r.multiply(f),a.copy(h.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(a.x=Math.floor(n/f.x),r.x=a.x*f.x,h.mapSize.x=a.x),r.y>n&&(a.y=Math.floor(n/f.y),r.y=a.y*f.y,h.mapSize.y=a.y)),null===h.map&&!h.isPointLightShadow&&3===this.type){const e={minFilter:Nc,magFilter:Nc,format:Jc};h.map=new Hl(r.x,r.y,e),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Hl(r.x,r.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:Rc,magFilter:Rc,format:Jc};h.map=new Hl(r.x,r.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const p=h.getViewportCount();for(let e=0;e<p;e++){const t=h.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),d.viewport(o),h.updateMatrices(u,e),i=h.getFrustum(),E(s,c,h.camera,u,this.type)}h.isPointLightShadow||3!==this.type||A(h,c),h.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(l,u,h)}}function gp(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new Gl;let i=null;const r=new Gl(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?L(2929):R(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},o=new function(){let t=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(e){t||(e?L(2960):R(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&c===i||(e.stencilOp(t,n,i),o=t,s=n,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null}}};let s={},c=null,l=null,u=null,h=null,d=null,f=null,p=null,m=null,A=null,g=!1,v=null,y=null,E=null,x=null,b=null;const B=e.getParameter(35661);let C=!1,w=0;const M=e.getParameter(7938);-1!==M.indexOf("WebGL")?(w=parseFloat(/^WebGL\ ([0-9])/.exec(M)[1]),C=w>=1):-1!==M.indexOf("OpenGL ES")&&(w=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(M)[1]),C=w>=2);let D=null,S={};const _=new Gl,T=new Gl;function I(t,n,i){const r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<i;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,r);return a}const F={};function L(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function R(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}F[3553]=I(3553,3553,1),F[34067]=I(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),L(2929),a.setFunc(3),U(!1),G(1),L(2884),N(0);const P={[Bc]:32774,101:32778,102:32779};if(i)P[103]=32775,P[104]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(P[103]=e.MIN_EXT,P[104]=e.MAX_EXT)}const O={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function N(t,n,i,r,a,o,s,c){if(0!==t){if(l||(L(3042),l=!0),5===t)a=a||n,o=o||i,s=s||r,n===h&&a===p||(e.blendEquationSeparate(P[n],P[a]),h=n,p=a),i===d&&r===f&&o===m&&s===A||(e.blendFuncSeparate(O[i],O[r],O[o],O[s]),d=i,f=r,m=o,A=s),u=t,g=null;else if(t!==u||c!==g){if(h===Bc&&p===Bc||(e.blendEquation(32774),h=Bc,p=Bc),c)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}d=null,f=null,m=null,A=null,u=t,g=c}}else l&&(R(3042),l=!1)}function U(t){v!==t&&(t?e.frontFace(2304):e.frontFace(2305),v=t)}function G(t){0!==t?(L(2884),t!==y&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):R(2884),y=t}function H(t,n,i){t?(L(32823),x===n&&b===i||(e.polygonOffset(n,i),x=n,b=i)):R(32823)}function Q(t){void 0===t&&(t=33984+B-1),D!==t&&(e.activeTexture(t),D=t)}return{buffers:{color:r,depth:a,stencil:o},enable:L,disable:R,useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:N,setMaterial:function(e,t){2===e.side?R(2884):L(2884);let n=1===e.side;t&&(n=!n),U(n),1===e.blending&&!1===e.transparent?N(0):N(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;o.setTest(i),i&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),H(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:U,setCullFace:G,setLineWidth:function(t){t!==E&&(C&&e.lineWidth(t),E=t)},setPolygonOffset:H,setScissorTest:function(e){e?L(3089):R(3089)},activeTexture:Q,bindTexture:function(t,n){null===D&&Q();let i=S[D];void 0===i&&(i={type:void 0,texture:void 0},S[D]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||F[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=S[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===_.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),_.copy(t))},viewport:function(t){!1===T.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),T.copy(t))},reset:function(){s={},D=null,S={},c=null,u=null,v=null,y=null,r.reset(),a.reset(),o.reset()}}}function vp(e,t,n,i,r,a,o){const s=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let f,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function A(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?Fl.floorPowerOfTwo:Math.floor,a=i(r*e.width),o=i(r*e.height);void 0===f&&(f=m(a,o));const s=n?m(a,o):f;s.width=a,s.height=o;return s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return Fl.isPowerOfTwo(e.width)&&Fl.isPowerOfTwo(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==Rc&&e.minFilter!==Nc}function y(t,n,r,a){e.generateMipmap(t);i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function E(n,i,r){if(!1===s)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===i&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function x(e){return e===Rc||e===Pc||e===Oc?9728:9729}function b(t){const n=t.target;n.removeEventListener("dispose",b),function(t){const n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&d.delete(n),o.memory.textures--}function B(t){const n=t.target;n.removeEventListener("dispose",B),function(t){const n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(t.texture),i.remove(t)}(n),o.memory.textures--}let C=0;function w(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=o.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void I(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function M(t,r){const o=i.get(t);t.version>0&&o.__version!==t.version?function(t,i,r){if(6!==i.image.length)return;T(t,i),n.activeTexture(33984+r),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,i.flipY);const o=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),c=i.image[0]&&i.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=o||c?c?i.image[e].image:i.image[e]:A(i.image[e],!1,!0,l);const h=u[0],d=g(h)||s,f=a.convert(i.format),p=a.convert(i.type),m=E(i.internalFormat,f,p);let x;if(_(34067,i,d),o){for(let e=0;e<6;e++){x=u[e].mipmaps;for(let t=0;t<x.length;t++){const r=x[t];i.format!==Jc&&i.format!==jc?null!==f?n.compressedTexImage2D(34069+e,t,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,r.width,r.height,0,f,p,r.data)}}t.__maxMipLevel=x.length-1}else{x=i.mipmaps;for(let e=0;e<6;e++)if(c){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,p,u[e].data);for(let t=0;t<x.length;t++){const i=x[t].image[e].image;n.texImage2D(34069+e,t+1,m,i.width,i.height,0,f,p,i.data)}}else{n.texImage2D(34069+e,0,m,f,p,u[e]);for(let t=0;t<x.length;t++){const i=x[t];n.texImage2D(34069+e,t+1,m,f,p,i.image[e])}}t.__maxMipLevel=x.length}v(i,d)&&y(34067,i,h.width,h.height);t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(o,t,r):(n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture))}const D={[Ic]:10497,[Fc]:33071,[Lc]:33648},S={[Rc]:9728,[Pc]:9984,[Oc]:9986,[Nc]:9729,[Uc]:9985,[Gc]:9987};function _(n,a,o){o?(e.texParameteri(n,10242,D[a.wrapS]),e.texParameteri(n,10243,D[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,D[a.wrapR]),e.texParameteri(n,10240,S[a.magFilter]),e.texParameteri(n,10241,S[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Fc&&a.wrapT===Fc||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(a.magFilter)),e.texParameteri(n,10241,x(a.minFilter)),a.minFilter!==Rc&&a.minFilter!==Nc&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const c=t.get("EXT_texture_filter_anisotropic");if(c){if(a.type===zc&&null===t.get("OES_texture_float_linear"))return;if(a.type===Vc&&null===(s||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function T(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",b),t.__webglTexture=e.createTexture(),o.memory.textures++)}function I(t,i,r){let o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),T(t,i),n.activeTexture(33984+r),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);const c=function(e){return!s&&(e.wrapS!==Fc||e.wrapT!==Fc||e.minFilter!==Rc&&e.minFilter!==Nc)}(i)&&!1===g(i.image),l=A(i.image,c,!1,u),h=g(l)||s,d=a.convert(i.format);let f,p=a.convert(i.type),m=E(i.internalFormat,d,p);_(o,i,h);const x=i.mipmaps;if(i.isDepthTexture)m=6402,s?m=i.type===zc?36012:i.type===kc?33190:i.type===Wc?35056:33189:i.type===zc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Xc&&6402===m&&i.type!==Qc&&i.type!==kc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Qc,p=a.convert(i.type)),i.format===qc&&6402===m&&(m=34041,i.type!==Wc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Wc,p=a.convert(i.type))),n.texImage2D(3553,0,m,l.width,l.height,0,d,p,null);else if(i.isDataTexture)if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,d,p,l.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=x.length;e<t;e++)f=x[e],i.format!==Jc&&i.format!==jc?null!==d?n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);t.__maxMipLevel=x.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,d,p,l.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,d,p,l.data),t.__maxMipLevel=0;else if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,m,d,p,f);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,d,p,l),t.__maxMipLevel=0;v(i,h)&&y(o,i,l.width,l.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function F(t,r,o,s){const c=a.convert(r.texture.format),l=a.convert(r.texture.type),u=E(r.texture.internalFormat,c,l);n.texImage2D(s,0,u,r.width,r.height,0,c,l,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function L(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===zc?r=36012:t.type===kc&&(r=33190));const i=P(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=P(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=a.convert(n.texture.format),r=a.convert(n.texture.type),o=E(n.texture.internalFormat,t,r);if(i){const t=P(n);e.renderbufferStorageMultisample(36161,t,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function R(t){const n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),w(n.depthTexture,0);const r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Xc)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==qc)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)e.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=e.createRenderbuffer(),L(n.__webglDepthbuffer[i],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),L(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function P(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let O=!1,N=!1;this.allocateTextureUnit=function(){const e=C;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=w,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=M,this.setupRenderTarget=function(t){const r=i.get(t),c=i.get(t.texture);t.addEventListener("dispose",B),c.__webglTexture=e.createTexture(),o.memory.textures++;const l=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,h=g(t)||s;if(!s||t.texture.format!==jc||t.texture.type!==zc&&t.texture.type!==Vc||(t.texture.format=Jc,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){r.__webglFramebuffer=[];for(let t=0;t<6;t++)r.__webglFramebuffer[t]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),u)if(s){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const n=a.convert(t.texture.format),i=a.convert(t.texture.type),o=E(t.texture.internalFormat,n,i),s=P(t);e.renderbufferStorageMultisample(36161,s,o,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),L(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,c.__webglTexture),_(34067,t.texture,h);for(let e=0;e<6;e++)F(r.__webglFramebuffer[e],t,36064,34069+e);v(t.texture,h)&&y(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,c.__webglTexture),_(3553,t.texture,h),F(r.__webglFramebuffer,t,36064,3553),v(t.texture,h)&&y(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&R(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(v(t,g(e)||s)){const r=e.isWebGLCubeRenderTarget?34067:3553,a=i.get(t).__webglTexture;n.bindTexture(r,a),y(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const r=t.width,a=t.height;let o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),O=!0),e=e.texture),w(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),N=!0),e=e.texture),M(e,t)}}function yp(e,t,n){const i=n.isWebGL2;return{convert:function(e){let n;if(e===Hc)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===Qc)return 5123;if(1013===e)return 5124;if(e===kc)return 5125;if(e===zc)return 5126;if(e===Vc)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(e===jc)return 6407;if(e===Jc)return 6408;if(e===Yc)return 6409;if(1025===e)return 6410;if(e===Xc)return 6402;if(e===qc)return 34041;if(e===Kc)return 6403;if(1029===e)return 36244;if(e===Zc)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(e===$c||e===el||e===tl||e===nl){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===$c)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===el)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===tl)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===nl)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===il||e===rl||e===al||e===ol){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===il)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===rl)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===al)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===ol)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===sl||e===cl)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===sl)return n.COMPRESSED_RGB8_ETC2;if(e===cl)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):36492===e?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Wc?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ep(e){ld.call(this),this.cameras=e||[]}function xp(){ku.call(this),this.type="Group"}function bp(){this._targetRay=null,this._grip=null,this._hand=null}function Bp(e,t){const n=this;let i=null,r=1,a=null,o="local-floor",s=null;const c=[],l=new Map,u=new ld;u.layers.enable(1),u.viewport=new Gl;const h=new ld;h.layers.enable(2),h.viewport=new Gl;const d=[u,h],f=new Ep;f.layers.enable(1),f.layers.enable(2);let p=null,m=null;function A(e){const t=l.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function g(){l.forEach((function(e,t){e.disconnect(t)})),l.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),C.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(e){a=e,C.setContext(i),C.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function y(e){const t=i.inputSources;for(let e=0;e<c.length;e++)l.set(t[e],c[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=l.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),l.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=l.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=c[e];return void 0===t&&(t=new bp,c[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=c[e];return void 0===t&&(t=new bp,c[e]=t),t.getGripSpace()},this.getHand=function(e){let t=c[e];return void 0===t&&(t=new bp,c[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=function(e){if(i=e,null!==i){i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",g);const e=t.getContextAttributes();!0!==e.xrCompatible&&t.makeXRCompatible();const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r},a=new XRWebGLLayer(i,t,n);i.updateRenderState({baseLayer:a}),i.requestReferenceSpace(o).then(v),i.addEventListener("inputsourceschange",y)}};const E=new zl,x=new zl;function b(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){f.near=h.near=u.near=e.near,f.far=h.far=u.far=e.far,p===f.near&&m===f.far||(i.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,m=f.far);const t=e.parent,n=f.cameras;b(f,t);for(let e=0;e<n.length;e++)b(n[e],t);e.matrixWorld.copy(f.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){E.setFromMatrixPosition(t.matrixWorld),x.setFromMatrixPosition(n.matrixWorld);const i=E.distanceTo(x),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),c=(r[9]+1)/r[5],l=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=o*u,f=o*h,p=i/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);const A=o+p,g=s+p,v=d-m,y=f+(i-m),b=c*s/g*A,B=l*s/g*A;e.projectionMatrix.makePerspective(v,y,b,B,A,g)}(f,u,h):f.projectionMatrix.copy(u.projectionMatrix),f};let B=null;const C=new vd;C.setAnimationLoop((function(t,n){if(s=n.getViewerPose(a),null!==s){const t=s.views,n=i.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let r=!1;t.length!==f.cameras.length&&(f.cameras.length=0,r=!0);for(let e=0;e<t.length;e++){const i=t[e],a=n.getViewport(i),o=d[e];o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(a.x,a.y,a.width,a.height),0===e&&f.matrix.copy(o.matrix),!0===r&&f.cameras.push(o)}}const r=i.inputSources;for(let e=0;e<c.length;e++){const t=c[e],i=r[e];t.update(i,n,a)}B&&B(t,n)})),this.setAnimationLoop=function(e){B=e},this.dispose=function(){}}function Cp(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const r=e.get(i).__maxMipLevel;void 0!==r&&(t.maxMipLevel.value=r)}let r,a;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,a){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i),i.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,i):n(e,i)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function wp(e){const t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=gl,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const f=this;let p=!1,m=null,A=0,g=0,v=null,y=null,E=-1,x=null,b=null;const B=new Gl,C=new Gl;let w=null,M=t.width,D=t.height,S=1,_=null,T=null;const I=new Gl(0,0,M,D),F=new Gl(0,0,M,D);let L=!1;const R=new gd;let P=!1,O=!1;const N=new gu,U=new zl,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===v?S:1}let Q,k,z,V,W,j,J,Y,X,q,K,Z,$,ee,te,ne,ie,re,ae,oe,se,ce=n;function le(e,n){for(let i=0;i<e.length;i++){const r=e[i],a=t.getContext(r,n);if(null!==a)return a}return null}try{const e={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",pe,!1),null===ce){const t=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&t.shift(),ce=le(t,e),null===ce)throw le(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ue(){Q=new Td(ce),k=new Dd(ce,Q,e),!1===k.isWebGL2&&(Q.get("WEBGL_depth_texture"),Q.get("OES_texture_float"),Q.get("OES_texture_half_float"),Q.get("OES_texture_half_float_linear"),Q.get("OES_standard_derivatives"),Q.get("OES_element_index_uint"),Q.get("OES_vertex_array_object"),Q.get("ANGLE_instanced_arrays")),Q.get("OES_texture_float_linear"),oe=new yp(ce,Q,k),z=new gp(ce,Q,k),z.scissor(C.copy(F).multiplyScalar(S).floor()),z.viewport(B.copy(I).multiplyScalar(S).floor()),V=new Ld(ce),W=new ip,j=new vp(ce,Q,z,W,k,oe,V),J=new _d(f),Y=new yd(ce,k),se=new wd(ce,Q,Y,k),X=new Id(ce,Y,V,se),q=new Nd(ce,X,Y,V),ie=new Od(ce),te=new Sd(W),K=new np(f,J,Q,k,se,te),Z=new Cp(W),$=new sp(W),ee=new fp(Q,k),ne=new Cd(f,J,z,q,s),re=new Md(ce,Q,V,k),ae=new Fd(ce,Q,V,k),V.programs=K.programs,f.capabilities=k,f.extensions=Q,f.properties=W,f.renderLists=$,f.state=z,f.info=V}ue();const he=new Bp(f,ce);this.xr=he;const de=new Ap(f,q,k.maxTextureSize);function fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function pe(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,ue()}function me(e){const t=e.target;t.removeEventListener("dispose",me),function(e){Ae(e),W.remove(e)}(t)}function Ae(e){const t=W.get(e).program;void 0!==t&&K.releaseProgram(t)}this.shadowMap=de,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const e=Q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return S},this.setPixelRatio=function(e){void 0!==e&&(S=e,this.setSize(M,D,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Ll),e.set(M,D)},this.setSize=function(e,n,i){he.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,D=n,t.width=Math.floor(e*S),t.height=Math.floor(n*S),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Ll),e.set(M*S,D*S).floor()},this.setDrawingBufferSize=function(e,n,i){M=e,D=n,S=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Gl),e.copy(B)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,i){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,i),z.viewport(B.copy(I).multiplyScalar(S).floor())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,n,i){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,i),z.scissor(C.copy(F).multiplyScalar(S).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){z.setScissorTest(L=e)},this.setOpaqueSort=function(e){_=e},this.setTransparentSort=function(e){T=e},this.getClearColor=function(){return ne.getClearColor()},this.setClearColor=function(){ne.setClearColor.apply(ne,arguments)},this.getClearAlpha=function(){return ne.getClearAlpha()},this.setClearAlpha=function(){ne.setClearAlpha.apply(ne,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),ce.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",pe,!1),$.dispose(),ee.dispose(),W.dispose(),J.dispose(),q.dispose(),se.dispose(),he.dispose(),ve.stop()},this.renderBufferImmediate=function(e,t){se.initAttributes();const n=W.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());const i=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),se.enableAttribute(i.position),ce.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),se.enableAttribute(i.normal),ce.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),se.enableAttribute(i.uv),ce.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),se.enableAttribute(i.color),ce.vertexAttribPointer(i.color,3,5126,!1,0,0)),se.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=G);const o=r.isMesh&&r.matrixWorld.determinant()<0,s=Be(e,t,i,r);z.setMaterial(i,o);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,h=1;!0===i.wireframe&&(c=X.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&ie.update(r,n,i,s),se.setup(r,i,s,n,c);let d=re;null!==c&&(u=Y.get(c),d=ae,d.setIndex(u));const f=null!==c?c.count:l.count,p=n.drawRange.start*h,m=n.drawRange.count*h,A=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,v=Math.max(p,A),y=Math.min(f,p+m,A+g)-1,E=Math.max(0,y-v+1);if(0!==E){if(r.isMesh)!0===i.wireframe?(z.setLineWidth(i.wireframeLinewidth*H()),d.setMode(1)):d.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),z.setLineWidth(e*H()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(v,E,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(v,E,e)}else d.render(v,E)}},this.compile=function(e,t){d=ee.get(e,t),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t);const n=new WeakMap;e.traverse((function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];!1===n.has(a)&&(be(a,e,t),n.set(a))}else!1===n.has(i)&&(be(i,e,t),n.set(i))}))};let ge=null;const ve=new vd;function ye(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||R.intersectsSprite(e)){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=q.update(e),r=e.material;r.visible&&h.push(e,t,r,n,U.z,null)}}else if(e.isImmediateRenderObject)i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N),h.push(e,null,e.material,n,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==V.render.frame&&(e.skeleton.update(),e.skeleton.frame=V.render.frame),!e.frustumCulled||R.intersectsObject(e))){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);const t=q.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let a=0,o=i.length;a<o;a++){const o=i[a],s=r[o.materialIndex];s&&s.visible&&h.push(e,t,s,n,U.z,o)}}else r.visible&&h.push(e,t,r,n,U.z,null)}const r=e.children;for(let e=0,a=r.length;e<a;e++)ye(r[e],t,n,i)}function Ee(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],o=a.object,s=a.geometry,c=null===i?a.material:i,l=a.group;if(n.isArrayCamera){b=n;const e=n.cameras;for(let n=0,i=e.length;n<i;n++){const i=e[n];o.layers.test(i.layers)&&(z.viewport(B.copy(i.viewport)),d.setupLights(i),xe(o,t,i,s,c,l))}}else b=null,xe(o,t,n,s,c,l)}}function xe(e,t,n,i,r,a){if(e.onBeforeRender(f,t,n,i,r,a),d=ee.get(t,b||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const i=Be(n,t,r,e);z.setMaterial(r),se.reset(),function(e,t){e.render((function(e){f.renderBufferImmediate(e,t)}))}(e,i)}else f.renderBufferDirect(n,t,i,r,e,a);e.onAfterRender(f,t,n,i,r,a),d=ee.get(t,b||n)}function be(e,t,n){!0!==t.isScene&&(t=G);const i=W.get(e),r=d.state.lights,a=d.state.shadowsArray,o=r.state.version,s=K.getParameters(e,r.state,a,t,n),c=K.getProgramCacheKey(s);let l=i.program,u=!0;if(void 0===l)e.addEventListener("dispose",me);else if(l.cacheKey!==c)Ae(e);else if(i.lightsStateVersion!==o)u=!1;else{if(void 0!==s.shaderID){const n=e.isMeshStandardMaterial?t.environment:null;return void(i.envMap=J.get(e.envMap||n))}u=!1}u&&(s.uniforms=K.getUniforms(e),e.onBeforeCompile(s,f),l=K.acquireProgram(s,c),i.program=l,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);const h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=te.numPlanes,i.numIntersection=te.numIntersection,h.clippingPlanes=te.uniform),i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=J.get(e.envMap||i.environment),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=i.program.getUniforms(),m=Pf.seqWithValue(p.seq,h);i.uniformsList=m}function Be(e,t,n,i){!0!==t.isScene&&(t=G),j.resetTextureUnits();const r=t.fog,a=n.isMeshStandardMaterial?t.environment:null,o=null===v?f.outputEncoding:v.texture.encoding,s=J.get(n.envMap||a),c=W.get(n),l=d.state.lights;if(!0===P&&(!0===O||e!==x)){const t=e===x&&n.id===E;te.setState(n,e,t)}n.version===c.__version?n.fog&&c.fog!==r||c.environment!==a||c.needsLights&&c.lightsStateVersion!==l.state.version?be(n,t,i):void 0===c.numClippingPlanes||c.numClippingPlanes===te.numPlanes&&c.numIntersection===te.numIntersection?(c.outputEncoding!==o||c.envMap!==s)&&be(n,t,i):be(n,t,i):(be(n,t,i),c.__version=n.version);let u=!1,h=!1,p=!1;const m=c.program,A=m.getUniforms(),g=c.uniforms;if(z.useProgram(m.program)&&(u=!0,h=!0,p=!0),n.id!==E&&(E=n.id,h=!0),u||x!==e){if(A.setValue(ce,"projectionMatrix",e.projectionMatrix),k.logarithmicDepthBuffer&&A.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,h=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=A.map.cameraPosition;void 0!==t&&t.setValue(ce,U.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&A.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&A.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){A.setOptional(ce,i,"bindMatrix"),A.setOptional(ce,i,"bindMatrixInverse");const e=i.skeleton;if(e){const t=e.bones;if(k.floatVertexTextures){if(void 0===e.boneTexture){let n=Math.sqrt(4*t.length);n=Fl.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(e.boneMatrices);const r=new pd(i,n,n,Jc,zc);e.boneMatrices=i,e.boneTexture=r,e.boneTextureSize=n}A.setValue(ce,"boneTexture",e.boneTexture,j),A.setValue(ce,"boneTextureSize",e.boneTextureSize)}else A.setOptional(ce,e,"boneMatrices")}}var y,b;return(h||c.receiveShadow!==i.receiveShadow)&&(c.receiveShadow=i.receiveShadow,A.setValue(ce,"receiveShadow",i.receiveShadow)),h&&(A.setValue(ce,"toneMappingExposure",f.toneMappingExposure),c.needsLights&&(b=p,(y=g).ambientLightColor.needsUpdate=b,y.lightProbe.needsUpdate=b,y.directionalLights.needsUpdate=b,y.directionalLightShadows.needsUpdate=b,y.pointLights.needsUpdate=b,y.pointLightShadows.needsUpdate=b,y.spotLights.needsUpdate=b,y.spotLightShadows.needsUpdate=b,y.rectAreaLights.needsUpdate=b,y.hemisphereLights.needsUpdate=b),r&&n.fog&&Z.refreshFogUniforms(g,r),Z.refreshMaterialUniforms(g,n,S,D),Pf.upload(ce,c.uniformsList,g,j)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Pf.upload(ce,c.uniformsList,g,j),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&A.setValue(ce,"center",i.center),A.setValue(ce,"modelViewMatrix",i.modelViewMatrix),A.setValue(ce,"normalMatrix",i.normalMatrix),A.setValue(ce,"modelMatrix",i.matrixWorld),m}ve.setAnimationLoop((function(e){he.isPresenting||ge&&ge(e)})),"undefined"!=typeof window&&ve.setContext(window),this.setAnimationLoop=function(e){ge=e,he.setAnimationLoop(e),null===e?ve.stop():ve.start()},this.render=function(e,t){let n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===p)return;se.resetDefaultState(),E=-1,x=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===he.enabled&&!0===he.isPresenting&&(t=he.getCamera(t)),!0===e.isScene&&e.onBeforeRender(f,e,t,n||v),d=ee.get(e,t),d.init(),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(N),O=this.localClippingEnabled,P=te.init(this.clippingPlanes,O,t),h=$.get(e,t),h.init(),ye(e,t,0,f.sortObjects),h.finish(),!0===f.sortObjects&&h.sort(_,T),!0===P&&te.beginShadows();const r=d.state.shadowsArray;de.render(r,e,t),d.setupLights(t),!0===P&&te.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),ne.render(h,e,t,i);const a=h.opaque,o=h.transparent;a.length>0&&Ee(a,e,t),o.length>0&&Ee(o,e,t),!0===e.isScene&&e.onAfterRender(f,e,t),null!==v&&(j.updateRenderTargetMipmap(v),j.updateMultisampleRenderTarget(v)),z.buffers.depth.setTest(!0),z.buffers.depth.setMask(!0),z.buffers.color.setMask(!0),z.setPolygonOffset(!1),h=null,d=null},this.setFramebuffer=function(e){m!==e&&null===v&&ce.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return g},this.getRenderList=function(){return h},this.setRenderList=function(e){h=e},this.getRenderState=function(){return d},this.setRenderState=function(e){d=e},this.getRenderTarget=function(){return v},this.setRenderTarget=function(e,t=0,n=0){v=e,A=t,g=n,e&&void 0===W.get(e).__webglFramebuffer&&j.setupRenderTarget(e);let i=m,r=!1;if(e){const n=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=n[t],r=!0):i=e.isWebGLMultisampleRenderTarget?W.get(e).__webglMultisampledFramebuffer:n,B.copy(e.viewport),C.copy(e.scissor),w=e.scissorTest}else B.copy(I).multiplyScalar(S).floor(),C.copy(F).multiplyScalar(S).floor(),w=L;if(y!==i&&(ce.bindFramebuffer(36160,i),y=i),z.viewport(B),z.scissor(C),z.setScissorTest(w),r){const i=W.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){let o=!1;s!==y&&(ce.bindFramebuffer(36160,s),o=!0);try{const s=e.texture,c=s.format,l=s.type;if(c!==Jc&&oe.convert(c)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===Hc||oe.convert(l)===ce.getParameter(35738)||l===zc&&(k.isWebGL2||Q.get("OES_texture_float")||Q.get("WEBGL_color_buffer_float"))||l===Vc&&(k.isWebGL2?Q.get("EXT_color_buffer_float"):Q.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ce.readPixels(t,n,i,r,oe.convert(c),oe.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&ce.bindFramebuffer(36160,y)}}},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i),o=oe.convert(t.format);j.setTexture2D(t,0),ce.copyTexImage2D(3553,n,o,e.x,e.y,r,a,0),z.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){void 0===i&&(i=0);const r=t.image.width,a=t.image.height,o=oe.convert(n.format),s=oe.convert(n.type);j.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,i,e.x,e.y,r,a,o,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ce.texSubImage2D(3553,i,e.x,e.y,o,s,t.image),0===i&&n.generateMipmaps&&ce.generateMipmap(3553),z.unbindTexture()},this.initTexture=function(e){j.setTexture2D(e,0),z.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Mp(e){wp.call(this,e)}Ep.prototype=Object.assign(Object.create(ld.prototype),{constructor:Ep,isArrayCamera:!0}),xp.prototype=Object.assign(Object.create(ku.prototype),{constructor:xp,isGroup:!0}),Object.assign(bp.prototype,{constructor:bp,getHandSpace:function(){if(null===this._hand&&(this._hand=new xp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const e=new xp;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new xp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new xp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,a=null;const o=this._targetRay,s=this._grip,c=this._hand;if(e)if(c&&e.hand){a=!0;for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++)if(e.hand[i]){const r=t.getJointPose(e.hand[i],n),a=c.joints[i];null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=r.radius),a.visible=null!==r;const o=c.joints[window.XRHand.INDEX_PHALANX_TIP],s=c.joints[window.XRHand.THUMB_PHALANX_TIP],l=o.position.distanceTo(s.position),u=.02,h=.005;c.inputState.pinching&&l>u+h?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&l<=u-h&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==o&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==c&&(c.visible=null!==a),this}}),Object.assign(Bp.prototype,_l.prototype),Mp.prototype=Object.assign(Object.create(wp.prototype),{constructor:Mp,isWebGL1Renderer:!0});class Dp{constructor(e,t){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new uh(e),this.density=void 0!==t?t:25e-5}clone(){return new Dp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Sp{constructor(e,t,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new uh(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}clone(){return new Sp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class _p extends ku{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function Tp(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Ml,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Fl.generateUUID()}Object.defineProperty(Tp.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Tp.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fl.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new Tp(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fl.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ip=new zl;function Fp(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Lp(e){fh.call(this),this.type="SpriteMaterial",this.color=new uh(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let Rp;Object.defineProperties(Fp.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Fp.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)Ip.x=this.getX(t),Ip.y=this.getY(t),Ip.z=this.getZ(t),Ip.applyMatrix4(e),this.setXYZ(t,Ip.x,Ip.y,Ip.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new gh(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Lp.prototype=Object.create(fh.prototype),Lp.prototype.constructor=Lp,Lp.prototype.isSpriteMaterial=!0,Lp.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const Pp=new zl,Op=new zl,Np=new zl,Up=new Ll,Gp=new Ll,Hp=new gu,Qp=new zl,kp=new zl,zp=new zl,Vp=new Ll,Wp=new Ll,jp=new Ll;function Jp(e){if(ku.call(this),this.type="Sprite",void 0===Rp){Rp=new Oh;const e=new Tp(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Rp.setIndex([0,1,2,0,2,3]),Rp.setAttribute("position",new Fp(e,3,0,!1)),Rp.setAttribute("uv",new Fp(e,2,3,!1))}this.geometry=Rp,this.material=void 0!==e?e:new Lp,this.center=new Ll(.5,.5)}function Yp(e,t,n,i,r,a){Up.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Gp.x=a*Up.x-r*Up.y,Gp.y=r*Up.x+a*Up.y):Gp.copy(Up),e.copy(t),e.x+=Gp.x,e.y+=Gp.y,e.applyMatrix4(Hp)}Jp.prototype=Object.assign(Object.create(ku.prototype),{constructor:Jp,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Op.setFromMatrixScale(this.matrixWorld),Hp.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Np.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Op.multiplyScalar(-Np.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const a=this.center;Yp(Qp.set(-.5,-.5,0),Np,a,Op,i,r),Yp(kp.set(.5,-.5,0),Np,a,Op,i,r),Yp(zp.set(.5,.5,0),Np,a,Op,i,r),Vp.set(0,0),Wp.set(1,0),jp.set(1,1);let o=e.ray.intersectTriangle(Qp,kp,zp,!1,Pp);if(null===o&&(Yp(kp.set(-.5,.5,0),Np,a,Op,i,r),Wp.set(0,1),o=e.ray.intersectTriangle(Qp,zp,kp,!1,Pp),null===o))return;const s=e.ray.origin.distanceTo(Pp);s<e.near||s>e.far||t.push({distance:s,point:Pp.clone(),uv:ih.getUV(Pp,Qp,kp,zp,Vp,Wp,jp,new Ll),face:null,object:this})},copy:function(e){return ku.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const Xp=new zl,qp=new zl;function Kp(){ku.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Zp(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ed.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new gu,this.bindMatrixInverse=new gu}Kp.prototype=Object.assign(Object.create(ku.prototype),{constructor:Kp,isLOD:!0,copy:function(e){ku.prototype.copy.call(this,e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){Xp.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Xp);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){Xp.setFromMatrixPosition(e.matrixWorld),qp.setFromMatrixPosition(this.matrixWorld);const n=Xp.distanceTo(qp)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=ku.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,i=n.length;e<i;e++){const i=n[e];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}),Zp.prototype=Object.assign(Object.create(ed.prototype),{constructor:Zp,isSkinnedMesh:!0,copy:function(e){return ed.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Gl,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){ed.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new zl,t=new Gl,n=new Gl,i=new zl,r=new gu;return function(a,o){const s=this.skeleton,c=this.geometry;t.fromBufferAttribute(c.attributes.skinIndex,a),n.fromBufferAttribute(c.attributes.skinWeight,a),e.fromBufferAttribute(c.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let a=0;a<4;a++){const c=n.getComponent(a);if(0!==c){const n=t.getComponent(a);r.multiplyMatrices(s.bones[n].matrixWorld,s.boneInverses[n]),o.addScaledVector(i.copy(e).applyMatrix4(r),c)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});const $p=new gu,em=new gu;function tm(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new gu)}}function nm(){ku.call(this),this.type="Bone"}Object.assign(tm.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const t=new gu;this.bones[e]&&t.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:em;$p.multiplyMatrices(r,t[i]),$p.toArray(n,16*i)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new tm(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),nm.prototype=Object.assign(Object.create(ku.prototype),{constructor:nm,isBone:!0});const im=new gu,rm=new gu,am=[],om=new ed;function sm(e,t,n){ed.call(this,e,t),this.instanceMatrix=new gh(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function cm(e){fh.call(this),this.type="LineBasicMaterial",this.color=new uh(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}sm.prototype=Object.assign(Object.create(ed.prototype),{constructor:sm,isInstancedMesh:!0,copy:function(e){return ed.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new gh(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(om.geometry=this.geometry,om.material=this.material,void 0!==om.material)for(let r=0;r<i;r++){this.getMatrixAt(r,im),rm.multiplyMatrices(n,im),om.matrixWorld=rm,om.raycast(e,am);for(let e=0,n=am.length;e<n;e++){const n=am[e];n.instanceId=r,n.object=this,t.push(n)}am.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),cm.prototype=Object.create(fh.prototype),cm.prototype.constructor=cm,cm.prototype.isLineBasicMaterial=!0,cm.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const lm=new zl,um=new zl,hm=new gu,dm=new Au,fm=new cu;function pm(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ku.call(this),this.type="Line",this.geometry=void 0!==e?e:new Oh,this.material=void 0!==t?t:new cm,this.updateMorphTargets()}pm.prototype=Object.assign(Object.create(ku.prototype),{constructor:pm,isLine:!0,copy:function(e){return ku.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)lm.fromBufferAttribute(t,e-1),um.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=lm.distanceTo(um);e.setAttribute("lineDistance",new wh(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let e=1,i=t.length;e<i;e++)n[e]=n[e-1],n[e]+=t[e-1].distanceTo(t[e])}return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),fm.copy(n.boundingSphere),fm.applyMatrix4(i),fm.radius+=r,!1===e.ray.intersectsSphere(fm))return;hm.getInverse(i),dm.copy(e.ray).applyMatrix4(hm);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new zl,c=new zl,l=new zl,u=new zl,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,a=n.length-1;i<a;i+=h){const a=n[i],h=n[i+1];s.fromBufferAttribute(r,a),c.fromBufferAttribute(r,h);if(dm.distanceSqToSegment(s,c,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(u);d<e.near||d>e.far||t.push({distance:d,point:l.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,i=r.count-1;n<i;n+=h){s.fromBufferAttribute(r,n),c.fromBufferAttribute(r,n+1);if(dm.distanceSqToSegment(s,c,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(u);i<e.near||i>e.far||t.push({distance:i,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const i=n.vertices,r=i.length;for(let n=0;n<r-1;n+=h){if(dm.distanceSqToSegment(i[n],i[n+1],u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const mm=new zl,Am=new zl;function gm(e,t){pm.call(this,e,t),this.type="LineSegments"}function vm(e,t){pm.call(this,e,t),this.type="LineLoop"}function ym(e){fh.call(this),this.type="PointsMaterial",this.color=new uh(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}gm.prototype=Object.assign(Object.create(pm.prototype),{constructor:gm,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)mm.fromBufferAttribute(t,e),Am.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+mm.distanceTo(Am);e.setAttribute("lineDistance",new wh(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let e=0,i=t.length;e<i;e+=2)mm.copy(t[e]),Am.copy(t[e+1]),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+mm.distanceTo(Am)}return this}}),vm.prototype=Object.assign(Object.create(pm.prototype),{constructor:vm,isLineLoop:!0}),ym.prototype=Object.create(fh.prototype),ym.prototype.constructor=ym,ym.prototype.isPointsMaterial=!0,ym.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const Em=new gu,xm=new Au,bm=new cu,Bm=new zl;function Cm(e,t){ku.call(this),this.type="Points",this.geometry=void 0!==e?e:new Oh,this.material=void 0!==t?t:new ym,this.updateMorphTargets()}function wm(e,t,n,i,r,a,o){const s=xm.distanceSqToPoint(e);if(s<n){const n=new zl;xm.closestPointToPoint(e,n),n.applyMatrix4(i);const c=r.ray.origin.distanceTo(n);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o})}}function Mm(e,t,n,i,r,a,o,s,c){Ul.call(this,e,t,n,i,r,a,o,s,c),this.format=void 0!==o?o:jc,this.minFilter=void 0!==a?a:Nc,this.magFilter=void 0!==r?r:Nc,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function Dm(e,t,n,i,r,a,o,s,c,l,u,h){Ul.call(this,null,a,o,s,c,l,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Sm(e,t,n,i,r,a,o,s,c){Ul.call(this,e,t,n,i,r,a,o,s,c),this.needsUpdate=!0}function _m(e,t,n,i,r,a,o,s,c,l){if((l=void 0!==l?l:Xc)!==Xc&&l!==qc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Xc&&(n=Qc),void 0===n&&l===qc&&(n=Wc),Ul.call(this,null,i,r,a,o,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Rc,this.minFilter=void 0!==s?s:Rc,this.flipY=!1,this.generateMipmaps=!1}Cm.prototype=Object.assign(Object.create(ku.prototype),{constructor:Cm,isPoints:!0,copy:function(e){return ku.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),bm.copy(n.boundingSphere),bm.applyMatrix4(i),bm.radius+=r,!1===e.ray.intersectsSphere(bm))return;Em.getInverse(i),xm.copy(e.ray).applyMatrix4(Em);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,s=n.length;r<s;r++){const s=n[r];Bm.fromBufferAttribute(a,s),wm(Bm,s,o,i,e,t,this)}}else for(let n=0,r=a.count;n<r;n++)Bm.fromBufferAttribute(a,n),wm(Bm,n,o,i,e,t,this)}else{const r=n.vertices;for(let n=0,a=r.length;n<a;n++)wm(r[n],n,o,i,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Mm.prototype=Object.assign(Object.create(Ul.prototype),{constructor:Mm,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Dm.prototype=Object.create(Ul.prototype),Dm.prototype.constructor=Dm,Dm.prototype.isCompressedTexture=!0,Sm.prototype=Object.create(Ul.prototype),Sm.prototype.constructor=Sm,Sm.prototype.isCanvasTexture=!0,_m.prototype=Object.create(Ul.prototype),_m.prototype.constructor=_m,_m.prototype.isDepthTexture=!0;let Tm=0;const Im=new gu,Fm=new ku,Lm=new zl;function Rm(){Object.defineProperty(this,"id",{value:Tm+=2}),this.uuid=Fl.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Rm.prototype=Object.assign(Object.create(_l.prototype),{constructor:Rm,isGeometry:!0,applyMatrix4:function(e){const t=(new Rl).getNormalMatrix(e);for(let t=0,n=this.vertices.length;t<n;t++){this.vertices[t].applyMatrix4(e)}for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];n.normal.applyMatrix3(t).normalize();for(let e=0,i=n.vertexNormals.length;e<i;e++)n.vertexNormals[e].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Im.makeRotationX(e),this.applyMatrix4(Im),this},rotateY:function(e){return Im.makeRotationY(e),this.applyMatrix4(Im),this},rotateZ:function(e){return Im.makeRotationZ(e),this.applyMatrix4(Im),this},translate:function(e,t,n){return Im.makeTranslation(e,t,n),this.applyMatrix4(Im),this},scale:function(e,t,n){return Im.makeScale(e,t,n),this.applyMatrix4(Im),this},lookAt:function(e){return Fm.lookAt(e),Fm.updateMatrix(),this.applyMatrix4(Fm.matrix),this},fromBufferGeometry:function(e){const t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,a=i.normal,o=i.color,s=i.uv,c=i.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(let e=0;e<r.count;e++)t.vertices.push((new zl).fromBufferAttribute(r,e)),void 0!==o&&t.colors.push((new uh).fromBufferAttribute(o,e));function l(e,n,i,r){const l=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],u=void 0===a?[]:[(new zl).fromBufferAttribute(a,e),(new zl).fromBufferAttribute(a,n),(new zl).fromBufferAttribute(a,i)],h=new hh(e,n,i,u,l,r);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([(new Ll).fromBufferAttribute(s,e),(new Ll).fromBufferAttribute(s,n),(new Ll).fromBufferAttribute(s,i)]),void 0!==c&&t.faceVertexUvs[1].push([(new Ll).fromBufferAttribute(c,e),(new Ll).fromBufferAttribute(c,n),(new Ll).fromBufferAttribute(c,i)])}const u=e.groups;if(u.length>0)for(let e=0;e<u.length;e++){const t=u[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)void 0!==n?l(n.getX(e),n.getX(e+1),n.getX(e+2),t.materialIndex):l(e,e+1,e+2,t.materialIndex)}else if(void 0!==n)for(let e=0;e<n.count;e+=3)l(n.getX(e),n.getX(e+1),n.getX(e+2));else for(let e=0;e<r.count;e+=3)l(e,e+1,e+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lm).negate(),this.translate(Lm.x,Lm.y,Lm.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new gu;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const e=new zl,t=new zl;for(let n=0,i=this.faces.length;n<i;n++){const i=this.faces[n],r=this.vertices[i.a],a=this.vertices[i.b],o=this.vertices[i.c];e.subVectors(o,a),t.subVectors(r,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);const t=new Array(this.vertices.length);for(let e=0,n=this.vertices.length;e<n;e++)t[e]=new zl;if(e){const e=new zl,n=new zl;for(let i=0,r=this.faces.length;i<r;i++){const r=this.faces[i],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),n.subVectors(a,o),e.cross(n),t[r.a].add(e),t[r.b].add(e),t[r.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let e=0,n=this.vertices.length;e<n;e++)t[e].normalize();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(t[n.a]),i[1].copy(t[n.b]),i[2].copy(t[n.c])):(i[0]=t[n.a].clone(),i[1]=t[n.b].clone(),i[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,n=t.vertexNormals.length;e<n;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const e=new Rm;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,i=this.faces.length;t<i;t++){const t=new zl,i={a:new zl,b:new zl,c:new zl};e.push(t),n.push(i)}}const n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],i=n.faceNormals[e],r=n.vertexNormals[e];i.copy(t.normal),r.a.copy(t.vertexNormals[0]),r.b.copy(t.vertexNormals[1]),r.c.copy(t.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new jl),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new cu),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let i;const r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,l=this.colors,u=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Rl).getNormalMatrix(t));for(let e=0,n=o.length;e<n;e++){const n=o[e].clone();void 0!==t&&n.applyMatrix4(t),a.push(n)}for(let e=0,t=u.length;e<t;e++)l.push(u[e].clone());for(let e=0,t=c.length;e<t;e++){const t=c[e];let a,o;const l=t.vertexNormals,u=t.vertexColors,h=new hh(t.a+r,t.b+r,t.c+r);h.normal.copy(t.normal),void 0!==i&&h.normal.applyMatrix3(i).normalize();for(let e=0,t=l.length;e<t;e++)a=l[e].clone(),void 0!==i&&a.applyMatrix3(i).normalize(),h.vertexNormals.push(a);h.color.copy(t.color);for(let e=0,t=u.length;e<t;e++)o=u[e],h.vertexColors.push(o.clone());h.materialIndex=t.materialIndex+n,s.push(h)}for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++)r.push(i[e].clone());this.faceVertexUvs[t].push(r)}}},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){const e={},t=[],n=[],i=Math.pow(10,4);for(let r=0,a=this.vertices.length;r<a;r++){const a=this.vertices[r],o=Math.round(a.x*i)+"_"+Math.round(a.y*i)+"_"+Math.round(a.z*i);void 0===e[o]?(e[o]=r,t.push(this.vertices[r]),n[r]=t.length-1):n[r]=n[e[o]]}const r=[];for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.a=n[t.a],t.b=n[t.b],t.c=n[t.c];const i=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(i[t]===i[(t+1)%3]){r.push(e);break}}for(let e=r.length-1;e>=0;e--){const t=r[e];this.faces.splice(t,1);for(let e=0,n=this.faceVertexUvs.length;e<n;e++)this.faceVertexUvs[e].splice(t,1)}const a=this.vertices.length-t.length;return this.vertices=t,a},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];this.vertices.push(new zl(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));const n=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let r,a;n&&n.length===t&&(r=[]),i&&i.length===t&&(a=[]);for(let o=0;o<t;o++){const t=e[o]._id;r&&r.push(n[t]),a&&a.push(i[t])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}const t=[];for(let e=0;e<this.vertices.length;e++){const n=this.vertices[e];t.push(n.x,n.y,n.z)}const n=[],i=[],r={},a=[],o={},s=[],c={};for(let e=0;e<this.faces.length;e++){const t=this.faces[e],i=!0,r=!1,a=void 0!==this.faceVertexUvs[0][e],o=t.normal.length()>0,s=t.vertexNormals.length>0,c=1!==t.color.r||1!==t.color.g||1!==t.color.b,f=t.vertexColors.length>0;let p=0;if(p=l(p,0,0),p=l(p,1,i),p=l(p,2,r),p=l(p,3,a),p=l(p,4,o),p=l(p,5,s),p=l(p,6,c),p=l(p,7,f),n.push(p),n.push(t.a,t.b,t.c),n.push(t.materialIndex),a){const t=this.faceVertexUvs[0][e];n.push(d(t[0]),d(t[1]),d(t[2]))}if(o&&n.push(u(t.normal)),s){const e=t.vertexNormals;n.push(u(e[0]),u(e[1]),u(e[2]))}if(c&&n.push(h(t.color)),f){const e=t.vertexColors;n.push(h(e[0]),h(e[1]),h(e[2]))}}function l(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==r[t]||(r[t]=i.length/3,i.push(e.x,e.y,e.z)),r[t]}function h(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==o[t]||(o[t]=a.length,a.push(e.getHex())),o[t]}function d(e){const t=e.x.toString()+e.y.toString();return void 0!==c[t]||(c[t]=s.length/2,s.push(e.x,e.y)),c[t]}return e.data={},e.data.vertices=t,e.data.normals=i,a.length>0&&(e.data.colors=a),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e},clone:function(){return(new Rm).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let e=0,n=t.length;e<n;e++)this.vertices.push(t[e].clone());const n=e.colors;for(let e=0,t=n.length;e<t;e++)this.colors.push(n[e].clone());const i=e.faces;for(let e=0,t=i.length;e<t;e++)this.faces.push(i[e].clone());for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];r.push(t.clone())}this.faceVertexUvs[t].push(r)}}const r=e.morphTargets;for(let e=0,t=r.length;e<t;e++){const t={};if(t.name=r[e].name,void 0!==r[e].vertices){t.vertices=[];for(let n=0,i=r[e].vertices.length;n<i;n++)t.vertices.push(r[e].vertices[n].clone())}if(void 0!==r[e].normals){t.normals=[];for(let n=0,i=r[e].normals.length;n<i;n++)t.normals.push(r[e].normals[n].clone())}this.morphTargets.push(t)}const a=e.morphNormals;for(let e=0,t=a.length;e<t;e++){const t={};if(void 0!==a[e].vertexNormals){t.vertexNormals=[];for(let n=0,i=a[e].vertexNormals.length;n<i;n++){const i=a[e].vertexNormals[n],r={};r.a=i.a.clone(),r.b=i.b.clone(),r.c=i.c.clone(),t.vertexNormals.push(r)}}if(void 0!==a[e].faceNormals){t.faceNormals=[];for(let n=0,i=a[e].faceNormals.length;n<i;n++)t.faceNormals.push(a[e].faceNormals[n].clone())}this.morphNormals.push(t)}const o=e.skinWeights;for(let e=0,t=o.length;e<t;e++)this.skinWeights.push(o[e].clone());const s=e.skinIndices;for(let e=0,t=s.length;e<t;e++)this.skinIndices.push(s[e].clone());const c=e.lineDistances;for(let e=0,t=c.length;e<t;e++)this.lineDistances.push(c[e]);const l=e.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Pm extends Rm{constructor(e,t,n,i,r,a){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new id(e,t,n,i,r,a)),this.mergeVertices()}}class Om extends Oh{constructor(e,t,n,i){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;const r=[],a=[],o=[],s=[],c=new zl,l=new Ll;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let r=0,u=3;r<=t;r++,u+=3){const h=n+r/t*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),a.push(c.x,c.y,c.z),o.push(0,0,1),l.x=(a[u]/e+1)/2,l.y=(a[u+1]/e+1)/2,s.push(l.x,l.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new wh(a,3)),this.setAttribute("normal",new wh(o,3)),this.setAttribute("uv",new wh(s,2))}}class Nm extends Rm{constructor(e,t,n,i){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Om(e,t,n,i)),this.mergeVertices()}}class Um extends Oh{constructor(e,t,n,i,r,a,o,s){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};const c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;const l=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let A=0;function g(n){const r=f,a=new Ll,p=new zl;let g=0;const v=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*y,0),h.push(0,y,0),d.push(.5,.5),f++;const E=f;for(let e=0;e<=i;e++){const t=e/i*s+o,n=Math.cos(t),r=Math.sin(t);p.x=v*r,p.y=m*y,p.z=v*n,u.push(p.x,p.y,p.z),h.push(0,y,0),a.x=.5*n+.5,a.y=.5*r*y+.5,d.push(a.x,a.y),f++}for(let e=0;e<i;e++){const t=r+e,i=E+e;!0===n?l.push(i,i+1,t):l.push(i+1,i,t),g+=3}c.addGroup(A,g,!0===n?1:2),A+=g}!function(){const a=new zl,g=new zl;let v=0;const y=(t-e)/n;for(let c=0;c<=r;c++){const l=[],A=c/r,v=A*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*s+o,c=Math.sin(r),p=Math.cos(r);g.x=v*c,g.y=-A*n+m,g.z=v*p,u.push(g.x,g.y,g.z),a.set(c,y,p).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-A),l.push(f++)}p.push(l)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=p[t][e],i=p[t+1][e],r=p[t+1][e+1],a=p[t][e+1];l.push(n,i,a),l.push(i,r,a),v+=6}c.addGroup(A,v,0),A+=v}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(l),this.setAttribute("position",new wh(u,3)),this.setAttribute("normal",new wh(h,3)),this.setAttribute("uv",new wh(d,2))}}class Gm extends Rm{constructor(e,t,n,i,r,a,o,s){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Um(e,t,n,i,r,a,o,s)),this.mergeVertices()}}class Hm extends Gm{constructor(e,t,n,i,r,a,o){super(0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}}class Qm extends Um{constructor(e,t,n,i,r,a,o){super(0,e,t,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}}class km extends Oh{constructor(e,t,n,i){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;const r=[],a=[];function o(e,t,n,i){const r=i+1,a=[];for(let i=0;i<=r;i++){a[i]=[];const o=e.clone().lerp(n,i/r),s=t.clone().lerp(n,i/r),c=r-i;for(let e=0;e<=c;e++)a[i][e]=0===e&&i===r?o:o.clone().lerp(s,e/c)}for(let e=0;e<r;e++)for(let t=0;t<2*(r-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(a[e][n+1]),s(a[e+1][n]),s(a[e][n])):(s(a[e][n+1]),s(a[e+1][n+1]),s(a[e+1][n]))}}function s(e){r.push(e.x,e.y,e.z)}function c(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function l(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new zl,i=new zl,r=new zl;for(let a=0;a<t.length;a+=3)c(t[a+0],n),c(t[a+1],i),c(t[a+2],r),o(n,i,r,e)}(i=i||0),function(e){const t=new zl;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new zl;for(let n=0;n<r.length;n+=3){e.x=r[n+0],e.y=r[n+1],e.z=r[n+2];const i=u(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(i,1-o)}var t;(function(){const e=new zl,t=new zl,n=new zl,i=new zl,o=new Ll,s=new Ll,c=new Ll;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),o.set(a[d+0],a[d+1]),s.set(a[d+2],a[d+3]),c.set(a[d+4],a[d+5]),i.copy(e).add(t).add(n).divideScalar(3);const f=u(i);l(o,d+0,e,f),l(s,d+2,t,f),l(c,d+4,n,f)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new wh(r,3)),this.setAttribute("normal",new wh(r.slice(),3)),this.setAttribute("uv",new wh(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}}class zm extends km{constructor(e,t){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class Vm extends Rm{constructor(e,t){super(),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zm(e,t)),this.mergeVertices()}}const Wm=new zl,jm=new zl,Jm=new zl,Ym=new ih;class Xm extends Oh{constructor(e,t){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1,e.isGeometry&&(e=(new Oh).fromGeometry(e));const n=Math.pow(10,4),i=Math.cos(Fl.DEG2RAD*t),r=e.getIndex(),a=e.getAttribute("position"),o=r?r.count:a.count,s=[0,0,0],c=["a","b","c"],l=new Array(3),u={},h=[];for(let e=0;e<o;e+=3){r?(s[0]=r.getX(e),s[1]=r.getX(e+1),s[2]=r.getX(e+2)):(s[0]=e,s[1]=e+1,s[2]=e+2);const{a:t,b:o,c:d}=Ym;if(t.fromBufferAttribute(a,s[0]),o.fromBufferAttribute(a,s[1]),d.fromBufferAttribute(a,s[2]),Ym.getNormal(Jm),l[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,l[1]=`${Math.round(o.x*n)},${Math.round(o.y*n)},${Math.round(o.z*n)}`,l[2]=`${Math.round(d.x*n)},${Math.round(d.y*n)},${Math.round(d.z*n)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=l[e],r=l[t],a=Ym[c[e]],o=Ym[c[t]],d=`${n}_${r}`,f=`${r}_${n}`;f in u&&u[f]?(Jm.dot(u[f].normal)<=i&&(h.push(a.x,a.y,a.z),h.push(o.x,o.y,o.z)),u[f]=null):d in u||(u[d]={index0:s[e],index1:s[t],normal:Jm.clone()})}}for(const e in u)if(u[e]){const{index0:t,index1:n}=u[e];Wm.fromBufferAttribute(a,t),jm.fromBufferAttribute(a,n),h.push(Wm.x,Wm.y,Wm.z),h.push(jm.x,jm.y,jm.z)}this.setAttribute("position",new wh(h,3))}}const qm=function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let a=Km(e,0,r,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,c,l,u,h,d,f;if(i&&(a=function(e,t,n,i){const r=[];let a,o,s,c,l;for(a=0,o=t.length;a<o;a++)s=t[a]*i,c=a<o-1?t[a+1]*i:e.length,l=Km(e,s,c,i,!1),l===l.next&&(l.steiner=!0),r.push(cA(l));for(r.sort(rA),a=0;a<r.length;a++)aA(r[a],n),n=Zm(n,n.next);return n}(e,t,a,n)),e.length>80*n){s=l=e[0],c=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);f=Math.max(l-s,u-c),f=0!==f?1/f:0}return $m(a,o,n,s,c,f),o};function Km(e,t,n,i,r){let a,o;if(r===function(e,t,n,i){let r=0;for(let a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=vA(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=vA(a,e[a],e[a+1],o);return o&&dA(o,o.next)&&(yA(o),o=o.next),o}function Zm(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!dA(i,i.next)&&0!==hA(i.prev,i,i.next))i=i.next;else{if(yA(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function $m(e,t,n,i,r,a,o){if(!e)return;!o&&a&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=sA(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,a,o,s,c,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ,i);t++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(o>1)}(r)}(e,i,r,a);let s,c,l=e;for(;e.prev!==e.next;)if(s=e.prev,c=e.next,a?tA(e,i,r,a):eA(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),yA(e),e=c.next,l=c.next;else if((e=c)===l){o?1===o?$m(e=nA(Zm(e),t,n),t,n,i,r,a,2):2===o&&iA(e,t,n,i,r,a):$m(Zm(e),t,n,i,r,a,1);break}}function eA(e){const t=e.prev,n=e,i=e.next;if(hA(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(lA(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&hA(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function tA(e,t,n,i){const r=e.prev,a=e,o=e.next;if(hA(r,a,o)>=0)return!1;const s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,c=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=sA(s,c,t,n,i),d=sA(l,u,t,n,i);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&lA(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&hA(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&lA(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&hA(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&lA(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&hA(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&lA(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&hA(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function nA(e,t,n){let i=e;do{const r=i.prev,a=i.next.next;!dA(r,a)&&fA(r,i,i.next,a)&&AA(r,a)&&AA(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),yA(i),yA(i.next),i=e=a),i=i.next}while(i!==e);return Zm(i)}function iA(e,t,n,i,r,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&uA(o,e)){let s=gA(o,e);return o=Zm(o,o.next),s=Zm(s,s.next),$m(o,t,n,i,r,a),void $m(s,t,n,i,r,a)}e=e.next}o=o.next}while(o!==e)}function rA(e,t){return e.x-t.x}function aA(e,t){if(t=function(e,t){let n=t;const i=e.x,r=e.y;let a,o=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>o){if(o=e,e===i){if(r===n.y)return n;if(r===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(i===o)return a;const s=a,c=a.x,l=a.y;let u,h=1/0;n=a;do{i>=n.x&&n.x>=c&&i!==n.x&&lA(r<l?i:o,r,c,l,r<l?o:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),AA(n,e)&&(u<h||u===h&&(n.x>a.x||n.x===a.x&&oA(a,n)))&&(a=n,h=u)),n=n.next}while(n!==s);return a}(e,t)){const n=gA(t,e);Zm(t,t.next),Zm(n,n.next)}}function oA(e,t){return hA(e.prev,e,t.prev)<0&&hA(t.next,e,e.next)<0}function sA(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function cA(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function lA(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function uA(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&fA(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(AA(e,t)&&AA(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(hA(e.prev,e,t.prev)||hA(e,t.prev,t))||dA(e,t)&&hA(e.prev,e,e.next)>0&&hA(t.prev,t,t.next)>0)}function hA(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function dA(e,t){return e.x===t.x&&e.y===t.y}function fA(e,t,n,i){const r=mA(hA(e,t,n)),a=mA(hA(e,t,i)),o=mA(hA(n,i,e)),s=mA(hA(n,i,t));return r!==a&&o!==s||(!(0!==r||!pA(e,n,t))||(!(0!==a||!pA(e,i,t))||(!(0!==o||!pA(n,e,i))||!(0!==s||!pA(n,t,i)))))}function pA(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function mA(e){return e>0?1:e<0?-1:0}function AA(e,t){return hA(e.prev,e,e.next)<0?hA(e,t,e.next)>=0&&hA(e,e.prev,t)>=0:hA(e,t,e.prev)<0||hA(e,e.next,t)<0}function gA(e,t){const n=new EA(e.i,e.x,e.y),i=new EA(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function vA(e,t,n,i){const r=new EA(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function yA(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function EA(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const xA={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return xA.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];bA(e),BA(n,e);let a=e.length;t.forEach(bA);for(let e=0;e<t.length;e++)i.push(a),a+=t[e].length,BA(n,t[e]);const o=qm(n,i);for(let e=0;e<o.length;e+=3)r.push(o.slice(e,e+3));return r}};function bA(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function BA(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class CA extends Oh{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++){a(e[t])}function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:wA;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);let A,g,v,y,E,x=!1;p&&(A=p.getSpacedPoints(s),x=!0,l=!1,g=p.computeFrenetFrames(s,!1),v=new zl,y=new zl,E=new zl),l||(f=0,u=0,h=0,d=0);const b=e.extractPoints(o);let B=b.shape;const C=b.holes;if(!xA.isClockWise(B)){B=B.reverse();for(let e=0,t=C.length;e<t;e++){const t=C[e];xA.isClockWise(t)&&(C[e]=t.reverse())}}const w=xA.triangulateShape(B,C),M=B;for(let e=0,t=C.length;e<t;e++){const t=C[e];B=B.concat(t)}function D(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const S=B.length,_=w.length;function T(e,t,n){let i,r,a;const o=e.x-t.x,s=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=o*o+s*s,h=o*l-s*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),f=t.x-s/h,p=t.y+o/h,m=((n.x-l/d-f)*l-(n.y+c/d-p)*c)/(o*l-s*c);i=f+o*m-e.x,r=p+s*m-e.y;const A=i*i+r*r;if(A<=2)return new Ll(i,r);a=Math.sqrt(A/2)}else{let e=!1;o>Number.EPSILON?c>Number.EPSILON&&(e=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(l)&&(e=!0),e?(i=-s,r=o,a=Math.sqrt(u)):(i=o,r=s,a=Math.sqrt(u/2))}return new Ll(i/a,r/a)}const I=[];for(let e=0,t=M.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),I[e]=T(M[e],M[n],M[i]);const F=[];let L,R=I.concat();for(let e=0,t=C.length;e<t;e++){const t=C[e];L=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[e]=T(t[e],t[i],t[r]);F.push(L),R=R.concat(L)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=D(M[e],I[e],i);N(t.x,t.y,-n)}for(let e=0,t=C.length;e<t;e++){const t=C[e];L=F[e];for(let e=0,r=t.length;e<r;e++){const r=D(t[e],L[e],i);N(r.x,r.y,-n)}}}const P=h+d;for(let e=0;e<S;e++){const t=l?D(B[e],R[e],P):B[e];x?(y.copy(g.normals[0]).multiplyScalar(t.x),v.copy(g.binormals[0]).multiplyScalar(t.y),E.copy(A[0]).add(y).add(v),N(E.x,E.y,E.z)):N(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<S;t++){const n=l?D(B[t],R[t],P):B[t];x?(y.copy(g.normals[e]).multiplyScalar(n.x),v.copy(g.binormals[e]).multiplyScalar(n.y),E.copy(A[e]).add(y).add(v),N(E.x,E.y,E.z)):N(n.x,n.y,c/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=D(M[e],I[e],i);N(t.x,t.y,c+n)}for(let e=0,t=C.length;e<t;e++){const t=C[e];L=F[e];for(let e=0,r=t.length;e<r;e++){const r=D(t[e],L[e],i);x?N(r.x,r.y+A[s-1].y,A[s-1].x+n):N(r.x,r.y,c+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=S*e,a=S*(e+1);G(t+i+n,t+r+n,t+r+a,t+i+a)}}}function N(e,t,n){a.push(e),a.push(t),a.push(n)}function U(e,t,r){H(e),H(t),H(r);const a=i.length/3,o=m.generateTopUV(n,i,a-3,a-2,a-1);Q(o[0]),Q(o[1]),Q(o[2])}function G(e,t,r,a){H(e),H(t),H(a),H(t),H(r),H(a);const o=i.length/3,s=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);Q(s[0]),Q(s[1]),Q(s[3]),Q(s[1]),Q(s[2]),Q(s[3])}function H(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function Q(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(l){let e=0,t=S*e;for(let e=0;e<_;e++){const n=w[e];U(n[2]+t,n[1]+t,n[0]+t)}e=s+2*f,t=S*e;for(let e=0;e<_;e++){const n=w[e];U(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<_;e++){const t=w[e];U(t[2],t[1],t[0])}for(let e=0;e<_;e++){const t=w[e];U(t[0]+S*s,t[1]+S*s,t[2]+S*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;O(M,t),t+=M.length;for(let e=0,n=C.length;e<n;e++){const n=C[e];O(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new wh(i,3)),this.setAttribute("uv",new wh(r,2)),this.computeVertexNormals()}toJSON(){const e=Oh.prototype.toJSON.call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}const wA={generateTopUV:function(e,t,n,i,r){const a=t[3*n],o=t[3*n+1],s=t[3*i],c=t[3*i+1],l=t[3*r],u=t[3*r+1];return[new Ll(a,o),new Ll(s,c),new Ll(l,u)]},generateSideWallUV:function(e,t,n,i,r,a){const o=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*a],A=t[3*a+1],g=t[3*a+2];return Math.abs(s-u)<.01?[new Ll(o,1-c),new Ll(l,1-h),new Ll(d,1-p),new Ll(m,1-g)]:[new Ll(s,1-c),new Ll(u,1-h),new Ll(f,1-p),new Ll(A,1-g)]}};class MA extends Rm{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new CA(e,t)),this.mergeVertices()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}class DA extends km{constructor(e,t){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class SA extends Rm{constructor(e,t){super(),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new DA(e,t)),this.mergeVertices()}}class _A extends Oh{constructor(e,t,n,i){super(),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Fl.clamp(i,0,2*Math.PI);const r=[],a=[],o=[],s=1/t,c=new zl,l=new Ll;for(let r=0;r<=t;r++){const u=n+r*s*i,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=e.length-1;n++)c.x=e[n].x*h,c.y=e[n].y,c.z=e[n].x*d,a.push(c.x,c.y,c.z),l.x=r/t,l.y=n/(e.length-1),o.push(l.x,l.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const i=t+n*e.length,a=i,o=i+e.length,s=i+e.length+1,c=i+1;r.push(a,o,c),r.push(o,s,c)}if(this.setIndex(r),this.setAttribute("position",new wh(a,3)),this.setAttribute("uv",new wh(o,2)),this.computeVertexNormals(),i===2*Math.PI){const n=this.attributes.normal.array,i=new zl,r=new zl,a=new zl,o=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)i.x=n[s+0],i.y=n[s+1],i.z=n[s+2],r.x=n[o+s+0],r.y=n[o+s+1],r.z=n[o+s+2],a.addVectors(i,r).normalize(),n[s+0]=n[o+s+0]=a.x,n[s+1]=n[o+s+1]=a.y,n[s+2]=n[o+s+2]=a.z}}}class TA extends Rm{constructor(e,t,n,i){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new _A(e,t,n,i)),this.mergeVertices()}}class IA extends km{constructor(e,t){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class FA extends Rm{constructor(e,t){super(),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new IA(e,t)),this.mergeVertices()}}function LA(e,t,n){Oh.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],a=[],o=[],s=1e-5,c=new zl,l=new zl,u=new zl,h=new zl,d=new zl;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=t+1;for(let i=0;i<=n;i++){const f=i/n;for(let n=0;n<=t;n++){const i=n/t;e(i,f,l),r.push(l.x,l.y,l.z),i-s>=0?(e(i-s,f,u),h.subVectors(l,u)):(e(i+s,f,u),h.subVectors(u,l)),f-s>=0?(e(i,f-s,u),d.subVectors(l,u)):(e(i,f+s,u),d.subVectors(u,l)),c.crossVectors(h,d).normalize(),a.push(c.x,c.y,c.z),o.push(i,f)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*f+n,r=e*f+n+1,a=(e+1)*f+n+1,o=(e+1)*f+n;i.push(t,r,o),i.push(r,a,o)}this.setIndex(i),this.setAttribute("position",new wh(r,3)),this.setAttribute("normal",new wh(a,3)),this.setAttribute("uv",new wh(o,2))}function RA(e,t,n){Rm.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new LA(e,t,n)),this.mergeVertices()}LA.prototype=Object.create(Oh.prototype),LA.prototype.constructor=LA,RA.prototype=Object.create(Rm.prototype),RA.prototype.constructor=RA;class PA extends Rm{constructor(e,t,n,i){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Ed(e,t,n,i)),this.mergeVertices()}}class OA extends Rm{constructor(e,t,n,i){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new km(e,t,n,i)),this.mergeVertices()}}class NA extends Oh{constructor(e,t,n,i,r,a){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;const o=[],s=[],c=[],l=[];let u=e;const h=(t-e)/(i=void 0!==i?Math.max(1,i):1),d=new zl,f=new Ll;for(let e=0;e<=i;e++){for(let e=0;e<=n;e++){const i=r+e/n*a;d.x=u*Math.cos(i),d.y=u*Math.sin(i),s.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,l.push(f.x,f.y)}u+=h}for(let e=0;e<i;e++){const t=e*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,a=i+n+1,s=i+n+2,c=i+1;o.push(r,a,c),o.push(a,s,c)}}this.setIndex(o),this.setAttribute("position",new wh(s,3)),this.setAttribute("normal",new wh(c,3)),this.setAttribute("uv",new wh(l,2))}}class UA extends Rm{constructor(e,t,n,i,r,a){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new NA(e,t,n,i,r,a)),this.mergeVertices()}}class GA extends Oh{constructor(e,t){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;const n=[],i=[],r=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))c(e);else for(let t=0;t<e.length;t++)c(e[t]),this.addGroup(o,s,t),o+=s,s=0;function c(e){const o=i.length/3,c=e.extractPoints(t);let l=c.shape;const u=c.holes;!1===xA.isClockWise(l)&&(l=l.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===xA.isClockWise(t)&&(u[e]=t.reverse())}const h=xA.triangulateShape(l,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];l=l.concat(t)}for(let e=0,t=l.length;e<t;e++){const t=l[e];i.push(t.x,t.y,0),r.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],i=t[0]+o,r=t[1]+o,a=t[2]+o;n.push(i,r,a),s+=3}}this.setIndex(n),this.setAttribute("position",new wh(i,3)),this.setAttribute("normal",new wh(r,3)),this.setAttribute("uv",new wh(a,2))}toJSON(){const e=Oh.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class HA extends Rm{constructor(e,t){super(),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new GA(e,t)),this.mergeVertices()}toJSON(){const e=Rm.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class QA extends Oh{constructor(e,t,n,i,r,a,o){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;const s=Math.min(a+o,Math.PI);let c=0;const l=[],u=new zl,h=new zl,d=[],f=[],p=[],m=[];for(let d=0;d<=n;d++){const A=[],g=d/n;let v=0;0==d&&0==a?v=.5/t:d==n&&s==Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(i+s*r)*Math.sin(a+g*o),u.y=e*Math.cos(a+g*o),u.z=e*Math.sin(i+s*r)*Math.sin(a+g*o),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(s+v,1-g),A.push(c++)}l.push(A)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){const t=l[e][i+1],r=l[e][i],o=l[e+1][i],c=l[e+1][i+1];(0!==e||a>0)&&d.push(t,r,c),(e!==n-1||s<Math.PI)&&d.push(r,o,c)}this.setIndex(d),this.setAttribute("position",new wh(f,3)),this.setAttribute("normal",new wh(p,3)),this.setAttribute("uv",new wh(m,2))}}class kA extends Rm{constructor(e,t,n,i,r,a,o){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new QA(e,t,n,i,r,a,o)),this.mergeVertices()}}class zA extends km{constructor(e,t){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class VA extends Rm{constructor(e,t){super(),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zA(e,t)),this.mergeVertices()}}class WA extends CA{constructor(e,t){const n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Oh;const i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(i,t),this.type="TextBufferGeometry"}}class jA extends Rm{constructor(e,t){super(),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new WA(e,t)),this.mergeVertices()}}class JA extends Oh{constructor(e,t,n,i,r){super(),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;const a=[],o=[],s=[],c=[],l=new zl,u=new zl,h=new zl;for(let a=0;a<=n;a++)for(let d=0;d<=i;d++){const f=d/i*r,p=a/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),o.push(u.x,u.y,u.z),l.x=e*Math.cos(f),l.y=e*Math.sin(f),h.subVectors(u,l).normalize(),s.push(h.x,h.y,h.z),c.push(d/i),c.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*e+t-1,r=(i+1)*(e-1)+t-1,o=(i+1)*(e-1)+t,s=(i+1)*e+t;a.push(n,r,s),a.push(r,o,s)}this.setIndex(a),this.setAttribute("position",new wh(o,3)),this.setAttribute("normal",new wh(s,3)),this.setAttribute("uv",new wh(c,2))}}class YA extends Rm{constructor(e,t,n,i,r){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new JA(e,t,n,i,r)),this.mergeVertices()}}class XA extends Oh{constructor(e,t,n,i,r,a){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;const o=[],s=[],c=[],l=[],u=new zl,h=new zl,d=new zl,f=new zl,p=new zl,m=new zl,A=new zl;for(let o=0;o<=n;++o){const v=o/n*r*Math.PI*2;g(v,r,a,e,d),g(v+.01,r,a,e,f),m.subVectors(f,d),A.addVectors(f,d),p.crossVectors(m,A),A.crossVectors(p,m),p.normalize(),A.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,a=-t*Math.cos(r),f=t*Math.sin(r);u.x=d.x+(a*A.x+f*p.x),u.y=d.y+(a*A.y+f*p.y),u.z=d.z+(a*A.z+f*p.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(o/n),l.push(e/i)}}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),a=(i+1)*e+t,s=(i+1)*(e-1)+t;o.push(n,r,s),o.push(r,a,s)}function g(e,t,n,i,r){const a=Math.cos(e),o=Math.sin(e),s=n/t*e,c=Math.cos(s);r.x=i*(2+c)*.5*a,r.y=i*(2+c)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new wh(s,3)),this.setAttribute("normal",new wh(c,3)),this.setAttribute("uv",new wh(l,2))}}class qA extends Rm{constructor(e,t,n,i,r,a,o){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new XA(e,t,n,i,r,a)),this.mergeVertices()}}class KA extends Oh{constructor(e,t,n,i,r){super(),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new zl,s=new zl,c=new Ll;let l=new zl;const u=[],h=[],d=[],f=[];function p(r){l=e.getPointAt(r/t,l);const c=a.normals[r],d=a.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),a=-Math.cos(t);s.x=a*c.x+r*d.x,s.y=a*c.y+r*d.y,s.z=a*c.z+r*d.z,s.normalize(),h.push(s.x,s.y,s.z),o.x=l.x+n*s.x,o.y=l.y+n*s.y,o.z=l.z+n*s.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)c.x=e/t,c.y=n/i,d.push(c.x,c.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),a=(i+1)*e+t,o=(i+1)*(e-1)+t;f.push(n,r,o),f.push(r,a,o)}}()}(),this.setIndex(f),this.setAttribute("position",new wh(u,3)),this.setAttribute("normal",new wh(h,3)),this.setAttribute("uv",new wh(d,2))}toJSON(){const e=Oh.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class ZA extends Rm{constructor(e,t,n,i,r,a){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");const o=new KA(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}}class $A extends Oh{constructor(e){super(),this.type="WireframeGeometry";const t=[],n=[0,0],i={},r=["a","b","c"];if(e&&e.isGeometry){const a=e.faces;for(let e=0,t=a.length;e<t;e++){const t=a[e];for(let e=0;e<3;e++){const a=t[r[e]],o=t[r[(e+1)%3]];n[0]=Math.min(a,o),n[1]=Math.max(a,o);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const n in i){const r=i[n];let a=e.vertices[r.index1];t.push(a.x,a.y,a.z),a=e.vertices[r.index2],t.push(a.x,a.y,a.z)}}else if(e&&e.isBufferGeometry){const r=new zl;if(null!==e.index){const a=e.attributes.position,o=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,t=s.length;e<t;++e){const t=s[e],r=t.start;for(let e=r,a=r+t.count;e<a;e+=3)for(let t=0;t<3;t++){const r=o.getX(e+t),a=o.getX(e+(t+1)%3);n[0]=Math.min(r,a),n[1]=Math.max(r,a);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const e in i){const n=i[e];r.fromBufferAttribute(a,n.index1),t.push(r.x,r.y,r.z),r.fromBufferAttribute(a,n.index2),t.push(r.x,r.y,r.z)}}else{const n=e.attributes.position;for(let e=0,i=n.count/3;e<i;e++)for(let i=0;i<3;i++){const a=3*e+i;r.fromBufferAttribute(n,a),t.push(r.x,r.y,r.z);const o=3*e+(i+1)%3;r.fromBufferAttribute(n,o),t.push(r.x,r.y,r.z)}}}this.setAttribute("position",new wh(t,3))}}var eg=Object.freeze({__proto__:null,BoxGeometry:Pm,BoxBufferGeometry:id,CircleGeometry:Nm,CircleBufferGeometry:Om,ConeGeometry:Hm,ConeBufferGeometry:Qm,CylinderGeometry:Gm,CylinderBufferGeometry:Um,DodecahedronGeometry:Vm,DodecahedronBufferGeometry:zm,EdgesGeometry:Xm,ExtrudeGeometry:MA,ExtrudeBufferGeometry:CA,IcosahedronGeometry:SA,IcosahedronBufferGeometry:DA,LatheGeometry:TA,LatheBufferGeometry:_A,OctahedronGeometry:FA,OctahedronBufferGeometry:IA,ParametricGeometry:RA,ParametricBufferGeometry:LA,PlaneGeometry:PA,PlaneBufferGeometry:Ed,PolyhedronGeometry:OA,PolyhedronBufferGeometry:km,RingGeometry:UA,RingBufferGeometry:NA,ShapeGeometry:HA,ShapeBufferGeometry:GA,SphereGeometry:kA,SphereBufferGeometry:QA,TetrahedronGeometry:VA,TetrahedronBufferGeometry:zA,TextGeometry:jA,TextBufferGeometry:WA,TorusGeometry:YA,TorusBufferGeometry:JA,TorusKnotGeometry:qA,TorusKnotBufferGeometry:XA,TubeGeometry:ZA,TubeBufferGeometry:KA,WireframeGeometry:$A});function tg(e){fh.call(this),this.type="ShadowMaterial",this.color=new uh(0),this.transparent=!0,this.setValues(e)}function ng(e){sd.call(this,e),this.type="RawShaderMaterial"}function ig(e){fh.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new uh(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ll(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function rg(e){ig.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ll(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Fl.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function ag(e){fh.call(this),this.type="MeshPhongMaterial",this.color=new uh(16777215),this.specular=new uh(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ll(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function og(e){fh.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new uh(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ll(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function sg(e){fh.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ll(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function cg(e){fh.call(this),this.type="MeshLambertMaterial",this.color=new uh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new uh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function lg(e){fh.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new uh(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ll(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ug(e){cm.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}tg.prototype=Object.create(fh.prototype),tg.prototype.constructor=tg,tg.prototype.isShadowMaterial=!0,tg.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this},ng.prototype=Object.create(sd.prototype),ng.prototype.constructor=ng,ng.prototype.isRawShaderMaterial=!0,ig.prototype=Object.create(fh.prototype),ig.prototype.constructor=ig,ig.prototype.isMeshStandardMaterial=!0,ig.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},rg.prototype=Object.create(ig.prototype),rg.prototype.constructor=rg,rg.prototype.isMeshPhysicalMaterial=!0,rg.prototype.copy=function(e){return ig.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new uh).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},ag.prototype=Object.create(fh.prototype),ag.prototype.constructor=ag,ag.prototype.isMeshPhongMaterial=!0,ag.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},og.prototype=Object.create(fh.prototype),og.prototype.constructor=og,og.prototype.isMeshToonMaterial=!0,og.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},sg.prototype=Object.create(fh.prototype),sg.prototype.constructor=sg,sg.prototype.isMeshNormalMaterial=!0,sg.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},cg.prototype=Object.create(fh.prototype),cg.prototype.constructor=cg,cg.prototype.isMeshLambertMaterial=!0,cg.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},lg.prototype=Object.create(fh.prototype),lg.prototype.constructor=lg,lg.prototype.isMeshMatcapMaterial=!0,lg.prototype.copy=function(e){return fh.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ug.prototype=Object.create(cm.prototype),ug.prototype.constructor=ug,ug.prototype.isLineDashedMaterial=!0,ug.prototype.copy=function(e){return cm.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var hg=Object.freeze({__proto__:null,ShadowMaterial:tg,SpriteMaterial:Lp,RawShaderMaterial:ng,ShaderMaterial:sd,PointsMaterial:ym,MeshPhysicalMaterial:rg,MeshStandardMaterial:ig,MeshPhongMaterial:ag,MeshToonMaterial:og,MeshNormalMaterial:sg,MeshLambertMaterial:cg,MeshDepthMaterial:pp,MeshDistanceMaterial:mp,MeshBasicMaterial:ph,MeshMatcapMaterial:lg,LineDashedMaterial:ug,LineBasicMaterial:cm,Material:fh});const dg={arraySlice:function(e,t,n){return dg.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let a=0,o=0;o!==i;++a){const i=n[a]*t;for(let n=0;n!==t;++n)r[o++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,a=e[0];for(;void 0!==a&&void 0===a[i];)a=e[r++];if(void 0===a)return;let o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{o=a[i],void 0!==o&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)},subclip:function(e,t,n,i,r){r=r||30;const a=e.clone();a.name=t;const o=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],s=t.getValueSize(),c=[],l=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*r;if(!(a<n||a>=i)){c.push(t.times[e]);for(let n=0;n<s;++n)l.push(t.values[e*s+n])}}0!==c.length&&(t.times=dg.convertArray(c,t.times.constructor),t.values=dg.convertArray(l,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===i||i<=0)&&(i=30);const r=n.tracks.length,a=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const o=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===o)continue;let s=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);let l=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=i.times.length-1;let d;if(a<=i.times[0]){const e=s,t=c-s;d=dg.arraySlice(i.values,e,t)}else if(a>=i.times[h]){const e=h*c+s,t=e+c-s;d=dg.arraySlice(i.values,e,t)}else{const e=i.createInterpolant(),t=s,n=c-s;e.evaluate(a),d=dg.arraySlice(e.resultBuffer,t,n)}if("quaternion"===r){(new kl).fromArray(d).normalize().conjugate().toArray(d)}const f=o.times.length;for(let e=0;e<f;++e){const t=e*u+l;if("quaternion"===r)kl.multiplyQuaternionsFlat(o.values,t,d,0,o.values,t);else{const e=u-2*l;for(let n=0;n<e;++n)o.values[t+n]-=d[n]}}}return e.blendMode=Al,e}};function fg(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function pg(e,t,n,i){fg.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function mg(e,t,n,i){fg.call(this,e,t,n,i)}function Ag(e,t,n,i){fg.call(this,e,t,n,i)}function gg(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dg.convertArray(t,this.TimeBufferType),this.values=dg.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function vg(e,t,n){gg.call(this,e,t,n)}function yg(e,t,n,i){gg.call(this,e,t,n,i)}function Eg(e,t,n,i){gg.call(this,e,t,n,i)}function xg(e,t,n,i){fg.call(this,e,t,n,i)}function bg(e,t,n,i){gg.call(this,e,t,n,i)}function Bg(e,t,n,i){gg.call(this,e,t,n,i)}function Cg(e,t,n,i){gg.call(this,e,t,n,i)}function wg(e,t,n,i){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==i?i:ml,this.uuid=Fl.generateUUID(),this.duration<0&&this.resetDuration()}function Mg(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Eg;case"vector":case"vector2":case"vector3":case"vector4":return Cg;case"color":return yg;case"quaternion":return bg;case"bool":case"boolean":return vg;case"string":return Bg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];dg.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(fg.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(e>=r)break e;{const o=t[1];e<o&&(n=2,r=o);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0}}for(;n<a;){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(fg.prototype,{beforeStart_:fg.prototype.copySampleValue_,afterEnd_:fg.prototype.copySampleValue_}),pg.prototype=Object.assign(Object.create(fg.prototype),{constructor:pg,DefaultSettings_:{endingStart:dl,endingEnd:dl},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case fl:r=e,o=2*t-n;break;case pl:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case fl:a=e,s=2*n-t;break;case pl:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}const c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=a*l},interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,A=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,y=d*m-d*p;for(let e=0;e!==o;++e)r[e]=A*a[l+e]+g*a[c+e]+v*a[s+e]+y*a[u+e];return r}}),mg.prototype=Object.assign(Object.create(fg.prototype),{constructor:mg,interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(n-t)/(i-t),u=1-l;for(let e=0;e!==o;++e)r[e]=a[c+e]*u+a[s+e]*l;return r}}),Ag.prototype=Object.assign(Object.create(fg.prototype),{constructor:Ag,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(gg,{toJSON:function(e){const t=e.constructor;let n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:dg.convertArray(e.times,Array),values:dg.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}}),Object.assign(gg.prototype,{constructor:gg,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ul,InterpolantFactoryMethodDiscrete:function(e){return new Ag(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new mg(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new pg(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case ll:t=this.InterpolantFactoryMethodDiscrete;break;case ul:t=this.InterpolantFactoryMethodLinear;break;case hl:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ll;case this.InterpolantFactoryMethodLinear:return ul;case this.InterpolantFactoryMethodSmooth:return hl}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=dg.arraySlice(n,r,a),this.values=dg.arraySlice(this.values,r*e,a*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==a&&a>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,a),e=!1;break}a=i}if(void 0!==i&&dg.isTypedArray(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e},optimize:function(){const e=dg.arraySlice(this.times),t=dg.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===hl,r=e.length-1;let a=1;for(let o=1;o<r;++o){let r=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==s[0]))if(i)r=!0;else{const e=o*n,i=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[i+o]||n!==t[a+o]){r=!0;break}}}if(r){if(o!==a){e[a]=e[o];const i=o*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,o=0;o!==n;++o)t[i+o]=t[e+o];++a}return a!==e.length?(this.times=dg.arraySlice(e,0,a),this.values=dg.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this},clone:function(){const e=dg.arraySlice(this.times,0),t=dg.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),vg.prototype=Object.assign(Object.create(gg.prototype),{constructor:vg,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ll,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),yg.prototype=Object.assign(Object.create(gg.prototype),{constructor:yg,ValueTypeName:"color"}),Eg.prototype=Object.assign(Object.create(gg.prototype),{constructor:Eg,ValueTypeName:"number"}),xg.prototype=Object.assign(Object.create(fg.prototype),{constructor:xg,interpolate_:function(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t);let c=e*o;for(let e=c+o;c!==e;c+=4)kl.slerpFlat(r,0,a,c-o,a,c,s);return r}}),bg.prototype=Object.assign(Object.create(gg.prototype),{constructor:bg,ValueTypeName:"quaternion",DefaultInterpolation:ul,InterpolantFactoryMethodLinear:function(e){return new xg(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Bg.prototype=Object.assign(Object.create(gg.prototype),{constructor:Bg,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ll,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Cg.prototype=Object.assign(Object.create(gg.prototype),{constructor:Cg,ValueTypeName:"vector"}),Object.assign(wg,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(Mg(n[e]).scale(i));return new wg(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(gg.toJSON(n[e]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,a=[];for(let e=0;e<r;e++){let o=[],s=[];o.push((e+r-1)%r,e,(e+1)%r),s.push(0,1,0);const c=dg.getKeyframeOrder(o);o=dg.sortedArray(o,1,c),s=dg.sortedArray(s,1,c),i||0!==o[0]||(o.push(r),s.push(s[0])),a.push(new Eg(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new wg(e,-1,a)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.name.match(r);if(a&&a.length>1){const e=a[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const a=[];for(const e in i)a.push(wg.CreateFromMorphTargetSequence(e,i[e],t,n));return a},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const a=[],o=[];dg.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const c=e.hierarchy||[];for(let e=0;e<c.length;e++){const r=c[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],a=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),a.push(i.morphTarget===n?1:0)}i.push(new Eg(".morphTargetInfluence["+n+"]",e,a))}s=e.length*(a||1)}else{const a=".bones["+t[e].name+"]";n(Cg,a+".position",r,"pos",i),n(bg,a+".quaternion",r,"rot",i),n(Cg,a+".scale",r,"scl",i)}}if(0===i.length)return null;return new wg(r,s,i,o)}}),Object.assign(wg.prototype,{resetDuration:function(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new wg(this.name,this.duration,e,this.blendMode)}});const Dg={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Sg(e,t,n){const i=this;let r=!1,a=0,o=0,s=void 0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}const _g=new Sg;function Tg(e){this.manager=void 0!==e?e:_g,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Tg.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const Ig={};function Fg(e){Tg.call(this,e)}function Lg(e){Tg.call(this,e)}function Rg(e){Tg.call(this,e)}function Pg(e){Tg.call(this,e)}function Og(e){Tg.call(this,e)}function Ng(e){Tg.call(this,e)}function Ug(e){Tg.call(this,e)}function Gg(){this.type="Curve",this.arcLengthDivisions=200}function Hg(e,t,n,i,r,a,o,s){Gg.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Qg(e,t,n,i,r,a){Hg.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function kg(){let e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){let c=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(i-t)/(o+s)+(i-n)/s;c*=o,l*=o,r(t,n,c,l)},calc:function(r){const a=r*r;return e+t*r+n*a+i*(a*r)}}}Fg.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Fg,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Dg.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0!==Ig[e])return void Ig[e].push({onLoad:t,onProgress:n,onError:i});const o=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(o){const n=o[1],a=!!o[2];let s=o[3];s=decodeURIComponent(s),a&&(s=atob(s));try{let i;const a=(this.responseType||"").toLowerCase();switch(a){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);i="blob"===a?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;i=t.parseFromString(s,n);break;case"json":i=JSON.parse(s);break;default:i=s}setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Ig[e]=[],Ig[e].push({onLoad:t,onProgress:n,onError:i}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,i=Ig[e];if(delete Ig[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Dg.add(e,n);for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onLoad&&t.onLoad(n)}r.manager.itemEnd(e)}else{for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=Ig[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onProgress&&i.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=Ig[e];delete Ig[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=Ig[e];delete Ig[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return r.manager.itemStart(e),s},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Lg.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Lg,load:function(e,t,n,i){const r=this,a=new Fg(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=wg.parse(e[n]);t.push(i)}return t}}),Rg.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Rg,load:function(e,t,n,i){const r=this,a=[],o=new Dm;o.image=a;const s=new Fg(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);let c=0;function l(l){s.load(e[l],(function(e){const n=r.parse(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(o.minFilter=Nc),o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,i)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)l(t);else s.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Nc),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,i);return o}}),Pg.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Pg,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Dg.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),Dg.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}),Og.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Og,load:function(e,t,n,i){const r=new dd,a=new Pg(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],(function(e){r.images[n]=e,o++,6===o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let t=0;t<e.length;++t)s(t);return r}}),Ng.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Ng,load:function(e,t,n,i){const r=this,a=new pd,o=new Fg(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,(function(e){const n=r.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Fc,a.wrapT=void 0!==n.wrapT?n.wrapT:Fc,a.magFilter=void 0!==n.magFilter?n.magFilter:Nc,a.minFilter=void 0!==n.minFilter?n.minFilter:Nc,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Gc),1===n.mipmapCount&&(a.minFilter=Nc),a.needsUpdate=!0,t&&t(a,n))}),n,i),a}}),Ug.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Ug,load:function(e,t,n,i){const r=new Ul,a=new Pg(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){r.image=n;const i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?jc:Jc,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}),Object.assign(Gg.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let a;a=t||e*n[r-1];let o,s=0,c=r-1;for(;s<=c;)if(i=Math.floor(s+(c-s)/2),o=n[i]-a,o<0)s=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(i=c,n[i]===a)return i/(r-1);const l=n[i];return(i+(a-l)/(n[i+1]-l))/(r-1)},getTangent:function(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const a=this.getPoint(i),o=this.getPoint(r),s=t||(a.isVector2?new Ll:new zl);return s.copy(o).sub(a).normalize(),s},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new zl,i=[],r=[],a=[],o=new zl,s=new gu;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new zl),i[t].normalize()}r[0]=new zl,a[0]=new zl;let c=Number.MAX_VALUE;const l=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(i[t-1],i[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Fl.clamp(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(Fl.clamp(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),a[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Hg.prototype=Object.create(Gg.prototype),Hg.prototype.constructor=Hg,Hg.prototype.isEllipseCurve=!0,Hg.prototype.getPoint=function(e,t){const n=t||new Ll,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);const o=this.aStartAngle+e*r;let s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,i=c-this.aY;s=n*e-i*t+this.aX,c=n*t+i*e+this.aY}return n.set(s,c)},Hg.prototype.copy=function(e){return Gg.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Hg.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Hg.prototype.fromJSON=function(e){return Gg.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Qg.prototype=Object.create(Hg.prototype),Qg.prototype.constructor=Qg,Qg.prototype.isArcCurve=!0;const zg=new zl,Vg=new kg,Wg=new kg,jg=new kg;function Jg(e,t,n,i){Gg.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function Yg(e,t,n,i,r){const a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function Xg(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function qg(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function Kg(e,t,n,i){Gg.call(this),this.type="CubicBezierCurve",this.v0=e||new Ll,this.v1=t||new Ll,this.v2=n||new Ll,this.v3=i||new Ll}function Zg(e,t,n,i){Gg.call(this),this.type="CubicBezierCurve3",this.v0=e||new zl,this.v1=t||new zl,this.v2=n||new zl,this.v3=i||new zl}function $g(e,t){Gg.call(this),this.type="LineCurve",this.v1=e||new Ll,this.v2=t||new Ll}function ev(e,t){Gg.call(this),this.type="LineCurve3",this.v1=e||new zl,this.v2=t||new zl}function tv(e,t,n){Gg.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Ll,this.v1=t||new Ll,this.v2=n||new Ll}function nv(e,t,n){Gg.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new zl,this.v1=t||new zl,this.v2=n||new zl}function iv(e){Gg.call(this),this.type="SplineCurve",this.points=e||[]}Jg.prototype=Object.create(Gg.prototype),Jg.prototype.constructor=Jg,Jg.prototype.isCatmullRomCurve3=!0,Jg.prototype.getPoint=function(e,t){const n=t||new zl,i=this.points,r=i.length,a=(r-(this.closed?0:1))*e;let o,s,c=Math.floor(a),l=a-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:0===l&&c===r-1&&(c=r-2,l=1),this.closed||c>0?o=i[(c-1)%r]:(zg.subVectors(i[0],i[1]).add(i[0]),o=zg);const u=i[c%r],h=i[(c+1)%r];if(this.closed||c+2<r?s=i[(c+2)%r]:(zg.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=zg),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Vg.initNonuniformCatmullRom(o.x,u.x,h.x,s.x,t,n,i),Wg.initNonuniformCatmullRom(o.y,u.y,h.y,s.y,t,n,i),jg.initNonuniformCatmullRom(o.z,u.z,h.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(Vg.initCatmullRom(o.x,u.x,h.x,s.x,this.tension),Wg.initCatmullRom(o.y,u.y,h.y,s.y,this.tension),jg.initCatmullRom(o.z,u.z,h.z,s.z,this.tension));return n.set(Vg.calc(l),Wg.calc(l),jg.calc(l)),n},Jg.prototype.copy=function(e){Gg.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Jg.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Jg.prototype.fromJSON=function(e){Gg.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new zl).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Kg.prototype=Object.create(Gg.prototype),Kg.prototype.constructor=Kg,Kg.prototype.isCubicBezierCurve=!0,Kg.prototype.getPoint=function(e,t){const n=t||new Ll,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(qg(e,i.x,r.x,a.x,o.x),qg(e,i.y,r.y,a.y,o.y)),n},Kg.prototype.copy=function(e){return Gg.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Kg.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Kg.prototype.fromJSON=function(e){return Gg.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Zg.prototype=Object.create(Gg.prototype),Zg.prototype.constructor=Zg,Zg.prototype.isCubicBezierCurve3=!0,Zg.prototype.getPoint=function(e,t){const n=t||new zl,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(qg(e,i.x,r.x,a.x,o.x),qg(e,i.y,r.y,a.y,o.y),qg(e,i.z,r.z,a.z,o.z)),n},Zg.prototype.copy=function(e){return Gg.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Zg.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Zg.prototype.fromJSON=function(e){return Gg.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},$g.prototype=Object.create(Gg.prototype),$g.prototype.constructor=$g,$g.prototype.isLineCurve=!0,$g.prototype.getPoint=function(e,t){const n=t||new Ll;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},$g.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},$g.prototype.getTangent=function(e,t){const n=t||new Ll;return n.copy(this.v2).sub(this.v1).normalize(),n},$g.prototype.copy=function(e){return Gg.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$g.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$g.prototype.fromJSON=function(e){return Gg.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ev.prototype=Object.create(Gg.prototype),ev.prototype.constructor=ev,ev.prototype.isLineCurve3=!0,ev.prototype.getPoint=function(e,t){const n=t||new zl;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ev.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ev.prototype.copy=function(e){return Gg.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ev.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ev.prototype.fromJSON=function(e){return Gg.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},tv.prototype=Object.create(Gg.prototype),tv.prototype.constructor=tv,tv.prototype.isQuadraticBezierCurve=!0,tv.prototype.getPoint=function(e,t){const n=t||new Ll,i=this.v0,r=this.v1,a=this.v2;return n.set(Xg(e,i.x,r.x,a.x),Xg(e,i.y,r.y,a.y)),n},tv.prototype.copy=function(e){return Gg.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},tv.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},tv.prototype.fromJSON=function(e){return Gg.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},nv.prototype=Object.create(Gg.prototype),nv.prototype.constructor=nv,nv.prototype.isQuadraticBezierCurve3=!0,nv.prototype.getPoint=function(e,t){const n=t||new zl,i=this.v0,r=this.v1,a=this.v2;return n.set(Xg(e,i.x,r.x,a.x),Xg(e,i.y,r.y,a.y),Xg(e,i.z,r.z,a.z)),n},nv.prototype.copy=function(e){return Gg.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},nv.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},nv.prototype.fromJSON=function(e){return Gg.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},iv.prototype=Object.create(Gg.prototype),iv.prototype.constructor=iv,iv.prototype.isSplineCurve=!0,iv.prototype.getPoint=function(e,t){const n=t||new Ll,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],c=i[a],l=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Yg(o,s.x,c.x,l.x,u.x),Yg(o,s.y,c.y,l.y,u.y)),n},iv.prototype.copy=function(e){Gg.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this},iv.prototype.toJSON=function(){const e=Gg.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e},iv.prototype.fromJSON=function(e){Gg.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ll).fromArray(n))}return this};var rv=Object.freeze({__proto__:null,ArcCurve:Qg,CatmullRomCurve3:Jg,CubicBezierCurve:Kg,CubicBezierCurve3:Zg,EllipseCurve:Hg,LineCurve:$g,LineCurve3:ev,QuadraticBezierCurve:tv,QuadraticBezierCurve3:nv,SplineCurve:iv});function av(){Gg.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ov(e){av.call(this),this.type="Path",this.currentPoint=new Ll,e&&this.setFromPoints(e)}function sv(e){ov.call(this,e),this.uuid=Fl.generateUUID(),this.type="Shape",this.holes=[]}function cv(e,t){ku.call(this),this.type="Light",this.color=new uh(e),this.intensity=void 0!==t?t:1}function lv(e,t,n){cv.call(this,e,n),this.type="HemisphereLight",this.position.copy(ku.DefaultUp),this.updateMatrix(),this.groundColor=new uh(t)}function uv(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Ll(512,512),this.map=null,this.mapPass=null,this.matrix=new gu,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gd,this._frameExtents=new Ll(1,1),this._viewportCount=1,this._viewports=[new Gl(0,0,1,1)]}function hv(){uv.call(this,new ld(50,1,.5,500)),this.focus=1}function dv(e,t,n,i,r,a){cv.call(this,e,t),this.type="SpotLight",this.position.copy(ku.DefaultUp),this.updateMatrix(),this.target=new ku,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new hv}function fv(){uv.call(this,new ld(90,1,.5,500)),this._frameExtents=new Ll(4,2),this._viewportCount=6,this._viewports=[new Gl(2,1,1,1),new Gl(0,1,1,1),new Gl(3,1,1,1),new Gl(1,1,1,1),new Gl(3,0,1,1),new Gl(1,0,1,1)],this._cubeDirections=[new zl(1,0,0),new zl(-1,0,0),new zl(0,0,1),new zl(0,0,-1),new zl(0,1,0),new zl(0,-1,0)],this._cubeUps=[new zl(0,1,0),new zl(0,1,0),new zl(0,1,0),new zl(0,1,0),new zl(0,0,1),new zl(0,0,-1)]}function pv(e,t,n,i){cv.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new fv}function mv(e,t,n,i,r,a){cd.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Av(){uv.call(this,new mv(-5,5,5,-5,.5,500))}function gv(e,t){cv.call(this,e,t),this.type="DirectionalLight",this.position.copy(ku.DefaultUp),this.updateMatrix(),this.target=new ku,this.shadow=new Av}function vv(e,t){cv.call(this,e,t),this.type="AmbientLight"}function yv(e,t,n,i){cv.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}av.prototype=Object.assign(Object.create(Gg.prototype),{constructor:av,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new $g(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const e=n[i]-t,r=this.curves[i],a=r.getLength(),o=0===a?0:1-e/a;return r.getPointAt(o)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const a=r[i],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Gg.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Gg.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Gg.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new rv[n.type]).fromJSON(n))}return this}}),ov.prototype=Object.assign(Object.create(av.prototype),{constructor:ov,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new $g(this.currentPoint.clone(),new Ll(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new tv(this.currentPoint.clone(),new Ll(e,t),new Ll(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,a){const o=new Kg(this.currentPoint.clone(),new Ll(e,t),new Ll(n,i),new Ll(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this},splineThru:function(e){const t=new iv([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this},absarc:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this},ellipse:function(e,t,n,i,r,a,o,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,i,r,a,o,s),this},absellipse:function(e,t,n,i,r,a,o,s){const c=new Hg(e,t,n,i,r,a,o,s);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(e){return av.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=av.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return av.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),sv.prototype=Object.assign(Object.create(ov.prototype),{constructor:sv,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ov.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){const e=ov.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){ov.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new ov).fromJSON(n))}return this}}),cv.prototype=Object.assign(Object.create(ku.prototype),{constructor:cv,isLight:!0,copy:function(e){return ku.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=ku.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),lv.prototype=Object.assign(Object.create(cv.prototype),{constructor:lv,isHemisphereLight:!0,copy:function(e){return cv.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(uv.prototype,{_projScreenMatrix:new gu,_lightPositionWorld:new zl,_lookTarget:new zl,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),hv.prototype=Object.assign(Object.create(uv.prototype),{constructor:hv,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=2*Fl.RAD2DEG*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),uv.prototype.updateMatrices.call(this,e)}}),dv.prototype=Object.assign(Object.create(cv.prototype),{constructor:dv,isSpotLight:!0,copy:function(e){return cv.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),fv.prototype=Object.assign(Object.create(uv.prototype),{constructor:fv,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),pv.prototype=Object.assign(Object.create(cv.prototype),{constructor:pv,isPointLight:!0,copy:function(e){return cv.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),mv.prototype=Object.assign(Object.create(cd.prototype),{constructor:mv,isOrthographicCamera:!0,copy:function(e,t){return cd.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=ku.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Av.prototype=Object.assign(Object.create(uv.prototype),{constructor:Av,isDirectionalLightShadow:!0,updateMatrices:function(e){uv.prototype.updateMatrices.call(this,e)}}),gv.prototype=Object.assign(Object.create(cv.prototype),{constructor:gv,isDirectionalLight:!0,copy:function(e){return cv.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),vv.prototype=Object.assign(Object.create(cv.prototype),{constructor:vv,isAmbientLight:!0}),yv.prototype=Object.assign(Object.create(cv.prototype),{constructor:yv,isRectAreaLight:!0,copy:function(e){return cv.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=cv.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class Ev{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new zl)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}function xv(e,t){cv.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new Ev}function bv(e){Tg.call(this,e),this.textures={}}xv.prototype=Object.assign(Object.create(cv.prototype),{constructor:xv,isLightProbe:!0,copy:function(e){return cv.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=cv.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),bv.prototype=Object.assign(Object.create(Tg.prototype),{constructor:bv,load:function(e,t,n,i){const r=this,a=new Fg(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=new hg[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new uh).setHex(e.sheen)),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const r=e.uniforms[t];switch(i.uniforms[t]={},r.type){case"t":i.uniforms[t].value=n(r.value);break;case"c":i.uniforms[t].value=(new uh).setHex(r.value);break;case"v2":i.uniforms[t].value=(new Ll).fromArray(r.value);break;case"v3":i.uniforms[t].value=(new zl).fromArray(r.value);break;case"v4":i.uniforms[t].value=(new Gl).fromArray(r.value);break;case"m3":i.uniforms[t].value=(new Rl).fromArray(r.value);break;case"m4":i.uniforms[t].value=(new gu).fromArray(r.value);break;default:i.uniforms[t].value=r.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)i.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new Ll).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Ll).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const Bv={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Cv(){Oh.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function wv(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),gh.call(this,e,t,n),this.meshPerAttribute=i||1}function Mv(e){Tg.call(this,e)}Cv.prototype=Object.assign(Object.create(Oh.prototype),{constructor:Cv,isInstancedBufferGeometry:!0,copy:function(e){return Oh.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=Oh.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),wv.prototype=Object.assign(Object.create(gh.prototype),{constructor:wv,isInstancedBufferAttribute:!0,copy:function(e){return gh.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=gh.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Mv.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Mv,load:function(e,t,n,i){const r=this,a=new Fg(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers[t],r=new Uint32Array(i).buffer;return n[t]=r,r}(e,r.buffer),o=new Tp(new Dv[r.type](a),r.stride);return o.uuid=r.uuid,t[i]=o,o}const r=e.isInstancedBufferGeometry?new Cv:new Oh,a=e.data.index;if(void 0!==a){const e=new Dv[a.type](a.array);r.setIndex(new gh(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let a;if(n.isInterleavedBufferAttribute){a=new Fp(i(e.data,n.data),n.itemSize,n.offset,n.normalized)}else{const e=new Dv[n.type](n.array);a=new(n.isInstancedBufferAttribute?wv:gh)(e,n.itemSize,n.normalized)}void 0!==n.name&&(a.name=n.name),r.setAttribute(t,a)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],a=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];let o;if(r.isInterleavedBufferAttribute){o=new Fp(i(e.data,r.data),r.itemSize,r.offset,r.normalized)}else{o=new gh(new Dv[r.type](r.array),r.itemSize,r.normalized)}void 0!==r.name&&(o.name=r.name),a.push(o)}r.morphAttributes[t]=a}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let e=0,t=c.length;e!==t;++e){const t=c[e];r.addGroup(t.start,t.count,t.materialIndex)}const l=e.data.boundingSphere;if(void 0!==l){const e=new zl;void 0!==l.center&&e.fromArray(l.center),r.boundingSphere=new cu(e,l.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});const Dv={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};const Sv={UVMapping:Cc,CubeReflectionMapping:wc,CubeRefractionMapping:Mc,EquirectangularReflectionMapping:Dc,EquirectangularRefractionMapping:Sc,CubeUVReflectionMapping:_c,CubeUVRefractionMapping:Tc},_v={RepeatWrapping:Ic,ClampToEdgeWrapping:Fc,MirroredRepeatWrapping:Lc},Tv={NearestFilter:Rc,NearestMipmapNearestFilter:Pc,NearestMipmapLinearFilter:Oc,LinearFilter:Nc,LinearMipmapNearestFilter:Uc,LinearMipmapLinearFilter:Gc};function Iv(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Tg.call(this,e),this.options={premultiplyAlpha:"none"}}function Fv(){this.type="ShapePath",this.color=new uh,this.subPaths=[],this.currentPath=null}function Lv(e){this.type="Font",this.data=e}function Rv(e,t,n,i,r){const a=r.glyphs[e]||r.glyphs["?"];if(!a)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const o=new Fv;let s,c,l,u,h,d,f,p;if(a.o){const e=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let r=0,a=e.length;r<a;){switch(e[r++]){case"m":s=e[r++]*t+n,c=e[r++]*t+i,o.moveTo(s,c);break;case"l":s=e[r++]*t+n,c=e[r++]*t+i,o.lineTo(s,c);break;case"q":l=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,o.quadraticCurveTo(h,d,l,u);break;case"b":l=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,f=e[r++]*t+n,p=e[r++]*t+i,o.bezierCurveTo(h,d,f,p,l,u)}}}return{offsetX:a.ha*t,path:o}}function Pv(e){Tg.call(this,e)}let Ov;Iv.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Iv,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Dg.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(n){Dg.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(Fv.prototype,{moveTo:function(e,t){return this.currentPath=new ov,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new sv;r.curves=i.curves,t.push(r)}return t}function i(e,t){const n=t.length;let i=!1;for(let r=n-1,a=0;a<n;r=a++){let n=t[r],o=t[a],s=o.x-n.x,c=o.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=t[a],s=-s,o=t[r],c=-c),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=c*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return i}const r=xA.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);let o,s,c;const l=[];if(1===a.length)return s=a[0],c=new sv,c.curves=s.curves,l.push(c),l;let u=!r(a[0].getPoints());u=e?!u:u;const h=[],d=[];let f,p,m=[],A=0;d[A]=void 0,m[A]=[];for(let t=0,n=a.length;t<n;t++)s=a[t],f=s.getPoints(),o=r(f),o=e?!o:o,o?(!u&&d[A]&&A++,d[A]={s:new sv,p:f},d[A].s.curves=s.curves,u&&A++,m[A]=[]):m[A].push({h:s,p:f[0]});if(!d[0])return n(a);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,r=d.length;n<r;n++){const r=m[n];for(let a=0;a<r.length;a++){const o=r[a];let s=!0;for(let r=0;r<d.length;r++)i(o.p,d[r].p)&&(n!==r&&t.push({froms:n,tos:r,hole:a}),s?(s=!1,h[r].push(o)):e=!0);s&&h[n].push(o)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){c=d[e].s,l.push(c),p=m[e];for(let e=0,t=p.length;e<t;e++)c.holes.push(p[e].h)}return l}}),Object.assign(Lv.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);const n=[],i=function(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[];let s=0,c=0;for(let e=0;e<i.length;e++){const t=i[e];if("\n"===t)s=0,c-=a;else{const e=Rv(t,r,s,c,n);s+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data);for(let e=0,t=i.length;e<t;e++)Array.prototype.push.apply(n,i[e].toShapes());return n}}),Pv.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Pv,load:function(e,t,n,i){const r=this,a=new Fg(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new Lv(e)}});const Nv={getContext:function(){return void 0===Ov&&(Ov=new(window.AudioContext||window.webkitAudioContext)),Ov},setContext:function(e){Ov=e}};function Uv(e){Tg.call(this,e)}function Gv(e,t,n){xv.call(this,void 0,n);const i=(new uh).set(e),r=(new uh).set(t),a=new zl(i.r,i.g,i.b),o=new zl(r.r,r.g,r.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}function Hv(e,t){xv.call(this,void 0,t);const n=(new uh).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Uv.prototype=Object.assign(Object.create(Tg.prototype),{constructor:Uv,load:function(e,t,n,i){const r=this,a=new Fg(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{const e=n.slice(0);Nv.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}}),Gv.prototype=Object.assign(Object.create(xv.prototype),{constructor:Gv,isHemisphereLightProbe:!0,copy:function(e){return xv.prototype.copy.call(this,e),this},toJSON:function(e){return xv.prototype.toJSON.call(this,e)}}),Hv.prototype=Object.assign(Object.create(xv.prototype),{constructor:Hv,isAmbientLightProbe:!0,copy:function(e){return xv.prototype.copy.call(this,e),this},toJSON:function(e){return xv.prototype.toJSON.call(this,e)}});const Qv=new gu,kv=new gu;function zv(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ld,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ld,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(zv.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),i=t.eyeSep/2,r=i*t.near/t.focus,a=t.near*Math.tan(Fl.DEG2RAD*t.fov*.5)/t.zoom;let o,s;kv.elements[12]=-i,Qv.elements[12]=i,o=-a*t.aspect+r,s=a*t.aspect+r,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(n),o=-a*t.aspect-r,s=a*t.aspect-r,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(kv),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Qv)}});class Vv{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Wv=new zl,jv=new kl,Jv=new zl,Yv=new zl;class Xv extends ku{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e){if(void 0===e&&(e=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const qv=new zl,Kv=new kl,Zv=new zl,$v=new zl;class ey{constructor(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}function ty(e,t,n){let i,r,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(ty.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)n[r+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=a},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){o.setValue(n,i);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]},_slerp:function(e,t,n,i){kl.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const a=this._workIndex*r;kl.multiplyQuaternionsFlat(e,a,e,t,e,n),kl.slerpFlat(e,t,e,t,e,a,i)},_lerp:function(e,t,n,i,r){const a=1-i;for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]*a+e[n+o]*i}},_lerpAdditive:function(e,t,n,i,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[n+a]*i}}});const ny="\\[\\]\\.:\\/",iy=new RegExp("[\\[\\]\\.:\\/]","g"),ry="[^\\[\\]\\.:\\/]",ay="[^"+ny.replace("\\.","")+"]",oy=/((?:WC+[\/:])*)/.source.replace("WC",ry),sy=/(WCOD+)?/.source.replace("WCOD",ay),cy=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ry),ly=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ry),uy=new RegExp("^"+oy+sy+cy+ly+"$"),hy=["material","materials","bones"];function dy(e,t,n){const i=n||fy.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function fy(e,t,n){this.path=t,this.parsedPath=n||fy.parseTrackName(t),this.node=fy.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function py(){this.uuid=Fl.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(dy.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(fy,{Composite:dy,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new fy.Composite(e,t,n):new fy(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(iy,"")},parseTrackName:function(e){const t=uy.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==hy.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(fy.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=fy.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(fy.prototype,{_getValue_unbound:fy.prototype.getValue,_setValue_unbound:fy.prototype.setValue}),Object.assign(py.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length;let o=void 0,s=e.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=a;e!==t;++e)r[e].push(new fy(u,n[e],i[e]))}else if(d<c){o=e[d];const s=--c,l=e[s];t[l.uuid]=d,e[d]=l,t[h]=s,e[s]=u;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[s];let o=t[d];t[d]=a,void 0===o&&(o=new fy(u,n[e],i[e])),t[s]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a],s=o.uuid,c=t[s];if(void 0!==c&&c>=r){const a=r++,l=e[a];t[l.uuid]=c,e[c]=l,t[s]=a,e[a]=o;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[c]=i,t[a]=r}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o].uuid,c=t[s];if(void 0!==c)if(delete t[s],c<r){const o=--r,s=e[o],l=--a,u=e[l];t[s.uuid]=c,e[c]=s,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[l];t[c]=i,t[o]=r,t.pop()}}else{const r=--a,o=e[r];r>0&&(t[o.uuid]=c),e[c]=o,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[c]=t[r],t.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(u);for(let n=l,i=s.length;n!==i;++n){const i=s[n];u[n]=new fy(i,e,t)}return u},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}});class my{constructor(e,t,n,i){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=i||t.blendMode;const r=t.tracks,a=r.length,o=new Array(a),s={endingStart:dl,endingEnd:dl};for(let e=0;e!==a;++e){const t=r[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,a=n/i;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,c=o.sampleValues;return s[0]=r,s[1]=r+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case Al:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);break;case ml:default:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const a=2202===n;if(0===e)return-1===r?i:a&&1==(1&r)?t-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(a&&1==(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=fl,i.endingEnd=fl):(i.endingStart=e?this.zeroSlopeAtStart?fl:dl:pl,i.endingEnd=t?this.zeroSlopeAtEnd?fl:dl:pl)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}function Ay(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Ay.prototype=Object.assign(Object.create(_l.prototype),{constructor:Ay,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let e=0;e!==r;++e){const r=i[e],c=r.name;let u=l[c];if(void 0!==u)a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,c));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;u=new ty(fy.create(n,c,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,c),a[e]=u}o[e].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new mg(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let a="string"==typeof e?wg.findByName(i,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let c=null;if(void 0===n&&(n=null!==a?a.blendMode:ml),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;c=s.knownActions[0],null===a&&(a=c._clip)}if(null===a)return null;const l=new my(this,a,t,n);return this._bindAction(l,c),this._addInactiveAction(l,o,r),l},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?wg.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o){t[o]._update(i,e,r,a)}const o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this},setTime:function(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class gy{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new gy(void 0===this.value.clone?this.value:this.value.clone())}}function vy(e,t,n){Tp.call(this,e,t),this.meshPerAttribute=n||1}function yy(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function Ey(e,t,n,i){this.ray=new Au(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Su,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function xy(e,t){return e.distance-t.distance}function by(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)by(i[e],t,n,!0)}}vy.prototype=Object.assign(Object.create(Tp.prototype),{constructor:vy,isInstancedInterleavedBuffer:!0,copy:function(e){return Tp.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Tp.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Tp.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(yy.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(yy.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(Ey.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const i=n||[];return by(e,this,i,t),i.sort(xy),i},intersectObjects:function(e,t,n){const i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let n=0,r=e.length;n<r;n++)by(e[n],this,i,t);return i.sort(xy),i}});const By=new Ll;class Cy{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new Ll(1/0,1/0),this.max=void 0!==t?t:new Ll(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=By.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Ll),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Ll),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Ll),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Ll),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return By.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const wy=new zl,My=new zl;class Dy{constructor(e,t){this.start=void 0!==e?e:new zl,this.end=void 0!==t?t:new zl}set(e,t){return this.start.copy(e),this.end.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new zl),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new zl),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new zl),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){wy.subVectors(e,this.start),My.subVectors(this.end,this.start);const n=My.dot(My);let i=My.dot(wy)/n;return t&&(i=Fl.clamp(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new zl),this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}function Sy(e){ku.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Sy.prototype=Object.create(ku.prototype),Sy.prototype.constructor=Sy,Sy.prototype.isImmediateRenderObject=!0;const _y=new zl;const Ty=new zl,Iy=new gu,Fy=new gu;class Ly extends gm{constructor(e){const t=Ry(e),n=new Oh,i=[],r=[],a=new uh(0,0,1),o=new uh(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new wh(i,3)),n.setAttribute("color",new wh(r,3));super(n,new cm({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Fy.getInverse(this.root.matrixWorld);for(let e=0,n=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(Iy.multiplyMatrices(Fy,r.matrixWorld),Ty.setFromMatrixPosition(Iy),i.setXYZ(n,Ty.x,Ty.y,Ty.z),Iy.multiplyMatrices(Fy,r.parent.matrixWorld),Ty.setFromMatrixPosition(Iy),i.setXYZ(n+1,Ty.x,Ty.y,Ty.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Ry(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Ry(e.children[n]));return t}const Py=new zl,Oy=new uh,Ny=new uh;class Uy extends gm{constructor(e,t,n,i){e=e||10,t=t||10,n=new uh(void 0!==n?n:4473924),i=new uh(void 0!==i?i:8947848);const r=t/2,a=e/t,o=e/2,s=[],c=[];for(let e=0,l=0,u=-o;e<=t;e++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);const t=e===r?n:i;t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3}const l=new Oh;l.setAttribute("position",new wh(s,3)),l.setAttribute("color",new wh(c,3));super(l,new cm({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const Gy=new zl,Hy=new zl,Qy=new zl;const ky=new zl,zy=new cd;function Vy(e,t,n,i,r,a,o){ky.set(r,a,o).unproject(i);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],ky.x,ky.y,ky.z)}}const Wy=new jl;class jy extends gm{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Oh;r.setIndex(new gh(n,1)),r.setAttribute("position",new gh(i,3)),super(r,new cm({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Wy.setFromObject(this.object),Wy.isEmpty())return;const t=Wy.min,n=Wy.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return gm.prototype.copy.call(this,e),this.object=e.object,this}}const Jy=new zl;let Yy,Xy;class qy extends gm{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Oh;n.setAttribute("position",new wh(t,3)),n.setAttribute("color",new wh([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new cm({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const Ky=Math.pow(2,8),Zy=[.125,.215,.35,.446,.526,.582],$y=5+Zy.length,eE=20,tE={[gl]:0,[vl]:1,[El]:2,[xl]:3,[bl]:4,[Bl]:5,[yl]:6},nE=new mv,{_lodPlanes:iE,_sizeLods:rE,_sigmas:aE}=hE();let oE=null;const sE=(1+Math.sqrt(5))/2,cE=1/sE,lE=[new zl(1,1,1),new zl(-1,1,1),new zl(1,1,-1),new zl(-1,1,-1),new zl(0,sE,cE),new zl(0,sE,-cE),new zl(cE,0,sE),new zl(-cE,0,sE),new zl(sE,cE,0),new zl(-sE,cE,0)];function uE(e){return void 0!==e&&e.type===Hc&&(e.encoding===gl||e.encoding===vl||e.encoding===yl)}function hE(){const e=[],t=[],n=[];let i=8;for(let r=0;r<$y;r++){const a=Math.pow(2,i);t.push(a);let o=1/a;r>4?o=Zy[r-8+4-1]:0==r&&(o=0),n.push(o);const s=1/(a-1),c=-s/2,l=1+s/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],h=6,d=6,f=3,p=2,m=1,A=new Float32Array(f*d*h),g=new Float32Array(p*d*h),v=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];A.set(i,f*d*e),g.set(u,p*d*e);const r=[e,e,e,e,e,e];v.set(r,m*d*e)}const y=new Oh;y.setAttribute("position",new gh(A,f)),y.setAttribute("uv",new gh(g,p)),y.setAttribute("faceIndex",new gh(v,m)),e.push(y),i>4&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function dE(e){const t=new Hl(3*Ky,3*Ky,e);return t.texture.mapping=_c,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function fE(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function pE(){return new ng({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Ll(1,1)},inputEncoding:{value:tE[3e3]},outputEncoding:{value:tE[3e3]}},vertexShader:AE(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${gE()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function mE(){return new ng({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:tE[3e3]},outputEncoding:{value:tE[3e3]}},vertexShader:AE(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${gE()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function AE(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function gE(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function vE(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Jg.call(this,e),this.type="catmullrom",this.closed=!0}function yE(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Jg.call(this,e),this.type="catmullrom"}function EE(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Jg.call(this,e),this.type="catmullrom"}Gg.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Gg.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(av.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Rm;for(let n=0,i=e.length;n<i;n++){const i=e[n];t.vertices.push(new zl(i.x,i.y,i.z||0))}return t}}),Object.assign(ov.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),vE.prototype=Object.create(Jg.prototype),yE.prototype=Object.create(Jg.prototype),EE.prototype=Object.create(Jg.prototype),Object.assign(EE.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Uy.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ly.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Tg.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Bv.extractUrlBase(e)}}),Tg.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Cy.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(jl.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(cu.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),gd.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Dy.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Fl,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Fl.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Fl.ceilPowerOfTwo(e)}}),Object.assign(Rl.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(gu.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new zl).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),ju.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},kl.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Au.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ih.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ih,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ih.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ih.getNormal(e,t,n,i)}}),Object.assign(sv.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new MA(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new HA(this,e)}}),Object.assign(Ll.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(zl.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Gl.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Rm.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(ku.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(ku.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(ed.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(ed.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Kp.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(tm.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Zp.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Gg.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ld.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(cv.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(gh.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Dl},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Dl)}}}),Object.assign(gh.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Dl:Ml),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Oh.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new gh(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Oh.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Cv.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(Ey.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Tp.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Dl},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Tp.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Dl:Ml),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(CA.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(_p.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(gy.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(fh.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new uh}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(ag.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(rg.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(sd.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(wp.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(wp.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?vl:gl}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Ap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Hl.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Xv.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Uv).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),ey.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},hd.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},hd.prototype.clear=function(e,t,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,i)};const xE={merge:function(e,t,n){let i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};Ol.crossOrigin=void 0,Ol.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Ug;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Ol.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Og;r.setCrossOrigin(this.crossOrigin);const a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Ol.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ol.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const bE={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"122"}}));var BE=Object.freeze({__proto__:null,ACESFilmicToneMapping:4,AddEquation:Bc,AddOperation:2,AdditiveAnimationBlendMode:Al,AdditiveBlending:2,AlphaFormat:1021,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:vv,AmbientLightProbe:Hv,AnimationClip:wg,AnimationLoader:Lg,AnimationMixer:Ay,AnimationObjectGroup:py,AnimationUtils:dg,ArcCurve:Qg,ArrayCamera:Ep,ArrowHelper:class extends ku{constructor(e,t,n,i,r,a){super(),this.type="ArrowHelper",void 0===e&&(e=new zl(0,0,1)),void 0===t&&(t=new zl(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Yy&&(Yy=new Oh,Yy.setAttribute("position",new wh([0,0,0,0,1,0],3)),Xy=new Um(0,.5,1,5,1),Xy.translate(0,-.5,0)),this.position.copy(t),this.line=new pm(Yy,new cm({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ed(Xy,new ph({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Jy.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Jy,t)}}setLength(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},Audio:Xv,AudioAnalyser:ey,AudioContext:Nv,AudioListener:class extends ku{constructor(){super(),this.type="AudioListener",this.context=Nv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Vv}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Wv,jv,Jv),Yv.set(0,0,-1).applyQuaternion(jv),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Wv.x,e),t.positionY.linearRampToValueAtTime(Wv.y,e),t.positionZ.linearRampToValueAtTime(Wv.z,e),t.forwardX.linearRampToValueAtTime(Yv.x,e),t.forwardY.linearRampToValueAtTime(Yv.y,e),t.forwardZ.linearRampToValueAtTime(Yv.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Wv.x,Wv.y,Wv.z),t.setOrientation(Yv.x,Yv.y,Yv.z,n.x,n.y,n.z)}},AudioLoader:Uv,AxesHelper:qy,AxisHelper:function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new qy(e)},BackSide:1,BasicDepthPacking:3200,BasicShadowMap:0,BinaryTextureLoader:function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ng(e)},Bone:nm,BooleanKeyframeTrack:vg,BoundingBoxHelper:function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new jy(e,t)},Box2:Cy,Box3:jl,Box3Helper:class extends gm{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Oh;i.setIndex(new gh(n,1)),i.setAttribute("position",new wh([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new cm({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},BoxBufferGeometry:id,BoxGeometry:Pm,BoxHelper:jy,BufferAttribute:gh,BufferGeometry:Oh,BufferGeometryLoader:Mv,ByteType:1010,Cache:Dg,Camera:cd,CameraHelper:class extends gm{constructor(e){const t=new Oh,n=new cm({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],a={},o=new uh(16755200),s=new uh(16711680),c=new uh(43775),l=new uh(16777215),u=new uh(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new wh(i,3)),t.setAttribute("color",new wh(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){const e=this.geometry,t=this.pointMap;zy.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vy("c",t,e,zy,0,0,-1),Vy("t",t,e,zy,0,0,1),Vy("n1",t,e,zy,-1,-1,-1),Vy("n2",t,e,zy,1,-1,-1),Vy("n3",t,e,zy,-1,1,-1),Vy("n4",t,e,zy,1,1,-1),Vy("f1",t,e,zy,-1,-1,1),Vy("f2",t,e,zy,1,-1,1),Vy("f3",t,e,zy,-1,1,1),Vy("f4",t,e,zy,1,1,1),Vy("u1",t,e,zy,.7,1.1,-1),Vy("u2",t,e,zy,-.7,1.1,-1),Vy("u3",t,e,zy,0,2,-1),Vy("cf1",t,e,zy,-1,0,1),Vy("cf2",t,e,zy,1,0,1),Vy("cf3",t,e,zy,0,-1,1),Vy("cf4",t,e,zy,0,1,1),Vy("cn1",t,e,zy,-1,0,-1),Vy("cn2",t,e,zy,1,0,-1),Vy("cn3",t,e,zy,0,-1,-1),Vy("cn4",t,e,zy,0,1,-1),e.getAttribute("position").needsUpdate=!0}},CanvasRenderer:function(){console.error("THREE.CanvasRenderer has been removed")},CanvasTexture:Sm,CatmullRomCurve3:Jg,CineonToneMapping:3,CircleBufferGeometry:Om,CircleGeometry:Nm,ClampToEdgeWrapping:Fc,Clock:Vv,ClosedSplineCurve3:vE,Color:uh,ColorKeyframeTrack:yg,CompressedTexture:Dm,CompressedTextureLoader:Rg,ConeBufferGeometry:Qm,ConeGeometry:Hm,CubeCamera:hd,CubeGeometry:Pm,CubeReflectionMapping:wc,CubeRefractionMapping:Mc,CubeTexture:dd,CubeTextureLoader:Og,CubeUVReflectionMapping:_c,CubeUVRefractionMapping:Tc,CubicBezierCurve:Kg,CubicBezierCurve3:Zg,CubicInterpolant:pg,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:Gg,CurvePath:av,CustomBlending:5,CustomToneMapping:5,CylinderBufferGeometry:Um,CylinderGeometry:Gm,Cylindrical:class{constructor(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},DataTexture:pd,DataTexture2DArray:Ud,DataTexture3D:Gd,DataTextureLoader:Ng,DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:_g,DepthFormat:Xc,DepthStencilFormat:qc,DepthTexture:_m,DirectionalLight:gv,DirectionalLightHelper:class extends ku{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let i=new Oh;i.setAttribute("position",new wh([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new cm({fog:!1,toneMapped:!1});this.lightPlane=new pm(i,r),this.add(this.lightPlane),i=new Oh,i.setAttribute("position",new wh([0,0,0,0,0,1],3)),this.targetLine=new pm(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Gy.setFromMatrixPosition(this.light.matrixWorld),Hy.setFromMatrixPosition(this.light.target.matrixWorld),Qy.subVectors(Hy,Gy),this.lightPlane.lookAt(Hy),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hy),this.targetLine.scale.z=Qy.length()}},DiscreteInterpolant:Ag,DodecahedronBufferGeometry:zm,DodecahedronGeometry:Vm,DoubleSide:2,DstAlphaFactor:206,DstColorFactor:208,DynamicBufferAttribute:function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new gh(e,t).setUsage(Dl)},DynamicCopyUsage:35050,DynamicDrawUsage:Dl,DynamicReadUsage:35049,EdgesGeometry:Xm,EdgesHelper:function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new gm(new Xm(e.geometry),new cm({color:void 0!==t?t:16777215}))},EllipseCurve:Hg,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:Dc,EquirectangularRefractionMapping:Sc,Euler:wu,EventDispatcher:_l,ExtrudeBufferGeometry:CA,ExtrudeGeometry:MA,Face3:hh,Face4:function(e,t,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new hh(e,t,n,r,a,o)},FaceColors:1,FileLoader:Fg,FlatShading:1,Float32Attribute:function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new wh(e,t)},Float32BufferAttribute:wh,Float64Attribute:function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Mh(e,t)},Float64BufferAttribute:Mh,FloatType:zc,Fog:Sp,FogExp2:Dp,Font:Lv,FontLoader:Pv,FrontSide:0,Frustum:gd,GLBufferAttribute:yy,GLSL1:"100",GLSL3:Sl,GammaEncoding:yl,Geometry:Rm,GeometryUtils:xE,GreaterDepth:6,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:Uy,Group:xp,HalfFloatType:Vc,HemisphereLight:lv,HemisphereLightHelper:class extends ku{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new IA(t);i.rotateY(.5*Math.PI),this.material=new ph({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new gh(a,3)),this.add(new ed(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Oy.copy(this.light.color),Ny.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?Oy:Ny;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Py.setFromMatrixPosition(this.light.matrixWorld).negate())}},HemisphereLightProbe:Gv,IcosahedronBufferGeometry:DA,IcosahedronGeometry:SA,ImageBitmapLoader:Iv,ImageLoader:Pg,ImageUtils:Ol,ImmediateRenderObject:Sy,IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:wv,InstancedBufferGeometry:Cv,InstancedInterleavedBuffer:vy,InstancedMesh:sm,Int16Attribute:function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new xh(e,t)},Int16BufferAttribute:xh,Int32Attribute:function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Bh(e,t)},Int32BufferAttribute:Bh,Int8Attribute:function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new vh(e,t)},Int8BufferAttribute:vh,IntType:1013,InterleavedBuffer:Tp,InterleavedBufferAttribute:Fp,Interpolant:fg,InterpolateDiscrete:ll,InterpolateLinear:ul,InterpolateSmooth:hl,InvertStencilOp:5386,JSONLoader:function(){console.error("THREE.JSONLoader has been removed.")},KeepStencilOp:wl,KeyframeTrack:gg,LOD:Kp,LatheBufferGeometry:_A,LatheGeometry:TA,Layers:Su,LensFlare:function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},LessDepth:2,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:cv,LightProbe:xv,Line:pm,Line3:Dy,LineBasicMaterial:cm,LineCurve:$g,LineCurve3:ev,LineDashedMaterial:ug,LineLoop:vm,LinePieces:1,LineSegments:gm,LineStrip:0,LinearEncoding:gl,LinearFilter:Nc,LinearInterpolant:mg,LinearMipMapLinearFilter:1008,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:Gc,LinearMipmapNearestFilter:Uc,LinearToneMapping:1,Loader:Tg,LoaderUtils:Bv,LoadingManager:Sg,LogLuvEncoding:3003,LoopOnce:2200,LoopPingPong:2202,LoopRepeat:2201,LuminanceAlphaFormat:1025,LuminanceFormat:Yc,MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Material:fh,MaterialLoader:bv,Math:Fl,MathUtils:Fl,Matrix3:Rl,Matrix4:gu,MaxEquation:104,Mesh:ed,MeshBasicMaterial:ph,MeshDepthMaterial:pp,MeshDistanceMaterial:mp,MeshFaceMaterial:function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},MeshLambertMaterial:cg,MeshMatcapMaterial:lg,MeshNormalMaterial:sg,MeshPhongMaterial:ag,MeshPhysicalMaterial:rg,MeshStandardMaterial:ig,MeshToonMaterial:og,MinEquation:103,MirroredRepeatWrapping:Lc,MixOperation:1,MultiMaterial:function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},MultiplyBlending:4,MultiplyOperation:0,NearestFilter:Rc,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:Oc,NearestMipmapNearestFilter:Pc,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColors:0,NoToneMapping:0,NormalAnimationBlendMode:ml,NormalBlending:1,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:Eg,Object3D:ku,ObjectLoader:class extends Tg{constructor(e){super(e)}load(e,t,n,i){const r=this,a=""===this.path?Bv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Fg(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let a=null;try{a=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)}parse(e,t){const n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s}parseShape(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new sv).fromJSON(e[n]);t[i.uuid]=i}return t}parseGeometries(e,t){const n={};let i;if(void 0!==e){const r=new Mv;for(let a=0,o=e.length;a<o;a++){let o;const s=e[a];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new eg[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new eg[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new eg[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new eg[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new eg[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new eg[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new eg[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new eg[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new eg[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new eg[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new eg[s.type]((new rv[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new eg[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new eg[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];i.push(n)}o=new eg[s.type](i,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];i.push(n)}const e=s.options.extrudePath;void 0!==e&&(s.options.extrudePath=(new rv[e.type]).fromJSON(e)),o=new eg[s.type](i,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new bv;r.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];if("MultiMaterial"===a.type){const e=[];for(let t=0;t<a.materials.length;t++){const i=a.materials[t];void 0===n[i.uuid]&&(n[i.uuid]=r.parse(i)),e.push(n[i.uuid])}i[a.uuid]=e}else void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i}parseAnimations(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n],r=wg.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t}parseImages(e,t){const n=this,i={};let r;function a(e){return n.manager.itemStart(e),r.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){const o=new Sg(t);r=new Pg(o),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){i[r.uuid]=[];for(let e=0,t=o.length;e<t;e++){const t=o[e],s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t;i[r.uuid].push(a(s))}}else{const e=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r.url)?r.url:n.resourcePath+r.url;i[r.uuid]=a(e)}}}return i}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,a=e.length;r<a;r++){const a=e[r];let o;void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image),o=Array.isArray(t[a.image])?new dd(t[a.image]):new Ul(t[a.image]),o.needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.mapping&&(o.mapping=n(a.mapping,Sv)),void 0!==a.offset&&o.offset.fromArray(a.offset),void 0!==a.repeat&&o.repeat.fromArray(a.repeat),void 0!==a.center&&o.center.fromArray(a.center),void 0!==a.rotation&&(o.rotation=a.rotation),void 0!==a.wrap&&(o.wrapS=n(a.wrap[0],_v),o.wrapT=n(a.wrap[1],_v)),void 0!==a.format&&(o.format=a.format),void 0!==a.type&&(o.type=a.type),void 0!==a.encoding&&(o.encoding=a.encoding),void 0!==a.minFilter&&(o.minFilter=n(a.minFilter,Tv)),void 0!==a.magFilter&&(o.magFilter=n(a.magFilter,Tv)),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),void 0!==a.flipY&&(o.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(o.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(o.unpackAlignment=a.unpackAlignment),i[a.uuid]=o}return i}parseObject(e,t,n){let i,r,a;function o(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new _p,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new uh(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Sp(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Dp(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new ld(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new mv(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new vv(e.color,e.intensity);break;case"DirectionalLight":i=new gv(e.color,e.intensity);break;case"PointLight":i=new pv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new yv(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new dv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new lv(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new xv).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":r=o(e.geometry),a=s(e.material),i=new ed(r,a);break;case"InstancedMesh":r=o(e.geometry),a=s(e.material);const t=e.count,n=e.instanceMatrix;i=new sm(r,a,t),i.instanceMatrix=new gh(new Float32Array(n.array),16);break;case"LOD":i=new Kp;break;case"Line":i=new pm(o(e.geometry),s(e.material),e.mode);break;case"LineLoop":i=new vm(o(e.geometry),s(e.material));break;case"LineSegments":i=new gm(o(e.geometry),s(e.material));break;case"PointCloud":case"Points":i=new Cm(o(e.geometry),s(e.material));break;case"Sprite":i=new Jp(s(e.material));break;case"Group":i=new xp;break;default:i=new ku}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const r=e.children;for(let e=0;e<r.length;e++)i.add(this.parseObject(r[e],t,n))}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}},ObjectSpaceNormalMap:1,OctahedronBufferGeometry:IA,OctahedronGeometry:FA,OneFactor:201,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:205,OneMinusSrcColorFactor:203,OrthographicCamera:mv,PCFShadowMap:1,PCFSoftShadowMap:2,PMREMGenerator:class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new zl(0,1,0);return new ng({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:tE[3e3]},outputEncoding:{value:tE[3e3]}},vertexShader:AE(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${gE()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}(eE),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){oE=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=mE(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=pE(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<iE.length;e++)iE[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(oE),e.scissorTest=!1,fE(e,0,0,e.width,e.height)}_fromTexture(e){oE=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Rc,minFilter:Rc,generateMipmaps:!1,type:Hc,format:1023,encoding:uE(e)?e.encoding:El,depthBuffer:!1},n=dE(t);return n.depthBuffer=!e,this._pingPongRenderTarget=dE(t),n}_compileMaterial(e){const t=new ed(iE[0],e);this._renderer.compile(t,nE)}_sceneToCubeUV(e,t,n,i){const r=new ld(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,c=s.outputEncoding,l=s.toneMapping,u=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=0,s.outputEncoding=gl;let d=e.background;if(d&&d.isColor){d.convertSRGBToLinear();const t=Math.max(d.r,d.g,d.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);d=d.multiplyScalar(Math.pow(2,-n));const i=(n+128)/255;s.setClearColor(d,i),e.background=null}for(let t=0;t<6;t++){const n=t%3;0==n?(r.up.set(0,a[t],0),r.lookAt(o[t],0,0)):1==n?(r.up.set(0,0,a[t]),r.lookAt(0,o[t],0)):(r.up.set(0,a[t],0),r.lookAt(0,0,o[t])),fE(i,n*Ky,t>2?Ky:0,Ky,Ky),s.setRenderTarget(i),s.render(e,r)}s.toneMapping=l,s.outputEncoding=c,s.setClearColor(u,h)}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=mE()):null==this._equirectShader&&(this._equirectShader=pE());const i=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new ed(iE[0],i),a=i.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),a.inputEncoding.value=tE[e.encoding],a.outputEncoding.value=tE[t.texture.encoding],fE(t,0,0,3*Ky,2*Ky),n.setRenderTarget(t),n.render(r,nE)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<$y;t++){const n=Math.sqrt(aE[t]*aE[t]-aE[t-1]*aE[t-1]),i=lE[(t-1)%lE.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,o){const s=this._renderer,c=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new ed(iE[i],c),u=c.uniforms,h=rE[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,f=r/d,p=isFinite(r)?1+Math.floor(3*f):eE;p>eE&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let A=0;for(let e=0;e<eE;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0==e?A+=n:e<p&&(A+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/A;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=tE[e.texture.encoding],u.outputEncoding.value=tE[e.texture.encoding];const g=rE[i];fE(t,3*Math.max(0,Ky-2*g),(0===i?0:2*Ky)+2*g*(i>4?i-8+4:0),3*g,2*g),s.setRenderTarget(t),s.render(l,nE)}},ParametricBufferGeometry:LA,ParametricGeometry:RA,Particle:function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Jp(e)},ParticleBasicMaterial:function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ym(e)},ParticleSystem:function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Cm(e,t)},ParticleSystemMaterial:function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ym(e)},Path:ov,PerspectiveCamera:ld,Plane:ju,PlaneBufferGeometry:Ed,PlaneGeometry:PA,PlaneHelper:class extends pm{constructor(e,t,n){const i=void 0!==n?n:16776960,r=new Oh;r.setAttribute("position",new wh([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new cm({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;const a=new Oh;a.setAttribute("position",new wh([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new ed(a,new ph({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}},PointCloud:function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Cm(e,t)},PointCloudMaterial:function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ym(e)},PointLight:pv,PointLightHelper:class extends ed{constructor(e,t,n){super(new QA(t,4,2),new ph({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Points:Cm,PointsMaterial:ym,PolarGridHelper:class extends gm{constructor(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new uh(void 0!==r?r:4473924),a=new uh(void 0!==a?a:8947848);const o=[],s=[];for(let n=0;n<=t;n++){const i=n/t*(2*Math.PI),c=Math.sin(i)*e,l=Math.cos(i)*e;o.push(0,0,0),o.push(c,0,l);const u=1&n?r:a;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const c=1&t?r:a,l=e-e/n*t;for(let e=0;e<i;e++){let t=e/i*(2*Math.PI),n=Math.sin(t)*l,r=Math.cos(t)*l;o.push(n,0,r),s.push(c.r,c.g,c.b),t=(e+1)/i*(2*Math.PI),n=Math.sin(t)*l,r=Math.cos(t)*l,o.push(n,0,r),s.push(c.r,c.g,c.b)}}const c=new Oh;c.setAttribute("position",new wh(o,3)),c.setAttribute("color",new wh(s,3));super(c,new cm({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}},PolyhedronBufferGeometry:km,PolyhedronGeometry:OA,PositionalAudio:class extends Xv{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(qv,Kv,Zv),$v.set(0,0,1).applyQuaternion(Kv);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(qv.x,e),t.positionY.linearRampToValueAtTime(qv.y,e),t.positionZ.linearRampToValueAtTime(qv.z,e),t.orientationX.linearRampToValueAtTime($v.x,e),t.orientationY.linearRampToValueAtTime($v.y,e),t.orientationZ.linearRampToValueAtTime($v.z,e)}else t.setPosition(qv.x,qv.y,qv.z),t.setOrientation($v.x,$v.y,$v.z)}},PropertyBinding:fy,PropertyMixer:ty,QuadraticBezierCurve:tv,QuadraticBezierCurve3:nv,Quaternion:kl,QuaternionKeyframeTrack:bg,QuaternionLinearInterpolant:xg,REVISION:"122",RGBADepthPacking:Cl,RGBAFormat:Jc,RGBAIntegerFormat:1033,RGBA_ASTC_10x10_Format:37819,RGBA_ASTC_10x5_Format:37816,RGBA_ASTC_10x6_Format:37817,RGBA_ASTC_10x8_Format:37818,RGBA_ASTC_12x10_Format:37820,RGBA_ASTC_12x12_Format:37821,RGBA_ASTC_4x4_Format:37808,RGBA_ASTC_5x4_Format:37809,RGBA_ASTC_5x5_Format:37810,RGBA_ASTC_6x5_Format:37811,RGBA_ASTC_6x6_Format:37812,RGBA_ASTC_8x5_Format:37813,RGBA_ASTC_8x6_Format:37814,RGBA_ASTC_8x8_Format:37815,RGBA_BPTC_Format:36492,RGBA_ETC2_EAC_Format:cl,RGBA_PVRTC_2BPPV1_Format:ol,RGBA_PVRTC_4BPPV1_Format:al,RGBA_S3TC_DXT1_Format:el,RGBA_S3TC_DXT3_Format:tl,RGBA_S3TC_DXT5_Format:nl,RGBDEncoding:Bl,RGBEEncoding:El,RGBEFormat:1023,RGBFormat:jc,RGBIntegerFormat:1032,RGBM16Encoding:bl,RGBM7Encoding:xl,RGB_ETC1_Format:36196,RGB_ETC2_Format:sl,RGB_PVRTC_2BPPV1_Format:rl,RGB_PVRTC_4BPPV1_Format:il,RGB_S3TC_DXT1_Format:$c,RGFormat:Zc,RGIntegerFormat:1031,RawShaderMaterial:ng,Ray:Au,Raycaster:Ey,RectAreaLight:yv,RedFormat:Kc,RedIntegerFormat:1029,ReinhardToneMapping:2,RepeatWrapping:Ic,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingBufferGeometry:NA,RingGeometry:UA,SRGB8_ALPHA8_ASTC_10x10_Format:37851,SRGB8_ALPHA8_ASTC_10x5_Format:37848,SRGB8_ALPHA8_ASTC_10x6_Format:37849,SRGB8_ALPHA8_ASTC_10x8_Format:37850,SRGB8_ALPHA8_ASTC_12x10_Format:37852,SRGB8_ALPHA8_ASTC_12x12_Format:37853,SRGB8_ALPHA8_ASTC_4x4_Format:37840,SRGB8_ALPHA8_ASTC_5x4_Format:37841,SRGB8_ALPHA8_ASTC_5x5_Format:37842,SRGB8_ALPHA8_ASTC_6x5_Format:37843,SRGB8_ALPHA8_ASTC_6x6_Format:37844,SRGB8_ALPHA8_ASTC_8x5_Format:37845,SRGB8_ALPHA8_ASTC_8x6_Format:37846,SRGB8_ALPHA8_ASTC_8x8_Format:37847,Scene:_p,SceneUtils:bE,ShaderChunk:xd,ShaderLib:Bd,ShaderMaterial:sd,ShadowMaterial:tg,Shape:sv,ShapeBufferGeometry:GA,ShapeGeometry:HA,ShapePath:Fv,ShapeUtils:xA,ShortType:1011,Skeleton:tm,SkeletonHelper:Ly,SkinnedMesh:Zp,SmoothShading:2,Sphere:cu,SphereBufferGeometry:QA,SphereGeometry:kA,Spherical:class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Fl.clamp(t/this.radius,-1,1))),this}},SphericalHarmonics3:Ev,Spline:EE,SplineCurve:iv,SplineCurve3:yE,SpotLight:dv,SpotLightHelper:class extends ku{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Oh,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const r=e/n*Math.PI*2,a=t/n*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}n.setAttribute("position",new wh(i,3));const r=new cm({fog:!1,toneMapped:!1});this.cone=new gm(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_y.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_y),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Sprite:Jp,SpriteMaterial:Lp,SrcAlphaFactor:204,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:Ml,StaticReadUsage:35045,StereoCamera:zv,StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:Bg,SubtractEquation:101,SubtractiveBlending:3,TOUCH:{ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},TangentSpaceNormalMap:0,TetrahedronBufferGeometry:zA,TetrahedronGeometry:VA,TextBufferGeometry:WA,TextGeometry:jA,Texture:Ul,TextureLoader:Ug,TorusBufferGeometry:JA,TorusGeometry:YA,TorusKnotBufferGeometry:XA,TorusKnotGeometry:qA,Triangle:ih,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeBufferGeometry:KA,TubeGeometry:ZA,UVMapping:Cc,Uint16Attribute:function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new bh(e,t)},Uint16BufferAttribute:bh,Uint32Attribute:function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ch(e,t)},Uint32BufferAttribute:Ch,Uint8Attribute:function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new yh(e,t)},Uint8BufferAttribute:yh,Uint8ClampedAttribute:function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Eh(e,t)},Uint8ClampedBufferAttribute:Eh,Uniform:gy,UniformsLib:bd,UniformsUtils:od,UnsignedByteType:Hc,UnsignedInt248Type:Wc,UnsignedIntType:kc,UnsignedShort4444Type:1017,UnsignedShort5551Type:1018,UnsignedShort565Type:1019,UnsignedShortType:Qc,VSMShadowMap:3,Vector2:Ll,Vector3:zl,Vector4:Gl,VectorKeyframeTrack:Cg,Vertex:function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new zl(e,t,n)},VertexColors:2,VideoTexture:Mm,WebGL1Renderer:Mp,WebGLCubeRenderTarget:fd,WebGLMultisampleRenderTarget:Ql,WebGLRenderTarget:Hl,WebGLRenderTargetCube:function(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new fd(e,n)},WebGLRenderer:wp,WebGLUtils:yp,WireframeGeometry:$A,WireframeHelper:function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new gm(new $A(e.geometry),new cm({color:void 0!==t?t:16777215}))},WrapAroundEnding:pl,XHRLoader:function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Fg(e)},ZeroCurvatureEnding:dl,ZeroFactor:200,ZeroSlopeEnding:fl,ZeroStencilOp:0,sRGBEncoding:vl});const CE={RED:0,GREEN:1,BLUE:2,ALPHA:3};var wE="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";class ME extends sd{constructor(){super({type:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{previousLuminanceBuffer:new gy(null),currentLuminanceBuffer:new gy(null),minLuminance:new gy(.01),deltaTime:new gy(0),tau:new gy(1)},fragmentShader:"uniform sampler2D previousLuminanceBuffer;uniform sampler2D currentLuminanceBuffer;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float previousLuminance=texture2D(previousLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;float currentLuminance=texture2D(currentLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;previousLuminance=max(minLuminance,previousLuminance);currentLuminance=max(minLuminance,currentLuminance);float adaptedLum=previousLuminance+(currentLuminance-previousLuminance)*(1.0-exp(-deltaTime*tau));gl_FragColor.r=adaptedLum;}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}}class DE extends sd{constructor(e=!1,t=!1){super({type:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new gy(null),kernel16:new gy(null),inputBuffer:new gy(null),cocBuffer:new gy(null),texelSize:new gy(new Ll),scale:new gy(1)},fragmentShader:"uniform sampler2D inputBuffer;uniform sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}generateKernel(){const e=new Float32Array(128),t=new Float32Array(32);let n=0,i=0;for(let r=0;r<80;++r){const a=2.39996323*r,o=Math.sqrt(r)/Math.sqrt(80),s=o*Math.cos(a),c=o*Math.sin(a);r%5==0?(t[i++]=s,t[i++]=c):(e[n++]=s,e[n++]=c)}const r=[],a=[];for(let t=0;t<128;)r.push(new Gl(e[t++],e[t++],e[t++],e[t++]));for(let e=0;e<32;)a.push(new Gl(t[e++],t[e++],t[e++],t[e++]));this.uniforms.kernel64.value=r,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}}class SE extends sd{constructor(e){super({type:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new gy(null),focusDistance:new gy(0),focalLength:new gy(0),cameraNear:new gy(.3),cameraFar:new gy(1e3)},fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focalLength;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focalLength,abs(signedDistance));gl_FragColor.rg=vec2(step(signedDistance,0.0)*magnitude,step(0.0,signedDistance)*magnitude);}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.adoptCameraSettings(e)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ld?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}}var _E="varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",TE="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}";class IE extends sd{constructor(e=new Ll){super({type:"ConvolutionMaterial",uniforms:{inputBuffer:new gy(null),texelSize:new gy(new Ll),halfTexelSize:new gy(new Ll),kernel:new gy(0),scale:new gy(1)},fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;/*Packing multiple texture coordinates into one varying and using a swizzle toextract them in the fragment shader still causes a dependent texture read.*/varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernelSize=LE.LARGE}getKernel(){return FE[this.kernelSize]}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}}const FE=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],LE={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5};class RE extends sd{constructor(){super({type:"CopyMaterial",uniforms:{inputBuffer:new gy(null),opacity:new gy(1)},fragmentShader:"uniform sampler2D inputBuffer;uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}}class PE extends sd{constructor(e=null,t){super({type:"DepthComparisonMaterial",uniforms:{depthBuffer:new gy(e),cameraNear:new gy(.3),cameraFar:new gy(1e3)},fragmentShader:"#include <packing>\n#include <clipping_planes_pars_fragment>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <clipping_planes_fragment>\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#else\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#endif\nfloat depthTest=(-vViewZ>-viewZ)? 1.0 : 0.0;gl_FragColor.rg=vec2(0.0,depthTest);}",vertexShader:"#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <skinbase_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\n#include <clipping_planes_vertex>\n}",depthWrite:!1,depthTest:!1,morphTargets:!0,skinning:!0}),this.toneMapped=!1,this.adoptCameraSettings(t)}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ld?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA)}}class OE extends sd{constructor(){super({type:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new gy(null),normalBuffer:new gy(null),texelSize:new gy(new Ll)},fragmentShader:"#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#ifdef DOWNSAMPLE_NORMALS\nuniform sampler2D normalBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}/***Returns the index of the most representative depth in the 2x2 neighborhood.*/int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])/4.0;float distances[4]=float[](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4]=float[](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);\n#ifdef DOWNSAMPLE_NORMALS\nvec2 uvs[4]=vec2[](vUv0,vUv1,vUv2,vUv3);vec3 n=texture2D(normalBuffer,uvs[index]).rgb;\n#else\nvec3 n=vec3(0.0);\n#endif\ngl_FragColor=vec4(n,d[index]);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1}),this.toneMapped=!1}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}}class NE extends sd{constructor(){super({type:"DepthMaskMaterial",defines:{DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0"},uniforms:{depthBuffer0:new gy(null),depthBuffer1:new gy(null),inputBuffer:new gy(null)},fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;\n#else\nuniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;\n#endif\nuniform sampler2D inputBuffer;varying vec2 vUv;void main(){\n#if DEPTH_PACKING_0 == 3201\nfloat d0=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));\n#else\nfloat d0=texture2D(depthBuffer0,vUv).r;\n#endif\n#if DEPTH_PACKING_1 == 3201\nfloat d1=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));\n#else\nfloat d1=texture2D(depthBuffer1,vUv).r;\n#endif\nif(d0<d1){discard;}gl_FragColor=texture2D(inputBuffer,vUv);}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}}class UE extends sd{constructor(e=new Ll,t=GE.COLOR){super({type:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new gy(null),depthBuffer:new gy(null),predicationBuffer:new gy(null),texelSize:new gy(e)},fragmentShader:_E,vertexShader:TE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setEdgeDetectionMode(t)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setEdgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}setLocalContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}setEdgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}setPredicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}setPredicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}setPredicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}}const GE={DEPTH:0,LUMA:1,COLOR:2};class HE extends sd{constructor(e=null,t=null,n=null,i,r=!1){super({type:"EffectMaterial",defines:{DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new gy(null),depthBuffer:new gy(null),resolution:new gy(new Ll),texelSize:new gy(new Ll),cameraNear:new gy(.3),cameraFar:new gy(1e3),aspect:new gy(1),time:new gy(0)},depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,null!==e&&this.setShaderParts(e),null!==t&&this.setDefines(t),null!==n&&this.setUniforms(n),this.adoptCameraSettings(i)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(QE.FRAGMENT_HEAD,e.get(QE.FRAGMENT_HEAD)).replace(QE.FRAGMENT_MAIN_UV,e.get(QE.FRAGMENT_MAIN_UV)).replace(QE.FRAGMENT_MAIN_IMAGE,e.get(QE.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(QE.VERTEX_HEAD,e.get(QE.VERTEX_HEAD)).replace(QE.VERTEX_MAIN_SUPPORT,e.get(QE.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ld?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=Math.max(e,1),i=Math.max(t,1);this.uniforms.resolution.value.set(n,i),this.uniforms.texelSize.value.set(1/n,1/i),this.uniforms.aspect.value=n/i}}const QE={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"};class kE extends sd{constructor(e){super({type:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new gy(null),lightPosition:new gy(e),density:new gy(1),decay:new gy(1),weight:new gy(1),exposure:new gy(1),clampMax:new gy(1)},fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\nuniform sampler2D inputBuffer;uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);/*Estimate the probability of occlusion at each pixel by summing samplesalong a ray to the light position.*/for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\n#include <dithering_fragment>\n}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(e){const t=Math.floor(e);this.defines.SAMPLES_INT=t.toFixed(0),this.defines.SAMPLES_FLOAT=t.toFixed(1),this.needsUpdate=!0}}class zE extends sd{constructor(e=!1,t=null){const n=null!==t;super({type:"LuminanceMaterial",uniforms:{inputBuffer:new gy(null),threshold:new gy(0),smoothing:new gy(1),range:new gy(n?t:new Ll)},fragmentShader:"#include <common>\nuniform sampler2D inputBuffer;\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.colorOutput=e,this.useThreshold=!0,this.useRange=n}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.uniforms.threshold.value=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.uniforms.smoothing.value=e}get useThreshold(){return void 0!==this.defines.THRESHOLD}set useThreshold(e){e?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.needsUpdate=!0}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return void 0!==this.defines.RANGE}set useRange(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}get luminanceRange(){return this.useRange}set luminanceRange(e){this.useRange=e}setLuminanceRangeEnabled(e){this.useRange=e}}class VE extends sd{constructor(e=null){super({type:"MaskMaterial",uniforms:{maskTexture:new gy(e),inputBuffer:new gy(null),strength:new gy(1)},fragmentShader:"uniform sampler2D maskTexture;uniform sampler2D inputBuffer;\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nif(mask>0.0){discard;}\n#else\nif(mask==0.0){discard;}\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=(1.0-mask);\n#endif\n#if MASK_FUNCTION == 1\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#else\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#endif\n#endif\n}",vertexShader:wE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.colorChannel=CE.RED,this.maskFunction=WE.DISCARD}set maskTexture(e){this.uniforms.maskTexture.value=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}}const WE={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2};class jE extends sd{constructor(e=new Ll){super({type:"OutlineMaterial",uniforms:{inputBuffer:new gy(null),texelSize:new gy(new Ll)},fragmentShader:"uniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)? vec2(d,0.0): vec2(0.0,d);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}}const JE=jE;class YE extends sd{constructor(e=new Ll,t=new Ll){super({type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new gy(null),areaTexture:new gy(null),searchTexture:new gy(null),texelSize:new gy(e),resolution:new gy(t)},fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\nuniform sampler2D inputBuffer;uniform sampler2D areaTexture;uniform sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}/***Allows to decode two binary values from a bilinear-filtered access.**Bilinear access for fetching 'e' have a 0.25 offset,and we are interested*in the R and G edges:**+---G---+-------+*|x o R   x|*+-------+-------+**Then,if one of these edge is enabled:*Red:(0.75*X+0.25*1)=>0.25 or 1.0*Green:(0.75*1+0.25*X)=>0.75 or 1.0**This function will unpack the values(mad+mul+round):*wolframalpha.com: round(x*abs(5*x-5*0.75))plot 0 to 1*/vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}/***Diagonal pattern searches.*/vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}/***Calculates the area corresponding to a certain diagonal distance and crossing*edges 'e'.*/vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}/***Searches for diagonal patterns and returns the corresponding weights.*/vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}/***Determines how much length should be added in the last step of the searches.**Takes the bilinearly interpolated edge(see @PSEUDO_GATHER4),and adds 0,1*or 2 depending on which edges and crossing edges are active.*/float searchLength(const in vec2 e,const in float offset){/*The texture is flipped vertically,with left and right cases taking halfof the space horizontally.*/vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}/***Horizontal search for the second pass.*/float searchXLeft(in vec2 texCoord,const in float end){/*@PSEUDO_GATHER4This texCoord has been offset by(-0.25,-0.125)in the vertex shader tosample between edges,thus fetching four edges in a row.Sampling with different offsets in each direction allows to disambiguatewhich edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}/***Vertical search for the second pass.*/float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}/***Determines the areas at each side of the current edge.*/vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}/***Corner detection.*/void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\n/*Diagonals have both north and west edges,so searching for them in one ofthe boundaries is enough.*/weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;/*Now fetch the left crossing edges,two at a time using bilinearfiltering. Sampling at-0.25(see @CROSSING_OFFSET)enables to discern whatvalue each edge has.*/float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;/*Translate distances to pixel units for better interleave arithmetic andmemory accesses.*/d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1}),this.toneMapped=!1}setOrthogonalSearchSteps(e){const t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){const t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setCornerRounding(e){const t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}get cornerRounding(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerRounding(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}}class XE extends sd{constructor(e){super({type:"SSAOMaterial",defines:{SAMPLES_INT:"0",SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{normalBuffer:new gy(null),normalDepthBuffer:new gy(null),noiseTexture:new gy(null),inverseProjectionMatrix:new gy(new gu),projectionMatrix:new gy(new gu),texelSize:new gy(new Ll),cameraNear:new gy(0),cameraFar:new gy(0),distanceCutoff:new gy(new Ll),proximityCutoff:new gy(new Ll),noiseScale:new gy(new Ll),minRadiusScale:new gy(.33),intensity:new gy(1),fade:new gy(.01),bias:new gy(0)},fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\n#ifndef NORMAL_DEPTH\nuniform sampler2D normalBuffer;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(normalDepthBuffer,uv));\n#else\nreturn texture2D(normalDepthBuffer,uv).r;\n#endif\n}\n#endif\nuniform sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float minRadiusScale;uniform float intensity;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(screenPosition,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){\n#ifdef DISTANCE_SCALING\nfloat radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;\n#else\nfloat radius=RADIUS;\n#endif\nfloat noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float invSamples=1.0/SAMPLES_FLOAT;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*invSamples;float angle=alpha*rings+baseAngle;vec2 coord=alpha*radius*vec2(cos(angle),sin(angle))*texelSize+uv;if(coord.s<0.0||coord.s>1.0||coord.t<0.0||coord.t>1.0){continue;}\n#ifdef NORMAL_DEPTH\nfloat sampleDepth=texture2D(normalDepthBuffer,coord).a;\n#else\nfloat sampleDepth=readDepth(coord);\n#endif\nfloat viewZ=getViewZ(sampleDepth);\n#ifdef PERSPECTIVE_CAMERA\nfloat linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearSampleDepth=sampleDepth;\n#endif\nfloat proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coord,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){\n#ifdef NORMAL_DEPTH\nvec4 normalDepth=texture2D(normalDepthBuffer,vUv);\n#else\nvec4 normalDepth=vec4(texture2D(normalBuffer,vUv).rgb,readDepth(vUv));\n#endif\nfloat ao=1.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);\n#ifdef PERSPECTIVE_CAMERA\nfloat linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nif(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao-=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,1.0,d);ao=clamp(pow(ao,abs(intensity)),0.0,1.0);}gl_FragColor.r=ao;}",vertexShader:"uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.adoptCameraSettings(e)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}adoptCameraSettings(e=null){if(null!==e){const t=this.uniforms;t.cameraNear.value=e.near,t.cameraFar.value=e.far,e instanceof ld?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0}}}const qE=-1;class KE{constructor(e,t=-1,n=-1,i=1){this.resizable=e,this.base=new Ll(1,1),this.target=new Ll(t,n),this.s=i}get scale(){return this.s}set scale(e){this.s=e,this.target.x=qE,this.target.y=qE,this.resizable.setSize(this.base.x,this.base.y)}get width(){const e=this.base,t=this.target;let n;return n=t.x!==qE?t.x:t.y!==qE?Math.round(t.y*(e.x/e.y)):Math.round(e.x*this.s),n}set width(e){this.target.x=e,this.resizable.setSize(this.base.x,this.base.y)}get height(){const e=this.base,t=this.target;let n;return n=t.y!==qE?t.y:t.x!==qE?Math.round(t.x/(e.x/e.y)):Math.round(e.y*this.s),n}set height(e){this.target.y=e,this.resizable.setSize(this.base.x,this.base.y)}static get AUTO_SIZE(){return qE}}const ZE=new cd;let $E=null;class ex{constructor(e="Pass",t=new _p,n=ZE){this.name=e,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}getFullscreenMaterial(){return null!==this.screen?this.screen.material:null}setFullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new ed(function(){if(null===$E){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);$E=new Oh,void 0!==$E.setAttribute?($E.setAttribute("position",new gh(e,3)),$E.setAttribute("uv",new gh(t,2))):($E.addAttribute("position",new gh(e,3)),$E.addAttribute("uv",new gh(t,2)))}return $E}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new _p),this.scene.add(t),this.screen=t)}getDepthTexture(){return null}setDepthTexture(e,t=0){}render(e,t,n,i,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){const e=this.getFullscreenMaterial();null!==e&&e.dispose();for(const e of Object.keys(this)){const t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof _p)continue;this[e].dispose()}}}}class tx extends ex{constructor({resolutionScale:e=.5,width:t=KE.AUTO_SIZE,height:n=KE.AUTO_SIZE,kernelSize:i=LE.LARGE}={}){super("BlurPass"),this.renderTargetA=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.resolution=new KE(this,t,n,e),this.convolutionMaterial=new IE,this.ditheredConvolutionMaterial=new IE,this.ditheredConvolutionMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get scale(){return this.convolutionMaterial.uniforms.scale.value}set scale(e){this.convolutionMaterial.uniforms.scale.value=e,this.ditheredConvolutionMaterial.uniforms.scale.value=e}get kernelSize(){return this.convolutionMaterial.kernelSize}set kernelSize(e){this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,i,r){const a=this.scene,o=this.camera,s=this.renderTargetA,c=this.renderTargetB;let l=this.convolutionMaterial,u=l.uniforms;const h=l.getKernel();let d,f,p,m=t;for(this.setFullscreenMaterial(l),f=0,p=h.length-1;f<p;++f)d=0==(1&f)?s:c,u.kernel.value=h[f],u.inputBuffer.value=m.texture,e.setRenderTarget(d),e.render(a,o),m=d;this.dithering&&(l=this.ditheredConvolutionMaterial,u=l.uniforms,this.setFullscreenMaterial(l)),u.kernel.value=h[f],u.inputBuffer.value=m.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(a,o)}setSize(e,t){const n=this.resolution;n.base.set(e,t);const i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.convolutionMaterial.setTexelSize(1/i,1/r),this.ditheredConvolutionMaterial.setTexelSize(1/i,1/r)}initialize(e,t,n){t||n!==Hc||(this.renderTargetA.texture.format=jc,this.renderTargetB.texture.format=jc),void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n)}static get AUTO_SIZE(){return KE.AUTO_SIZE}}class nx extends ex{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,i,r){const a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}}const ix=new uh;class rx extends ex{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}render(e,t,n,i,r){const a=this.overrideClearColor,o=this.overrideClearAlpha,s=e.getClearAlpha(),c=null!==a,l=o>=0;c?(ix.copy(e.getClearColor()),e.setClearColor(a,l?o:s)):l&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),c?e.setClearColor(ix,s):l&&e.setClearAlpha(s)}}let ax=!1;class ox{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materialInstanced=null,this.materialSkinning=null,this.setMaterial(e)}setMaterial(e){this.disposeMaterials(),null!==e&&(this.material=e,this.materialInstanced=e.clone(),this.materialInstanced.uniforms=Object.assign({},e.uniforms),this.materialSkinning=e.clone(),this.materialSkinning.uniforms=Object.assign({},e.uniforms),this.materialSkinning.skinning=!0)}render(e,t,n){const i=this.material,r=this.materialSkinning,a=this.materialInstanced,o=this.originalMaterials,s=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,ax){let s=0;t.traverse(e=>{e.isMesh&&(o.set(e,e.material),e.isInstancedMesh?e.material=a:e.isSkinnedMesh?e.material=r:e.material=i,++s)}),e.render(t,n);for(const e of o)e[0].material=e[1];s!==o.size&&o.clear()}else{const r=t.overrideMaterial;t.overrideMaterial=i,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=s}disposeMaterials(){null!==this.materialInstanced&&this.materialInstanced.dispose(),null!==this.materialSkinning&&this.materialSkinning.dispose()}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return ax}static set workaroundEnabled(e){ax=e}}class sx extends ex{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new rx,this.overrideMaterialManager=null===n?null:new ox(n)}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new ox(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}render(e,t,n,i,r){const a=this.scene,o=this.camera,s=a.background,c=this.renderToScreen?null:t;this.clear&&(null!==this.clearPass.overrideClearColor&&(a.background=null),this.clearPass.render(e,t)),e.setRenderTarget(c),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,o):e.render(a,o),a.background!==s&&(a.background=s)}}class cx extends ex{constructor(e,t,{resolutionScale:n=1,width:i=KE.AUTO_SIZE,height:r=KE.AUTO_SIZE,renderTarget:a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new sx(e,t,new pp({depthPacking:Cl}));const o=this.renderPass.getClearPass();o.overrideClearColor=new uh(16777215),o.overrideClearAlpha=1,this.renderTarget=a,void 0===this.renderTarget&&(this.renderTarget=new Hl(1,1,{minFilter:Rc,magFilter:Rc,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target"),this.resolution=new KE(this,i,r,n)}get texture(){return this.renderTarget.texture}getResolutionScale(){return this.resolutionScale}setResolutionScale(e){this.resolutionScale=e,this.setSize(this.resolution.base.x,this.resolution.base.y)}render(e,t,n,i,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.renderTarget.setSize(n.width,n.height)}}const lx={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18};const ux=new Map([[lx.SKIP,null],[lx.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[lx.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[lx.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[lx.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[lx.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[lx.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[lx.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[lx.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[lx.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[lx.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[lx.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[lx.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[lx.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[lx.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[lx.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[lx.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[lx.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[lx.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]);class hx extends _l{constructor(e,t=1){super(),this.blendFunction=e,this.opacity=new gy(t)}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e,this.dispatchEvent({type:"change"})}getShaderCode(){return ux.get(this.blendFunction)}}class dx extends _l{constructor(e,t,{attributes:n=fx.NONE,blendFunction:i=lx.SCREEN,defines:r=new Map,uniforms:a=new Map,extensions:o=null,vertexShader:s=null}={}){super(),this.name=e,this.attributes=n,this.fragmentShader=t,this.vertexShader=s,this.defines=r,this.uniforms=a,this.extensions=o,this.blendMode=new hx(i),this.blendMode.addEventListener("change",e=>this.setChanged())}setChanged(){this.dispatchEvent({type:"change"})}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setDepthTexture(e,t=0){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof _p)continue;this[e].dispose()}}}}const fx={NONE:0,DEPTH:1,CONVOLUTION:2};function px(e,t){const n=[];let i;for(;null!==(i=e.exec(t));)n.push(i[1]);return n}function mx(e,t,n){let i,r;for(const a of t){i="$1"+e+a.charAt(0).toUpperCase()+a.slice(1),r=new RegExp("([^\\.])(\\b"+a+"\\b)","g");for(const e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(r,i))}}function Ax(e,t,n,i,r,a,o){const s=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,c=/(?:varying\s+\w+\s+(\w*))/g,l=t.blendMode,u=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),h=void 0!==u.get("fragment")&&u.get("fragment").indexOf("mainImage")>=0,d=void 0!==u.get("fragment")&&u.get("fragment").indexOf("mainUv")>=0;let f=[],p=[],m=!1,A=!1;if(void 0===u.get("fragment"))console.error("Missing fragment shader",t);else if(d&&0!=(o&fx.CONVOLUTION))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(h||d){if(d&&(n.set(QE.FRAGMENT_MAIN_UV,n.get(QE.FRAGMENT_MAIN_UV)+"\t"+e+"MainUv(UV);\n"),m=!0),null!==u.get("vertex")&&u.get("vertex").indexOf("mainSupport")>=0){let t="\t"+e+"MainSupport(";u.get("vertex").indexOf("uv")>=0&&(t+="vUv"),t+=");\n",n.set(QE.VERTEX_MAIN_SUPPORT,n.get(QE.VERTEX_MAIN_SUPPORT)+t),f=f.concat(px(c,u.get("vertex"))),p=p.concat(f).concat(px(s,u.get("vertex")))}if(p=p.concat(px(s,u.get("fragment"))).concat(Array.from(t.defines.keys()).map(e=>e.replace(/\([\w\s,]*\)/g,""))).concat(Array.from(t.uniforms.keys())),t.uniforms.forEach((t,n)=>a.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)),t.defines.forEach((t,n)=>r.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)),mx(e,p,r),mx(e,p,u),i.set(l.blendFunction,l),h){let t=e+"MainImage(color0, UV, ";0!=(o&fx.DEPTH)&&u.get("fragment").indexOf("depth")>=0&&(t+="depth, ",A=!0),t+="color1);\n\t";const i=e+"BlendOpacity";a.set(i,l.opacity),t+="color0 = blend"+l.getBlendFunction()+"(color0, color1, "+i+");\n\n\t",n.set(QE.FRAGMENT_MAIN_IMAGE,n.get(QE.FRAGMENT_MAIN_IMAGE)+t),n.set(QE.FRAGMENT_HEAD,n.get(QE.FRAGMENT_HEAD)+"uniform float "+i+";\n\n")}n.set(QE.FRAGMENT_HEAD,n.get(QE.FRAGMENT_HEAD)+u.get("fragment")+"\n"),null!==u.get("vertex")&&n.set(QE.VERTEX_HEAD,n.get(QE.VERTEX_HEAD)+u.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:f,transformedUv:m,readDepth:A}}class gx extends ex{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new rx(!1,!1,!0),this.inverse=!1}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}render(e,t,n,i,r){const a=e.getContext(),o=e.state.buffers,s=this.scene,c=this.camera,l=this.clearPass,u=this.inverse?0:1,h=1-u;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,u,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clear&&(this.renderToScreen?l.render(e,null):(l.render(e,t),l.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,c)):(e.setRenderTarget(t),e.render(s,c),e.setRenderTarget(n),e.render(s,c)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}}class vx extends ex{constructor(e,t=!0){super("SavePass"),this.setFullscreenMaterial(new RE),this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="SavePass.Target"),this.resize=t}get texture(){return this.renderTarget.texture}render(e,t,n,i,r){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){if(this.resize){const n=Math.max(e,1),i=Math.max(t,1);this.renderTarget.setSize(n,i)}}initialize(e,t,n){t||n!==Hc||(this.renderTarget.texture.format=jc),void 0!==n&&(this.renderTarget.texture.type=n)}}class yx extends ex{constructor(e,t="inputBuffer"){super("ShaderPass"),this.setFullscreenMaterial(e),this.uniform=null,this.setInput(t)}setInput(e){const t=this.getFullscreenMaterial();if(this.uniform=null,null!==t){const n=t.uniforms;void 0!==n&&void 0!==n[e]&&(this.uniform=n[e])}}render(e,t,n,i,r){null!==this.uniform&&null!==t&&(this.uniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}class Ex extends Set{constructor(e,t=10){super(),this.currentLayer=t,void 0!==e&&this.set(e)}get layer(){return this.currentLayer}set layer(e){const t=this.currentLayer;for(const n of this)n.layers.disable(t),n.layers.enable(e);this.currentLayer=e}clear(){const e=this.layer;for(const t of this)t.layers.disable(e);return super.clear()}set(e){this.clear();for(const t of e)this.add(t);return this}indexOf(e){return this.has(e)?0:-1}add(e){return e.layers.enable(this.layer),super.add(e),this}delete(e){return this.has(e)&&e.layers.disable(this.layer),super.delete(e)}setVisible(e){for(const t of this)e?t.layers.enable(0):t.layers.disable(0);return this}}class xx extends dx{constructor({blendFunction:e=lx.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,resolutionScale:i=.5,intensity:r=1,width:a=KE.AUTO_SIZE,height:o=KE.AUTO_SIZE,kernelSize:s=LE.LARGE}={}){super("BloomEffect","uniform sampler2D texture;uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(texture,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["texture",new gy(null)],["intensity",new gy(r)]])}),this.renderTarget=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("texture").value=this.renderTarget.texture,this.blurPass=new tx({resolutionScale:i,width:a,height:o,kernelSize:s}),this.blurPass.resolution.resizable=this,this.luminancePass=new yx(new zE(!0)),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n}get texture(){return this.renderTarget.texture}get luminanceMaterial(){return this.luminancePass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead."),1}set distinction(e){console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){const i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){this.blurPass.setSize(e,t),this.renderTarget.setSize(this.resolution.width,this.resolution.height)}initialize(e,t,n){this.blurPass.initialize(e,t,n),t||n!==Hc||(this.renderTarget.texture.format=jc),void 0!==n&&(this.renderTarget.texture.type=n)}}class bx extends pd{constructor(e,t,n=1024,i=1009){super(function(e,t,n){const i=new Map([[Yc,1],[Kc,1],[Zc,2],[jc,3],[Jc,4]]);let r;if(i.has(t)||console.error("Invalid noise texture format"),n===Hc){r=new Uint8Array(e*i.get(t));for(let e=0,t=r.length;e<t;++e)r[e]=255*Math.random()}else{r=new Float32Array(e*i.get(t));for(let e=0,t=r.length;e<t;++e)r[e]=Math.random()}return r}(e*t,n,i),e,t,n,i)}}const Bx="Glitch.Generated";function Cx(e,t){return e+Math.random()*(t-e)}const wx={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3};const Mx=new zl,Dx=new gu;const Sx=.5*Math.PI,_x=new zl,Tx=new zl;const Ix={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3};var Fx="#ifdef ASPECT_CORRECTION\nuniform float scale;\n#else\nuniform mat3 uvTransform;\n#endif\nvarying vec2 vUv2;void mainSupport(const in vec2 uv){\n#ifdef ASPECT_CORRECTION\nvUv2=uv*vec2(aspect,1.0)*scale;\n#else\nvUv2=(uvTransform*vec3(uv,1.0)).xy;\n#endif\n}";class Lx{constructor(e=0,t=0,n=null){this.width=e,this.height=t,this.data=n}toCanvas(){return"undefined"==typeof document?null:function(e,t,n){const i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=i.getContext("2d"),a=r.createImageData(e,t);return a.data.set(n),i.width=e,i.height=t,r.putImageData(a,0,0),i}(this.width,this.height,this.data)}static from(e){return new Lx(e.width,e.height,e.data)}}class Rx{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}equals(e){return this===e||this.x===e.x&&this.y===e.y}}class Px{constructor(){this.min=new Rx,this.max=new Rx}}const Ox=new Px,Nx=new Px,Ux=16,Gx=30,Hx=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),Qx=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],kx=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],zx=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function Vx(e,t,n){return e+(t-e)*n}function Wx(e,t){const n=t.min,i=t.max,r=.5*Math.sqrt(2*n.x),a=.5*Math.sqrt(2*n.y),o=.5*Math.sqrt(2*i.x),s=.5*Math.sqrt(2*i.y),c=(l=e/32,Math.min(Math.max(l,0),1));var l;return n.set(Vx(r,n.x,c),Vx(a,n.y,c)),i.set(Vx(o,i.x,c),Vx(s,i.y,c)),t}function jx(e,t,n,i){const r=t.x-e.x,a=t.y-e.y,o=n,s=n+1,c=e.y+a*(o-e.x)/r,l=e.y+a*(s-e.x)/r;let u,h,d,f;return o>=e.x&&o<t.x||s>e.x&&s<=t.x?Math.sign(c)===Math.sign(l)||Math.abs(c)<1e-4||Math.abs(l)<1e-4?(u=(c+l)/2,u<0?i.set(Math.abs(u),0):i.set(0,Math.abs(u))):(f=-e.y*r/a+e.x,h=f>e.x?c*(f-Math.trunc(f))/2:0,d=f<t.x?l*(1-(f-Math.trunc(f)))/2:0,u=Math.abs(h)>Math.abs(d)?h:-d,u<0?i.set(Math.abs(h),Math.abs(d)):i.set(Math.abs(d),Math.abs(h))):i.set(0,0),i}function Jx(e,t,n,i,r){const a=Ox.min,o=Ox.max,s=Nx.min,c=Nx.max,l=Nx,u=.5+i,h=.5+i-1,d=t+n+1;switch(e){case 0:r.set(0,0);break;case 1:t<=n?jx(a.set(0,h),o.set(d/2,0),t,r):r.set(0,0);break;case 2:t>=n?jx(a.set(d/2,0),o.set(d,h),t,r):r.set(0,0);break;case 3:jx(a.set(0,h),o.set(d/2,0),t,s),jx(a.set(d/2,0),o.set(d,h),t,c),Wx(d,l),r.set(s.x+c.x,s.y+c.y);break;case 4:t<=n?jx(a.set(0,u),o.set(d/2,0),t,r):r.set(0,0);break;case 5:r.set(0,0);break;case 6:Math.abs(i)>0?(jx(a.set(0,u),o.set(d,h),t,s),jx(a.set(0,u),o.set(d/2,0),t,c),jx(a.set(d/2,0),o.set(d,h),t,r),c.set(c.x+r.x,c.y+r.y),r.set((s.x+c.x)/2,(s.y+c.y)/2)):jx(a.set(0,u),o.set(d,h),t,r);break;case 7:jx(a.set(0,u),o.set(d,h),t,r);break;case 8:t>=n?jx(a.set(d/2,0),o.set(d,u),t,r):r.set(0,0);break;case 9:Math.abs(i)>0?(jx(a.set(0,h),o.set(d,u),t,s),jx(a.set(0,h),o.set(d/2,0),t,c),jx(a.set(d/2,0),o.set(d,u),t,r),c.set(c.x+r.x,c.y+r.y),r.set((s.x+c.x)/2,(s.y+c.y)/2)):jx(a.set(0,h),o.set(d,u),t,r);break;case 10:r.set(0,0);break;case 11:jx(a.set(0,h),o.set(d,u),t,r);break;case 12:jx(a.set(0,u),o.set(d/2,0),t,s),jx(a.set(d/2,0),o.set(d,u),t,c),Wx(d,l),r.set(s.x+c.x,s.y+c.y);break;case 13:jx(a.set(0,h),o.set(d,u),t,r);break;case 14:jx(a.set(0,u),o.set(d,h),t,r);break;case 15:r.set(0,0)}return r}function Yx(e,t,n,i){let r=e.equals(t);if(!r){let a=(e.x+t.x)/2,o=(e.y+t.y)/2;r=(t.y-e.y)*(n-a)+(e.x-t.x)*(i-o)>0}return r}function Xx(e,t,n,i){let r,a,o,s,c;for(r=0,o=0;o<Gx;++o)for(a=0;a<Gx;++a)s=a/29,c=o/29,Yx(e,t,n+s,i+c)&&++r;return r/900}function qx(e,t,n,i,r,a){const o=zx[e],s=o[0],c=o[1];return s>0&&(t.x+=r[0],t.y+=r[1]),c>0&&(n.x+=r[0],n.y+=r[1]),a.set(1-Xx(t,n,1+i,0+i),Xx(t,n,1+i,1+i))}function Kx(e,t,n,i,r){const a=Ox.min,o=Ox.max,s=Nx.min,c=Nx.max,l=t+n+1;switch(e){case 0:qx(e,a.set(1,1),o.set(1+l,1+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 1:qx(e,a.set(1,0),o.set(0+l,0+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 2:qx(e,a.set(0,0),o.set(1+l,0+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 3:qx(e,a.set(1,0),o.set(1+l,0+l),t,i,r);break;case 4:qx(e,a.set(1,1),o.set(0+l,0+l),t,i,s),qx(e,a.set(1,1),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 5:qx(e,a.set(1,1),o.set(0+l,0+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 6:qx(e,a.set(1,1),o.set(1+l,0+l),t,i,r);break;case 7:qx(e,a.set(1,1),o.set(1+l,0+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 8:qx(e,a.set(0,0),o.set(1+l,1+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,1+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 9:qx(e,a.set(1,0),o.set(1+l,1+l),t,i,r);break;case 10:qx(e,a.set(0,0),o.set(1+l,1+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 11:qx(e,a.set(1,0),o.set(1+l,1+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 12:qx(e,a.set(1,1),o.set(1+l,1+l),t,i,r);break;case 13:qx(e,a.set(1,1),o.set(1+l,1+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,1+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 14:qx(e,a.set(1,1),o.set(1+l,1+l),t,i,s),qx(e,a.set(1,1),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2);break;case 15:qx(e,a.set(1,1),o.set(1+l,1+l),t,i,s),qx(e,a.set(1,0),o.set(1+l,0+l),t,i,c),r.set((s.x+c.x)/2,(s.y+c.y)/2)}return r}function Zx(e,t,n){const i=new Rx;let r,a,o,s,c,l,u,h;for(r=0,a=e.length;r<a;++r)for(l=e[r],u=l.data,h=l.width,s=0;s<h;++s)for(o=0;o<h;++o)n?Jx(r,o,s,t,i):Kx(r,o,s,t,i),c=2*(s*h+o),u[c]=255*i.x,u[c+1]=255*i.y}function $x(e,t,n,i,r,a){const o=new Rx,s=a.data,c=a.width;let l,u,h,d,f,p,m,A,g,v;for(l=0,u=t.length;l<u;++l)for(m=n[l],A=t[l],g=A.data,v=A.width,d=0;d<i;++d)for(h=0;h<i;++h)o.set(m[0]*i+e.x+h,m[1]*i+e.y+d),f=4*(o.y*c+o.x),p=r?2*(d*d*v+h*h):2*(d*v+h),s[f]=g[p],s[f+1]=g[p+1],s[f+2]=0,s[f+3]=255}const eb=new Map([[nb([0,0,0,0]),[0,0,0,0]],[nb([0,0,0,1]),[0,0,0,1]],[nb([0,0,1,0]),[0,0,1,0]],[nb([0,0,1,1]),[0,0,1,1]],[nb([0,1,0,0]),[0,1,0,0]],[nb([0,1,0,1]),[0,1,0,1]],[nb([0,1,1,0]),[0,1,1,0]],[nb([0,1,1,1]),[0,1,1,1]],[nb([1,0,0,0]),[1,0,0,0]],[nb([1,0,0,1]),[1,0,0,1]],[nb([1,0,1,0]),[1,0,1,0]],[nb([1,0,1,1]),[1,0,1,1]],[nb([1,1,0,0]),[1,1,0,0]],[nb([1,1,0,1]),[1,1,0,1]],[nb([1,1,1,0]),[1,1,1,0]],[nb([1,1,1,1]),[1,1,1,1]]]);function tb(e,t,n){return e+(t-e)*n}function nb(e){const t=tb(e[0],e[1],.75),n=tb(e[2],e[3],.75);return tb(t,n,.875)}function ib(e,t){let n=0;return 1===t[3]&&(n+=1),1===n&&1===t[2]&&1!==e[1]&&1!==e[3]&&(n+=1),n}function rb(e,t){let n=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(n+=1),1===n&&1===t[2]&&1!==e[0]&&1!==e[2]&&(n+=1),n}var ab=Object.freeze({__proto__:null,AdaptiveLuminanceMaterial:ME,BlendFunction:lx,BlendMode:hx,BloomEffect:xx,BlurPass:tx,BokehEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,focus:t=.5,dof:n=.02,aperture:i=.015,maxBlur:r=1}={}){super("BokehEffect","uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}",{blendFunction:e,attributes:fx.CONVOLUTION|fx.DEPTH,uniforms:new Map([["focus",new gy(t)],["dof",new gy(n)],["aperture",new gy(i)],["maxBlur",new gy(r)]])})}},BokehMaterial:DE,BrightnessContrastEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,brightness:t=0,contrast:n=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new gy(t)],["contrast",new gy(n)]])})}},ChromaticAberrationEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,offset:t=new Ll(.001,5e-4)}={}){super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;\n#ifdef ALPHA\nvec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;color.r=ra.x;color.b=ba.x;color.a=max(max(ra.y,ba.y),inputColor.a);\n#else\ncolor.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;\n#endif\noutputColor=color;}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}",blendFunction:e,attributes:fx.CONVOLUTION,uniforms:new Map([["offset",new gy(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}initialize(e,t,n){t?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA")}},CircleOfConfusionMaterial:SE,ClearMaskPass:nx,ClearPass:rx,ColorAverageEffect:class extends dx{constructor(e=lx.NORMAL){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}",{blendFunction:e})}},ColorChannel:CE,ColorDepthEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,bits:t=16}={}){super("ColorDepthEffect","uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",{blendFunction:e,uniforms:new Map([["factor",new gy(1)]])}),this.bits=0,this.setBitDepth(t)}getBitDepth(){return this.bits}setBitDepth(e){this.bits=e,this.uniforms.get("factor").value=Math.pow(2,e/3)}},ColorEdgesMaterial:class extends sd{constructor(e=new Ll){super({type:"ColorEdgesMaterial",defines:{EDGE_DETECTION_MODE:"2",LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1"},uniforms:{inputBuffer:new gy(null),texelSize:new gy(e)},fragmentShader:_E,vertexShader:TE,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}setLocalContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("2"),this.needsUpdate=!0}setEdgeDetectionThreshold(e){const t=Math.min(Math.max(e,.05),.5);this.defines.EDGE_THRESHOLD=t.toFixed("2"),this.needsUpdate=!0}},ConvolutionMaterial:IE,CopyMaterial:RE,DepthComparisonMaterial:PE,DepthDownsamplingMaterial:OE,DepthDownsamplingPass:class extends ex{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:n=KE.AUTO_SIZE,height:i=KE.AUTO_SIZE}={}){if(super("DepthDownsamplingPass"),this.setFullscreenMaterial(new OE),this.needsDepthTexture=!0,this.needsSwap=!1,null!==e){const t=this.getFullscreenMaterial();t.uniforms.normalBuffer.value=e,t.defines.DOWNSAMPLE_NORMALS="1"}this.renderTarget=new Hl(1,1,{minFilter:Rc,magFilter:Rc,stencilBuffer:!1,depthBuffer:!1,type:zc}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1,this.resolution=new KE(this,n,i),this.resolution.scale=t}get texture(){return this.renderTarget.texture}setDepthTexture(e,t=0){const n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=e,n.depthPacking=t}render(e,t,n,i,r){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.getFullscreenMaterial().setTexelSize(1/e,1/t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){e.capabilities.isWebGL2||console.error("The DepthDownsamplingPass requires WebGL 2")}},DepthEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,inverted:t=!1}={}){super("DepthEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef INVERTED\nvec3 color=vec3(1.0-depth);\n#else\nvec3 color=vec3(depth);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,attributes:fx.DEPTH}),this.inverted=t}get inverted(){return this.defines.has("INVERTED")}set inverted(e){this.inverted!==e&&(e?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}},DepthMaskMaterial:NE,DepthOfFieldEffect:class extends dx{constructor(e,{blendFunction:t=lx.NORMAL,focusDistance:n=0,focalLength:i=.1,bokehScale:r=1,width:a=KE.AUTO_SIZE,height:o=KE.AUTO_SIZE}={}){super("DepthOfFieldEffect","uniform sampler2D nearColorBuffer;uniform sampler2D farColorBuffer;uniform sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:fx.DEPTH,uniforms:new Map([["nearColorBuffer",new gy(null)],["farColorBuffer",new gy(null)],["nearCoCBuffer",new gy(null)],["scale",new gy(1)]])}),this.camera=e,this.renderTarget=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.format=jc,this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new yx(new SE(e));const s=this.circleOfConfusionMaterial;s.uniforms.focusDistance.value=n,s.uniforms.focalLength.value=i,this.blurPass=new tx({width:a,height:o,kernelSize:LE.MEDIUM}),this.blurPass.resolution.resizable=this,this.maskPass=new yx(new VE(this.renderTargetCoC.texture));const c=this.maskPass.getFullscreenMaterial();c.maskFunction=WE.MULTIPLY_RGB_SET_ALPHA,c.colorChannel=CE.GREEN,this.bokehNearBasePass=new yx(new DE(!1,!0)),this.bokehNearFillPass=new yx(new DE(!0,!0)),this.bokehFarBasePass=new yx(new DE(!1,!1)),this.bokehFarFillPass=new yx(new DE(!0,!1)),this.bokehScale=r,this.target=null}get circleOfConfusionMaterial(){return this.cocPass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].map(e=>e.getFullscreenMaterial().uniforms.scale).forEach(t=>{t.value=e}),this.maskPass.getFullscreenMaterial().uniforms.strength.value=e,this.uniforms.get("scale").value=e}calculateFocusDistance(e){const t=this.camera,n=t.far-t.near,i=t.position.distanceTo(e);return Math.min(Math.max(i/n,0),1)}setDepthTexture(e,t=0){const n=this.circleOfConfusionMaterial;n.uniforms.depthBuffer.value=e,n.depthPacking=t}update(e,t,n){const i=this.renderTarget,r=this.renderTargetCoC,a=this.renderTargetCoCBlurred,o=this.renderTargetMasked,s=this.bokehFarBasePass,c=this.bokehFarFillPass,l=s.getFullscreenMaterial().uniforms,u=c.getFullscreenMaterial().uniforms,h=this.bokehNearBasePass,d=this.bokehNearFillPass,f=h.getFullscreenMaterial().uniforms,p=d.getFullscreenMaterial().uniforms;if(null!==this.target){const e=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.uniforms.focusDistance.value=e}this.cocPass.render(e,null,r),this.blurPass.render(e,r,a),this.maskPass.render(e,t,o),l.cocBuffer.value=u.cocBuffer.value=r.texture,s.render(e,o,i),c.render(e,i,this.renderTargetFar),f.cocBuffer.value=p.cocBuffer.value=a.texture,h.render(e,t,i),d.render(e,i,this.renderTargetNear)}setSize(e,t){const n=this.resolution;let i=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];i.push(this.renderTargetCoC,this.renderTargetMasked),i.forEach(n=>n.setSize(e,t));const r=n.width,a=n.height;i=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],i.forEach(e=>e.setSize(r,a));[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(e=>e.getFullscreenMaterial().setTexelSize(1/r,1/a))}initialize(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,n)),this.blurPass.initialize(e,t,Hc),t||n!==Hc||(this.renderTargetNear.texture.type=jc),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n)}},DepthPass:cx,Disposable:class{dispose(){}},DotScreenEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,angle:t=.5*Math.PI,scale:n=1}={}){super("DotScreenEffect","uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",{blendFunction:e,uniforms:new Map([["angle",new gy(new Ll)],["scale",new gy(n)]])}),this.setAngle(t)}setAngle(e){this.uniforms.get("angle").value.set(Math.sin(e),Math.cos(e))}},EdgeDetectionMaterial:UE,EdgeDetectionMode:GE,Effect:dx,EffectAttribute:fx,EffectComposer:class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(t,n,r,i),this.outputBuffer=this.inputBuffer.clone(),this.enableExtensions()),this.copyPass=new yx(new RE),this.depthTexture=null,this.passes=[],this.autoRenderToScreen=!0}get multisampling(){return this.inputBuffer instanceof Ql?this.inputBuffer.samples:0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getRenderer(){return this.renderer}enableExtensions(){const e=this.inputBuffer.texture.type,t=this.renderer.capabilities,n=this.renderer.getContext();e!==Hc&&(t.isWebGL2?n.getExtension("EXT_color_buffer_float"):n.getExtension("EXT_color_buffer_half_float"))}replaceRenderer(e,t=!0){const n=this.renderer;if(null!==n&&n!==e){const i=n.getSize(new Ll),r=e.getSize(new Ll),a=n.domElement.parentNode;this.renderer=e,this.renderer.autoClear=!1,i.equals(r)||this.setSize(),t&&null!==a&&(a.removeChild(n.domElement),a.appendChild(e.domElement)),this.enableExtensions()}return n}createDepthTexture(){const e=this.depthTexture=new _m;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=qc,e.type=Wc):e.type=kc,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,i){const r=this.renderer.getDrawingBufferSize(new Ll),a={format:this.renderer.getContext().getContextAttributes().alpha||n!==Hc?Jc:jc,minFilter:Nc,magFilter:Nc,stencilBuffer:t,depthBuffer:e,type:n},o=i>0?new Ql(r.width,r.height,a):new Hl(r.width,r.height,a);return i>0&&(o.samples=i),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}addPass(e,t){const n=this.passes,i=this.renderer,r=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type,o=i.getDrawingBufferSize(new Ll);if(e.setSize(o.width,o.height),e.initialize(i,r,a),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let i,r,a,o=this.inputBuffer,s=this.outputBuffer,c=!1;for(const l of this.passes)l.enabled&&(l.render(t,o,s,e,c),l.needsSwap&&(c&&(n.renderToScreen=l.renderToScreen,i=t.getContext(),r=t.state.buffers.stencil,r.setFunc(i.NOTEQUAL,1,4294967295),n.render(t,o,s,e,c),r.setFunc(i.EQUAL,1,4294967295)),a=o,o=s,s=a),l instanceof gx?c=!0:l instanceof nx&&(c=!1))}setSize(e,t,n){const i=this.renderer;if(void 0===e||void 0===t){const n=i.getSize(new Ll);e=n.width,t=n.height}else i.setSize(e,t,n);const r=i.getDrawingBufferSize(new Ll);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const e of this.passes)e.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose()}},EffectMaterial:HE,EffectPass:class extends ex{constructor(e,...t){super("EffectPass"),this.setFullscreenMaterial(new HE(null,null,null,e)),this.effects=t.sort((e,t)=>t.attributes-e.attributes),this.skipRendering=!1,this.uniforms=0,this.varyings=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return void 0!==this.getFullscreenMaterial().defines.ENCODE_OUTPUT}set encodeOutput(e){if(this.encodeOutput!==e){const t=this.getFullscreenMaterial();t.needsUpdate=!0,e?t.defines.ENCODE_OUTPUT="1":delete t.defines.ENCODE_OUTPUT}}get dithering(){return this.getFullscreenMaterial().dithering}set dithering(e){const t=this.getFullscreenMaterial();t.dithering!==e&&(t.dithering=e,t.needsUpdate=!0)}verifyResources(e){const t=e.capabilities;let n=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniforms>n&&console.warn("The current rendering context doesn't support more than "+n+" uniforms, but "+this.uniforms+" were defined"),n=t.maxVaryings,this.varyings>n&&console.warn("The current rendering context doesn't support more than "+n+" varyings, but "+this.varyings+" were defined")}updateMaterial(){const e=/\bblend\b/g,t=new Map([[QE.FRAGMENT_HEAD,""],[QE.FRAGMENT_MAIN_UV,""],[QE.FRAGMENT_MAIN_IMAGE,""],[QE.VERTEX_HEAD,""],[QE.VERTEX_MAIN_SUPPORT,""]]),n=new Map,i=new Map,r=new Map,a=new Set;let o,s=0,c=0,l=0,u=!1,h=!1;for(const e of this.effects)if(e.blendMode.getBlendFunction()===lx.SKIP)l|=e.getAttributes()&fx.DEPTH;else if(0!=(l&fx.CONVOLUTION)&&0!=(e.getAttributes()&fx.CONVOLUTION))console.error("Convolution effects cannot be merged",e);else if(l|=e.getAttributes(),o=Ax("e"+s++,e,t,n,i,r,l),c+=o.varyings.length,u=u||o.transformedUv,h=h||o.readDepth,null!==e.extensions)for(const t of e.extensions)a.add(t);for(const i of n.values())t.set(QE.FRAGMENT_HEAD,t.get(QE.FRAGMENT_HEAD)+i.getShaderCode().replace(e,"blend"+i.getBlendFunction())+"\n");0!=(l&fx.DEPTH)?(h&&t.set(QE.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+t.get(QE.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,u?(t.set(QE.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+t.get(QE.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),t.forEach((e,t,n)=>n.set(t,e.trim().replace(/^#/,"\n#"))),this.uniforms=r.size,this.varyings=c,this.skipRendering=0===s,this.needsSwap=!this.skipRendering;const d=this.getFullscreenMaterial();if(d.setShaderParts(t).setDefines(i).setUniforms(r),d.extensions={},a.size>0)for(const e of a)d.extensions[e]=!0;this.needsUpdate=!1}recompile(e){this.updateMaterial(),void 0!==e&&this.verifyResources(e)}getDepthTexture(){return this.getFullscreenMaterial().uniforms.depthBuffer.value}setDepthTexture(e,t=0){const n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=e,n.depthPacking=t,n.needsUpdate=!0;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,i,r){const a=this.getFullscreenMaterial(),o=a.uniforms.time.value+i;this.needsUpdate&&this.recompile(e);for(const n of this.effects)n.update(e,t,i);this.skipRendering&&!this.renderToScreen||(a.uniforms.inputBuffer.value=t.texture,a.uniforms.time.value=o<=this.maxTime?o:this.minTime,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera))}setSize(e,t){this.getFullscreenMaterial().setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.capabilities=e.capabilities;for(const i of this.effects)i.initialize(e,t,n),i.addEventListener("change",e=>this.handleEvent(e));this.updateMaterial(),this.verifyResources(e)}dispose(){super.dispose();for(const e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.needsUpdate=!0}}},GammaCorrectionEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,gamma:t=2}={}){super("GammaCorrectionEffect","uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}",{blendFunction:e,uniforms:new Map([["gamma",new gy(t)]])})}},GlitchEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,chromaticAberrationOffset:t=null,delay:n=new Ll(1.5,3.5),duration:i=new Ll(.6,1),strength:r=new Ll(.3,1),columns:a=.05,ratio:o=.85,perturbationMap:s=null,dtSize:c=64}={}){super("GlitchEffect","uniform sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seed;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seed.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seed.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seed*(random*0.2);}}",{blendFunction:e,uniforms:new Map([["perturbationMap",new gy(null)],["columns",new gy(a)],["active",new gy(!1)],["random",new gy(1)],["seed",new gy(new Ll)],["distortion",new gy(new Ll)]])}),this.setPerturbationMap(null===s?this.generatePerturbationMap(c):s),this.delay=n,this.duration=i,this.breakPoint=new Ll(Cx(this.delay.x,this.delay.y),Cx(this.duration.x,this.duration.y)),this.time=0,this.seed=this.uniforms.get("seed").value,this.distortion=this.uniforms.get("distortion").value,this.mode=wx.SPORADIC,this.strength=r,this.ratio=o,this.chromaticAberrationOffset=t}get active(){return this.uniforms.get("active").value}getPerturbationMap(){return this.uniforms.get("perturbationMap").value}setPerturbationMap(e){const t=this.getPerturbationMap();null!==t&&t.name===Bx&&t.dispose(),e.minFilter=e.magFilter=Rc,e.wrapS=e.wrapT=Ic,e.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=e}generatePerturbationMap(e=64){const t=new bx(e,e,jc);return t.name=Bx,t}update(e,t,n){const i=this.mode,r=this.breakPoint,a=this.chromaticAberrationOffset,o=this.strength;let s,c=this.time,l=!1,u=0,h=0;i!==wx.DISABLED&&(i===wx.SPORADIC&&(c+=n,s=c>r.x,c>=r.x+r.y&&(r.set(Cx(this.delay.x,this.delay.y),Cx(this.duration.x,this.duration.y)),c=0)),u=Math.random(),this.uniforms.get("random").value=u,s&&u>this.ratio||i===wx.CONSTANT_WILD?(l=!0,u*=.03*o.y,h=Cx(-Math.PI,Math.PI),this.seed.set(Cx(-o.y,o.y),Cx(-o.y,o.y)),this.distortion.set(Cx(0,1),Cx(0,1))):(s||i===wx.CONSTANT_MILD)&&(l=!0,u*=.03*o.x,h=Cx(-Math.PI,Math.PI),this.seed.set(Cx(-o.x,o.x),Cx(-o.x,o.x)),this.distortion.set(Cx(0,1),Cx(0,1))),this.time=c),null!==a&&(l?a.set(Math.cos(h),Math.sin(h)).multiplyScalar(u):a.set(0,0)),this.uniforms.get("active").value=l}},GlitchMode:wx,GodRaysEffect:class extends dx{constructor(e,t,{blendFunction:n=lx.SCREEN,samples:i=60,density:r=.96,decay:a=.9,weight:o=.4,exposure:s=.6,clampMax:c=1,resolutionScale:l=.5,width:u=KE.AUTO_SIZE,height:h=KE.AUTO_SIZE,kernelSize:d=LE.SMALL,blur:f=!0}={}){super("GodRaysEffect","uniform sampler2D texture;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(texture,uv);}",{blendFunction:n,attributes:fx.DEPTH,uniforms:new Map([["texture",new gy(null)]])}),this.camera=e,this.lightSource=t,this.lightSource.material.depthWrite=!1,this.lightSource.material.transparent=!0,this.lightScene=new _p,this.screenPosition=new Ll,this.renderTargetA=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("texture").value=this.renderTargetB.texture,this.renderTargetLight=this.renderTargetA.clone(),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthBuffer=!0,this.renderTargetLight.depthTexture=new _m,this.renderPassLight=new sx(this.lightScene,e),this.renderPassLight.getClearPass().overrideClearColor=new uh(0),this.clearPass=new rx(!0,!1,!1),this.clearPass.overrideClearColor=new uh(0),this.blurPass=new tx({resolutionScale:l,width:u,height:h,kernelSize:d}),this.blurPass.resolution.resizable=this,this.depthMaskPass=new yx((e=>{const t=new NE;return t.uniforms.depthBuffer1.value=e,t})(this.renderTargetLight.depthTexture)),this.godRaysPass=new yx((()=>{const e=new kE(this.screenPosition);return e.uniforms.density.value=r,e.uniforms.decay.value=a,e.uniforms.weight.value=o,e.uniforms.exposure.value=s,e.uniforms.clampMax.value=c,e})()),this.samples=i,this.blur=f}get texture(){return this.renderTargetB.texture}get godRaysMaterial(){return this.godRaysPass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get dithering(){return this.godRaysMaterial.dithering}set dithering(e){const t=this.godRaysMaterial;t.dithering=e,t.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(e){this.blurPass.enabled=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}get samples(){return this.godRaysMaterial.samples}set samples(e){this.godRaysMaterial.samples=e}setDepthTexture(e,t=0){const n=this.depthMaskPass.getFullscreenMaterial();n.uniforms.depthBuffer0.value=e,n.defines.DEPTH_PACKING_0=t.toFixed(0)}update(e,t,n){const i=this.lightSource,r=i.parent,a=i.matrixAutoUpdate,o=this.renderTargetA,s=this.renderTargetLight;i.material.depthWrite=!0,i.matrixAutoUpdate=!1,i.updateWorldMatrix(!0,!1),null!==r&&(a||Dx.copy(i.matrix),i.matrix.copy(i.matrixWorld)),this.lightScene.add(i),this.renderPassLight.render(e,s),this.clearPass.render(e,o),this.depthMaskPass.render(e,s,o),i.material.depthWrite=!1,i.matrixAutoUpdate=a,null!==r&&(a||i.matrix.copy(Dx),r.add(i)),Mx.setFromMatrixPosition(i.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max(.5*(Mx.x+1),-1),2),Math.min(Math.max(.5*(Mx.y+1),-1),2)),this.blur&&this.blurPass.render(e,o,o),this.godRaysPass.render(e,o,this.renderTargetB)}setSize(e,t){this.blurPass.setSize(e,t),this.renderPassLight.setSize(e,t),this.depthMaskPass.setSize(e,t),this.godRaysPass.setSize(e,t);const n=this.resolution.width,i=this.resolution.height;this.renderTargetA.setSize(n,i),this.renderTargetB.setSize(n,i),this.renderTargetLight.setSize(n,i)}initialize(e,t,n){this.blurPass.initialize(e,t,n),this.renderPassLight.initialize(e,t,n),this.depthMaskPass.initialize(e,t,n),this.godRaysPass.initialize(e,t,n),t||n!==Hc||(this.renderTargetA.texture.format=jc,this.renderTargetB.texture.format=jc,this.renderTargetLight.texture.format=jc),void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,this.renderTargetLight.texture.type=n)}},GodRaysMaterial:kE,GridEffect:class extends dx{constructor({blendFunction:e=lx.OVERLAY,scale:t=1,lineWidth:n=0}={}){super("GridEffect","uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",{blendFunction:e,uniforms:new Map([["scale",new gy(new Ll)],["lineWidth",new gy(n)]])}),this.resolution=new Ll,this.scale=Math.max(t,1e-6),this.lineWidth=Math.max(n,0)}getScale(){return this.scale}setScale(e){this.scale=e,this.setSize(this.resolution.x,this.resolution.y)}getLineWidth(){return this.lineWidth}setLineWidth(e){this.lineWidth=e,this.setSize(this.resolution.x,this.resolution.y)}setSize(e,t){this.resolution.set(e,t);const n=e/t,i=this.scale*(.125*t);this.uniforms.get("scale").value.set(n*i,i),this.uniforms.get("lineWidth").value=i/t+this.lineWidth}},HueSaturationEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,hue:t=0,saturation:n=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new gy(new zl)],["saturation",new gy(n)]])}),this.setHue(t)}setHue(e){const t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set(2*n,-Math.sqrt(3)*t-n,Math.sqrt(3)*t-n).addScalar(1).divideScalar(3)}},Initializable:class{initialize(e,t,n){}},KernelSize:LE,LambdaPass:class extends ex{constructor(e){super("LambdaPass",null,null),this.needsSwap=!1,this.f=e}render(e,t,n,i,r){this.f()}},LuminanceMaterial:zE,MaskFunction:WE,MaskMaterial:VE,MaskPass:gx,NoiseEffect:class extends dx{constructor({blendFunction:e=lx.SCREEN,premultiply:t=!1}={}){super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},NoiseTexture:bx,NormalPass:class extends ex{constructor(e,t,{resolutionScale:n=1,width:i=KE.AUTO_SIZE,height:r=KE.AUTO_SIZE,renderTarget:a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new sx(e,t,new sg);const o=this.renderPass.getClearPass();o.overrideClearColor=new uh(7829503),o.overrideClearAlpha=1,this.renderTarget=a,void 0===this.renderTarget&&(this.renderTarget=new Hl(1,1,{minFilter:Rc,magFilter:Rc,format:jc,stencilBuffer:!1}),this.renderTarget.texture.name="NormalPass.Target"),this.resolution=new KE(this,i,r,n)}get texture(){return this.renderTarget.texture}getResolutionScale(){return this.resolutionScale}setResolutionScale(e){this.resolutionScale=e,this.setSize(this.resolution.base.x,this.resolution.base.y)}render(e,t,n,i,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a,a)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.renderTarget.setSize(n.width,n.height)}},OutlineEdgesMaterial:JE,OutlineEffect:class extends dx{constructor(e,t,{blendFunction:n=lx.SCREEN,patternTexture:i=null,edgeStrength:r=1,pulseSpeed:a=0,visibleEdgeColor:o=16777215,hiddenEdgeColor:s=2230538,resolutionScale:c=.5,width:l=KE.AUTO_SIZE,height:u=KE.AUTO_SIZE,kernelSize:h=LE.VERY_SMALL,blur:d=!1,xRay:f=!0}={}){super("OutlineEffect","uniform sampler2D edgeTexture;uniform sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\n#ifdef USE_PATTERN\nuniform sampler2D patternTexture;varying vec2 vUvPattern;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\n#ifndef X_RAY\nedge.y=0.0;\n#endif\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\n#ifdef USE_PATTERN\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\n#ifdef X_RAY\nfloat hiddenFactor=0.5;\n#else\nfloat hiddenFactor=0.0;\n#endif\nvisibilityFactor=(1.0-mask.y>0.0)? 1.0 : hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\n#endif\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\n#ifdef ALPHA\noutputColor=vec4(color,alpha);\n#else\noutputColor=vec4(color,max(alpha,inputColor.a));\n#endif\n}",{uniforms:new Map([["maskTexture",new gy(null)],["edgeTexture",new gy(null)],["edgeStrength",new gy(r)],["visibleEdgeColor",new gy(new uh(o))],["hiddenEdgeColor",new gy(new uh(s))],["pulse",new gy(1)],["patternScale",new gy(1)],["patternTexture",new gy(null)]])}),this.blendMode.addEventListener("change",e=>{this.blendMode.getBlendFunction()===lx.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(n),this.setPatternTexture(i),this.xRay=f,this.scene=e,this.camera=t,this.renderTargetMask=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,format:jc}),this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=this.renderTargetMask.clone(),this.renderTargetOutline.texture.name="Outline.Edges",this.renderTargetOutline.depthBuffer=!1,this.renderTargetBlurredOutline=this.renderTargetOutline.clone(),this.renderTargetBlurredOutline.texture.name="Outline.BlurredEdges",this.clearPass=new rx,this.clearPass.overrideClearColor=new uh(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new cx(e,t),this.maskPass=new sx(e,t,new PE(this.depthPass.texture,t));const p=this.maskPass.getClearPass();p.overrideClearColor=new uh(16777215),p.overrideClearAlpha=1,this.blurPass=new tx({resolutionScale:c,width:l,height:u,kernelSize:h}),this.blurPass.resolution.resizable=this,this.blur=d,this.outlinePass=new yx(new jE),this.outlinePass.getFullscreenMaterial().uniforms.inputBuffer.value=this.renderTargetMask.texture,this.time=0,this.selection=new Ex,this.pulseSpeed=a}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get selectionLayer(){return this.selection.layer}set selectionLayer(e){this.selection.layer=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get blur(){return this.blurPass.enabled}set blur(e){this.blurPass.enabled=e,this.uniforms.get("edgeTexture").value=e?this.renderTargetBlurredOutline.texture:this.renderTargetOutline.texture}get xRay(){return this.defines.has("X_RAY")}set xRay(e){this.xRay!==e&&(e?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}setPatternTexture(e){null!==e?(e.wrapS=e.wrapT=Ic,this.defines.set("USE_PATTERN","1"),this.uniforms.get("patternTexture").value=e,this.setVertexShader("uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}")):(this.defines.delete("USE_PATTERN"),this.uniforms.get("patternTexture").value=null,this.setVertexShader(null)),this.setChanged()}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}setSelection(e){return this.selection.set(e),this}clearSelection(){return this.selection.clear(),this}selectObject(e){return this.selection.add(e),this}deselectObject(e){return this.selection.delete(e),this}update(e,t,n){const i=this.scene,r=this.camera,a=this.selection,o=this.uniforms.get("pulse"),s=i.background,c=r.layers.mask;a.size>0?(i.background=null,o.value=1,this.pulseSpeed>0&&(o.value=.625+.375*Math.cos(this.time*this.pulseSpeed*10)),this.time+=n,a.setVisible(!1),this.depthPass.render(e),a.setVisible(!0),r.layers.set(a.layer),this.maskPass.render(e,this.renderTargetMask),r.layers.mask=c,i.background=s,this.outlinePass.render(e,null,this.renderTargetOutline),this.blur&&this.blurPass.render(e,this.renderTargetOutline,this.renderTargetBlurredOutline)):this.time>0&&(this.clearPass.render(e,this.renderTargetMask),this.time=0)}setSize(e,t){this.blurPass.setSize(e,t),this.renderTargetMask.setSize(e,t);const n=this.resolution.width,i=this.resolution.height;this.depthPass.setSize(n,i),this.renderTargetOutline.setSize(n,i),this.renderTargetBlurredOutline.setSize(n,i),this.outlinePass.getFullscreenMaterial().setTexelSize(1/n,1/i)}initialize(e,t,n){this.blurPass.initialize(e,t,Hc),void 0!==n&&(this.depthPass.initialize(e,t,n),this.maskPass.initialize(e,t,n),this.outlinePass.initialize(e,t,n))}},OutlineMaterial:jE,OverrideMaterialManager:ox,Pass:ex,PixelationEffect:class extends dx{constructor(e=30){super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new gy(!1)],["d",new gy(new Ll)]])}),this.resolution=new Ll,this.granularity=e}getGranularity(){return this.granularity}setGranularity(e){(e=Math.floor(e))%2>0&&(e+=1);const t=this.uniforms;t.get("active").value=e>0,t.get("d").value.set(e,e).divide(this.resolution),this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.setGranularity(this.granularity)}},PredicationMode:{DISABLED:0,DEPTH:1,CUSTOM:2},RawImageData:Lx,RealisticBokehEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,focus:t=1,focalLength:n=24,fStop:i=.9,luminanceThreshold:r=.5,luminanceGain:a=2,bias:o=.5,fringe:s=.7,maxBlur:c=1,rings:l=3,samples:u=2,showFocus:h=!1,manualDoF:d=!1,pentagon:f=!1}={}){super("RealisticBokehEffect","uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\n#ifdef MANUAL_DOF\nuniform vec4 dof;\n#endif\n#ifdef PENTAGON\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\n#endif\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\n#ifdef PENTAGON\nfloat p=pentagon(wh);\n#else\nfloat p=1.0;\n#endif\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\n#ifdef MANUAL_DOF\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)? farDoF : nearDoF;\n#else\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\n#endif\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\n#ifdef SHOW_FOCUS\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,attributes:fx.CONVOLUTION|fx.DEPTH,uniforms:new Map([["focus",new gy(t)],["focalLength",new gy(n)],["fStop",new gy(i)],["luminanceThreshold",new gy(r)],["luminanceGain",new gy(a)],["bias",new gy(o)],["fringe",new gy(s)],["maxBlur",new gy(c)],["dof",new gy(null)]])}),this.rings=l,this.samples=u,this.showFocus=h,this.manualDoF=d,this.pentagon=f}get rings(){return Number.parseInt(this.defines.get("RINGS_INT"))}set rings(e){const t=Math.floor(e);this.defines.set("RINGS_INT",t.toFixed(0)),this.defines.set("RINGS_FLOAT",t.toFixed(1)),this.setChanged()}get samples(){return Number.parseInt(this.defines.get("SAMPLES_INT"))}set samples(e){const t=Math.floor(e);this.defines.set("SAMPLES_INT",t.toFixed(0)),this.defines.set("SAMPLES_FLOAT",t.toFixed(1)),this.setChanged()}get showFocus(){return this.defines.has("SHOW_FOCUS")}set showFocus(e){this.showFocus!==e&&(e?this.defines.set("SHOW_FOCUS","1"):this.defines.delete("SHOW_FOCUS"),this.setChanged())}get manualDoF(){return this.defines.has("MANUAL_DOF")}set manualDoF(e){this.manualDoF!==e&&(e?(this.defines.set("MANUAL_DOF","1"),this.uniforms.get("dof").value=new Gl(.2,1,.2,2)):(this.defines.delete("MANUAL_DOF"),this.uniforms.get("dof").value=null),this.setChanged())}get pentagon(){return this.defines.has("PENTAGON")}set pentagon(e){this.pentagon!==e&&(e?this.defines.set("PENTAGON","1"):this.defines.delete("PENTAGON"),this.setChanged())}},RenderPass:sx,Resizable:class{setSize(e,t){}},Resizer:KE,SMAAAreaImageData:class{static generate(){const e=5*Hx.length*Ux,t=new Uint8ClampedArray(160*e*4),n=new Lx(160,e,t),i=Math.pow(15,2)+1,r=[],a=[],o=new Rx;let s,c;for(s=0;s<16;++s)r.push(new Lx(i,i,new Uint8ClampedArray(i*i*2),2)),a.push(new Lx(20,20,new Uint8ClampedArray(800),2));for(s=0,c=Hx.length;s<c;++s)Zx(r,Hx[s],!0),o.set(0,80*s),$x(o,r,kx,Ux,!0,n);for(s=0,c=Qx.length;s<c;++s)Zx(a,Qx[s],!1),o.set(80,80*s),$x(o,a,zx,20,!1,n);return n}},SMAAEffect:class extends dx{constructor(e,t,n=Ix.HIGH,i=GE.COLOR){super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:lx.NORMAL,attributes:fx.CONVOLUTION|fx.DEPTH,uniforms:new Map([["weightMap",new gy(null)]])}),this.renderTargetEdges=new Hl(1,1,{minFilter:Nc,stencilBuffer:!1,depthBuffer:!1,format:jc}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.renderTargetWeights.texture.format=Jc,this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new rx(!0,!1,!1),this.clearPass.overrideClearColor=new uh(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new yx(new UE(new Ll,i)),this.weightsPass=new yx(new YE);const r=new Ul(e);r.name="SMAA.Search",r.magFilter=Rc,r.minFilter=Rc,r.format=Jc,r.generateMipmaps=!1,r.needsUpdate=!0,r.flipY=!0;const a=new Ul(t);a.name="SMAA.Area",a.minFilter=Nc,a.format=Jc,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1;const o=this.weightsPass.getFullscreenMaterial();o.uniforms.searchTexture.value=r,o.uniforms.areaTexture.value=a,this.applyPreset(n)}get edgeDetectionMaterial(){return this.edgeDetectionPass.getFullscreenMaterial()}get colorEdgesMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.getFullscreenMaterial()}setEdgeDetectionThreshold(e){this.edgeDetectionPass.getFullscreenMaterial().setEdgeDetectionThreshold(e)}setOrthogonalSearchSteps(e){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(e)}applyPreset(e){const t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case Ix.LOW:t.setEdgeDetectionThreshold(.15),n.setOrthogonalSearchSteps(4),n.diagonalDetection=!1,n.cornerRounding=!1;break;case Ix.MEDIUM:t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(8),n.diagonalDetection=!1,n.cornerRounding=!1;break;case Ix.HIGH:t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(16),n.setDiagonalSearchSteps(8),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0;break;case Ix.ULTRA:t.setEdgeDetectionThreshold(.05),n.setOrthogonalSearchSteps(32),n.setDiagonalSearchSteps(16),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0}}setDepthTexture(e,t=0){const n=this.edgeDetectionMaterial;n.uniforms.depthBuffer.value=e,n.depthPacking=t}update(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){const n=this.edgeDetectionPass.getFullscreenMaterial(),i=this.weightsPass.getFullscreenMaterial();this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),i.uniforms.resolution.value.set(e,t),i.uniforms.texelSize.value.set(1/e,1/t),n.uniforms.texelSize.value.copy(i.uniforms.texelSize.value)}dispose(){const e=this.weightsPass.getFullscreenMaterial().uniforms;e.searchTexture.value.dispose(),e.areaTexture.value.dispose(),super.dispose()}static get searchImageDataURL(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"}static get areaImageDataURL(){return"data:image/png;base64,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"}},SMAAImageLoader:class extends Tg{constructor(e){super(e),this.disableCache=!1}load(e=(()=>{}),t=(()=>{})){4===arguments.length?(e=arguments[1],t=arguments[3]):3!==arguments.length&&"function"==typeof arguments[0]||(e=arguments[1],t=()=>{});const n=this.manager,i=new Sg;return n.itemStart("smaa-search"),n.itemStart("smaa-area"),i.itemStart("smaa-search"),i.itemStart("smaa-area"),new Promise((r,a)=>{const o=this.disableCache||void 0===window.localStorage?[null,null]:[localStorage.getItem("smaa-search"),localStorage.getItem("smaa-area")];(null!==o[0]&&null!==o[1]?Promise.resolve(o):function(e=!1){const t=URL.createObjectURL(new Blob(['!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}var n=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(this,t),this.width=a,this.height=n,this.data=s}return a(t,[{key:"toCanvas",value:function(){return"undefined"==typeof document?null:(e=this.width,t=this.height,a=this.data,n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),s=n.getContext("2d"),(r=s.createImageData(e,t)).data.set(a),n.width=e,n.height=t,s.putImageData(r,0,0),n);var e,t,a,n,s,r}}],[{key:"from",value:function(e){return new t(e.width,e.height,e.data)}}]),t}(),s=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e(this,t),this.x=a,this.y=n}return a(t,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"equals",value:function(e){return this===e||this.x===e.x&&this.y===e.y}}]),t}(),r=function t(){e(this,t),this.min=new s,this.max=new s},i=new r,y=new r,c=16,u=30,h=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),o=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],w=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],x=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function f(e,t,a){return e+(t-e)*a}function l(e,t){var a,n=t.min,s=t.max,r=.5*Math.sqrt(2*n.x),i=.5*Math.sqrt(2*n.y),y=.5*Math.sqrt(2*s.x),c=.5*Math.sqrt(2*s.y),u=(a=e/32,Math.min(Math.max(a,0),1));return n.set(f(r,n.x,u),f(i,n.y,u)),s.set(f(y,s.x,u),f(c,s.y,u)),t}function b(e,t,a,n){var s,r,i,y,c=t.x-e.x,u=t.y-e.y,h=a,o=a+1,w=e.y+u*(h-e.x)/c,x=e.y+u*(o-e.x)/c;return h>=e.x&&h<t.x||o>e.x&&o<=t.x?Math.sign(w)===Math.sign(x)||Math.abs(w)<1e-4||Math.abs(x)<1e-4?(s=(w+x)/2)<0?n.set(Math.abs(s),0):n.set(0,Math.abs(s)):(r=(y=-e.y*c/u+e.x)>e.x?w*(y-Math.trunc(y))/2:0,i=y<t.x?x*(1-(y-Math.trunc(y)))/2:0,(s=Math.abs(r)>Math.abs(i)?r:-i)<0?n.set(Math.abs(r),Math.abs(i)):n.set(Math.abs(i),Math.abs(r))):n.set(0,0),n}function A(e,t,a,n,s){var r=i.min,c=i.max,u=y.min,h=y.max,o=y,w=.5+n,x=.5+n-1,f=t+a+1;switch(e){case 0:s.set(0,0);break;case 1:t<=a?b(r.set(0,x),c.set(f/2,0),t,s):s.set(0,0);break;case 2:t>=a?b(r.set(f/2,0),c.set(f,x),t,s):s.set(0,0);break;case 3:b(r.set(0,x),c.set(f/2,0),t,u),b(r.set(f/2,0),c.set(f,x),t,h),l(f,o),s.set(u.x+h.x,u.y+h.y);break;case 4:t<=a?b(r.set(0,w),c.set(f/2,0),t,s):s.set(0,0);break;case 5:s.set(0,0);break;case 6:Math.abs(n)>0?(b(r.set(0,w),c.set(f,x),t,u),b(r.set(0,w),c.set(f/2,0),t,h),b(r.set(f/2,0),c.set(f,x),t,s),h.set(h.x+s.x,h.y+s.y),s.set((u.x+h.x)/2,(u.y+h.y)/2)):b(r.set(0,w),c.set(f,x),t,s);break;case 7:b(r.set(0,w),c.set(f,x),t,s);break;case 8:t>=a?b(r.set(f/2,0),c.set(f,w),t,s):s.set(0,0);break;case 9:Math.abs(n)>0?(b(r.set(0,x),c.set(f,w),t,u),b(r.set(0,x),c.set(f/2,0),t,h),b(r.set(f/2,0),c.set(f,w),t,s),h.set(h.x+s.x,h.y+s.y),s.set((u.x+h.x)/2,(u.y+h.y)/2)):b(r.set(0,x),c.set(f,w),t,s);break;case 10:s.set(0,0);break;case 11:b(r.set(0,x),c.set(f,w),t,s);break;case 12:b(r.set(0,w),c.set(f/2,0),t,u),b(r.set(f/2,0),c.set(f,w),t,h),l(f,o),s.set(u.x+h.x,u.y+h.y);break;case 13:b(r.set(0,x),c.set(f,w),t,s);break;case 14:b(r.set(0,w),c.set(f,x),t,s);break;case 15:s.set(0,0)}return s}function v(e,t,a,n){var s=e.equals(t);if(!s){var r=(e.x+t.x)/2,i=(e.y+t.y)/2;s=(t.y-e.y)*(a-r)+(e.x-t.x)*(n-i)>0}return s}function k(e,t,a,n){var s,r,i;for(s=0,i=0;i<u;++i)for(r=0;r<u;++r)v(e,t,a+r/29,n+i/29)&&++s;return s/900}function U(e,t,a,n,s,r){var i=x[e],y=i[0],c=i[1];return y>0&&(t.x+=s[0],t.y+=s[1]),c>0&&(a.x+=s[0],a.y+=s[1]),r.set(1-k(t,a,1+n,0+n),k(t,a,1+n,1+n))}function d(e,t,a,n,s){var r=i.min,c=i.max,u=y.min,h=y.max,o=t+a+1;switch(e){case 0:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 1:U(e,r.set(1,0),c.set(0+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 2:U(e,r.set(0,0),c.set(1+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 3:U(e,r.set(1,0),c.set(1+o,0+o),t,n,s);break;case 4:U(e,r.set(1,1),c.set(0+o,0+o),t,n,u),U(e,r.set(1,1),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 5:U(e,r.set(1,1),c.set(0+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 6:U(e,r.set(1,1),c.set(1+o,0+o),t,n,s);break;case 7:U(e,r.set(1,1),c.set(1+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 8:U(e,r.set(0,0),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,1+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 9:U(e,r.set(1,0),c.set(1+o,1+o),t,n,s);break;case 10:U(e,r.set(0,0),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 11:U(e,r.set(1,0),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 12:U(e,r.set(1,1),c.set(1+o,1+o),t,n,s);break;case 13:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,1+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 14:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,1),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 15:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2)}return s}function g(e,t,a){var n,r,i,y,c,u,h,o,w=new s;for(n=0,r=e.length;n<r;++n)for(h=(u=e[n]).data,o=u.width,y=0;y<o;++y)for(i=0;i<o;++i)a?A(n,i,y,t,w):d(n,i,y,t,w),h[c=2*(y*o+i)]=255*w.x,h[c+1]=255*w.y}function m(e,t,a,n,r,i){var y,c,u,h,o,w,x,f,l,b,A=new s,v=i.data,k=i.width;for(y=0,c=t.length;y<c;++y)for(x=a[y],l=(f=t[y]).data,b=f.width,h=0;h<n;++h)for(u=0;u<n;++u)A.set(x[0]*n+e.x+u,x[1]*n+e.y+h),w=r?2*(h*h*b+u*u):2*(h*b+u),v[o=4*(A.y*k+A.x)]=l[w],v[o+1]=l[w+1],v[o+2]=0,v[o+3]=255}var M=function(){function t(){e(this,t)}return a(t,null,[{key:"generate",value:function(){var e,t,a=5*h.length*c,r=new Uint8ClampedArray(160*a*4),i=new n(160,a,r),y=Math.pow(15,2)+1,u=[],f=[],l=new s;for(e=0;e<16;++e)u.push(new n(y,y,new Uint8ClampedArray(y*y*2),2)),f.push(new n(20,20,new Uint8ClampedArray(800),2));for(e=0,t=h.length;e<t;++e)g(u,h[e],!0),l.set(0,80*e),m(l,u,w,c,!0,i);for(e=0,t=o.length;e<t;++e)g(f,o[e],!1),l.set(80,80*e),m(l,f,x,20,!1,i);return i}}]),t}(),p=new Map([[q([0,0,0,0]),[0,0,0,0]],[q([0,0,0,1]),[0,0,0,1]],[q([0,0,1,0]),[0,0,1,0]],[q([0,0,1,1]),[0,0,1,1]],[q([0,1,0,0]),[0,1,0,0]],[q([0,1,0,1]),[0,1,0,1]],[q([0,1,1,0]),[0,1,1,0]],[q([0,1,1,1]),[0,1,1,1]],[q([1,0,0,0]),[1,0,0,0]],[q([1,0,0,1]),[1,0,0,1]],[q([1,0,1,0]),[1,0,1,0]],[q([1,0,1,1]),[1,0,1,1]],[q([1,1,0,0]),[1,1,0,0]],[q([1,1,0,1]),[1,1,0,1]],[q([1,1,1,0]),[1,1,1,0]],[q([1,1,1,1]),[1,1,1,1]]]);function C(e,t,a){return e+(t-e)*a}function q(e){var t=C(e[0],e[1],.75),a=C(e[2],e[3],.75);return C(t,a,.875)}function F(e,t){var a=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(a+=1),1===a&&1===t[2]&&1!==e[0]&&1!==e[2]&&(a+=1),a}var D=function(){function t(){e(this,t)}return a(t,null,[{key:"generate",value:function(){var e,t,a,s,r,i,y,c,u,h,o=new Uint8ClampedArray(2178),w=new Uint8ClampedArray(4096);for(t=0;t<33;++t)for(e=0;e<66;++e)a=.03125*e,s=.03125*t,p.has(a)&&p.has(s)&&(i=p.get(a),y=p.get(s),o[r=66*t+e]=127*(c=i,h=void 0,h=0,1===(u=y)[3]&&(h+=1),1===h&&1===u[2]&&1!==c[1]&&1!==c[3]&&(h+=1),h),o[r+33]=127*F(i,y));for(r=0,t=17;t<33;++t)for(e=0;e<64;++e,r+=4)w[r]=o[66*t+e],w[r+3]=255;return new n(64,16,w)}}]),t}();self.addEventListener("message",(function(e){var t=M.generate(),a=D.generate();postMessage({areaImageData:t,searchImageData:a},[t.data.buffer,a.data.buffer]),close()}))}();\n'],{type:"text/javascript"})),n=new Worker(t);return new Promise((i,r)=>{n.addEventListener("error",e=>r(e.error)),n.addEventListener("message",n=>{const r=Lx.from(n.data.searchImageData),a=Lx.from(n.data.areaImageData),o=[r.toCanvas().toDataURL(),a.toCanvas().toDataURL()];e||void 0===window.localStorage||(localStorage.setItem("smaa-search",o[0]),localStorage.setItem("smaa-area",o[1])),URL.revokeObjectURL(t),i(o)}),n.postMessage(null)})}(this.disableCache)).then(t=>{const a=[new Image,new Image];i.onLoad=()=>{e(a),r(a)},a[0].addEventListener("load",()=>{n.itemEnd("smaa-search"),i.itemEnd("smaa-search")}),a[1].addEventListener("load",()=>{n.itemEnd("smaa-area"),i.itemEnd("smaa-area")}),a[0].src=t[0],a[1].src=t[1]}).catch(e=>{n.itemError("smaa-search"),n.itemError("smaa-area"),t(e),a(e)})})}},SMAAPreset:Ix,SMAASearchImageData:class{static generate(){const e=new Uint8ClampedArray(2178),t=new Uint8ClampedArray(4096);let n,i,r,a,o,s,c;for(i=0;i<33;++i)for(n=0;n<66;++n)r=.03125*n,a=.03125*i,eb.has(r)&&eb.has(a)&&(s=eb.get(r),c=eb.get(a),o=66*i+n,e[o]=127*ib(s,c),e[o+33]=127*rb(s,c));for(o=0,i=17;i<33;++i)for(n=0;n<64;++n,o+=4)t[o]=e[66*i+n],t[o+3]=255;return new Lx(64,16,t)}},SMAAWeightsMaterial:YE,SSAOEffect:class extends dx{constructor(e,t,{blendFunction:n=lx.MULTIPLY,distanceScaling:i=!0,depthAwareUpsampling:r=!0,normalDepthBuffer:a=null,samples:o=9,rings:s=7,distanceThreshold:c=.97,distanceFalloff:l=.03,rangeThreshold:u=5e-4,rangeFalloff:h=.001,minRadiusScale:d=.33,luminanceInfluence:f=.7,radius:p=.1825,intensity:m=1,bias:A=.025,fade:g=.01,color:v=null,resolutionScale:y=1,width:E=KE.AUTO_SIZE,height:x=KE.AUTO_SIZE}={}){super("SSAOEffect","uniform sampler2D aoBuffer;uniform float luminanceInfluence;\n#ifdef DEPTH_AWARE_UPSAMPLING\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\n#endif\n#ifdef COLORIZE\nuniform vec3 color;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;\n#if defined(DEPTH_AWARE_UPSAMPLING) && __VERSION__ == 300\nvec4 normalDepth[4]=vec4[](textureOffset(normalDepthBuffer,uv,ivec2(0,0)),textureOffset(normalDepthBuffer,uv,ivec2(0,1)),textureOffset(normalDepthBuffer,uv,ivec2(1,0)),textureOffset(normalDepthBuffer,uv,ivec2(1,1)));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4]=ivec2[](ivec2(0,0),ivec2(0,1),ivec2(1,0),ivec2(1,1));ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);\n#else\nfloat ao=aoLinear;\n#endif\nfloat l=linearToRelativeLuminance(inputColor.rgb);ao=mix(ao,1.0,l*luminanceInfluence);\n#ifdef COLORIZE\noutputColor=vec4(1.0-(1.0-ao)*(1.0-color),inputColor.a);\n#else\noutputColor=vec4(vec3(ao),inputColor.a);\n#endif\n}",{blendFunction:n,attributes:fx.DEPTH,uniforms:new Map([["aoBuffer",new gy(null)],["normalDepthBuffer",new gy(null)],["luminanceInfluence",new gy(f)],["color",new gy(null)],["scale",new gy(0)]])}),this.renderTargetAO=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!1,format:jc}),this.renderTargetAO.texture.name="AO.Target",this.renderTargetAO.texture.generateMipmaps=!1,this.uniforms.get("aoBuffer").value=this.renderTargetAO.texture,this.resolution=new KE(this,E,x,y),this.r=1,this.camera=e,this.ssaoPass=new yx((()=>{const n=new bx(64,64);n.wrapS=n.wrapT=Ic;const i=new XE(e);return i.uniforms.noiseTexture.value=n,i.uniforms.intensity.value=m,i.uniforms.minRadiusScale.value=d,i.uniforms.fade.value=g,i.uniforms.bias.value=A,null!==a?(i.uniforms.normalDepthBuffer.value=a,i.defines.NORMAL_DEPTH="1",r&&(this.depthAwareUpsampling=r,this.uniforms.get("normalDepthBuffer").value=a,this.defines.set("THRESHOLD","0.997"))):i.uniforms.normalBuffer.value=t,i})()),this.distanceScaling=i,this.samples=o,this.rings=s,this.color=v,this.radius=p>1?p/100:p,this.setDistanceCutoff(c,l),this.setProximityCutoff(u,h)}get ssaoMaterial(){return this.ssaoPass.getFullscreenMaterial()}get samples(){return Number(this.ssaoMaterial.defines.SAMPLES_INT)}set samples(e){const t=this.ssaoMaterial;t.defines.SAMPLES_INT=e.toFixed(0),t.defines.SAMPLES_FLOAT=e.toFixed(1),t.needsUpdate=!0}get rings(){return Number(this.ssaoMaterial.defines.SPIRAL_TURNS)}set rings(e){const t=this.ssaoMaterial;t.defines.SPIRAL_TURNS=e.toFixed(1),t.needsUpdate=!0}get radius(){return this.r}set radius(e){this.r=Math.min(Math.max(e,1e-6),1);const t=this.r*this.resolution.height,n=this.ssaoMaterial;n.defines.RADIUS=t.toFixed(11),n.defines.RADIUS_SQ=(t*t).toFixed(11),n.needsUpdate=!0}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(e){this.depthAwareUpsampling!==e&&(e?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}get distanceScaling(){return void 0!==this.ssaoMaterial.defines.DISTANCE_SCALING}set distanceScaling(e){if(this.distanceScaling!==e){const t=this.ssaoMaterial;e?t.defines.DISTANCE_SCALING="1":delete t.defines.DISTANCE_SCALING,t.needsUpdate=!0}}get color(){return this.uniforms.get("color").value}set color(e){const t=this.uniforms,n=this.defines;null!==e?n.has("COLORIZE")?t.get("color").value.set(e):(n.set("COLORIZE","1"),t.get("color").value=new uh(e),this.setChanged()):n.has("COLORIZE")&&(n.delete("COLORIZE"),t.get("color").value=null,this.setChanged())}setDistanceCutoff(e,t){this.ssaoMaterial.uniforms.distanceCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}setProximityCutoff(e,t){this.ssaoMaterial.uniforms.proximityCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}setDepthTexture(e,t=0){const n=this.ssaoMaterial;void 0===n.defines.NORMAL_DEPTH&&(n.uniforms.normalDepthBuffer.value=e,n.depthPacking=t)}update(e,t,n){this.ssaoPass.render(e,null,this.renderTargetAO)}setSize(e,t){const n=this.resolution;n.base.set(e,t);const i=n.width,r=n.height;this.renderTargetAO.setSize(i,r),this.ssaoMaterial.setTexelSize(1/i,1/r);const a=this.camera,o=this.ssaoMaterial.uniforms;o.noiseScale.value.set(i,r).divideScalar(64),o.inverseProjectionMatrix.value.getInverse(a.projectionMatrix),o.projectionMatrix.value.copy(a.projectionMatrix),this.radius=this.r}},SSAOMaterial:XE,SavePass:vx,ScanlineEffect:class extends dx{constructor({blendFunction:e=lx.OVERLAY,density:t=1.25}={}){super("ScanlineEffect","uniform float count;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 sl=vec2(sin(uv.y*count),cos(uv.y*count));vec3 scanlines=vec3(sl.x,sl.y,sl.x);outputColor=vec4(scanlines,inputColor.a);}",{blendFunction:e,uniforms:new Map([["count",new gy(0)]])}),this.resolution=new Ll,this.density=t}getDensity(){return this.density}setDensity(e){this.density=e,this.setSize(this.resolution.x,this.resolution.y)}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("count").value=Math.round(t*this.density)}},Section:QE,Selection:Ex,SelectiveBloomEffect:class extends xx{constructor(e,t,n){super(n),this.scene=e,this.camera=t,this.clearPass=new rx(!0,!0,!1),this.clearPass.overrideClearColor=new uh(0),this.renderPass=new sx(e,t),this.renderPass.clear=!1,this.blackoutPass=new sx(e,t,new ph({color:0})),this.blackoutPass.clear=!1,this.backgroundPass=(()=>{const n=new _p,i=new sx(n,t);return n.background=e.background,i.clear=!1,i})(),this.renderTargetSelection=new Hl(1,1,{minFilter:Nc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!0}),this.renderTargetSelection.texture.name="Bloom.Selection",this.renderTargetSelection.texture.generateMipmaps=!1,this.selection=new Ex,this.inverted=!1}get ignoreBackground(){return!this.backgroundPass.enabled}set ignoreBackground(e){this.backgroundPass.enabled=!e}update(e,t,n){const i=this.scene,r=this.camera,a=this.selection,o=this.renderTargetSelection,s=i.background,c=r.layers.mask;this.clearPass.render(e,o),this.ignoreBackground||this.backgroundPass.render(e,o),i.background=null,this.inverted?(r.layers.set(a.layer),this.blackoutPass.render(e,o),r.layers.mask=c,a.setVisible(!1),this.renderPass.render(e,o),a.setVisible(!0)):(a.setVisible(!1),this.blackoutPass.render(e,o),a.setVisible(!0),r.layers.set(a.layer),this.renderPass.render(e,o),r.layers.mask=c),i.background=s,super.update(e,o,n)}setSize(e,t){super.setSize(e,t),this.backgroundPass.setSize(e,t),this.blackoutPass.setSize(e,t),this.renderPass.setSize(e,t),this.renderTargetSelection.setSize(this.resolution.width,this.resolution.height)}initialize(e,t,n){super.initialize(e,t,n),this.backgroundPass.initialize(e,t,n),this.blackoutPass.initialize(e,t,n),this.renderPass.initialize(e,t,n),t||n!==Hc||(this.renderTargetSelection.texture.format=jc),void 0!==n&&(this.renderTargetSelection.texture.type=n)}},SepiaEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,intensity:t=1}={}){super("SepiaEffect","uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0-0.607*intensity,0.769*intensity,0.189*intensity)),dot(inputColor.rgb,vec3(0.349*intensity,1.0-0.314*intensity,0.168*intensity)),dot(inputColor.rgb,vec3(0.272*intensity,0.534*intensity,1.0-0.869*intensity)));outputColor=vec4(color,inputColor.a);}",{blendFunction:e,uniforms:new Map([["intensity",new gy(t)]])})}},ShaderPass:yx,ShockWaveEffect:class extends dx{constructor(e,t=new zl,{speed:n=2,maxRadius:i=1,waveSize:r=.2,amplitude:a=.05}={}){super("ShockWaveEffect","uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",{vertexShader:"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",uniforms:new Map([["active",new gy(!1)],["center",new gy(new Ll(.5,.5))],["cameraDistance",new gy(1)],["size",new gy(1)],["radius",new gy(-r)],["maxRadius",new gy(i)],["waveSize",new gy(r)],["amplitude",new gy(a)]])}),this.camera=e,this.epicenter=t,this.screenPosition=this.uniforms.get("center").value,this.speed=n,this.time=0,this.active=!1}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(e,t,n){const i=this.epicenter,r=this.camera,a=this.uniforms,o=a.get("active");if(this.active){const e=a.get("waveSize").value;r.getWorldDirection(_x),Tx.copy(r.position).sub(i),o.value=_x.angleTo(Tx)>Sx,o.value&&(a.get("cameraDistance").value=r.position.distanceTo(i),_x.copy(i).project(r),this.screenPosition.set(.5*(_x.x+1),.5*(_x.y+1))),this.time+=n*this.speed;const t=this.time-e;a.get("radius").value=t,t>=2*(a.get("maxRadius").value+e)&&(this.active=!1,o.value=!1)}}},TextureEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,texture:t=null,aspectCorrection:n=!1}={}){super("TextureEffect","uniform sampler2D texture;\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\nvarying vec2 vUv2;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\nvec4 texel=texelToLinear(texture2D(texture,vUv2));\n#else\nvec4 texel=texelToLinear(texture2D(texture,uv));\n#endif\noutputColor=TEXEL;}",{blendFunction:e,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["texture",new gy(null)],["scale",new gy(1)],["uvTransform",new gy(null)]])}),this.texture=t,this.aspectCorrection=n}get texture(){return this.uniforms.get("texture").value}set texture(e){const t=this.texture;if(t!==e){const n=null!==t?t.encoding:null;this.uniforms.get("texture").value=e,null!==e&&(e.encoding===vl?this.defines.set("texelToLinear(texel)","sRGBToLinear(texel)"):e.encoding===gl?this.defines.set("texelToLinear(texel)","texel"):console.log("Unsupported encoding: "+e.encoding),n!==e.encoding&&this.setChanged())}}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(e){this.aspectCorrection!==e&&(e?(this.uvTransform&&(this.uvTransform=!1),this.defines.set("ASPECT_CORRECTION","1"),this.setVertexShader(Fx)):(this.defines.delete("ASPECT_CORRECTION"),this.setVertexShader(null)),this.setChanged())}get uvTransform(){return this.defines.has("UV_TRANSFORM")}set uvTransform(e){this.uvTransform!==e&&(e?(this.aspectCorrection&&(this.aspectCorrection=!1),this.defines.set("UV_TRANSFORM","1"),this.uniforms.get("uvTransform").value=new Rl,this.setVertexShader(Fx)):(this.defines.delete("UV_TRANSFORM"),this.uniforms.get("uvTransform").value=null,this.setVertexShader(null)),this.setChanged())}setTextureSwizzleRGBA(e,t=e,n=e,i=e){const r="rgba";let a="";e===CE.RED&&t===CE.GREEN&&n===CE.BLUE&&i===CE.ALPHA||(a=[".",r[e],r[t],r[n],r[i]].join("")),this.defines.set("TEXEL","texel"+a),this.setChanged()}update(e,t,n){const i=this.uniforms.get("texture").value;this.uvTransform&&i.matrixAutoUpdate&&(i.updateMatrix(),this.uniforms.get("uvTransform").value.copy(i.matrix))}},ToneMappingEffect:class extends dx{constructor({blendFunction:e=lx.NORMAL,adaptive:t=!0,resolution:n=256,middleGrey:i=.6,maxLuminance:r=16,averageLuminance:a=1,adaptationRate:o=2}={}){super("ToneMappingEffect","uniform sampler2D luminanceMap;uniform float middleGrey;uniform float maxLuminance;uniform float averageLuminance;vec3 toneMap(vec3 c){\n#ifdef ADAPTED_LUMINANCE\nfloat lumAvg=texture2D(luminanceMap,vec2(0.5)).r;\n#else\nfloat lumAvg=averageLuminance;\n#endif\nfloat lumPixel=linearToRelativeLuminance(c);float lumScaled=(lumPixel*middleGrey)/lumAvg;float lumCompressed=(lumScaled*(1.0+(lumScaled/(maxLuminance*maxLuminance))))/(1.0+lumScaled);return lumCompressed*c;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(toneMap(inputColor.rgb),inputColor.a);}",{blendFunction:e,uniforms:new Map([["luminanceMap",new gy(null)],["middleGrey",new gy(i)],["maxLuminance",new gy(r)],["averageLuminance",new gy(a)]])}),this.renderTargetLuminance=new Hl(1,1,{minFilter:Gc,magFilter:Nc,stencilBuffer:!1,depthBuffer:!1,format:jc}),this.renderTargetLuminance.texture.name="ToneMapping.Luminance",this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetAdapted=this.renderTargetLuminance.clone(),this.renderTargetAdapted.texture.name="ToneMapping.AdaptedLuminance",this.renderTargetAdapted.texture.generateMipmaps=!1,this.renderTargetAdapted.texture.minFilter=Nc,this.renderTargetPrevious=this.renderTargetAdapted.clone(),this.renderTargetPrevious.texture.name="ToneMapping.PreviousLuminance",this.savePass=new vx(this.renderTargetPrevious,!1),this.luminancePass=new yx(new zE);this.luminancePass.getFullscreenMaterial().useThreshold=!1,this.adaptiveLuminancePass=new yx(new ME);const s=this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;s.previousLuminanceBuffer.value=this.renderTargetPrevious.texture,s.currentLuminanceBuffer.value=this.renderTargetLuminance.texture,this.adaptationRate=o,this.resolution=n,this.adaptive=t}get resolution(){return this.renderTargetLuminance.width}set resolution(e){const t=Math.max(0,Math.ceil(Math.log2(e))),n=Math.pow(2,t);this.renderTargetLuminance.setSize(n,n),this.renderTargetPrevious.setSize(n,n),this.renderTargetAdapted.setSize(n,n);const i=this.adaptiveLuminancePass.getFullscreenMaterial();i.defines.MIP_LEVEL_1X1=t.toFixed(1),i.needsUpdate=!0}get adaptive(){return this.defines.has("ADAPTED_LUMINANCE")}set adaptive(e){this.adaptive!==e&&(e?(this.defines.set("ADAPTED_LUMINANCE","1"),this.uniforms.get("luminanceMap").value=this.renderTargetAdapted.texture):(this.defines.delete("ADAPTED_LUMINANCE"),this.uniforms.get("luminanceMap").value=null),this.setChanged())}get adaptationRate(){return this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value}set adaptationRate(e){this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value=e}get distinction(){return console.warn(this.name,"The distinction field has been removed."),1}set distinction(e){console.warn(this.name,"The distinction field has been removed.")}update(e,t,n){if(this.adaptive){this.luminancePass.render(e,t,this.renderTargetLuminance);this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.deltaTime.value=n,this.adaptiveLuminancePass.render(e,null,this.renderTargetAdapted),this.savePass.render(e,this.renderTargetAdapted)}}setSize(e,t){this.savePass.setSize(e,t)}initialize(e,t,n){const i=new rx(!0,!1,!1);i.overrideClearColor=new uh(8388607),i.render(e,this.renderTargetPrevious),i.dispose()}},VignetteEffect:class extends dx{constructor(e={}){const t=Object.assign({blendFunction:lx.NORMAL,eskil:!1,offset:.5,darkness:.5},e);super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#ifdef ESKIL\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#else\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:t.blendFunction,uniforms:new Map([["offset",new gy(t.offset)],["darkness",new gy(t.darkness)]])}),this.eskil=t.eskil}get eskil(){return this.defines.has("ESKIL")}set eskil(e){this.eskil!==e&&(e?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL"),this.setChanged())}},WebGLExtension:{DERIVATIVES:"derivatives",FRAG_DEPTH:"fragDepth",DRAW_BUFFERS:"drawBuffers",SHADER_TEXTURE_LOD:"shaderTextureLOD"}}),ob=bc(BE),sb=bc(ab),cb=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e,t){!function(e,t,n){var i=new t.Scene;const r=new n.RenderPass(i);r.renderToScreen=!0;var a={canvas:void 0,scroll:void 0},o={canvas:void 0,scroll:void 0};let s=a,c=o;function l(){Object.keys(s).forEach(e=>{const t=s[e];t&&t!==window&&(c[e]=t.getBoundingClientRect())})}let u=new t.PerspectiveCamera(40,1,15317.1-15317,1e4);u.position.set(0,0,0);let h=u;function d(e){switch(h=e,h.aspect=c.canvas.width/c.canvas.height,h.type){case"OrthographicCamera":h.frustumX=Math.abs(2*h.left),h.frustumY=Math.abs(2*h.top)}h.updateProjectionMatrix(),r.camera=h}function f(e,t){let n=t.filter(t=>t.name===e)[0];if(void 0!==n)return n;console.error(" "+e+"   ",t)}function p(){h.left=h.frustumX/-2*h.aspect/2,h.right=h.frustumX/2*h.aspect/2,h.top=h.frustumY/2,h.bottom=h.frustumY/-2}const m=new t.AudioListener;function A(){m.context.suspend()}function g(){m.context.resume()}h.add(m);var v={audios:[],keyframes:[]},y={version:"2.0.0",editorVariableName:"__KRONO_EDITOR_INSTANCE__",enabled:!0,editor:!1,debug:!1,debugFlightSpeed:10};y.keyframes=[v],y.chunks=[],y.audios=[],y.cameraName=null,y.cameraAnimationName=null,y.mainScenePath=null,y.envMapPath=null,y.basisPath=null,y.dracoPath=null,y.browserAntialias=!1,y.msaaAntialias=!1,y.msaaSamples=2,y.smaaAntialias=!1,y.alpha=!1,y._basisPath=null,y._dracoPath=null,y._debugFlightSpeed=10;var E={area:void 0,search:void 0},x={mainScene:void 0,chunks:{},audios:{}};x.smaa=E;const b=y,B=x;var C,w,M=[],D=[],S="ResizeObserver loop completed with undelivered notifications.";(w=C||(C={})).BORDER_BOX="border-box",w.CONTENT_BOX="content-box",w.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var _,T,I,F={attributes:!0,characterData:!0,childList:!0,subtree:!0},L=function(){function e(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var e=this,t={};return t.x=e.x,t.y=e.y,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.width=e.width,t.height=e.height,t},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),R=function(e){return e instanceof SVGElement&&"getBBox"in e},P=function(e){if(R(e)){var t=e.getBBox(),n=t.width,i=t.height;return!n&&!i}var r=e,a=r.offsetWidth,o=r.offsetHeight;return!(a||o||e.getClientRects().length)},O=function(e){var t,n,i=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(i&&e instanceof i.Element)},N="undefined"!=typeof window?window:{},U=new WeakMap,G=/auto|scroll/,H=/^tb|vertical/,Q=/msie|trident/i.test(N.navigator&&N.navigator.userAgent),k=function(e){return parseFloat(e||"0")},z=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?t:e)||0,blockSize:(n?e:t)||0})},V=Object.freeze({devicePixelContentBoxSize:z(),borderBoxSize:z(),contentBoxSize:z(),contentRect:new L(0,0,0,0)}),W=function(e,t){if(void 0===t&&(t=!1),U.has(e)&&!t)return U.get(e);if(P(e))return U.set(e,V),V;var n=getComputedStyle(e),i=R(e)&&e.ownerSVGElement&&e.getBBox(),r=!Q&&"border-box"===n.boxSizing,a=H.test(n.writingMode||""),o=!i&&G.test(n.overflowY||""),s=!i&&G.test(n.overflowX||""),c=i?0:k(n.paddingTop),l=i?0:k(n.paddingRight),u=i?0:k(n.paddingBottom),h=i?0:k(n.paddingLeft),d=i?0:k(n.borderTopWidth),f=i?0:k(n.borderRightWidth),p=i?0:k(n.borderBottomWidth),m=h+l,A=c+u,g=(i?0:k(n.borderLeftWidth))+f,v=d+p,y=s?e.offsetHeight-v-e.clientHeight:0,E=o?e.offsetWidth-g-e.clientWidth:0,x=r?m+g:0,b=r?A+v:0,B=i?i.width:k(n.width)-x-E,C=i?i.height:k(n.height)-b-y,w=B+m+E+g,M=C+A+y+v,D=Object.freeze({devicePixelContentBoxSize:z(Math.round(B*devicePixelRatio),Math.round(C*devicePixelRatio),a),borderBoxSize:z(w,M,a),contentBoxSize:z(B,C,a),contentRect:new L(h,c,B,C)});return U.set(e,D),D},j=function(e,t,n){var i=W(e,n),r=i.borderBoxSize,a=i.contentBoxSize,o=i.devicePixelContentBoxSize;switch(t){case C.DEVICE_PIXEL_CONTENT_BOX:return o;case C.BORDER_BOX:return r;default:return a}},J=function(e){var t=W(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},Y=function(e){if(P(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},X=function(){var e=1/0,t=[];D.forEach((function(n){if(0!==n.activeTargets.length){var i=[];n.activeTargets.forEach((function(t){var n=new J(t.target),r=Y(t.target);i.push(n),t.lastReportedSize=j(t.target,t.observedBox),r<e&&(e=r)})),t.push((function(){n.callback.call(n.observer,i,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,i=t;n<i.length;n++)(0,i[n])();return e},q=function(e){D.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(Y(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},K=function(){var e,t=0;for(q(t);D.some((function(e){return e.activeTargets.length>0}));)t=X(),q(t);var n={};return n.message=S,D.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",n):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=S),window.dispatchEvent(e)),t>0},Z=[],$=function(e){if(!_){var t=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver((function(){return Z.splice(0).forEach((function(e){return e()}))})).observe(n,i),_=function(){n.textContent=""+(t?t--:t++)}}Z.push(e),_()},ee=0,te=F,ne=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ie=function(e){return void 0===e&&(e=0),Date.now()+e},re=!1,ae=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!re){re=!0;var n,i=ie(e);n=function(){var n=!1;try{n=K()}finally{if(re=!1,e=i-ie(),!ee)return;n?t.run(1e3):e>0?t.run(e):t.start()}},$((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,te)};document.body?t():N.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ne.forEach((function(t){return N.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),ne.forEach((function(t){return N.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),oe=function(e){!ee&&e>0&&ae.start(),!(ee+=e)&&ae.stop()},se=function(){function e(e,t){var n={inlineSize:0,blockSize:0};this.target=e,this.observedBox=t||C.CONTENT_BOX,this.lastReportedSize=n}return e.prototype.isActive=function(){var e,t=j(this.target,this.observedBox,!0);return e=this.target,R(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),ce=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},le=new WeakMap,ue=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},he=function(){function e(){}return e.connect=function(e,t){var n=new ce(e,t);le.set(e,n)},e.observe=function(e,t,n){var i=le.get(e),r=0===i.observationTargets.length;ue(i.observationTargets,t)<0&&(r&&D.push(i),i.observationTargets.push(new se(t,n&&n.box)),oe(1),ae.schedule())},e.unobserve=function(e,t){var n=le.get(e),i=ue(n.observationTargets,t),r=1===n.observationTargets.length;i>=0&&(r&&D.splice(D.indexOf(n),1),n.observationTargets.splice(i,1),oe(-1))},e.disconnect=function(e){var t=this,n=le.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),de=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");he.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!O(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");he.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!O(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");he.unobserve(this,e)},e.prototype.disconnect=function(){he.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();!function(e){e[e.MOVE_FORWARD=0]="MOVE_FORWARD",e[e.MOVE_LEFT=1]="MOVE_LEFT",e[e.MOVE_BACKWARD=2]="MOVE_BACKWARD",e[e.MOVE_RIGHT=3]="MOVE_RIGHT",e[e.MOVE_DOWN=4]="MOVE_DOWN",e[e.MOVE_UP=5]="MOVE_UP",e[e.ZOOM_OUT=6]="ZOOM_OUT",e[e.ZOOM_IN=7]="ZOOM_IN"}(T||(T={})),function(e){e[e.MAIN=0]="MAIN",e[e.AUXILIARY=1]="AUXILIARY",e[e.SECONDARY=2]="SECONDARY"}(I||(I={}));class fe{constructor(){this.reset()}reset(){return this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1,this}}const pe=2*Math.PI,me=new t.Vector3,Ae=new t.Matrix4;class ge{constructor(e,n,i,r){this.position=e,this.quaternion=n,this.target=i,this.settings=r,this.spherical=new t.Spherical}setPosition(e){return this.position=e,this}setQuaternion(e){return this.quaternion=e,this}setTarget(e){return this.target=e,this}updateQuaternion(){const e=this.settings,t=e.rotation;return e.general.orbit?Ae.lookAt(me.subVectors(this.position,this.target),t.pivotOffset,t.up):Ae.lookAt(me.set(0,0,0),this.target.setFromSpherical(this.spherical),t.up),this.quaternion.setFromRotationMatrix(Ae),this}adjustSpherical(e,t){const n=this.settings,i=n.general.orbit,r=n.rotation,a=this.spherical;return a.theta=r.invertX?a.theta+e:a.theta-e,a.phi=!i&&!r.invertY||i&&r.invertY?a.phi+t:a.phi-t,a.theta=Math.min(Math.max(a.theta,r.minAzimuthalAngle),r.maxAzimuthalAngle),a.phi=Math.min(Math.max(a.phi,r.minPolarAngle),r.maxPolarAngle),a.theta%=pe,a.makeSafe(),i&&this.position.setFromSpherical(a).add(this.target),this}zoom(e){const t=this.settings,n=t.general,i=t.sensitivity,r=t.zoom,a=this.spherical;if(n.orbit&&r.enabled){let t=e*i.zoom;r.invert&&(t=-t);const n=Math.max(r.minDistance,15469-15468.999999),o=Math.min(r.maxDistance,Number.POSITIVE_INFINITY);a.radius=Math.min(Math.max(a.radius+t,n),o),this.position.setFromSpherical(a).add(this.target)}return this}update(e){}lookAt(e){const t=this.spherical,n=this.position,i=this.target;return i.copy(e),this.settings.general.orbit?me.subVectors(n,i):me.subVectors(i,n).normalize(),t.setFromVector3(me),t.radius=Math.max(t.radius,6832-6831.999999),this.updateQuaternion(),this}getViewDirection(e){return e.setFromSpherical(this.spherical).normalize(),this.settings.general.orbit&&e.negate(),e}}const ve=new t.Vector3(1,0,0),ye=new t.Vector3(0,1,0),Ee=new t.Vector3(0,0,1),xe=new t.Vector3;class be{constructor(e,t,n,i){this.position=e,this.quaternion=t,this.target=n,this.settings=i,this.movementState=new fe}setPosition(e){return this.position=e,this}setQuaternion(e){return this.quaternion=e,this}setTarget(e){return this.target=e,this}translateOnAxis(e,t){xe.copy(e).applyQuaternion(this.quaternion).multiplyScalar(t),this.position.add(xe),this.settings.general.orbit&&this.target.add(xe)}translate(e){const t=this.settings.sensitivity,n=this.movementState,i=e*t.translation;n.backward?this.translateOnAxis(Ee,i):n.forward&&this.translateOnAxis(Ee,-i),n.right?this.translateOnAxis(ve,i):n.left&&this.translateOnAxis(ve,-i),n.up?this.translateOnAxis(ye,i):n.down&&this.translateOnAxis(ye,-i)}update(e){this.settings.translation.enabled&&this.translate(e)}moveTo(e){return this.settings.general.orbit?this.target.copy(e):this.position.copy(e),this}}var Be,Ce;!function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_1=49]="DIGIT_1",e[e.DIGIT_2=50]="DIGIT_2",e[e.DIGIT_3=51]="DIGIT_3",e[e.DIGIT_4=52]="DIGIT_4",e[e.DIGIT_5=53]="DIGIT_5",e[e.DIGIT_6=54]="DIGIT_6",e[e.DIGIT_7=55]="DIGIT_7",e[e.DIGIT_8=56]="DIGIT_8",e[e.DIGIT_9=57]="DIGIT_9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META_LEFT=91]="META_LEFT",e[e.META_RIGHT=92]="META_RIGHT",e[e.SELECT=93]="SELECT",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.MULTIPLY=106]="MULTIPLY",e[e.ADD=107]="ADD",e[e.SUBTRACT=109]="SUBTRACT",e[e.DECIMAL_POINT=110]="DECIMAL_POINT",e[e.DIVIDE=111]="DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUAL_SIGN=187]="EQUAL_SIGN",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.GRAVE_ACCENT=192]="GRAVE_ACCENT",e[e.OPEN_BRACKET=219]="OPEN_BRACKET",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.CLOSE_BRACKET=221]="CLOSE_BRACKET",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(Be||(Be={}));class we{constructor(){this.orbit=!0}copy(e){return this.orbit=e.orbit,this}clone(){return(new we).copy(this)}}class Me{constructor(){this.defaultActions=new Map,this.actions=new Map}reset(){return this.actions=new Map(this.defaultActions),this}setDefault(e){return this.defaultActions=e,this.reset()}copy(e){return this.defaultActions=new Map(e.defaultActions),this.actions=new Map(e.actions),this}clearDefault(){return this.defaultActions.clear(),this}clear(){return this.actions.clear(),this}clone(){return(new Me).copy(this)}has(e){return this.actions.has(e)}get(e){return this.actions.get(e)}set(e,t){return this.actions.set(e,t),this}delete(e){return this.actions.delete(e)}toJSON(){var e={};return e.defaultActions=[...this.defaultActions],e.actions=[...this.actions],e}}class De{constructor(){this.hold=!1,this.lock=!0}copy(e){return this.hold=e.hold,this.lock=e.lock,this}clone(){return(new De).copy(this)}}class Se{constructor(){this.up=new t.Vector3,this.up.copy(ye),this.pivotOffset=new t.Vector3,this.minAzimuthalAngle=Number.NEGATIVE_INFINITY,this.maxAzimuthalAngle=Number.POSITIVE_INFINITY,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.invertX=!1,this.invertY=!1}copy(e){return this.up.copy(e.up),this.pivotOffset.copy(e.pivotOffset),this.minAzimuthalAngle=e.minAzimuthalAngle,this.maxAzimuthalAngle=e.maxAzimuthalAngle,this.minPolarAngle=e.minPolarAngle,this.maxPolarAngle=e.maxPolarAngle,this.invertX=e.invertX,this.invertY=e.invertY,this}clone(){return(new Se).copy(this)}}class _e{constructor(){this.rotationX=1,this.rotationY=1,this.translation=1,this.zoom=1}set rotation(e){this.rotationX=this.rotationY=e}copy(e){return this.rotationX=e.rotationX,this.rotationY=e.rotationY,this.translation=e.translation,this.zoom=e.zoom,this}clone(){return(new _e).copy(this)}}class Te{constructor(){this.enabled=!0}copy(e){return this.enabled=e.enabled,this}clone(){return(new Te).copy(this)}}class Ie{constructor(){this.enabled=!0,this.invert=!1,this.minDistance=6938-6937.999999,this.maxDistance=1/0}copy(e){return this.enabled=e.enabled,this.invert=e.invert,this.minDistance=e.minDistance,this.maxDistance=e.maxDistance,this}clone(){return(new Ie).copy(this)}}class Fe{constructor(){this.general=new we,this.keyBindings=new Me,this.keyBindings.setDefault(new Map([[Be.W,T.MOVE_FORWARD],[Be.UP,T.MOVE_FORWARD],[Be.A,T.MOVE_LEFT],[Be.LEFT,T.MOVE_LEFT],[Be.S,T.MOVE_BACKWARD],[Be.DOWN,T.MOVE_BACKWARD],[Be.D,T.MOVE_RIGHT],[Be.RIGHT,T.MOVE_RIGHT],[Be.X,T.MOVE_DOWN],[Be.SPACE,T.MOVE_UP],[Be.PAGE_DOWN,T.ZOOM_OUT],[Be.PAGE_UP,T.ZOOM_IN]])),this.pointer=new De,this.rotation=new Se,this.sensitivity=new _e,this.translation=new Te,this.zoom=new Ie}copy(e){return this.general.copy(e.general),this.keyBindings.copy(e.keyBindings),this.pointer.copy(e.pointer),this.rotation.copy(e.rotation),this.sensitivity.copy(e.sensitivity),this.translation.copy(e.translation),this.zoom.copy(e.zoom),this}clone(){return(new Fe).copy(this)}toDataURL(){var e={type:"text/json"};return URL.createObjectURL(new Blob([JSON.stringify(this)],e))}}class Le{constructor(e,t){this.movementState=e,this.direction=t}execute(e){const t=this.movementState;switch(this.direction){case Ce.FORWARD:t.forward=e;break;case Ce.LEFT:t.left=e;break;case Ce.BACKWARD:t.backward=e;break;case Ce.RIGHT:t.right=e;break;case Ce.DOWN:t.down=e;break;case Ce.UP:t.up=e}}}!function(e){e[e.FORWARD=0]="FORWARD",e[e.LEFT=1]="LEFT",e[e.BACKWARD=2]="BACKWARD",e[e.RIGHT=3]="RIGHT",e[e.DOWN=4]="DOWN",e[e.UP=5]="UP"}(Ce||(Ce={}));class Re{constructor(e,t){this.rotationManager=e,this.zoomIn=t}execute(e){e&&this.rotationManager.zoom(this.zoomIn?-1:1)}}class Pe{constructor(e=null,n=null,i=document.body){this.domElement=i,this.position=e,this.quaternion=n,this.target=new t.Vector3,this.settings=new Fe,this.rotationManager=new ge(e,n,this.target,this.settings),this.translationManager=new be(e,n,this.target,this.settings);const r=this.translationManager.movementState;this.strategies=new Map([[T.MOVE_FORWARD,new Le(r,Ce.FORWARD)],[T.MOVE_LEFT,new Le(r,Ce.LEFT)],[T.MOVE_BACKWARD,new Le(r,Ce.BACKWARD)],[T.MOVE_RIGHT,new Le(r,Ce.RIGHT)],[T.MOVE_DOWN,new Le(r,Ce.DOWN)],[T.MOVE_UP,new Le(r,Ce.UP)],[T.ZOOM_OUT,new Re(this.rotationManager,!1)],[T.ZOOM_IN,new Re(this.rotationManager,!0)]]),this.lastScreenPosition=new t.Vector2,this.dragging=!1,this.enabled=!1,null!==e&&null!==n&&(this.lookAt(this.target),null!==i&&this.setEnabled())}getDomElement(){return this.domElement}setDomElement(e){const t=this.enabled;return null!==e&&(t&&this.setEnabled(!1),this.domElement=e,this.setEnabled(t)),this}getPosition(){return this.position}setPosition(e){return this.position=e,this.rotationManager.setPosition(e),this.translationManager.setPosition(e),this.lookAt(this.target)}getQuaternion(){return this.quaternion}setQuaternion(e){return this.quaternion=e,this.rotationManager.setQuaternion(e),this.translationManager.setQuaternion(e),this.lookAt(this.target)}getTarget(e){return e.copy(this.target),this.settings.general.orbit||e.add(this.position),e}setTarget(e){return this.target=e,this.rotationManager.setTarget(e),this.translationManager.setTarget(e),this.lookAt(this.target)}getViewDirection(e){return this.rotationManager.getViewDirection(e)}setOrbitEnabled(e){const t=this.settings.general;return t.orbit!==e&&(this.getTarget(this.target),t.orbit=e,this.lookAt(this.target)),this}copy(e){return this.domElement=e.getDomElement(),this.position=e.getPosition(),this.quaternion=e.getQuaternion(),this.target=e.getTarget(new t.Vector3),this.settings.copy(e.settings),this.rotationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.translationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.lookAt(this.target)}clone(){return(new Pe).copy(this)}handlePointerMoveEvent(e){const t=this.settings,n=t.pointer,i=t.sensitivity,r=this.rotationManager,a=this.lastScreenPosition;if(document.pointerLockElement===this.domElement)n.hold&&!this.dragging||r.adjustSpherical((3615-3614.999)*e.movementX*i.rotationX,(9158-9157.999)*e.movementY*i.rotationY).updateQuaternion();else{const t=e.screenX-a.x,n=e.screenY-a.y;a.set(e.screenX,e.screenY),r.adjustSpherical((8377.001-8377)*t*i.rotationX,(2590.001-2590)*n*i.rotationY).updateQuaternion()}}handleTouchMoveEvent(e){const t=this.settings.sensitivity,n=this.rotationManager,i=this.lastScreenPosition,r=e.touches[0],a=r.screenX-i.x,o=r.screenY-i.y;i.set(r.screenX,r.screenY),e.preventDefault(),n.adjustSpherical((12293.001-12293)*a*t.rotationX,(12065.001-12065)*o*t.rotationY).updateQuaternion()}handleMainPointerButton(e,t){this.dragging=t,this.settings.pointer.lock?this.setPointerLocked():t?(this.lastScreenPosition.set(e.screenX,e.screenY),this.domElement.addEventListener("mousemove",this)):this.domElement.removeEventListener("mousemove",this)}handleAuxiliaryPointerButton(e,t){}handleSecondaryPointerButton(e,t){}handlePointerButtonEvent(e,t){switch(e.preventDefault(),e.button){case I.MAIN:this.handleMainPointerButton(e,t);break;case I.AUXILIARY:this.handleAuxiliaryPointerButton(e,t);break;case I.SECONDARY:this.handleSecondaryPointerButton(e,t)}}handleTouchEvent(e,t){const n=e.touches[0];e.preventDefault(),t?(this.lastScreenPosition.set(n.screenX,n.screenY),this.domElement.addEventListener("touchmove",this)):this.domElement.removeEventListener("touchmove",this)}handleKeyboardEvent(e,t){const n=this.settings.keyBindings;n.has(e.keyCode)&&(e.preventDefault(),this.strategies.get(n.get(e.keyCode)).execute(t))}handleWheelEvent(e){this.rotationManager.zoom(Math.sign(e.deltaY))}handlePointerLockEvent(){document.pointerLockElement===this.domElement?this.domElement.addEventListener("mousemove",this):this.domElement.removeEventListener("mousemove",this)}handleEvent(e){switch(e.type){case"mousemove":this.handlePointerMoveEvent(e);break;case"touchmove":this.handleTouchMoveEvent(e);break;case"mousedown":this.handlePointerButtonEvent(e,!0);break;case"mouseup":this.handlePointerButtonEvent(e,!1);break;case"touchstart":this.handleTouchEvent(e,!0);break;case"touchend":this.handleTouchEvent(e,!1);break;case"keydown":this.handleKeyboardEvent(e,!0);break;case"keyup":this.handleKeyboardEvent(e,!1);break;case"wheel":this.handleWheelEvent(e);break;case"pointerlockchange":this.handlePointerLockEvent()}}update(e){this.rotationManager.update(e),this.translationManager.update(e)}moveTo(e){return this.translationManager.moveTo(e),this}lookAt(e){return this.rotationManager.lookAt(e),this}setPointerLocked(e=!0){e?document.pointerLockElement!==this.domElement&&void 0!==this.domElement.requestPointerLock&&this.domElement.requestPointerLock():void 0!==document.exitPointerLock&&document.exitPointerLock()}setEnabled(e=!0){const t=this.domElement;return this.translationManager.movementState.reset(),e&&!this.enabled?(document.addEventListener("pointerlockchange",this),document.body.addEventListener("keyup",this),document.body.addEventListener("keydown",this),t.addEventListener("mousedown",this),t.addEventListener("mouseup",this),t.addEventListener("touchstart",this),t.addEventListener("touchend",this),t.addEventListener("wheel",this)):!e&&this.enabled&&(document.removeEventListener("pointerlockchange",this),document.body.removeEventListener("keyup",this),document.body.removeEventListener("keydown",this),t.removeEventListener("mousedown",this),t.removeEventListener("mouseup",this),t.removeEventListener("touchstart",this),t.removeEventListener("touchend",this),t.removeEventListener("wheel",this),t.removeEventListener("mousemove",this),t.removeEventListener("touchmove",this)),this.setPointerLocked(!1),this.enabled=e,this}dispose(){this.setEnabled(!1)}}let Oe,Ne,Ue;var Ge={emscripten_notify_memory_growth:function(e){Ue=new Uint8Array(Ne.exports.memory.buffer)}},He={};He.env=Ge;const Qe=He;class ke{init(){return Oe||(Oe=fetch("data:application/wasm;base64,"+We).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,Qe)).then(e=>{Ne=e.instance,Qe.env.emscripten_notify_memory_growth(0)})),Oe}decode(e,t=0){const n=e.byteLength,i=Ne.exports.malloc(n);Ue.set(e,i),t=t||Number(Ne.exports.ZSTD_findDecompressedSize(i,n));const r=Ne.exports.malloc(t),a=Ne.exports.ZSTD_decompress(r,t,i,n),o=Ue.slice(r,r+a);return Ne.exports.free(i),Ne.exports.free(r),o}}var ze={RGB:0,RRR:3,GGG:4,AAA:15},Ve={RGB:0,RGBA:3,RRR:4,RRRG:5};const We="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",je=166,Je=ze,Ye=Ve;class Xe extends t.CompressedTextureLoader{constructor(e){super(e),this.basisModule=null,this.basisModulePending=null,this.transcoderConfig={}}detectSupport(e){var t={};return t.astcSupported=e.extensions.has("WEBGL_compressed_texture_astc"),t.etc1Supported=e.extensions.has("WEBGL_compressed_texture_etc1"),t.etc2Supported=e.extensions.has("WEBGL_compressed_texture_etc"),t.dxtSupported=e.extensions.has("WEBGL_compressed_texture_s3tc"),t.bptcSupported=e.extensions.has("EXT_texture_compression_bptc"),t.pvrtcSupported=e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.transcoderConfig=t,this}initModule(){if(!this.basisModulePending){var e=this;e.basisModulePending=new Promise((function(t){MSC_TRANSCODER().then((function(n){e.basisModule=n,n.initTranscoders(),t()}))}))}}load(e,n,i,r){var a=this,o=new t.CompressedTexture,s=new Promise((function(n,r){new t.FileLoader(a.manager).setPath(a.path).setResponseType("arraybuffer").load(e,n,i,r)}));return this.initModule(),Promise.all([s,this.basisModulePending]).then((function([e]){a.parse(e,(function(e){o.copy(e),o.needsUpdate=!0,n&&n(o)}),r)})),o}parse(e,n,i){var r=this.basisModule.BasisLzEtc1sImageTranscoder,a=this.basisModule.UastcImageTranscoder,o=this.basisModule.TextureFormat,s=new qe(this.basisModule,e),c=s.getTexFormat()===o.UASTC4x4?new a:new r;return s.initMipmaps(c,this.transcoderConfig).then((function(){var e=new t.CompressedTexture(s.mipmaps,s.getWidth(),s.getHeight(),s.transcodedFormat,t.UnsignedByteType);e.encoding=s.getEncoding(),e.premultiplyAlpha=s.getPremultiplyAlpha(),e.minFilter=1===s.mipmaps.length?t.LinearFilter:t.LinearMipmapLinearFilter,e.magFilter=t.LinearFilter,n(e)})).catch(i),this}}class qe{constructor(e,t){this.basisModule=e,this.arrayBuffer=t,this.zstd=new ke,this.zstd.init(),this.mipmaps=null,this.transcodedFormat=null;var n=new Uint8Array(this.arrayBuffer,0,12);if(171!==n[0]||75!==n[1]||84!==n[2]||88!==n[3]||32!==n[4]||50!==n[5]||48!==n[6]||187!==n[7]||13!==n[8]||10!==n[9]||26!==n[10]||10!==n[11])throw new Error("THREE.KTX2Loader: Missing KTX 2.0 identifier.");var i=!0,r=17*Uint32Array.BYTES_PER_ELEMENT,a=new Ke(this.arrayBuffer,12,r,i),o={};if(o.vkFormat=a.nextUint32(),o.typeSize=a.nextUint32(),o.pixelWidth=a.nextUint32(),o.pixelHeight=a.nextUint32(),o.pixelDepth=a.nextUint32(),o.arrayElementCount=a.nextUint32(),o.faceCount=a.nextUint32(),o.levelCount=a.nextUint32(),o.supercompressionScheme=a.nextUint32(),o.dfdByteOffset=a.nextUint32(),o.dfdByteLength=a.nextUint32(),o.kvdByteOffset=a.nextUint32(),o.kvdByteLength=a.nextUint32(),o.sgdByteOffset=a.nextUint64(),o.sgdByteLength=a.nextUint64(),this.header=o,this.header.pixelDepth>0)throw new Error("THREE.KTX2Loader: Only 2D textures are currently supported.");if(this.header.arrayElementCount>1)throw new Error("THREE.KTX2Loader: Array textures are not currently supported.");if(this.header.faceCount>1)throw new Error("THREE.KTX2Loader: Cube textures are not currently supported.");var s=3*this.header.levelCount*8,c=new Ke(this.arrayBuffer,12+r,s,i);this.levels=[];var l={};l.byteOffset=c.nextUint64(),l.byteLength=c.nextUint64(),l.uncompressedByteLength=c.nextUint64();for(var u=0;u<this.header.levelCount;u++)this.levels.push(l);var h=new Ke(this.arrayBuffer,this.header.dfdByteOffset,this.header.dfdByteLength,i),d={};d.vendorId=h.skip(4).nextUint16(),d.versionNumber=h.skip(2).nextUint16(),d.descriptorBlockSize=h.nextUint16(),d.colorModel=h.nextUint8(),d.colorPrimaries=h.nextUint8(),d.transferFunction=h.nextUint8(),d.flags=h.nextUint8(),d.texelBlockDimension={},d.bytesPlane0=h.nextUint8(),d.numSamples=0,d.samples=[],d.texelBlockDimension.x=h.nextUint8()+1,d.texelBlockDimension.y=h.nextUint8()+1,d.texelBlockDimension.z=h.nextUint8()+1,d.texelBlockDimension.w=h.nextUint8()+1,this.dfd=d,this.dfd.numSamples=(this.dfd.descriptorBlockSize/4-6)/4,h.skip(7);var f={};for(f.channelID=h.skip(3).nextUint8(),u=0;u<this.dfd.numSamples;u++)this.dfd.samples[u]=f,h.skip(12);if(0!==this.header.vkFormat&&1!==this.header.supercompressionScheme&&this.dfd.colorModel!==je)throw new Error("THREE.KTX2Loader: Only Basis Universal supercompression is currently supported.");if(this.kvd={},this.sgd={},!(this.header.sgdByteLength<=0)){var p=new Ke(this.arrayBuffer,this.header.sgdByteOffset,this.header.sgdByteLength,i);this.sgd.endpointCount=p.nextUint16(),this.sgd.selectorCount=p.nextUint16(),this.sgd.endpointsByteLength=p.nextUint32(),this.sgd.selectorsByteLength=p.nextUint32(),this.sgd.tablesByteLength=p.nextUint32(),this.sgd.extendedByteLength=p.nextUint32(),this.sgd.imageDescs=[],this.sgd.endpointsData=null,this.sgd.selectorsData=null,this.sgd.tablesData=null,this.sgd.extendedData=null;var m={};for(m.imageFlags=p.nextUint32(),m.rgbSliceByteOffset=p.nextUint32(),m.rgbSliceByteLength=p.nextUint32(),m.alphaSliceByteOffset=p.nextUint32(),m.alphaSliceByteLength=p.nextUint32(),u=0;u<this.header.levelCount;u++)this.sgd.imageDescs.push(m);var A=this.header.sgdByteOffset+p.offset,g=A+this.sgd.endpointsByteLength,v=g+this.sgd.selectorsByteLength,y=v+this.sgd.tablesByteLength;this.sgd.endpointsData=new Uint8Array(this.arrayBuffer,A,this.sgd.endpointsByteLength),this.sgd.selectorsData=new Uint8Array(this.arrayBuffer,g,this.sgd.selectorsByteLength),this.sgd.tablesData=new Uint8Array(this.arrayBuffer,v,this.sgd.tablesByteLength),this.sgd.extendedData=new Uint8Array(this.arrayBuffer,y,this.sgd.extendedByteLength)}}async initMipmaps(e,n){await this.zstd.init();var i,r=this.basisModule.TranscodeTarget,a=this.basisModule.TextureFormat,o=this.basisModule.ImageInfo,s=[],c=this.getWidth(),l=this.getHeight(),u=this.getTexFormat(),h=this.getAlpha(),d=t.MathUtils.isPowerOfTwo(c)&&t.MathUtils.isPowerOfTwo(l);if(u===a.ETC1S){var f=this.sgd.endpointCount,p=this.sgd.selectorCount,m=this.sgd.endpointsData,A=this.sgd.selectorsData,g=this.sgd.tablesData;e.decodePalettes(f,m,p,A),e.decodeTables(g)}if(n.astcSupported?(i=r.ASTC_4x4_RGBA,this.transcodedFormat=t.RGBA_ASTC_4x4_Format):n.bptcSupported&&u===a.UASTC4x4?(i=r.BC7_M5_RGBA,this.transcodedFormat=t.RGBA_BPTC_Format):n.dxtSupported?(i=h?r.BC3_RGBA:r.BC1_RGB,this.transcodedFormat=h?t.RGBA_S3TC_DXT5_Format:t.RGB_S3TC_DXT1_Format):n.pvrtcSupported&&d?(i=h?r.PVRTC1_4_RGBA:r.PVRTC1_4_RGB,this.transcodedFormat=h?t.RGBA_PVRTC_4BPPV1_Format:t.RGB_PVRTC_4BPPV1_Format):n.etc2Supported?(i=h?r.ETC2_RGBA:r.ETC1_RGB,this.transcodedFormat=h?t.RGBA_ETC2_EAC_Format:t.RGB_ETC2_Format):n.etc1Supported?(i=r.ETC1_RGB,this.transcodedFormat=t.RGB_ETC1_Format):(console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),i=r.RGBA32,this.transcodedFormat=t.RGBAFormat),!this.basisModule.isFormatSupported(i,u))throw new Error("THREE.KTX2Loader: Selected texture format not supported by current transcoder build.");for(var v=0,y=0;y<this.header.levelCount;y++)for(var E=Math.ceil(c/Math.pow(2,y)),x=Math.ceil(l/Math.pow(2,y)),b=0,B=new o(u,E,x,y),C=this.levels[y].byteLength,w=this.levels[y].uncompressedByteLength,M=0;M<1;M++){var D,S;if(u===a.UASTC4x4)B.flags=0,B.rgbByteOffset=0,B.rgbByteLength=w,B.alphaByteOffset=0,B.alphaByteLength=0,S=new Uint8Array(this.arrayBuffer,this.levels[y].byteOffset+b,C),2===this.header.supercompressionScheme&&(S=this.zstd.decode(S,w)),D=e.transcodeImage(i,S,B,0,h,!1);else{var _=this.sgd.imageDescs[v++];B.flags=_.imageFlags,B.rgbByteOffset=0,B.rgbByteLength=_.rgbSliceByteLength,B.alphaByteOffset=_.alphaSliceByteOffset>0?_.rgbSliceByteLength:0,B.alphaByteLength=_.alphaSliceByteLength,S=new Uint8Array(this.arrayBuffer,this.levels[y].byteOffset+_.rgbSliceByteOffset,_.rgbSliceByteLength+_.alphaSliceByteLength),D=e.transcodeImage(i,S,B,0,!1)}if(void 0===D.transcodedImage)throw new Error("THREE.KTX2Loader: Unable to transcode image.");var T=D.transcodedImage.get_typed_memory_view().slice(),I={};I.data=T,I.width=E,I.height=x,D.transcodedImage.delete(),s.push(I),b+=C}this.mipmaps=s}getWidth(){return this.header.pixelWidth}getHeight(){return this.header.pixelHeight}getEncoding(){return 2===this.dfd.transferFunction?t.sRGBEncoding:t.LinearEncoding}getTexFormat(){var e=this.basisModule.TextureFormat;return this.dfd.colorModel===je?e.UASTC4x4:e.ETC1S}getAlpha(){var e=this.basisModule.TextureFormat;return this.getTexFormat()===e.UASTC4x4?(15&this.dfd.samples[0].channelID)===Ye.RGBA:2===this.dfd.numSamples&&(15&this.dfd.samples[1].channelID)===Je.AAA}getPremultiplyAlpha(){return!!(1&this.dfd.flags)}}class Ke{constructor(e,t,n,i){this.dataView=new DataView(e,t,n),this.littleEndian=i,this.offset=0}nextUint8(){var e=this.dataView.getUint8(this.offset,this.littleEndian);return this.offset+=1,e}nextUint16(){var e=this.dataView.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}nextUint32(){var e=this.dataView.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}nextUint64(){var e=this.dataView.getUint32(this.offset,this.littleEndian),t=this.dataView.getUint32(this.offset+4,this.littleEndian),n=this.littleEndian?e+2**32*t:2**32*e+t;return Number.isSafeInteger(n)||console.warn("THREE.KTX2Loader: "+n+" exceeds MAX_SAFE_INTEGER. Precision may be lost."),this.offset+=8,n}skip(e){return this.offset+=e,this}}const Ze=new t.LoadingManager,$e=new Xe(Ze);let et,tt,nt;Object.defineProperty(b,"basisPath",{get:()=>b._basisPath,set(e){b._basisPath=e}});var it=new class{constructor(){this.enabled=!0,this.level=0,this.levelChangeThreshold=30,this.isAnimationsDisabled=!1,this.isPostProcessingDisabled=!1}update(){}updateLevel(){this.enabled&&ot.avgFps<=this.levelChangeThreshold&&this.optimizeNextLevel()}optimizeNextLevel(){switch(this.level++,this.level){case 1:this.setMSAAMultisampling(0);break;case 2:this.disablePostProcessing();break;case 3:this.convertMaterialsToPhong();break;case 4:this.convertMaterialsToBasic();break;case 5:this.setPixelRatio(7687.85-7687);break;case 6:this.setPixelRatio(.5);break;case 7:this.setPixelRatio(12587-12586.62);break;case 8:this.disableAnimations()}}setMSAAMultisampling(e){nt.multisampling=e}setPixelRatio(e){et.setPixelRatio(e)}disableAnimations(){this.isAnimationsDisabled=!0}disablePostProcessing(){this.isPostProcessingDisabled=!0}convertMaterialsToPhong(){i.traverse(e=>{if("Mesh"===e.type&&e.material&&("MeshStandardMaterial"===e.material.type||"MeshPhysicalMaterial"===e.material.type)){const n=e,i=new t.MeshPhongMaterial;i.alphaMap=n.material.alphaMap,i.aoMap=n.material.aoMap,i.aoMapIntensity=n.material.aoMapIntensity,i.bumpMap=n.material.bumpMap,i.bumpScale=n.material.bumpScale,i.color=n.material.color,i.combine=n.material.combine,i.displacementMap=n.material.displacementMap,i.displacementScale=n.material.displacementScale,i.displacementBias=n.material.displacementBias,i.emissive=n.material.emissive,i.emissiveMap=n.material.emissiveMap,i.emissiveIntensity=n.material.emissiveIntensity,i.envMap=n.material.envMap,i.lightMap=n.material.lightMap,i.lightMapIntensity=n.material.lightMapIntensity,i.map=n.material.map,i.morphTargets=n.material.morphTargets,i.normalMap=n.material.normalMap,i.normalMapType=n.material.normalMapType,i.normalScale=n.material.normalScale,i.reflectivity=n.material.reflectivity,i.refractionRatio=n.material.refractionRatio,i.wireframe=n.material.wireframe,i.side=n.material.side,i.transparent=n.material.transparent,i.opacity=n.material.opacity,i.precision=n.material.precision,i.premultipliedAlpha=n.material.premultipliedAlpha,n.material=i,n.material.needsUpdate=!0}})}convertMaterialsToBasic(){i.traverse(e=>{if("Mesh"===e.type&&e.material){const n=e,i=new t.MeshBasicMaterial;i.alphaMap=n.material.alphaMap,i.aoMap=n.material.aoMap,i.aoMapIntensity=n.material.aoMapIntensity,i.color=n.material.color,i.combine=n.material.combine,i.envMap=n.material.envMap,i.map=n.material.map,i.morphTargets=n.material.morphTargets,i.reflectivity=n.material.reflectivity,i.refractionRatio=n.material.refractionRatio,i.wireframe=n.material.wireframe,i.side=n.material.side,i.transparent=n.material.transparent,i.opacity=n.material.opacity,i.precision=n.material.precision,i.premultipliedAlpha=n.material.premultipliedAlpha,n.material=i,n.material.needsUpdate=!0}})}};const rt=1048576,at=1e3;let ot;class st{constructor(){this.fps=0,this.avgFps=60,this.fpsSum=0,this.fpsCount=0,this.avgFpsUpdatePeriod=3e3,this.avgFpsEnabled=!0,this.framesCount=0;let e=et.getContext();this.videoCardInfo=et.extensions.get("WEBGL_debug_renderer_info"),this.videoCardVendor=e.getParameter(this.videoCardInfo.UNMASKED_VENDOR_WEBGL),this.videoCardRenderer=e.getParameter(this.videoCardInfo.UNMASKED_RENDERER_WEBGL),this.precision=et.capabilities.precision,this.contextName=et.getContext().constructor.name,this.maxTextureSize=et.capabilities.maxTextureSize,this.isMemoryInfoAvailable=void 0!==performance.memory,this.isMemoryInfoAvailable&&(this.heapLimit=performance.memory.jsHeapSizeLimit/rt),navigator.hardwareConcurrency&&(this.hardwareConcurrency=navigator.hardwareConcurrency),this.lastUpdate=performance.now(),this.lastAvgFpsUpdate=performance.now()}update(){this.isMemoryInfoAvailable&&this.updateMemoryInfo(),this.updateFpsInfo()}updateMemoryInfo(){this.heapUsage=performance.memory.usedJSHeapSize/rt,this.heapPercentage=this.heapUsage/this.heapLimit}updateFpsInfo(){const e=performance.now();this.framesCount++,e>=this.lastUpdate+at&&(this.fps=Math.round(this.framesCount*at/(e-this.lastUpdate)),this.fpsSum+=this.fps,this.fpsCount++,this.lastUpdate=e,this.framesCount=0),e>=this.lastAvgFpsUpdate+this.avgFpsUpdatePeriod&&this.avgFpsEnabled&&!document.hidden&&(this.avgFps=this.fpsSum/this.fpsCount,this.fpsSum=0,this.fpsCount=0,this.lastAvgFpsUpdate=e,it.updateLevel())}}const ct=[];let lt,ut,ht=new t.Vector2(0,0),dt=new t.Vector2(0,0),ft=new t.Vector2(0,0);function pt(){let e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),t=s.scroll.scrollLeft|s.scroll.pageXOffset,n=s.scroll.scrollTop|s.scroll.pageYOffset;lt=s.scroll.scrollHeight|e,ut=lt-c.canvas.height,ft.x=t-ht.x,ft.y=n-ht.y,ht.x=t,ht.y=n,dt.y=ht.y/ut}class mt{constructor(e,t){this.enabled=!0,this.inertia=9563.04-9563,this.currentY=0,this.mixers=e,this.duration=t,ct.push(this)}update(){if(!this.enabled)return;var e,t,n;this.currentY=(e=this.currentY,t=dt.y,(1-(n=this.inertia))*e+n*t),this.currentY=function(e,t=0,n=1){return e<t&&(e=t),e>n&&(e=n),e}(this.currentY,0,169-168.0000001);let i=this.duration*this.currentY;this.mixers.forEach(e=>{e.setTime(i)})}}const At=[],gt=[];let vt;class yt{constructor(){this._enabled=!1,this.roundBorder=3,this.touchCount=0,this.touchLimit=10,et.getContext(),this.cameraPosition=new t.Vector3,this.cameraQuaternion=new t.Quaternion}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.element||(this.generateStyles(),this.element=this.generateMarkup()),this.text="",this.element.innerHTML=this.text}generateMarkup(){const e=document.createElement("p");return e.classList.add("krono-stats"),s.canvas.appendChild(e),e}generateStyles(){const e=document.createElement("style");e.innerHTML="\n.krono-stats {\n  position: fixed;\n  top: 0;\n  left: 0;\n  margin: 0;\n  padding: 10px;\n  color: #fff;\n  font-size: 16pt;\n  font-family: 'Helvetica', sans-serif;\n  font-weight: bold;\n  text-shadow: 1px 1px 0px rgba(0, 0, 0, 1);\n  white-space: pre;\n  z-index: 1;\n  pointer-events: none;\n}",s.canvas.appendChild(e)}handleTouchEnd(e){this.touchCount++,this.touchCount>this.touchLimit&&(this.touchCount=0,this.enabled=!this.enabled)}update(){this.enabled&&(this.updateCameraInfo(),this.text=this.getCurrentText(),this.element.innerHTML=this.text)}updateCameraInfo(){this.cameraPosition.x=h.position.x.toFixed(this.roundBorder).toLocaleString(),this.cameraPosition.y=h.position.y.toFixed(this.roundBorder).toLocaleString(),this.cameraPosition.z=h.position.z.toFixed(this.roundBorder).toLocaleString(),this.cameraQuaternion.x=h.quaternion.x.toFixed(this.roundBorder).toLocaleString(),this.cameraQuaternion.y=h.quaternion.y.toFixed(this.roundBorder).toLocaleString(),this.cameraQuaternion.z=h.quaternion.z.toFixed(this.roundBorder).toLocaleString(),this.cameraQuaternion.w=h.quaternion.w.toFixed(this.roundBorder).toLocaleString()}getCurrentText(){let e="krono "+b.version+" ("+ot.fps+" fps)\n\n"+navigator.userAgent+"\n\n"+navigator.platform;return navigator.hardwareConcurrency&&(e+=", "+navigator.hardwareConcurrency+" core",navigator.hardwareConcurrency>1&&(e+="s")),navigator.deviceMemory&&(e+=", "+navigator.deviceMemory+" GB of RAM"),e+="\n"+c.canvas.width+""+c.canvas.height+", "+window.devicePixelRatio+"x pixel ratio, "+screen.colorDepth+"-bit color ("+ot.videoCardVendor+")\n"+ot.videoCardRenderer+", "+ot.contextName+"\n\nprecision: "+ot.precision+"\nmax texture size: "+ot.maxTextureSize.toLocaleString()+"\n\nscroll: "+Math.round(100*dt.y)+"%\nfly: "+tt.enabled+"\n\nxyz: "+this.cameraPosition.x+" / "+this.cameraPosition.y+" / "+this.cameraPosition.z+"\nxyzw: "+this.cameraQuaternion.x+" / "+this.cameraQuaternion.y+" / "+this.cameraQuaternion.z+" / "+this.cameraQuaternion.w+"\n\n",ot.isMemoryInfoAvailable&&(e+="mem: "+Math.round(100*ot.heapPercentage)+"% "+Math.round(ot.heapUsage)+" / "+ot.heapLimit+" MB\n"),e+="geometries: "+et.info.memory.geometries.toLocaleString()+"\ntextures: "+et.info.memory.textures.toLocaleString()+"\nprograms: "+et.info.programs.length.toLocaleString()+"\n\ncalls: "+et.info.render.calls.toLocaleString()+"\ntriangles: "+et.info.render.triangles.toLocaleString()+"\npoints: "+et.info.render.points.toLocaleString()+"\nlines: "+et.info.render.lines.toLocaleString()+"\nframe: "+et.info.render.frame.toLocaleString()+"\n\neffects: "+At.length+"\npost effects: "+gt.length+"\n",e}}const Et="Period",xt="Comma";function bt(e){if(!(document.activeElement instanceof HTMLInputElement))switch(e.code){case Et:b.debug&&(vt.enabled=!vt.enabled);break;case xt:b.debug&&(tt.setEnabled(!tt.enabled),tt.setPointerLocked(tt.enabled),tt.enabled?d(u):b.cameraName?d(f(b.cameraName,B.mainScene.cameras)):d(B.mainScene.cameras[0]))}}var Bt=new class{constructor(){this.raycaster=new t.Raycaster,this.intersects=[],this.objectsToIntersect=[],this.currentIntersection=null,this.currentIntersectedObject=null}update(){var e;this.intersects.length=0,this.raycaster.setFromCamera(Ct.scenePosition,h),this.raycaster.intersectObjects(this.objectsToIntersect,!1,this.intersects);const t=this.intersects[0],n=null!==this.currentIntersectedObject,i=this.currentIntersectedObject!==(null===(e=this.intersects[0])||void 0===e?void 0:e.object);t?n?i&&(this.dispatchEvent(this.currentIntersectedObject,Mt.LEAVE),this.currentIntersectedObject=this.intersects[0].object,this.dispatchEvent(this.currentIntersectedObject,Mt.ENTER)):(this.currentIntersectedObject=this.intersects[0].object,this.dispatchEvent(this.currentIntersectedObject,Mt.ENTER)):(n&&this.dispatchEvent(this.currentIntersectedObject,Mt.LEAVE),this.currentIntersectedObject=null)}updateObjectsToIntersect(){this.objectsToIntersect.length=0,i.traverse(e=>{void 0!==e._listeners&&Object.values(Mt).some(t=>void 0!==e._listeners[t])&&this.objectsToIntersect.push(e)})}dispatchEvent(e,t){(null==e?void 0:e._listeners[t])&&e.dispatchEvent({type:t})}};let Ct;var wt={ENTER:"pointerenter",LEAVE:"pointerleave",DOWN:"pointerdown",UP:"pointerup",MOVE:"pointermove"};const Mt=wt;Ct=new class{constructor(){this.screenPosition=new t.Vector2(0,0),this.scenePosition=new t.Vector2(0,0),this.isPressed=!1}initListeners(){s.canvas.addEventListener(Mt.DOWN,Ct.onPointerDown.bind(this),!1),s.canvas.addEventListener(Mt.UP,Ct.onPointerUp.bind(this),!1),s.canvas.addEventListener(Mt.MOVE,Ct.onPointerMove.bind(this),!1)}updateScreenPosition(e,t){this.screenPosition.x=e,this.screenPosition.y=t,this.scenePosition.x=e/c.canvas.width*2-1,this.scenePosition.y=-t/c.canvas.height*2+1}onPointerMove(e){e.isPrimary&&(this.updateScreenPosition(e.clientX,e.clientY),Bt.dispatchEvent(Bt.currentIntersectedObject,Mt.MOVE))}onPointerDown(e){e.isPrimary&&(this.updateScreenPosition(e.clientX,e.clientY),this.isPressed=!0,Bt.dispatchEvent(Bt.currentIntersectedObject,Mt.DOWN))}onPointerUp(e){e.isPrimary&&(this.updateScreenPosition(0,0),this.isPressed=!1,Bt.dispatchEvent(Bt.currentIntersectedObject,Mt.UP))}};let Dt=!1;function St(){Dt=!0}function _t(e){b.debug&&vt.handleTouchEnd(e)}var Tt=[];const It="_loop";function Ft(e,n){if(n.length>0){let i=new t.AnimationMixer(e);n.forEach(e=>{if(!e.name.includes(It))return;let n=i.clipAction(e);n.loop=t.LoopRepeat,n.reset().play()}),Tt.push(i)}}class Lt extends mt{constructor(e,n,i){super([new t.AnimationMixer(e)],i),this.actions=n.map(e=>{if(e.name.includes(It))return;let t=this.mixers[0].clipAction(e).reset().play();return t.zeroSlopeAtStart=!1,t.zeroSlopeAtEnd=!1,t})}}var Rt=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}();class Pt{constructor(e){this.name="",this.meshName="",this.meshesKeyedList={},this.meshesNamesList={},this.krono=e,this.uuid=Rt(),this._enabled=!0,At.push(this)}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.setStatus(e)}static getInstanceByUuid(e){for(let t=0;t<At.length;t++)if(At[t].uuid===e)return At[t];return console.error("Effect's instance not found (uuid: \""+e+'").'),null}update(e){}enable(){this.enabled=!0}disable(){this.enabled=!1}setStatus(e){}getData(){}setData(e){}getRandomData(e=!0){}getEditorControls(){}dispose(){}onAfterSceneInit(){}updateMeshesList(){this.meshesKeyedList={},this.meshesNamesList=[],i.traverse(e=>{e instanceof t.Mesh&&this.isTargetMesh(e)&&(this.meshesKeyedList[e.name]=e)}),this.meshesNamesList=Object.keys(this.meshesKeyedList)}onMeshChange(e,t=!1){}isTargetMesh(e){return!0}getMeshEditorControls(){var e={type:"array"};e.value=this.meshesNamesList,e.onChange=this.onMeshChange.bind(this);var t={};return t.meshName=e,this.updateMeshesList(),t}}function Ot(e,t){return Math.random()*(t-e)+e}function Nt(e){return e[(t=0,n=e.length-1,Math.round(t-.5+Math.random()*(n-t+1)))];var t,n}function Ut(){return new t.Color(Math.random(),Math.random(),Math.random())}function Gt(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}Pt.type="Effect",Pt.parent="Effect";class Ht extends Pt{constructor(e){super(e),this.castShadow=!1,this.shadowAutoUpdate=!0,this.bias=0,this.biasMinValue=0,this.biasMaxValue=1,this.biasStep=2141.0001-2141,this.normalBias=0,this.normalBiasMinValue=0,this.normalBiasMaxValue=1,this.normalBiasStep=6797-6796.9999,this.radius=1,this.radiusMinValue=0,this.radiusMaxValue=100,this.radiusStep=1,this.mapSize=new t.Vector2(512,512),this.mapSizeMinValue=0,this.mapSizeMaxValue=4096,this.mapSizeStep=2,this.shadowNear=0,this.shadowFar=2e3}updateShadow(){this.light.castShadow=this.castShadow,this.light.shadow.bias=this.bias,this.light.shadow.normalBias=this.normalBias,this.light.shadow.radius=this.radius,this.light.shadow.mapSize.copy(this.mapSize),this.light.shadow.autoUpdate=this.shadowAutoUpdate,!0===this.light.castShadow&&(this.krono.renderer.shadowMap.enabled=!0)}dispose(){this.krono.scene.remove(this.light)}onAfterSceneInit(){this.krono.scene.add(this.light)}setStatus(e){this.light.visible=e}getShadowData(){var e={type:"vector"};e.value=this.mapSize.toArray();var t={};return t.castShadow=this.castShadow,t.bias=this.bias,t.normalBias=this.normalBias,t.radius=this.radius,t.mapSize=e,t.shadowAutoUpdate=this.shadowAutoUpdate,t}setShadowData(e){this.castShadow=e.castShadow,this.bias=e.bias,this.normalBias=e.normalBias,this.radius=e.radius,this.shadowAutoUpdate=e.shadowAutoUpdate,e.mapSize&&this.mapSize.fromArray(e.mapSize.value)}getLightEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={type:"color"},i={};return i.enabled=e,i.intensity=t,i.color=n,i}getShadowEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.biasMinValue,t.max=this.biasMaxValue,t.step=this.biasStep;var n={type:"number"};n.min=this.normalBiasMinValue,n.max=this.normalBiasMaxValue,n.step=this.normalBiasStep;var i={type:"number"};i.min=this.radiusMinValue,i.max=this.radiusMaxValue,i.step=this.radiusStep;var r={type:"vector2"};r.min=this.mapSizeMinValue,r.max=this.mapSizeMaxValue,r.step=this.mapSizeStep,r.onChange=this.onEditorMapSizeChange.bind(this);var a={type:"boolean"},o={};return o.castShadow=e,o.bias=t,o.normalBias=n,o.radius=i,o.mapSize=r,o.shadowAutoUpdate=a,o}onEditorMapSizeChange(){this.mapSize.x=Gt(this.mapSize.x),this.mapSize.y=Gt(this.mapSize.y),this.light.shadow.map&&(this.light.shadow.map.dispose(),this.light.shadow.map=null)}}Ht.type="LightEffect",Ht.parent="LightEffect";class Qt extends Ht{constructor(e){super(e),this.defaultValue=0,this.minValue=0,this.maxValue=3,this.step=14445-14444.95,this.light=new t.AmbientLight,this.intensity=this.defaultValue,this.color=this.light.color}update(){this.enabled&&(this.light.visible=this.enabled,this.light.intensity=this.intensity,this.light.color=this.color)}getData(){var e={type:"color"};e.value=this.color.toArray();var t={};return t.enabled=this.enabled,t.intensity=this.intensity,t.color=e,t}setData(e){this.enabled=e.enabled,this.intensity=e.intensity,this.color.fromArray(e.color.value)}getRandomData(){var e={type:"color"};e.value=Ut().toArray();var t={enabled:!0};return t.intensity=Ot(this.minValue,this.maxValue),t.color=e,t}getEditorControls(){return this.getLightEditorControls()}}Qt.type="AmbientLightEffect",Qt.parent="LightEffect";class kt extends Ht{constructor(e){super(e),this.defaultValue=0,this.minValue=0,this.maxValue=3,this.step=12636.05-12636,this.minPosition=-10,this.maxPosition=10,this.light=new t.DirectionalLight,this.light.intensity=this.defaultValue,this.intensity=this.defaultValue,this.color=this.light.color,this.position=this.light.position}update(){this.enabled&&(this.light.visible=this.enabled,this.light.intensity=this.intensity,this.light.color=this.color,this.light.position.copy(this.position),this.updateShadow())}getData(){var e={type:"color"};e.value=this.color.toArray();var t={type:"vector"};t.value=this.position.toArray();var n={};return n.enabled=this.enabled,n.intensity=this.intensity,n.color=e,n.position=t,Object.assign(n,this.getShadowData())}setData(e){this.enabled=e.enabled,this.intensity=e.intensity,this.color.fromArray(e.color.value),this.position.fromArray(e.position.value),this.setShadowData(e)}getRandomData(){var e={type:"color"};e.value=Ut().toArray();var n={enabled:!0};return n.intensity=Ot(this.minValue,this.maxValue),n.color=e,n.position={},n.position.type="vector",n.position.value=new t.Vector3(Ot(this.minPosition,this.maxPosition),Ot(this.minPosition,this.maxPosition),Ot(this.minPosition,this.maxPosition)).toArray(),n}getEditorControls(){var e={type:"vector3"};e.min=this.minPosition,e.max=this.maxPosition,e.step=this.step;var t={};return t.position=e,Object.assign(Object.assign(Object.assign({},this.getLightEditorControls()),t),this.getShadowEditorControls())}}kt.type="DirectionalLightEffect",kt.parent="LightEffect";class zt extends Pt{constructor(e){super(e),this.types={BasicShadowMap:t.BasicShadowMap,PCFShadowMap:t.PCFShadowMap,PCFSoftShadowMap:t.PCFSoftShadowMap,VSMShadowMap:t.VSMShadowMap},this.shadowType=this.types.PCFShadowMap.toString()}get shadowType(){return this._shadowType}set shadowType(e){this._shadowType=e,this.krono.renderer&&(this.krono.renderer.shadowMap.type=Number.parseInt(e))}getData(){var e={};return e.shadowType=this.shadowType.toString(),e}setData(e){this.shadowType=e.shadowType}getRandomData(){var e={};return e.shadowType=Nt(this.types).toString(),e}getEditorControls(){var e={type:"array"};e.value=this.types;var t={};return t.shadowType=e,t}}zt.type="ShadowTypeEffect",zt.parent="Effect";class Vt extends Pt{constructor(e){super(e),this.defaultValue=.5,this.minValue=0,this.maxValue=1,this.step=4948.01-4948,this.color=new t.Color(1,1,1)}update(){var e;(null===(e=this.krono)||void 0===e?void 0:e.scene)&&this.enabled&&(this.krono.scene.background=this.color)}getData(){var e={type:"color"};e.value=this.color.toArray();var t={};return t.enabled=this.enabled,t.color=e,t}setData(e){this.enabled=e.enabled,this.color.fromArray(e.color.value)}getRandomData(){var e={type:"color"};e.value=Ut().toArray();var t={enabled:!0};return t.color=e,t}getEditorControls(){var e={type:"boolean"},t={type:"color"},n={};return n.enabled=e,n.color=t,n}}Vt.type="BackgroundEffect",Vt.parent="Effect";class Wt extends Pt{constructor(e){super(e),this.defaultValue=0,this.defaultColor=16777215,this.minValue=0,this.maxValue=5,this.step=1974.00001-1974,this.density=this.defaultValue,this.color=new t.Color(this.defaultColor)}update(){var e;(null===(e=this.krono)||void 0===e?void 0:e.scene)&&this.enabled&&(this.krono.scene.fog.density=this.density,this.krono.scene.fog.color=this.color)}dispose(){this.krono.scene.fog=new t.FogExp2(16777215,this.defaultValue)}onAfterSceneInit(){this.krono.scene.fog=new t.FogExp2(this.color)}setStatus(e){var t,n,i,r;e?(null===(n=null===(t=this.krono)||void 0===t?void 0:t.scene)||void 0===n?void 0:n.fog)&&(this.krono.scene.fog.density=this.defaultValue):(null===(r=null===(i=this.krono)||void 0===i?void 0:i.scene)||void 0===r?void 0:r.fog)&&(this.krono.scene.fog.density=0)}getData(){var e={type:"color"};e.value=this.color.toArray();var t={};return t.enabled=this.enabled,t.density=this.density,t.color=e,t}setData(e){this.enabled=e.enabled,this.density=e.density,this.color.fromArray(e.color.value)}getRandomData(){var e={type:"color"};e.value=Ut().toArray();var t={enabled:!0};return t.density=Ot(this.minValue,12650.0005-12650),t.color=e,t}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={type:"color"},i={};return i.enabled=e,i.density=t,i.color=n,i}}Wt.type="FogEffect",Wt.parent="Effect";class jt extends Pt{constructor(e){super(e),this.enabled=!1}setStatus(e){this.setSceneWireframe(e)}setSceneWireframe(e){this.krono.scene.traverse(n=>{n instanceof t.Mesh&&n.material&&(n.material.wireframe=e)})}dispose(){this.setSceneWireframe(!1)}getData(){var e={};return e.enabled=this.enabled,e}setData(e){this.enabled=e.enabled}getRandomData(){var e={};return e.enabled=Math.random()>.5,e}getEditorControls(){var e={type:"boolean"},t={};return t.enabled=e,t}}jt.type="WireframeEffect",jt.parent="Effect";class Jt extends Pt{constructor(e){super(e),this.defaultValue=1,this.minValue=7085-7084.999,this.maxValue=3,this.step=12623-12622.999,this.pixelRatio=this.defaultValue}update(){this.enabled&&this.krono.renderer&&this.krono.renderer.setPixelRatio(this.pixelRatio)}dispose(){this.krono.renderer.setPixelRatio(this.defaultValue)}setStatus(e){!1===e&&(this.pixelRatio=this.defaultValue,this.krono.renderer.setPixelRatio(this.pixelRatio))}getData(){var e={};return e.enabled=this.enabled,e.pixelRatio=this.pixelRatio,e}setData(e){this.enabled=e.enabled,this.pixelRatio=e.pixelRatio}getRandomData(){var e={enabled:!0};return e.pixelRatio=Ot(this.minValue,this.maxValue),e}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};return n.enabled=e,n.pixelRatio=t,n}}Jt.type="PixelRatioEffect";class Yt extends Pt{constructor(){super(),this.defaultValue=6899.04-6899,this.minValue=0,this.maxValue=1,this.step=2068.00001-2068,this.inertia=this.defaultValue}update(){this.enabled&&this.updateInertia(this.inertia)}updateInertia(e){ct.forEach(t=>t.inertia=e)}dispose(){this.updateInertia(this.defaultValue)}setStatus(e){this.inertia=e?this.defaultValue:0,this.updateInertia(this.inertia)}getData(){var e={};return e.enabled=this.enabled,e.inertia=this.inertia,e}setData(e){this.enabled=e.enabled,this.inertia=e.inertia}getRandomData(){var e={enabled:!0};return e.inertia=Ot(this.minValue,this.maxValue),e}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};return n.enabled=e,n.inertia=t,n}}Yt.type="ScrollInertiaEffect";class Xt extends Pt{constructor(){super(),this.defaultValue=0,this.minValue=-20,this.maxValue=20,this.step=8034.001-8034,this.constantX=0,this.constantY=0,this.constantZ=0,this.negatedX=!1,this.negatedY=!1,this.negatedZ=!1,this.planeHelpersSize=11233.001-11233,this.planeHelpersColor=0,et.localClippingEnabled=!0,this.planes=[new t.Plane(new t.Vector3(-1,0,0),this.constantX),new t.Plane(new t.Vector3(0,-1,0),this.constantY),new t.Plane(new t.Vector3(0,0,-1),this.constantZ)],this.planes[0].negated=this.negatedX,this.planes[1].negated=this.negatedY,this.planes[2].negated=this.negatedZ,b.debug&&(this.planeHelpers=this.planes.map(e=>new t.PlaneHelper(e,this.planeHelpersSize,this.planeHelpersColor)))}update(){this.enabled&&this.mesh&&this.updatePlanes()}updatePlanes(){this.planes[0].constant=this.constantX,this.planes[1].constant=this.constantY,this.planes[2].constant=this.constantZ,this.planes[0].negated!==this.negatedX&&(this.planes[0].negated=this.negatedX,this.planes[0].negate()),this.planes[1].negated!==this.negatedY&&(this.planes[1].negated=this.negatedY,this.planes[1].negate()),this.planes[2].negated!==this.negatedZ&&(this.planes[2].negated=this.negatedZ,this.planes[2].negate())}dispose(){this.mesh&&(this.mesh.material.clippingPlanes=[])}getData(){var e={};return e.enabled=this.enabled,e.meshName=this.meshName,e.constantX=this.constantX,e.constantY=this.constantY,e.constantZ=this.constantZ,e.negatedX=this.negatedX,e.negatedY=this.negatedY,e.negatedZ=this.negatedZ,e}setData(e){this.enabled=e.enabled,this.meshName=e.meshName,this.constantX=e.constantX,this.constantY=e.constantY,this.constantZ=e.constantZ,this.negatedX=e.negatedX,this.negatedY=e.negatedY,this.negatedZ=e.negatedZ}onAfterSceneInit(){this.updateMeshesList(),""!==this.meshName&&(this.onMeshChange(this.meshName),this.updatePlanes())}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={type:"boolean"},i={type:"number"};i.min=this.minValue,i.max=this.maxValue,i.step=this.step;var r={type:"boolean"},a={type:"number"};a.min=this.minValue,a.max=this.maxValue,a.step=this.step;var o={type:"boolean"},s={};s.enabled=e,s.constantX=t,s.negatedX=n,s.constantY=i,s.negatedY=r,s.constantZ=a,s.negatedZ=o;const c=s;return Object.assign(Object.assign({},c),this.getMeshEditorControls())}onMeshChange(e){this.mesh||(this.mesh=this.meshesKeyedList[e]),this.mesh?(this.mesh.material.clippingPlanes||(this.mesh.material.clippingPlanes=[]),this.mesh.material.clippingPlanes=this.mesh.material.clippingPlanes.filter(e=>!this.planes.includes(e)),this.mesh=this.meshesKeyedList[e],this.mesh.material.clippingPlanes||(this.mesh.material.clippingPlanes=[]),this.mesh.material.clippingPlanes.push(...this.planes)):console.error("     "+e+"  "+this.constructor.name+"!")}isTargetMesh(e){return void 0!==e.geometry}}Xt.type="ClippingEffect";class qt extends Pt{constructor(){super(),this.defaultValue=1,this.minValue=0,this.maxValue=1,this.step=4971.001-4971,this.opacity=0}update(){this.enabled&&this.mesh&&this.updateMesh()}updateMesh(){this.mesh.material.opacity=this.opacity}getData(){var e={};return e.enabled=this.enabled,e.meshName=this.meshName,e.opacity=this.opacity,e}setData(e){this.enabled=e.enabled,this.meshName=e.meshName,this.opacity=e.opacity}onAfterSceneInit(){this.updateMeshesList(),""!==this.meshName&&(this.onMeshChange(this.meshName),this.updateMesh())}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};n.enabled=e,n.opacity=t;const i=n;return Object.assign(Object.assign({},i),this.getMeshEditorControls())}onMeshChange(e){this.mesh||(this.mesh=this.meshesKeyedList[e]),this.mesh=this.meshesKeyedList[e],this.mesh.material.transparent=!0}isTargetMesh(e){return void 0!==e.material}}qt.type="OpacityEffect";const Kt=[];class Zt extends t.PositionalAudio{constructor(e,t,n,i){super(m),this.krono=e,this.setBuffer(t),n&&""!==n&&(this.uuid=n),i&&(this.name=i),this.krono.audios.push(this),this.krono.scene.add(this)}dispose(){this.source&&this.stop(),this.krono.scene.remove(this);const e=Kt.indexOf(this);e>-1&&this.krono.audios.splice(e,1)}}class $t extends Pt{constructor(e){super(e),this.audioUuid=null,this.audioName=null}setStatus(e){this.effectNode&&(e?this.connect():this.disconnect())}dispose(){this.effectNode&&this.disconnect()}connect(){if(void 0===this.audio)return;let e=[...this.audio.filters];this.effectNode&&!e.includes(this.effectNode)&&(e=[...e,this.effectNode]),this.audio.setFilters(e)}disconnect(){if(void 0===this.audio)return;let e=[...this.audio.filters];e=e.filter(e=>e!==this.effectNode),this.audio.setFilters(e)}changeAudio(e,t=!1){if("string"==typeof e&&(e=function(e){let t=Kt.filter(t=>t.uuid===e)[0];if(void 0!==t&&null!=e)return t;console.error("Audio instance not found, uuid: "+e,Kt)}(e)),e){if(t&&this.audio)try{this.audio.pause()}catch(e){console.log("this.audio.pause()",this.audio),console.trace(e)}if(this.disconnect(),this.audio=e,this.context=this.audio.context,this.audioUuid=this.audio.uuid,this.onAudioChange(),t)try{this.audio.play()}catch(e){console.log("this.audio.play()",this.audio),console.trace(e)}this.enabled&&this.connect()}else console.error(this.constructor.name+": audio not found",e)}getAudioData(){var e={};return e.audioUuid=this.audioUuid,e.meshName=this.meshName,e}setAudioData(e){this.changeAudio(e.audioUuid),this.meshName=e.meshName}onAudioChange(){}onMeshChange(e,t=!1){this.mesh||(this.mesh=this.meshesKeyedList[e])}getAudioEditorControls(){var e={type:"function"};e.onChange=this.onEditorToggleChange.bind(this);var t={type:"array",value:[]};t.onChange=this.onEditorAudioChange.bind(this);var n={};return n.toggle=e,n.audioName=t,n}onEditorAudioChange(e){const t=e.split(","),n=t[t.length-1].trim();this.changeAudio(this.krono.audios[n],!0)}onEditorToggleChange(){void 0!==this.audio&&(this.audio.isPlaying?this.audio.pause():this.audio.play())}}$t.type="AudioEffect",$t.parent="AudioEffect";class en extends $t{constructor(e){super(e),this.frequencyDefaultValue=350,this.frequencyMinValue=0,this.frequencyMaxValue=1e4,this.detuneDefaultValue=0,this.detuneMinValue=-1e3,this.detuneMaxValue=1e3,this.qDefaultValue=0,this.qMinValue=0,this.qMaxValue=100,this.frequency=this.frequencyDefaultValue,this.detune=this.detuneDefaultValue,this.Q=this.qDefaultValue}update(){this.enabled&&this.effectNode&&(this.effectNode.frequency.setValueAtTime(this.frequency,this.context.currentTime),this.effectNode.detune.setValueAtTime(this.detune,this.context.currentTime),this.effectNode.Q.setValueAtTime(this.Q,this.context.currentTime))}getData(){var e={};return e.enabled=this.enabled,e.frequency=this.frequency,e.detune=this.detune,e.Q=this.Q,Object.assign(e,this.getAudioData())}setData(e){this.enabled=e.enabled,this.frequency=e.frequency,this.detune=e.detune,this.Q=e.Q,this.setAudioData(e)}onAudioChange(){this.effectNode=this.context.createBiquadFilter(),this.effectNode.type="lowpass"}getEditorControls(){var e={type:"boolean"},t={};t.enabled=e;var n={type:"number"};n.min=this.frequencyMinValue,n.max=this.frequencyMaxValue,n.step=1;var i={type:"number"};i.min=this.detuneMinValue,i.max=this.detuneMaxValue,i.step=1;var r={type:"number"};r.min=this.qMinValue,r.max=this.qMaxValue,r.step=1;var a={};return a.frequency=n,a.detune=i,a.Q=r,Object.assign(Object.assign(t,this.getAudioEditorControls()),a)}}en.type="LowPassAudioEffect",en.parent="AudioEffect";class tn extends $t{constructor(e){super(e),this.frequencyDefaultValue=350,this.frequencyMinValue=0,this.frequencyMaxValue=1e4,this.detuneDefaultValue=0,this.detuneMinValue=-1e3,this.detuneMaxValue=1e3,this.qDefaultValue=0,this.qMinValue=0,this.qMaxValue=100,this.frequency=this.frequencyDefaultValue,this.detune=this.detuneDefaultValue,this.Q=this.qDefaultValue}update(){this.enabled&&this.effectNode&&(this.effectNode.frequency.setValueAtTime(this.frequency,this.context.currentTime),this.effectNode.detune.setValueAtTime(this.detune,this.context.currentTime),this.effectNode.Q.setValueAtTime(this.Q,this.context.currentTime))}getData(){var e={};return e.enabled=this.enabled,e.frequency=this.frequency,e.detune=this.detune,e.Q=this.Q,Object.assign(e,this.getAudioData())}setData(e){this.enabled=e.enabled,this.frequency=e.frequency,this.detune=e.detune,this.Q=e.Q,this.setAudioData(e)}onAudioChange(){this.effectNode=this.context.createBiquadFilter(),this.effectNode.type="highpass"}getEditorControls(){var e={type:"boolean"},t={};t.enabled=e;var n={type:"number"};n.min=this.frequencyMinValue,n.max=this.frequencyMaxValue,n.step=1;var i={type:"number"};i.min=this.detuneMinValue,i.max=this.detuneMaxValue,i.step=1;var r={type:"number"};r.min=this.qMinValue,r.max=this.qMaxValue,r.step=1;var a={};return a.frequency=n,a.detune=i,a.Q=r,Object.assign(Object.assign(t,this.getAudioEditorControls()),a)}}tn.type="HighPassAudioEffect",tn.parent="AudioEffect";class nn extends $t{constructor(e){super(e)}setStatus(e){if(void 0!==this.audio)try{e?this.audio.play():this.audio.pause()}catch(t){console.log("setStatus",e,this.audio),console.trace(t)}}getData(){var e={};return e.enabled=this.enabled,Object.assign(e,this.getAudioData())}setData(e){this.enabled=e.enabled,this.setAudioData(e),this.setStatus(this.enabled)}getEditorControls(){var e={type:"boolean"},t={};return t.enabled=e,Object.assign(t,this.getAudioEditorControls())}}nn.type="PlayAudioEffect",nn.parent="AudioEffect";class rn extends $t{constructor(e){super(e)}setStatus(e){void 0!==this.audio&&this.audio.setLoop(e)}getData(){var e={};return e.enabled=this.enabled,Object.assign(e,this.getAudioData())}setData(e){this.enabled=e.enabled,this.setAudioData(e),this.setStatus(this.enabled)}getEditorControls(){var e={type:"boolean"},t={};return t.enabled=e,Object.assign(t,this.getAudioEditorControls())}}rn.type="LoopAudioEffect",rn.parent="AudioEffect";class an extends $t{constructor(e){super(e),this.defaultValue=1,this.minValue=0,this.maxValue=2,this.step=8121.01-8121,this.playbackRate=this.defaultValue}update(){this.enabled&&this.audio&&this.audio.source&&this.audio.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime)}getData(){var e={};return e.enabled=this.enabled,e.playbackRate=this.playbackRate,Object.assign(e,this.getAudioData())}setData(e){this.enabled=e.enabled,this.playbackRate=e.playbackRate,this.setAudioData(e)}getEditorControls(){var e={type:"boolean"},t={};t.enabled=e;var n={type:"number"};n.min=this.minValue,n.max=this.maxValue,n.step=this.step;var i={};return i.playbackRate=n,Object.assign(Object.assign(t,this.getAudioEditorControls()),i)}}an.type="SpeedAudioEffect",an.parent="AudioEffect";class on extends $t{constructor(e){super(e),this.defaultValue=1,this.minValue=0,this.maxValue=10,this.step=3604-3603.99,this.volume=this.defaultValue}update(){this.enabled&&this.audio&&this.audio.source&&this.audio.gain.gain.setValueAtTime(this.volume,this.context.currentTime)}getData(){var e={};return e.enabled=this.enabled,e.volume=this.volume,Object.assign(e,this.getAudioData())}setData(e){this.enabled=e.enabled,this.volume=e.volume,this.setAudioData(e)}getEditorControls(){var e={type:"boolean"},t={};t.enabled=e;var n={type:"number"};n.min=this.minValue,n.max=this.maxValue,n.step=this.step;var i={};return i.volume=n,Object.assign(Object.assign(t,this.getAudioEditorControls()),i)}}on.type="VolumeAudioEffect",on.parent="AudioEffect";class sn extends Pt{constructor(e){super(e),this.defaultValue=0,this.minValue=-10,this.maxValue=10,this.step=432-431.99,this.negateChance=0,this.aspect=this.defaultValue}update(){var e;(null===(e=this.krono)||void 0===e?void 0:e.camera)&&(this.enabled&&(this.krono.camera.aspect=this.getCurrentAspect()+this.aspect),this.krono.camera.updateProjectionMatrix())}dispose(){this.krono.camera.aspect=this.getCurrentAspect(),this.krono.camera.updateProjectionMatrix()}onAfterSceneInit(){this.krono.camera instanceof t.PerspectiveCamera||console.error("   PerspectiveCamera,  "+this.krono.camera.type+",  AspectCameraEffect  ",this.uuid,this)}getCurrentAspect(){return this.krono.bounds.canvas.width/this.krono.bounds.canvas.height}getData(){var e={};return e.enabled=this.enabled,e.aspect=this.aspect,e}setData(e){this.enabled=e.enabled,this.aspect=e.aspect}getRandomData(){let e=Ot(0,5);return Math.random()<this.negateChance&&(e*=-1),{enabled:!0,aspect:e}}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};return n.enabled=e,n.aspect=t,n}}sn.type="AspectCameraEffect",sn.parent="Effect";class cn extends Pt{constructor(e){super(e),this.defaultValue=40,this.minValue=-179,this.maxValue=179,this.step=.5,this.negateChance=0,this.fov=this.defaultValue}update(){var e;(null===(e=this.krono)||void 0===e?void 0:e.camera)&&(this.enabled&&(this.krono.camera.fov=this.fov),this.krono.camera.updateProjectionMatrix())}dispose(){this.krono.camera.fov=this.krono.defaultCamera.fov,this.krono.camera.updateProjectionMatrix()}onAfterSceneInit(){this.krono.camera instanceof t.PerspectiveCamera||console.error("   PerspectiveCamera,  "+this.krono.camera.type+",  FovCameraEffect  ",this.uuid,this)}getData(){var e={};return e.enabled=this.enabled,e.fov=this.fov,e}setData(e){this.enabled=e.enabled,this.fov=e.fov}getRandomData(){let e=Ot(30,150);return Math.random()<this.negateChance&&(e*=-1),{enabled:!0,fov:e}}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};return n.enabled=e,n.fov=t,n}}cn.type="FovCameraEffect",cn.parent="Effect";class ln extends Pt{constructor(e){super(e),this.defaultValue=1,this.minValue=-5,this.maxValue=15,this.step=11555-11554.9,this.negateChance=0,this.zoom=this.defaultValue}update(){var e;(null===(e=this.krono)||void 0===e?void 0:e.camera)&&(this.enabled&&(this.krono.camera.zoom=this.zoom),this.krono.camera.updateProjectionMatrix())}dispose(){this.krono.camera.zoom=this.defaultValue,this.krono.camera.updateProjectionMatrix()}onAfterSceneInit(){this.krono.camera instanceof t.PerspectiveCamera||console.error("   PerspectiveCamera,  "+this.krono.camera.type+",  ZoomCameraEffect  ",this.uuid,this)}getData(){var e={};return e.enabled=this.enabled,e.zoom=this.zoom,e}setData(e){this.enabled=e.enabled,this.zoom=e.zoom}getRandomData(){let e=Ot(0,5);return Math.random()<this.negateChance&&(e*=-1),{enabled:!0,zoom:e}}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};return n.enabled=e,n.zoom=t,n}}ln.type="ZoomCameraEffect",ln.parent="Effect";class un extends Pt{constructor(e){super(e),this.defaultValue=4842-4841.9,this.minValue=4082-4081.9,this.maxValue=1e4,this.step=2622.1-2622,this.swapChance=131-130.9,this.strongChance=7026.15-7026,this.near=12796.1-12796,this.far=2e3}update(){var e;(null===(e=this.krono)||void 0===e?void 0:e.camera)&&(this.enabled&&(this.krono.camera.near=this.near,this.krono.camera.far=this.far,this.near<this.far&&(this.krono.raycasting.raycaster.near=this.near,this.krono.raycasting.raycaster.far=this.far)),this.krono.camera.updateProjectionMatrix())}dispose(){this.krono.camera.near=this.krono.defaultCamera.near,this.krono.camera.far=this.krono.defaultCamera.far,this.krono.raycasting.raycaster.near=this.krono.defaultCamera.near,this.krono.raycasting.raycaster.far=this.krono.defaultCamera.far,this.krono.camera.updateProjectionMatrix()}getData(){var e={};return e.enabled=this.enabled,e.near=this.near,e.far=this.far,e}setData(e){this.enabled=e.enabled,this.near=e.near,this.far=e.far}getRandomData(){let e=Ot(8459-8458.9999,10),t=Ot(600,1e3);this.strongChance;let n=Math.min(e,t),i=Math.max(e,t);return Math.random()<this.swapChance&&(n=Math.max(e,t),i=Math.min(e,t)),{enabled:!0,near:n,far:i}}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={type:"number"};n.min=this.minValue,n.max=this.maxValue,n.step=this.step;var i={};return i.enabled=e,i.near=t,i.far=n,i}}un.type="DistanceCameraEffect",un.parent="Effect";class hn extends Pt{constructor(e){super(e),this.defaultValue=8,this.minValue=1,this.maxValue=200,this.step=517.1-517,this.isProportional=!1,this.proportion=1,this.frustumX=this.defaultValue,this.frustumY=this.defaultValue}update(){var e;(null===(e=this.krono)||void 0===e?void 0:e.camera)&&(this.enabled&&(this.krono.camera.frustumX=this.frustumX,this.krono.camera.frustumY=this.frustumY,this.krono.updateCameraFrustum()),this.krono.camera.updateProjectionMatrix())}dispose(){this.krono.camera.frustumX=this.defaultValue,this.krono.camera.frustumY=this.defaultValue,this.krono.updateCameraFrustum()}onAfterSceneInit(){this.krono.camera.frustumX?this.frustumX=this.krono.camera.frustumX:this.frustumX=this.defaultValue,this.krono.camera.frustumY?this.frustumY=this.krono.camera.frustumY:this.frustumY=this.defaultValue,this.krono.camera instanceof t.OrthographicCamera||console.error("   OrthographicCamera,  "+this.krono.camera.type+",  FrustumCameraEffect  ",this.uuid,this)}getData(){var e={};return e.enabled=this.enabled,e.frustumX=this.frustumX,e.frustumY=this.frustumY,e}setData(e){this.enabled=e.enabled,this.frustumX=e.frustumX,this.frustumY=e.frustumY}getRandomData(){var e={enabled:!0};return e.frustumX=Ot(this.minValue,this.maxValue),e.frustumY=Ot(this.minValue,this.maxValue),e}getEditorControls(){var e={type:"boolean"},t={type:"boolean"};t.onChange=this.onProportionToggle.bind(this);var n={type:"number"};n.min=this.minValue,n.max=this.maxValue,n.step=this.step,n.onChange=this.onFrustumXChange.bind(this);var i={type:"number"};i.min=this.minValue,i.max=this.maxValue,i.step=this.step,i.onChange=this.onFrustumYChange.bind(this);var r={};return r.enabled=e,r.isProportional=t,r.frustumX=n,r.frustumY=i,r}onProportionToggle(){const e=Math.min(this.frustumX,this.frustumY),t=Math.max(this.frustumX,this.frustumY);this.proportion=e/t}onFrustumXChange(){this.isProportional&&(this.frustumX>=this.frustumY?this.frustumY=this.frustumX*this.proportion:this.frustumY=this.frustumX/this.proportion)}onFrustumYChange(){this.isProportional&&(this.frustumY>=this.frustumX?this.frustumX=this.frustumY*this.proportion:this.frustumX=this.frustumY/this.proportion)}}hn.type="FrustumCameraEffect",hn.parent="Effect";class dn extends Pt{constructor(e,t,...n){super(e),this.forbiddenBlendModes=[],this.effect=new t(...n),this.blendFunction=this.effect.blendMode.getBlendFunction(),this.blendOpacity=this.effect.blendMode.opacity.value}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.effect.blendMode.setBlendFunction(Number.parseInt(e))}onAfterSceneInit(){this.pass=new n.EffectPass(this.krono.camera,this.effect),this.krono.effectComposer.addPass(this.pass),this.krono.postEffects.push(this)}setStatus(e){this.krono.postEffects.forEach(e=>e.pass.renderToScreen=!1),this.krono.renderPass.renderToScreen=!1,this.pass&&(this.pass.enabled=e);const t=this.krono.postEffects.filter(e=>e.pass.enabled);t.length?t[t.length-1].pass.renderToScreen=!0:this.krono.renderPass.renderToScreen=!0}dispose(){this.setStatus(!1),this.pass&&this.pass.dispose(),this.effect.dispose()}updateBlendMode(){this.effect.blendMode.opacity.value=this.blendOpacity}getBlendModeData(){var e={};return e.blendFunction=this.blendFunction.toString(),e.blendOpacity=this.blendOpacity,e}setBlendModeData(e){this.blendFunction=e.blendFunction,this.blendOpacity=e.blendOpacity}getRandomBlendFunction(){let e=Object.values(n.BlendFunction);return e=e.filter(e=>!this.forbiddenBlendModes.includes(e)),Nt(e).toString()}getRandomBlendOpacity(){return Ot(.75,1)}getBlendModesEditorControls(){var e={type:"array"};e.value=n.BlendFunction;var t={type:"number",min:0,max:1,step:.01},i={};return i.blendFunction=e,i.blendOpacity=t,i}}dn.type="PostEffect",dn.parent="PostEffect";class fn extends dn{constructor(e){super(e,n.BloomEffect),this.defaultValue=1,this.minValue=0,this.maxValue=1,this.step=8266.05-8266,this.intensityMinValue=0,this.intensityMaxValue=20,this.intensityStep=694.01-694,this.forbiddenBlendModes=[n.BlendFunction.DARKEN,n.BlendFunction.DIVIDE,n.BlendFunction.COLOR_BURN,n.BlendFunction.NORMAL,n.BlendFunction.ALPHA,n.BlendFunction.AVERAGE,n.BlendFunction.EXCLUSION,n.BlendFunction.MULTIPLY,n.BlendFunction.NEGATION,n.BlendFunction.REFLECT,n.BlendFunction.SUBTRACT],this.intensity=this.defaultValue,this.threshold=this.defaultValue,this.smoothing=this.defaultValue,this.kernelSize=this.effect.blurPass.kernelSize.toString()}get kernelSize(){return this._kernelSize}set kernelSize(e){this._kernelSize=e,this.effect.blurPass.kernelSize=Number.parseInt(e)}update(){this.enabled&&(this.effect.intensity=this.intensity,this.effect.luminanceMaterial.threshold=this.threshold,this.effect.luminanceMaterial.smoothing=this.smoothing,this.updateBlendMode())}getData(){var e={};return e.enabled=this.enabled,e.intensity=this.intensity,e.threshold=this.threshold,e.smoothing=this.smoothing,e.kernelSize=this.kernelSize.toString(),Object.assign(e,this.getBlendModeData())}setData(e){this.enabled=e.enabled,this.intensity=e.intensity,this.threshold=e.threshold,this.smoothing=e.smoothing,this.kernelSize=e.kernelSize,this.setBlendModeData(e)}getRandomData(e=!0){var t={enabled:!0};t.intensity=1+Math.random(),t.threshold=Math.random(),t.smoothing=Math.random(),t.blendFunction=this.blendFunction.toString(),t.blendOpacity=this.blendOpacity;let n=t;return n.threshold>2795.85-2795&&(n.threshold=496-495.15),n.smoothing>4129.7-4129&&(n.smoothing=10829.7-10829),!1===e&&(n.blendFunction=this.getRandomBlendFunction(),n.blendOpacity=this.getRandomBlendOpacity()),n}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.intensityMinValue,t.max=this.intensityMaxValue,t.step=this.intensityStep;var i={type:"number"};i.min=this.minValue,i.max=this.maxValue,i.step=this.step;var r={type:"number"};r.min=this.minValue,r.max=this.maxValue,r.step=this.step;var a={type:"array"};a.value=n.KernelSize;var o={};o.enabled=e,o.intensity=t,o.threshold=i,o.smoothing=r,o.kernelSize=a;let s=o;return Object.assign(Object.assign({},s),this.getBlendModesEditorControls())}}fn.type="BloomPostEffect",fn.parent="PostEffect";class pn extends dn{constructor(e){super(e,n.ChromaticAberrationEffect),this.defaultValue=0,this.minValue=-1,this.maxValue=1,this.step=2386.001-2386,this.hardValueChance=4094-4093.9,this.x=this.defaultValue,this.y=this.defaultValue}update(){this.enabled&&(this.pass.effects[0].uniforms.get("offset").value.x=this.x,this.pass.effects[0].uniforms.get("offset").value.y=this.y,this.updateBlendMode())}getData(){var e={};return e.enabled=this.enabled,e.x=this.x,e.y=this.y,Object.assign(e,this.getBlendModeData())}setData(e){this.enabled=e.enabled,this.x=e.x,this.y=e.y,this.setBlendModeData(e)}getRandomData(e=!0){let t=Ot(0,6681.02-6681),n=Ot(0,5550-5549.98);Math.random()>.5&&(t*=-1),Math.random()>.5&&(n*=-1),Math.random()<this.hardValueChance&&(t=Ot(this.minValue,this.maxValue),n=Ot(this.minValue,this.maxValue)),0===t&&(t=3170-3169.98),0===n&&(n=15747-15746.98);var i={enabled:!0};i.x=t,i.y=n,i.blendFunction=this.blendFunction.toString(),i.blendOpacity=this.blendOpacity;let r=i;return!1===e&&(r.blendFunction=this.getRandomBlendFunction(),r.blendOpacity=this.getRandomBlendOpacity()),r}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={type:"number"};n.min=this.minValue,n.max=this.maxValue,n.step=this.step;var i={};i.enabled=e,i.x=t,i.y=n;let r=i;return Object.assign(Object.assign({},r),this.getBlendModesEditorControls())}}pn.type="ChromaticAberrationPostEffect",pn.parent="PostEffect";class mn extends dn{constructor(e){super(e,n.GlitchEffect),this.delayMinValue=0,this.delayMaxValue=4,this.delayStep=8031-8030.99,this.durationMinValue=0,this.durationMaxValue=2,this.durationStep=125-124.99,this.strengthMinValue=0,this.strengthMaxValue=1,this.strengthStep=6839.001-6839,this.delayX=this.delayMinValue,this.delayY=this.delayMaxValue,this.durationX=this.durationMinValue,this.durationY=this.durationMaxValue,this.strengthX=this.strengthMinValue,this.strengthY=this.strengthMaxValue}update(){this.enabled&&(this.pass.effects[0].delay.x=this.delayX,this.pass.effects[0].delay.y=this.delayY,this.pass.effects[0].duration.x=this.durationX,this.pass.effects[0].duration.y=this.durationY,this.pass.effects[0].strength.x=this.strengthX,this.pass.effects[0].strength.y=this.strengthY)}getData(){var e={};return e.enabled=this.enabled,e.delayX=this.delayX,e.delayY=this.delayY,e.durationX=this.durationX,e.durationY=this.durationY,e.strengthX=this.strengthX,e.strengthY=this.strengthY,e}setData(e){this.enabled=e.enabled,this.delayX=e.delayX,this.delayY=e.delayY,this.durationX=e.durationX,this.durationY=e.durationY,this.strengthX=e.strengthX,this.strengthY=e.strengthY}getRandomData(){var e={enabled:!0};return e.delayX=Ot(this.delayMinValue,this.delayMaxValue),e.delayY=Ot(this.delayMinValue,this.delayMaxValue),e.durationX=Ot(this.durationMinValue,this.durationMaxValue),e.durationY=Ot(this.durationMinValue,this.durationMaxValue),e.strengthX=Ot(this.strengthMinValue,this.strengthMaxValue),e.strengthY=Ot(this.strengthMinValue,this.strengthMaxValue),e}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.delayMinValue,t.max=this.delayMaxValue,t.step=this.delayStep;var n={type:"number"};n.min=this.delayMinValue,n.max=this.delayMaxValue,n.step=this.delayStep;var i={type:"number"};i.min=this.durationMinValue,i.max=this.durationMaxValue,i.step=this.durationStep;var r={type:"number"};r.min=this.durationMinValue,r.max=this.durationMaxValue,r.step=this.durationStep;var a={type:"number"};a.min=this.strengthMinValue,a.max=this.strengthMaxValue,a.step=this.strengthStep;var o={type:"number"};o.min=this.strengthMinValue,o.max=this.strengthMaxValue,o.step=this.strengthStep;var s={};return s.enabled=e,s.delayX=t,s.delayY=n,s.durationX=i,s.durationY=r,s.strengthX=a,s.strengthY=o,s}}mn.type="GlitchPostEffect",mn.parent="PostEffect";class An extends dn{constructor(e){super(e,n.HueSaturationEffect),this.defaultValue=0,this.minValue=-Math.PI,this.maxValue=Math.PI,this.step=8348-8347.99,this.forbiddenBlendModes=[n.BlendFunction.ADD,n.BlendFunction.DARKEN],this.hue=this.defaultValue}update(){this.enabled&&(this.effect.setHue(this.hue),this.updateBlendMode())}getData(){var e={};return e.enabled=this.enabled,e.hue=this.hue,Object.assign(e,this.getBlendModeData())}setData(e){this.enabled=e.enabled,this.hue=e.hue,this.setBlendModeData(e)}getRandomData(e=!0){var t={enabled:!0};t.hue=Ot(this.minValue,this.maxValue),t.blendFunction=this.blendFunction.toString(),t.blendOpacity=this.blendOpacity;let n=t;return!1===e&&(n.blendFunction=this.getRandomBlendFunction(),n.blendOpacity=this.getRandomBlendOpacity()),n}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};n.enabled=e,n.hue=t;let i=n;return Object.assign(Object.assign({},i),this.getBlendModesEditorControls())}}An.type="HuePostEffect",An.parent="PostEffect";class gn extends dn{constructor(e){super(e,n.PixelationEffect),this.defaultValue=0,this.minValue=0,this.maxValue=50,this.step=1,this.granularity=this.defaultValue}update(){this.enabled&&this.effect.setGranularity(this.granularity)}getData(){var e={};return e.enabled=this.enabled,e.granularity=this.granularity,e}setData(e){this.enabled=e.enabled,this.granularity=e.granularity}getRandomData(){var e={enabled:!0};return e.granularity=Ot(this.minValue,2),e}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};return n.enabled=e,n.granularity=t,n}}gn.type="PixelationPostEffect",gn.parent="PostEffect";class vn extends n.Effect{constructor(){var e={};e.uniforms=new Map([["granularity",new t.Uniform(200)],["rnd1",new t.Uniform(Ot(10,120))],["rnd2",new t.Uniform(Ot(10,120))],["rnd3",new t.Uniform(Ot(4e4,9e4))]]),super("NoiseEffect","\nuniform float granularity;\n\nuniform float rnd1;\nuniform float rnd2;\nuniform float rnd3;\n\nfloat random(vec2 st) {\n  return fract(sin(dot(st.xy, vec2(rnd1, rnd2))) * rnd3);\n}\n\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n  vec4 color = inputColor;\n  float t = time;\n\n  vec2 granulatedUv = floor(uv * granularity);\n\n  float c = random(granulatedUv * t);\n\n  vec4 noise = vec4(c, c, c, 1);\n\n  color *= noise;\n  color = normalize(color);\n\n  outputColor = color;\n}\n",e)}setGranularity(e){this.uniforms.get("granularity").value=e}}class yn extends dn{constructor(e){super(e,vn),this.defaultValue=200,this.minValue=2,this.maxValue=1e3,this.step=1,this.forbiddenBlendModes=[n.BlendFunction.DIVIDE,n.BlendFunction.DARKEN,n.BlendFunction.MULTIPLY,n.BlendFunction.COLOR_BURN,n.BlendFunction.DIFFERENCE,n.BlendFunction.NORMAL,n.BlendFunction.SUBTRACT,n.BlendFunction.ALPHA],this.granularity=this.defaultValue}update(){this.enabled&&(this.effect.setGranularity(this.granularity),this.updateBlendMode())}getData(){var e={};return e.enabled=this.enabled,e.granularity=this.granularity,Object.assign(e,this.getBlendModeData())}setData(e){this.enabled=e.enabled,this.granularity=e.granularity,this.setBlendModeData(e)}getRandomData(e=!0){var t={enabled:!0};t.granularity=Ot(this.minValue,this.maxValue),t.blendFunction=this.blendFunction.toString(),t.blendOpacity=this.blendOpacity;let n=t;return!1===e&&(n.blendFunction=this.getRandomBlendFunction(),n.blendOpacity=this.getRandomBlendOpacity()),n}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};n.enabled=e,n.granularity=t;let i=n;return Object.assign(Object.assign({},i),this.getBlendModesEditorControls())}}yn.type="NoisePostEffect",yn.parent="PostEffect";class En extends dn{constructor(e){super(e,n.HueSaturationEffect),this.defaultValue=0,this.minValue=-1,this.maxValue=1,this.step=1437-1436.99,this.forbiddenBlendModes=[n.BlendFunction.DIVIDE],this.saturation=this.defaultValue}update(){this.enabled&&(this.effect.uniforms.get("saturation").value=this.saturation,this.updateBlendMode())}getData(){var e={};return e.enabled=this.enabled,e.saturation=this.saturation,Object.assign(e,this.getBlendModeData())}setData(e){this.enabled=e.enabled,this.saturation=e.saturation,this.setBlendModeData(e)}getRandomData(e=!0){var t={enabled:!0};t.saturation=Ot(this.minValue,this.maxValue),t.blendFunction=this.blendFunction.toString(),t.blendOpacity=this.blendOpacity;let n=t;return!1===e&&(n.blendFunction=this.getRandomBlendFunction(),n.blendOpacity=this.getRandomBlendOpacity()),n}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={};n.enabled=e,n.saturation=t;let i=n;return Object.assign(Object.assign({},i),this.getBlendModesEditorControls())}}En.type="SaturationPostEffect",En.parent="PostEffect";class xn extends Pt{constructor(e){super(e),this.defaultValue=1,this.minValue=0,this.maxValue=10,this.step=749.001-749,this.mappings={NoToneMapping:t.NoToneMapping,LinearToneMapping:t.LinearToneMapping,ReinhardToneMapping:t.ReinhardToneMapping,CineonToneMapping:t.CineonToneMapping,ACESFilmicToneMapping:t.ACESFilmicToneMapping},this.exposure=this.defaultValue,this.mapping=this.mappings.LinearToneMapping.toString()}get mapping(){return this._mapping}set mapping(e){this._mapping=e,this.krono.renderer&&this.krono.scene&&(this.krono.renderer.toneMapping=Number.parseInt(e),this.krono.scene.traverse(e=>{e.material&&(void 0===e.material.length?e.material.needsUpdate=!0:e.material.forEach(e=>e.needsUpdate=!0))}))}update(){this.krono&&this.krono.renderer&&this.enabled&&(this.krono.renderer.toneMappingExposure=this.exposure)}onAfterSceneInit(){this.mapping=this.mappings.LinearToneMapping.toString()}getData(){var e={};return e.enabled=this.enabled,e.exposure=this.exposure,e.mapping=this.mapping.toString(),e}setData(e){this.enabled=e.enabled,this.exposure=e.exposure,this.mapping=e.mapping}getRandomData(){var e={enabled:!0};return e.exposure=Ot(this.minValue,this.maxValue),e.mapping=Nt(this.mappings).toString(),e}getEditorControls(){var e={type:"boolean"},t={type:"number"};t.min=this.minValue,t.max=this.maxValue,t.step=this.step;var n={type:"array"};n.value=this.mappings;var i={};return i.enabled=e,i.exposure=t,i.mapping=n,i}}xn.type="ToneMappingEffect",xn.parent="Effect";class bn extends dn{constructor(e){super(e,n.SMAAEffect,e.assets.smaa.search,e.assets.smaa.area,n.SMAAPreset.HIGH,n.EdgeDetectionMode.COLOR),this._preset=n.SMAAPreset.HIGH.toString(),this._edgeDetectionMode=n.EdgeDetectionMode.COLOR.toString(),this.edgeDetectionThreshold=4816-4815.9,this.localContrastAdaptationFactor=2}get preset(){return this._preset}set preset(e){this._preset=e,this.effect.applyPreset(Number.parseInt(e))}get edgeDetectionMode(){return this._edgeDetectionMode}set edgeDetectionMode(e){this._edgeDetectionMode=e,this.effect.edgeDetectionMaterial.setEdgeDetectionMode(Number.parseInt(e))}update(){this.enabled&&(this.effect.edgeDetectionMaterial.setEdgeDetectionThreshold(this.edgeDetectionThreshold),this.effect.edgeDetectionMaterial.setLocalContrastAdaptationFactor(this.localContrastAdaptationFactor),this.updateBlendMode())}getData(){var e={};return e.enabled=this.enabled,e.preset=this.preset.toString(),e.edgeDetectionMode=this.edgeDetectionMode.toString(),e.edgeDetectionThreshold=this.edgeDetectionThreshold,e.localContrastAdaptationFactor=this.localContrastAdaptationFactor,Object.assign(e,this.getBlendModeData())}setData(e){this.enabled=e.enabled,this.preset=e.preset,this.edgeDetectionMode=e.edgeDetectionMode,this.edgeDetectionThreshold=e.edgeDetectionThreshold,this.localContrastAdaptationFactor=e.localContrastAdaptationFactor,this.setBlendModeData(e)}getEditorControls(){var e={type:"boolean"},t={type:"array"};t.value=n.SMAAPreset;var i={type:"array"};i.value=n.EdgeDetectionMode;var r={type:"number",min:0,max:.5,step:.001},a={type:"number",min:0,max:10,step:.001},o={};return o.enabled=e,o.preset=t,o.edgeDetectionMode=i,o.edgeDetectionThreshold=r,o.localContrastAdaptationFactor=a,Object.assign(o,this.getBlendModesEditorControls())}}bn.type="SMAAEffect",bn.parent="PostEffect";const Bn=[Qt,kt,zt,Vt,Wt,jt,Jt,Yt,Xt,qt,nn,rn,an,on,en,tn,sn,cn,ln,un,hn,fn,pn,mn,An,gn,yn,En,xn,bn],Cn={};function wn(e){Bn.push(e),Cn[e.type]=e}Bn.forEach(e=>Cn[e.type]=e);class Mn extends mt{constructor(e,t=!1,n){super([],1),this.keyframes=e,this.effectsData=this.getEffectsDataFromKeyframes(this.keyframes),this.krono=n,this.initEffects(0,t),this.generate()}generate(){this.effectsData=this.getEffectsDataFromKeyframes(this.keyframes),this.clearAnimationMixers(),this.generateAnimationMixers()}initEffects(e=0,t=!1){for(let n in this.effectsData){let i=this.effectsData[n][e].properties;if(!Cn[i.name]){console.error('"'+i.name+'" not found in effects list.');continue}let r=new Cn[i.name](this.krono);r.uuid=i.uuid,r.setData(i.effectData),t&&r.onAfterSceneInit()}}clearAnimationMixers(){this.mixers.forEach(e=>{e.time=0,e.timeScale=0,e.stopAllAction()}),this.mixers.length=0}generateAnimationMixers(){for(let e in this.effectsData){let n,i,r,a=[],o=Pt.getInstanceByUuid(e);if(null===o)continue;let s=this.effectsData[e],c=s.map(e=>e.percentage),l=!1,u=!1;0!==c[0]&&(c.unshift(0),l=!0),1!==c[c.length-1]&&(c.push(1),u=!0),Object.keys(s[0].properties.effectData).forEach(e=>this.addKeyframeTrack(e,"."+e,"effectData",s,c,a,l,u)),o.setData(s[0].properties.effectData),n=new t.AnimationClip(e,1,a),i=new t.AnimationMixer(o),r=i.clipAction(n),r.play(),this.mixers.push(i)}}addKeyframeTrack(e,t,n,i,r,a,o,s){let c=i.map(t=>{let i=t.properties[n][e];return i.type?i.value:i});if(c.every(e=>e.toString()===c[0].toString()))return;let l=this.getKeyframeTrackByType(c[0]);o&&c.unshift(c[0]),s&&c.push(c[c.length-1]),c=c.flat(1);let u=new l(t,r,c);a.push(u)}getKeyframeTrackByType(e){let n=typeof e;switch("object"===n&&(n=e.type),n){case"number":return t.NumberKeyframeTrack;case"boolean":return t.BooleanKeyframeTrack;case"string":return t.StringKeyframeTrack;case"color":return t.ColorKeyframeTrack;case"vector":return t.VectorKeyframeTrack;case"quaternion":return t.QuaternionKeyframeTrack;default:return t.KeyframeTrack}}getEffectsDataFromKeyframes(e){let t={};return 0===e.length||(e.forEach(e=>{e.effects.forEach(n=>{t[n.uuid]||(t[n.uuid]=[]),t[n.uuid].push({properties:n,percentage:e.percentage})})}),Object.values(t).forEach(e=>{e.sort((e,t)=>e.percentage-t.percentage)})),t}}function Dn(e){!function(){let e=ct.length;for(;e--;){let t=ct[e];t instanceof Mn&&(t.clearAnimationMixers(),ct.splice(e,1))}}(),Sn(),b.keyframes=e,b.keyframes.forEach((e,t)=>{var n,i;n=e.audios,i=this,n&&n.forEach(e=>{B.audios[e.path]?new Zt(i,B.audios[e.path],e.uuid,e.name):console.error("For some keyframes you need to load audio with path",e.path)}),0===t?this.keyframesScrollUpdater=new Mn(e.keyframes,!0,this):new Mn(e.keyframes,!0,this)}),At.forEach(e=>{e.onAfterSceneInit()})}function Sn(){for(let e=0;e<gt.length;e++)nt.removePass(gt[e].pass);for(let e=0;e<At.length;e++){const t=At[e];t.disable(),t.dispose()}At.length=0,gt.length=0}var _n=[],Tn=new t.Clock;function In(){if(Dt&&function(){switch(l(),h.aspect=c.canvas.width/c.canvas.height,h.type){case"OrthographicCamera":p()}h.updateProjectionMatrix(),et&&et.setSize(c.canvas.width,c.canvas.height),nt&&nt.setSize(c.canvas.width,c.canvas.height),Dt=!1}(),!1===b.enabled)return;let e=Tn.getDelta();var t;t=e,it.isAnimationsDisabled||(Tt.forEach(e=>{h.layers.test(e.getRoot().layers)&&e.update(t)}),_n.forEach(e=>e.update()),At.forEach(e=>e.update(t))),ct.forEach(e=>e.update()),Bt.update(),ot&&ot.update(),b.debug&&vt&&vt.update(),it.update(),function(e){const t=b.debug&&tt.enabled;t&&tt.update(e),it.isPostProcessingDisabled||t?et.render(i,h):nt.render(e)}(e),requestAnimationFrame(In.bind(this))}const Fn=window.ResizeObserver||de;function Ln(e){let t,n,r;tt=new Pe(h.position,h.quaternion,et.domElement),tt.setEnabled(!1),tt.settings.zoom.enabled=!1,tt.settings.pointer.lock=!1,tt.settings.sensitivity.translation=b.debugFlightSpeed,tt.settings.keyBindings.delete(Be.W),tt.settings.keyBindings.delete(Be.A),tt.settings.keyBindings.delete(Be.S),tt.settings.keyBindings.delete(Be.D),tt.settings.keyBindings.delete(Be.X),tt.settings.keyBindings.delete(Be.SPACE),tt.settings.keyBindings.delete(Be.PAGE_DOWN),tt.settings.keyBindings.delete(Be.PAGE_UP),Object.defineProperty(b,"debugFlightSpeed",{get:()=>b._debugFlightSpeed,set(e){b._debugFlightSpeed=e,tt.settings.sensitivity.translation=e}}),B.mainScene=e,Ft(B.mainScene.scene,B.mainScene.animations),n=b.cameraName?f(b.cameraName,B.mainScene.cameras):B.mainScene.cameras[0],r=b.cameraAnimationName?function(e,t){let n=t.filter(t=>t.name===e)[0];if(void 0!==n)return n;console.error(" "+e+"   ",t)}(b.cameraAnimationName,B.mainScene.animations):B.mainScene.animations[0],n&&r&&(d(n),h.fov=u.fov,t=new Lt(B.mainScene.scene,B.mainScene.animations,r.duration)),i.add(B.mainScene.scene),tt.camera=u}function Rn(){b.debug&&console.log(B),ot=new st,b.debug&&(vt=new yt),ot.avgFpsEnabled=!1,setTimeout(()=>{ot.avgFpsEnabled=!0},7500),Dn.call(this,b.keyframes),At.forEach(e=>{e.onAfterSceneInit()}),In()}let Pn=new t.AudioLoader(Ze);var On=function(e){t.DataTextureLoader.call(this,e),this.type=t.UnsignedByteType};On.prototype=Object.assign(Object.create(t.DataTextureLoader.prototype),{constructor:On,parse:function(e){var n=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},i=function(e,t,n){t=t||1024;for(var i=e.pos,r=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));0>(r=s.indexOf("\n"))&&a<t&&i<e.byteLength;)o+=s,a+=s.length,i+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<r&&(!1!==n&&(e.pos+=a+r+1),o+s.slice(0,r))},r=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function n(n){e[0]=n;var i=t[0],r=i>>16&32768,a=i>>12&2047,o=i>>23&255;return o<103?r:o>142?(r|=31744,r|=(255==o?0:1)&&8388607&i):o<113?r|=((a|=2048)>>114-o)+(a>>113-o&1):(r|=o-112<<10|a>>1,r+=1&a)}return function(e,t,i,r){var a=e[t+3],o=Math.pow(2,a-128)/255;i[r+0]=n(e[t+0]*o),i[r+1]=n(e[t+1]*o),i[r+2]=n(e[t+2]*o)}}(),a=new Uint8Array(e);a.pos=0;var o,s,c,l,u,h,d=function(e){var t,r,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,c=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u=a;if(e.pos>=e.byteLength||!(t=i(e)))return n(1,"no header found");if(!(r=t.match(/^#\?(\S+)$/)))return n(3,"bad initial token");for(u.valid|=1,u.programtype=r[1],u.string+=t+"\n";!1!==(t=i(e));)if(u.string+=t+"\n","#"!==t.charAt(0)){if((r=t.match(o))&&(u.gamma=parseFloat(r[1],10)),(r=t.match(s))&&(u.exposure=parseFloat(r[1],10)),(r=t.match(c))&&(u.valid|=2,u.format=r[1]),(r=t.match(l))&&(u.valid|=4,u.height=parseInt(r[1],10),u.width=parseInt(r[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=t+"\n";return 2&u.valid?4&u.valid?u:n(3,"missing image size specifier"):n(3,"missing format specifier")}(a);if(-1!==d){var f=d.width,p=d.height,m=function(e,t,i){var r,a,o,s,c,l,u,h,d,f,p,m,A,g=t,v=i;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return n(3,"wrong scanline width");if(!(r=new Uint8Array(4*t*i)).length)return n(4,"unable to allocate buffer space");for(a=0,o=0,h=4*g,A=new Uint8Array(4),l=new Uint8Array(h);v>0&&o<e.byteLength;){if(o+4>e.byteLength)return n(1);if(A[0]=e[o++],A[1]=e[o++],A[2]=e[o++],A[3]=e[o++],2!=A[0]||2!=A[1]||(A[2]<<8|A[3])!=g)return n(3,"bad rgbe scanline format");for(u=0;u<h&&o<e.byteLength;){if((m=(s=e[o++])>128)&&(s-=128),0===s||u+s>h)return n(3,"bad scanline data");if(m)for(c=e[o++],d=0;d<s;d++)l[u++]=c;else l.set(e.subarray(o,o+s),u),u+=s,o+=s}for(f=g,d=0;d<f;d++)p=0,r[a]=l[d+p],p+=g,r[a+1]=l[d+p],p+=g,r[a+2]=l[d+p],p+=g,r[a+3]=l[d+p],a+=4;v--}return r}(a.subarray(a.pos),f,p);if(-1!==m){switch(this.type){case t.UnsignedByteType:var A=m,g=t.RGBEFormat,v=t.UnsignedByteType;break;case t.FloatType:for(var y=m.length/4*3,E=new Float32Array(y),x=0;x<y;x++)c=E,l=3*x,u=void 0,h=void 0,u=(o=m)[3+(s=4*x)],h=Math.pow(2,u-128)/255,c[l+0]=o[s+0]*h,c[l+1]=o[s+1]*h,c[l+2]=o[s+2]*h;A=E,g=t.RGBFormat,v=t.FloatType;break;case t.HalfFloatType:y=m.length/4*3;var b=new Uint16Array(y);for(x=0;x<y;x++)r(m,4*x,b,3*x);A=b,g=t.RGBFormat,v=t.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}var B={};return B.width=f,B.height=p,B.data=A,B.header=d.string,B.gamma=d.gamma,B.exposure=d.exposure,B.format=g,B.type=v,B}}return null},setDataType:function(e){return this.type=e,this},load:function(e,n,i,r){return t.DataTextureLoader.prototype.load.call(this,e,(function(e,i){switch(e.type){case t.UnsignedByteType:e.encoding=t.RGBEEncoding,e.minFilter=t.NearestFilter,e.magFilter=t.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case t.FloatType:case t.HalfFloatType:e.encoding=t.LinearEncoding,e.minFilter=t.LinearFilter,e.magFilter=t.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}n&&n(e,i)}),i,r)}});let Nn,Un=(new On).setDataType(t.UnsignedByteType);var Gn=function(){function e(e){t.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new c(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new h(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new o(e)})),this.register((function(e){return new d(e)}))}function n(){var e={},t={get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}};return t}e.prototype=Object.assign(Object.create(t.Loader.prototype),{constructor:e,load:function(e,n,i,r){var a,o=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:t.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},c=new t.FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,(function(t){try{o.parse(t,a,(function(t){n(t),o.manager.itemEnd(e)}),s)}catch(e){s(e)}}),i,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,n,i,o){var c,l={},u={};if("string"==typeof e)c=e;else if(t.LoaderUtils.decodeText(new Uint8Array(e,0,4))===f){try{l[r.KHR_BINARY_GLTF]=new A(e)}catch(e){return void(o&&o(e))}c=l[r.KHR_BINARY_GLTF].content}else c=t.LoaderUtils.decodeText(new Uint8Array(e));var h=JSON.parse(c);if(void 0===h.asset||h.asset.version[0]<2)o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var d={};d.path=n||this.resourcePath||"",d.crossOrigin=this.crossOrigin,d.manager=this.manager,d.ktx2Loader=this.ktx2Loader,d.meshoptDecoder=this.meshoptDecoder;var p=new $(h,d);p.fileLoader.setRequestHeader(this.requestHeader);for(var m=0;m<this.pluginCallbacks.length;m++){var y=this.pluginCallbacks[m](p);u[y.name]=y,l[y.name]=!0}if(h.extensionsUsed)for(m=0;m<h.extensionsUsed.length;++m){var b=h.extensionsUsed[m],B=h.extensionsRequired||[];switch(b){case r.KHR_MATERIALS_UNLIT:l[b]=new s;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:l[b]=new E;break;case r.KHR_DRACO_MESH_COMPRESSION:l[b]=new g(h,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:l[b]=new a(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:l[b]=new v;break;case r.KHR_MESH_QUANTIZATION:l[b]=new x;break;default:B.indexOf(b)>=0&&void 0===u[b]&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}p.setExtensions(l),p.setPlugins(u),p.parse(i,o)}}});var i={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"},r=i;function a(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){var t={refs:{},uses:{}};this.parser=e,this.name=r.KHR_LIGHTS_PUNCTUAL,this.cache=t}function s(){this.name=r.KHR_MATERIALS_UNLIT}function c(e){this.parser=e,this.name=r.KHR_MATERIALS_CLEARCOAT}function l(e){this.parser=e,this.name=r.KHR_MATERIALS_TRANSMISSION}function u(e){this.parser=e,this.name=r.KHR_TEXTURE_BASISU}function h(e){this.parser=e,this.name=r.EXT_TEXTURE_WEBP,this.isSupported=null}function d(e){this.name=r.EXT_MESHOPT_COMPRESSION,this.parser=e}o.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,i=t.length;n<i;n++){var r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}},o.prototype._loadLight=function(e){var n=this.parser,i="light:"+e,r=n.cache.get(i);if(r)return r;var a,o=n.json,s=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],c=new t.Color(16777215);void 0!==s.color&&c.fromArray(s.color);var l=void 0!==s.range?s.range:0;switch(s.type){case"directional":(a=new t.DirectionalLight(c)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new t.PointLight(c)).distance=l;break;case"spot":(a=new t.SpotLight(c)).distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+s.type+'".')}return a.position.set(0,0,0),a.decay=2,void 0!==s.intensity&&(a.intensity=s.intensity),a.name=n.createUniqueName(s.name||"light_"+e),r=Promise.resolve(a),n.cache.add(i,r),r},o.prototype.createNodeAttachment=function(e){var t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))},s.prototype.getMaterialType=function(){return t.MeshBasicMaterial},s.prototype.extendParams=function(e,n,i){var r=[];e.color=new t.Color(1,1,1),e.opacity=1;var a=n.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var o=a.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==a.baseColorTexture&&r.push(i.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(r)},c.prototype.getMaterialType=function(e){var n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?t.MeshPhysicalMaterial:null},c.prototype.extendMaterialParams=function(e,n){var i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(n.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&a.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&a.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(a.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){var s=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new t.Vector2(s,s)}return Promise.all(a)},l.prototype.getMaterialType=function(e){var n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?t.MeshPhysicalMaterial:null},l.prototype.extendMaterialParams=function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)},u.prototype.loadTexture=function(e){var t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;var r=i.extensions[this.name],a=n.images[r.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,o)},h.prototype.loadTexture=function(e){var t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;var a=r.extensions[t],o=i.images[a.source],s=o.uri?n.options.manager.getHandler(o.uri):n.textureLoader;return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,o,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))},h.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported},d.prototype.loadBufferView=function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,a.ready]).then((function(e){var t=i.byteOffset||0,n=i.byteLength||0,r=i.count,o=i.byteStride,s=new ArrayBuffer(r*o),c=new Uint8Array(e[0],t,n);return a.decodeGltfBuffer(new Uint8Array(s),r,o,c,i.mode,i.filter),s}))}return null};var f="glTF",p=1313821514,m=5130562;function A(e){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(e,0,12),i={};if(i.magic=t.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),i.version=n.getUint32(4,!0),i.length=n.getUint32(8,!0),this.header=i,this.header.magic!==f)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var a=new DataView(e,12),o=0;o<a.byteLength;){var s=a.getUint32(o,!0);o+=4;var c=a.getUint32(o,!0);if(o+=4,c===p){var l=new Uint8Array(e,12+o,s);this.content=t.LoaderUtils.decodeText(l)}else if(c===m){var u=12+o;this.body=e.slice(u,u+s)}o+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function g(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function v(){this.name=r.KHR_TEXTURE_TRANSFORM}function y(e){t.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var n={};n.value=(new t.Color).setHex(16777215);var i={value:1},r={value:null},a={value:null},o={};o.specular=n,o.glossiness=i,o.specularMap=r,o.glossinessMap=a;var s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),c=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),d=o;this._extraUniforms=d,this.onBeforeCompile=function(e){for(var t in d)e.uniforms[t]=d[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",c).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",h)},Object.defineProperties(this,{specular:{get:function(){return d.specular.value},set:function(e){d.specular.value=e}},specularMap:{get:function(){return d.specularMap.value},set:function(e){d.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return d.glossiness.value},set:function(e){d.glossiness.value=e}},glossinessMap:{get:function(){return d.glossinessMap.value},set:function(e){d.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function E(){var e={};return e.name=r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,e.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],e.getMaterialType=function(){return y},e.extendParams=function(e,n,i){var r=n.extensions[this.name];e.color=new t.Color(1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&a.push(i.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new t.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new t.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var s=r.specularGlossinessTexture;a.push(i.assignTexture(e,"glossinessMap",s)),a.push(i.assignTexture(e,"specularMap",s))}return Promise.all(a)},e.createMaterial=function(e){var n=new y(e);return n.fog=!0,n.color=e.color,n.map=void 0===e.map?null:e.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=void 0===e.aoMap?null:e.aoMap,n.aoMapIntensity=1,n.emissive=e.emissive,n.emissiveIntensity=1,n.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,n.bumpMap=void 0===e.bumpMap?null:e.bumpMap,n.bumpScale=1,n.normalMap=void 0===e.normalMap?null:e.normalMap,n.normalMapType=t.TangentSpaceNormalMap,e.normalScale&&(n.normalScale=e.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=void 0===e.specularMap?null:e.specularMap,n.specular=e.specular,n.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,n.glossiness=e.glossiness,n.alphaMap=null,n.envMap=void 0===e.envMap?null:e.envMap,n.envMapIntensity=1,n.refractionRatio=747-746.02,n},e}function x(){this.name=r.KHR_MESH_QUANTIZATION}function b(e,n,i,r){t.Interpolant.call(this,e,n,i,r)}g.prototype.decodePrimitive=function(e,t){var n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},c={};for(var l in a){var u=Q[l]||l.toLowerCase();o[u]=a[l]}for(l in e.attributes)if(u=Q[l]||l.toLowerCase(),void 0!==a[l]){var h=n.accessors[e.attributes[l]],d=N[h.componentType];c[u]=d,s[u]=!0===h.normalized}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(var n in e.attributes){var i=e.attributes[n],r=s[n];void 0!==r&&(i.normalized=r)}t(e)}),o,c)}))}))},v.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},y.prototype=Object.create(t.MeshStandardMaterial.prototype),y.prototype.constructor=y,y.prototype.copy=function(e){return t.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},b.prototype=Object.create(t.Interpolant.prototype),b.prototype.constructor=b,b.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i,a=0;a!==i;a++)t[a]=n[r+a];return t},b.prototype.beforeStart_=b.prototype.copySampleValue_,b.prototype.afterEnd_=b.prototype.copySampleValue_,b.prototype.interpolate_=function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,c=3*o,l=i-t,u=(n-t)/l,h=u*u,d=h*u,f=e*c,p=f-c,m=-2*d+3*h,A=d-h,g=1-m,v=A-h+u,y=0;y!==o;y++){var E=a[p+y+o],x=a[p+y+s]*l,b=a[f+y+o],B=a[f+y]*l;r[y]=g*E+v*x+m*b+A*B}return r};var B={};B[5120]=Int8Array,B[5121]=Uint8Array,B[5122]=Int16Array,B[5123]=Uint16Array,B[5125]=Uint32Array,B[5126]=Float32Array;var C={};C[9728]=t.NearestFilter,C[9729]=t.LinearFilter,C[9984]=t.NearestMipmapNearestFilter,C[9985]=t.LinearMipmapNearestFilter,C[9986]=t.NearestMipmapLinearFilter,C[9987]=t.LinearMipmapLinearFilter;var w={};w[33071]=t.ClampToEdgeWrapping,w[33648]=t.MirroredRepeatWrapping,w[10497]=t.RepeatWrapping;var M={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},D={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},S={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_={CUBICSPLINE:void 0};_.LINEAR=t.InterpolateLinear,_.STEP=t.InterpolateDiscrete;var T=0,I=1,F=2,L=3,R=4,P=5,O=6,N=B,U=C,G=w,H=M,Q=D,k=S,z=_,V="OPAQUE",W="MASK",j="BLEND";function J(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function Y(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new t.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:t.FrontSide})),e.DefaultMaterial}function X(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function q(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function K(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length)for(e.morphTargetDictionary={},n=0,i=r.length;n<i;n++)e.morphTargetDictionary[r[n]]=n;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Z(e){for(var t="",n=Object.keys(e).sort(),i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function $(e,i){var r={refs:{},uses:{}},a={refs:{},uses:{}},o={refs:{},uses:{}};this.json=e||{},this.extensions={},this.plugins={},this.options=i||{},this.cache=new n,this.associations=new Map,this.primitiveCache={},this.meshCache=r,this.cameraCache=a,this.lightCache=o,this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new t.ImageBitmapLoader(this.options.manager):this.textureLoader=new t.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new t.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function ee(e,n,i){var r=n.attributes,a=[];function o(t,n){return i.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var s in r){var c=Q[s]||s.toLowerCase();c in e.attributes||a.push(o(r[s],c))}if(void 0!==n.indices&&!e.index){var l=i.getDependency("accessor",n.indices).then((function(t){e.setIndex(t)}));a.push(l)}return q(e,n),function(e,n,i){var r=n.attributes,a=new t.Box3;if(void 0!==r.POSITION){var o=(f=i.json.accessors[r.POSITION]).min,s=f.max;if(void 0!==o&&void 0!==s){a.set(new t.Vector3(o[0],o[1],o[2]),new t.Vector3(s[0],s[1],s[2]));var c=n.targets;if(void 0!==c){for(var l=new t.Vector3,u=new t.Vector3,h=0,d=c.length;h<d;h++){var f,p=c[h];void 0!==p.POSITION&&(o=(f=i.json.accessors[p.POSITION]).min,s=f.max,void 0!==o&&void 0!==s?(u.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),u.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),u.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),l.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}a.expandByVector(l)}e.boundingBox=a;var m=new t.Sphere;a.getCenter(m.center),m.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,n,i),Promise.all(a).then((function(){return void 0!==n.targets?function(e,t,n){for(var i=!1,r=!1,a=0,o=t.length;a<o&&(void 0!==(l=t[a]).POSITION&&(i=!0),void 0!==l.NORMAL&&(r=!0),!i||!r);a++);if(!i&&!r)return Promise.resolve(e);var s=[],c=[];for(a=0,o=t.length;a<o;a++){var l=t[a];if(i){var u=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;s.push(u)}r&&(u=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal,c.push(u))}return Promise.all([Promise.all(s),Promise.all(c)]).then((function(t){var n=t[0],a=t[1];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,n.targets,i):e}))}function te(e,n){var i=e.getIndex();if(null===i){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<a.count;o++)r.push(o);e.setIndex(r),i=e.getIndex()}var s=i.count-2,c=[];if(n===t.TriangleFanDrawMode)for(o=1;o<=s;o++)c.push(i.getX(0)),c.push(i.getX(o)),c.push(i.getX(o+1));else for(o=0;o<s;o++)o%2==0?(c.push(i.getX(o)),c.push(i.getX(o+1)),c.push(i.getX(o+2))):(c.push(i.getX(o+2)),c.push(i.getX(o+1)),c.push(i.getX(o)));c.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(c),l}return $.prototype.setExtensions=function(e){this.extensions=e},$.prototype.setPlugins=function(e){this.plugins=e},$.prototype.parse=function(e,t){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var a={};a.scene=t[0][i.scene||0],a.scenes=t[0],a.animations=t[1],a.cameras=t[2],a.asset=i.asset,a.parser=n,a.userData={};var o=a;X(r,o,i),q(o,i),e(o)})).catch(t)},$.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i=0,r=t.length;i<r;i++)for(var a=t[i].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var c=0,l=e.length;c<l;c++){var u=e[c];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(n[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}},$.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},$.prototype._getNodeRef=function(e,t,n){if(e.refs[t]<=1)return n;var i=n.clone();return i.name+="_instance_"+e.uses[t]++,i},$.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}},$.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],i=0;i<t.length;i++){var r=e(t[i]);r&&n.push(r)}return n},$.prototype.getDependency=function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i},$.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t},$.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,r){n.load(J(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},$.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))},$.prototype.loadAccessor=function(e){var n=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,o,s=e[0],c=H[r.type],l=N[r.componentType],u=l.BYTES_PER_ELEMENT,h=u*c,d=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(f&&f!==h){var m=Math.floor(d/f),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count,g=n.cache.get(A);g||(a=new l(s,m*f,r.count*f/u),g=new t.InterleavedBuffer(a,f/u),n.cache.add(A,g)),o=new t.InterleavedBufferAttribute(g,c,d%f/u,p)}else a=null===s?new l(r.count*c):new l(s,d,r.count*c),o=new t.BufferAttribute(a,c,p);if(void 0!==r.sparse){var v=H.SCALAR,y=N[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,b=new y(e[1],E,r.sparse.count*v),B=new l(e[2],x,r.sparse.count*c);null!==s&&(o=new t.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(var C=0,w=b.length;C<w;C++){var M=b[C];if(o.setX(M,B[C*c]),c>=2&&o.setY(M,B[C*c+1]),c>=3&&o.setZ(M,B[C*c+2]),c>=4&&o.setW(M,B[C*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},$.prototype.loadTexture=function(e){var t,n,i=this.json,a=this.options,o=i.textures[e],s=o.extensions||{};return(t=s[r.MSFT_TEXTURE_DDS]?i.images[s[r.MSFT_TEXTURE_DDS].source]:i.images[o.source]).uri&&(n=a.manager.getHandler(t.uri)),n||(n=s[r.MSFT_TEXTURE_DDS]?this.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,n)},$.prototype.loadTextureImage=function(e,n,i){var r=this,a=this.json,o=this.options,s=a.textures[e],c=self.URL||self.webkitURL,l=n.uri,u=!1,h=!0;return"image/jpeg"===n.mimeType&&(h=!1),void 0!==n.bufferView&&(l=r.getDependency("bufferView",n.bufferView).then((function(e){if("image/png"===n.mimeType){var t=new DataView(e,25,1).getUint8(0,!1);h=6===t||4===t||3===t}u=!0;var i={};i.type=n.mimeType;var r=new Blob([e],i);return l=c.createObjectURL(r)}))),Promise.resolve(l).then((function(e){return new Promise((function(n,r){var a=n;!0===i.isImageBitmapLoader&&(a=function(e){n(new t.CanvasTexture(e))}),i.load(J(e,o.path),a,void 0,r)}))})).then((function(n){!0===u&&c.revokeObjectURL(l),n.flipY=!1,s.name&&(n.name=s.name),h||(n.format=t.RGBFormat);var i=(a.samplers||{})[s.sampler]||{},o={type:"textures"};return o.index=e,n.magFilter=U[i.magFilter]||t.LinearFilter,n.minFilter=U[i.minFilter]||t.LinearMipmapLinearFilter,n.wrapS=G[i.wrapS]||t.RepeatWrapping,n.wrapT=G[i.wrapT]||t.RepeatWrapping,r.associations.set(n,o),n}))},$.prototype.assignTexture=function(e,t,n){var i=this;return this.getDependency("texture",n.index).then((function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[r.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(a);a=i.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}e[t]=a}))},$.prototype.assignFinalMaterial=function(e){var n=e.geometry,i=e.material,r=void 0!==n.attributes.tangent,a=void 0!==n.attributes.color,o=void 0===n.attributes.normal,s=!0===e.isSkinnedMesh,c=Object.keys(n.morphAttributes).length>0,l=c&&void 0!==n.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+i.uuid,h=this.cache.get(u);h||(h=new t.PointsMaterial,t.Material.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,h.sizeAttenuation=!1,this.cache.add(u,h)),i=h}else if(e.isLine){u="LineBasicMaterial:"+i.uuid;var d=this.cache.get(u);d||(d=new t.LineBasicMaterial,t.Material.prototype.copy.call(d,i),d.color.copy(i.color),this.cache.add(u,d)),i=d}if(r||a||o||s||c){u="ClonedMaterial:"+i.uuid+":",i.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),s&&(u+="skinning:"),r&&(u+="vertex-tangents:"),a&&(u+="vertex-colors:"),o&&(u+="flat-shading:"),c&&(u+="morph-targets:"),l&&(u+="morph-normals:");var f=this.cache.get(u);f||(f=i.clone(),s&&(f.skinning=!0),r&&(f.vertexTangents=!0),a&&(f.vertexColors=!0),o&&(f.flatShading=!0),c&&(f.morphTargets=!0),l&&(f.morphNormals=!0),this.cache.add(u,f),this.associations.set(f,this.associations.get(i))),i=f}i.aoMap&&void 0===n.attributes.uv2&&void 0!==n.attributes.uv&&n.setAttribute("uv2",n.attributes.uv),i.normalScale&&!r&&(i.normalScale.y=-i.normalScale.y),i.clearcoatNormalScale&&!r&&(i.clearcoatNormalScale.y=-i.clearcoatNormalScale.y),e.material=i},$.prototype.getMaterialType=function(){return t.MeshStandardMaterial},$.prototype.loadMaterial=function(e){var n,i=this,a=this.json,o=this.extensions,s=a.materials[e],c={},l=s.extensions||{},u=[];if(l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=h.getMaterialType(),u.push(h.extendParams(c,s,i))}else if(l[r.KHR_MATERIALS_UNLIT]){var d=o[r.KHR_MATERIALS_UNLIT];n=d.getMaterialType(),u.push(d.extendParams(c,s,i))}else{var f=s.pbrMetallicRoughness||{};if(c.color=new t.Color(1,1,1),c.opacity=1,Array.isArray(f.baseColorFactor)){var p=f.baseColorFactor;c.color.fromArray(p),c.opacity=p[3]}void 0!==f.baseColorTexture&&u.push(i.assignTexture(c,"map",f.baseColorTexture)),c.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,c.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(u.push(i.assignTexture(c,"metalnessMap",f.metallicRoughnessTexture)),u.push(i.assignTexture(c,"roughnessMap",f.metallicRoughnessTexture))),n=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,c)}))))}!0===s.doubleSided&&(c.side=t.DoubleSide);var m=s.alphaMode||V;return m===j?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===W&&(c.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&n!==t.MeshBasicMaterial&&(u.push(i.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new t.Vector2(1,1),void 0!==s.normalTexture.scale&&c.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&n!==t.MeshBasicMaterial&&(u.push(i.assignTexture(c,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(c.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&n!==t.MeshBasicMaterial&&(c.emissive=(new t.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&n!==t.MeshBasicMaterial&&u.push(i.assignTexture(c,"emissiveMap",s.emissiveTexture)),Promise.all(u).then((function(){var a,l={type:"materials"};return l.index=e,a=n===y?o[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):new n(c),s.name&&(a.name=s.name),a.map&&(a.map.encoding=t.sRGBEncoding),a.emissiveMap&&(a.emissiveMap.encoding=t.sRGBEncoding),q(a,s),i.associations.set(a,l),s.extensions&&X(o,a,s),a}))},$.prototype.createUniqueName=function(e){for(var n=t.PropertyBinding.sanitizeNodeName(e||""),i=1;this.nodeNamesUsed[n];++i)n=e+"_"+i;return this.nodeNamesUsed[n]=!0,n},$.prototype.loadGeometries=function(e){var n=this,i=this.extensions,a=this.primitiveCache;function o(e){return i[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,n).then((function(t){return ee(t,e,n)}))}for(var s,c,l=[],u=0,h=e.length;u<h;u++){var d,f=e[u],p=(c=void 0,(c=(s=f).extensions&&s.extensions[r.KHR_DRACO_MESH_COMPRESSION])?"draco:"+c.bufferView+":"+c.indices+":"+Z(c.attributes):s.indices+":"+Z(s.attributes)+":"+s.mode),m=a[p];m?l.push(m.promise):(d=f.extensions&&f.extensions[r.KHR_DRACO_MESH_COMPRESSION]?o(f):ee(new t.BufferGeometry,f,n),a[p]={primitive:f,promise:d},l.push(d))}return Promise.all(l)},$.prototype.loadMesh=function(e){for(var n=this,i=this.json.meshes[e],r=i.primitives,a=[],o=0,s=r.length;o<s;o++){var c=void 0===r[o].material?Y(this.cache):this.getDependency("material",r[o].material);a.push(c)}return a.push(n.loadGeometries(r)),Promise.all(a).then((function(a){for(var o=a.slice(0,a.length-1),s=a[a.length-1],c=[],l=0,u=s.length;l<u;l++){var h,d=s[l],f=r[l],p=o[l];if(f.mode===R||f.mode===P||f.mode===O||void 0===f.mode)!0!==(h=!0===i.isSkinnedMesh?new t.SkinnedMesh(d,p):new t.Mesh(d,p)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),f.mode===P?h.geometry=te(h.geometry,t.TriangleStripDrawMode):f.mode===O&&(h.geometry=te(h.geometry,t.TriangleFanDrawMode));else if(f.mode===I)h=new t.LineSegments(d,p);else if(f.mode===L)h=new t.Line(d,p);else if(f.mode===F)h=new t.LineLoop(d,p);else{if(f.mode!==T)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);h=new t.Points(d,p)}Object.keys(h.geometry.morphAttributes).length>0&&K(h,i),h.name=n.createUniqueName(i.name||"mesh_"+e),q(h,i),n.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];var m=new t.Group;for(l=0,u=c.length;l<u;l++)m.add(c[l]);return m}))},$.prototype.loadCamera=function(e){var n,i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?n=new t.PerspectiveCamera(t.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(n=new t.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),q(n,i),Promise.resolve(n);console.warn("THREE.GLTFLoader: Missing camera parameters.")},$.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},$.prototype.loadAnimation=function(e){for(var n=this.json.animations[e],i=[],r=[],a=[],o=[],s=[],c=0,l=n.channels.length;c<l;c++){var u=n.channels[c],h=n.samplers[u.sampler],d=u.target,f=void 0!==d.node?d.node:d.id,p=void 0!==n.parameters?n.parameters[h.input]:h.input,m=void 0!==n.parameters?n.parameters[h.output]:h.output;i.push(this.getDependency("node",f)),r.push(this.getDependency("accessor",p)),a.push(this.getDependency("accessor",m)),o.push(h),s.push(d)}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(a),Promise.all(o),Promise.all(s)]).then((function(i){for(var r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=[],u=0,h=r.length;u<h;u++){var d=r[u],f=a[u],p=o[u],m=s[u],A=c[u];if(void 0!==d){var g;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,k[A.path]){case k.weights:g=t.NumberKeyframeTrack;break;case k.rotation:g=t.QuaternionKeyframeTrack;break;case k.position:case k.scale:default:g=t.VectorKeyframeTrack}var v=d.name?d.name:d.uuid,y=void 0!==m.interpolation?z[m.interpolation]:t.InterpolateLinear,E=[];k[A.path]===k.weights?d.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&E.push(e.name?e.name:e.uuid)})):E.push(v);var x=p.array;if(p.normalized){var B;if(x.constructor===Int8Array)B=1/127;else if(x.constructor===Uint8Array)B=1/255;else if(x.constructor==Int16Array)B=1/32767;else{if(x.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");B=1/65535}for(var C=new Float32Array(x.length),w=0,M=x.length;w<M;w++)C[w]=x[w]*B;x=C}for(w=0,M=E.length;w<M;w++){var D=new g(E[w]+"."+k[A.path],f.array,x,y);"CUBICSPLINE"===m.interpolation&&(D.createInterpolant=function(e){return new b(this.times,this.values,this.getValueSize()/3,e)},D.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(D)}}}var S=n.name?n.name:"animation_"+e;return new t.AnimationClip(S,void 0,l)}))},$.prototype.loadNode=function(e){var n,i=this.json,r=this.extensions,a=this,o=i.nodes[e],s=o.name?a.createUniqueName(o.name):"";return(n=[],void 0!==o.mesh&&n.push(a.getDependency("mesh",o.mesh).then((function(e){var t=a._getNodeRef(a.meshCache,o.mesh,e);return void 0!==o.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=o.weights.length;t<n;t++)e.morphTargetInfluences[t]=o.weights[t]})),t}))),void 0!==o.camera&&n.push(a.getDependency("camera",o.camera).then((function(e){return a._getNodeRef(a.cameraCache,o.camera,e)}))),a._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){n.push(e)})),Promise.all(n)).then((function(n){var i;if((i=!0===o.isBone?new t.Bone:n.length>1?new t.Group:1===n.length?n[0]:new t.Object3D)!==n[0])for(var c=0,l=n.length;c<l;c++)i.add(n[c]);if(o.name&&(i.userData.name=o.name,i.name=s),q(i,o),o.extensions&&X(r,i,o),void 0!==o.matrix){var u=new t.Matrix4;u.fromArray(o.matrix),i.applyMatrix4(u)}else void 0!==o.translation&&i.position.fromArray(o.translation),void 0!==o.rotation&&i.quaternion.fromArray(o.rotation),void 0!==o.scale&&i.scale.fromArray(o.scale);var h={type:"nodes"};return h.index=e,a.associations.set(i,h),i}))},$.prototype.loadScene=function(){function e(n,i,r,a){var o=r.nodes[n];return a.getDependency("node",n).then((function(e){return void 0===o.skin?e:a.getDependency("skin",o.skin).then((function(e){for(var t=[],i=0,r=(n=e).joints.length;i<r;i++)t.push(a.getDependency("node",n.joints[i]));return Promise.all(t)})).then((function(i){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],o=0,s=i.length;o<s;o++){var c=i[o];if(c){r.push(c);var l=new t.Matrix4;void 0!==n.inverseBindMatrices&&l.fromArray(n.inverseBindMatrices.array,16*o),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[o])}e.bind(new t.Skeleton(r,a),e.matrixWorld)}})),e}));var n})).then((function(t){i.add(t);var n=[];if(o.children)for(var s=o.children,c=0,l=s.length;c<l;c++){var u=s[c];n.push(e(u,t,r,a))}return Promise.all(n)}))}return function(n){var i=this.json,r=this.extensions,a=this.json.scenes[n],o=new t.Group;a.name&&(o.name=this.createUniqueName(a.name)),q(o,a),a.extensions&&X(r,o,a);for(var s=a.nodes||[],c=[],l=0,u=s.length;l<u;l++)c.push(e(s[l],o,i,this));return Promise.all(c).then((function(){return o}))}}(),e}(),Hn=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),n={supported:!1};if("object"!=typeof WebAssembly)return n;var i,r="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";WebAssembly.validate(e)&&(r="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",console.log("Warning: meshopt_decoder is using experimental SIMD support"));var a=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),i=0;i<e.length;++i){var r=e.charCodeAt(i);n[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}var a=0;for(i=0;i<e.length;++i)n[a++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,a)}(r),{}).then((function(e){(i=e.instance).exports.__wasm_call_ctors()}));function o(e,t,n,r,a,o){var s=i.exports.sbrk,c=n+3&-4,l=s(c*r),u=s(a.length),h=new Uint8Array(i.exports.memory.buffer);h.set(a,u);var d=e(l,n,r,u,a.length);if(0==d&&o&&o(l,c,r),t.set(h.subarray(l,l+n*r)),s(l-s(0)),0!=d)throw new Error("Malformed buffer data: "+d)}var s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},l=s,u=c,h={};return h.ready=a,h.supported=!0,h.decodeVertexBuffer=function(e,t,n,r,a){o(i.exports.meshopt_decodeVertexBuffer,e,t,n,r,i.exports[l[a]])},h.decodeIndexBuffer=function(e,t,n,r){o(i.exports.meshopt_decodeIndexBuffer,e,t,n,r)},h.decodeIndexSequence=function(e,t,n,r){o(i.exports.meshopt_decodeIndexSequence,e,t,n,r)},h.decodeGltfBuffer=function(e,t,n,r,a,s){o(i.exports[u[a]],e,t,n,r,i.exports[l[s]])},h}();function Qn(e,t=!1){var n=new Map,i=new Map,r=e.clone(t);return kn(e,r,(function(e,t){n.set(t,e),i.set(e,t)})),r.traverse((function(e){if(e.isSkinnedMesh){var t=e,r=n.get(e),a=r.skeleton.bones;t.skeleton=r.skeleton.clone(),t.bindMatrix.copy(r.bindMatrix),t.skeleton.bones=a.map((function(e){return i.get(e)})),t.bind(t.skeleton,t.bindMatrix)}})),r}function kn(e,t,n){n(e,t);for(let i=0;i<e.children.length;i++)kn(e.children[i],t.children[i],n)}var zn=function(e){var n={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},i={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"};t.Loader.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs=n,this.defaultAttributeTypes=i};zn.prototype=Object.assign(Object.create(t.Loader.prototype),{constructor:zn,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,n,i,r){var a=new t.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,e=>{var t={};t.attributeIDs=this.defaultAttributeIDs,t.attributeTypes=this.defaultAttributeTypes,t.useUniqueIDs=!1;var i=t;this.decodeGeometry(e,i).then(n).catch(r)},i,r)},decodeDracoFile:function(e,t,n,i){var r={};r.attributeIDs=n||this.defaultAttributeIDs,r.attributeTypes=i||this.defaultAttributeTypes,r.useUniqueIDs=!!n;var a=r;this.decodeGeometry(e,a).then(t)},decodeGeometry:function(e,t){for(var n in t.attributeTypes){var i=t.attributeTypes[n];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=i.name)}var r,a=JSON.stringify(t);if(zn.taskCache.has(e)){var o=zn.taskCache.get(e);if(o.key===a)return o.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var s=this.workerNextTaskID++,c=e.byteLength,l=this._getWorker(s,c).then(n=>(r=n,new Promise((n,i)=>{var a={};a.resolve=n,a.reject=i,r._callbacks[s]=a,r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),zn.taskCache.set(e,{key:a,promise:l}),l},_createGeometry:function(e){var n=new t.BufferGeometry;e.index&&n.setIndex(new t.BufferAttribute(e.index.array,1));for(var i=0;i<e.attributes.length;i++){var r=e.attributes[i],a=r.name,o=r.array,s=r.itemSize;n.setAttribute(a,new t.BufferAttribute(o,s))}return n},_loadLibrary:function(e,n){var i=new t.FileLoader(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((t,n)=>{i.load(e,t,void 0,n)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var i=zn.DRACOWorker.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{var n,i={type:"init"};return i.decoderConfig=this.decoderConfig,this.workerPool.length<this.workerLimit?((n=new Worker(this.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage(i),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(n)):this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1})),(n=this.workerPool[this.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),zn.DRACOWorker=function(){var e,t;function n(e,t,n,i,r,a){var o=a.num_components(),s=n.num_points()*o,c=s*r.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),u=e._malloc(c);t.GetAttributeDataArrayForAllPoints(n,a,l,c,u);var h=new r(e.HEAPF32.buffer,u,s).slice(),d={};return d.name=i,d.array=h,d.itemSize=o,e._free(u),d}onmessage=function(i){var r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){var n={};n.draco=e,t(n)},DracoDecoderModule(e)}));break;case"decode":var a=r.buffer,o=r.taskConfig;t.then(e=>{var t=e.draco,i=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var c=function(e,t,i,r){var a,o,s=r.attributeIDs,c=r.attributeTypes,l=t.GetEncodedGeometryType(i);if(l===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(i,a);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(i,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var u={index:null,attributes:[]},h=u;for(var d in s){var f,p,m=self[c[d]];if(r.useUniqueIDs)p=s[d],f=t.GetAttributeByUniqueId(a,p);else{if(-1===(p=t.GetAttributeId(a,e[s[d]])))continue;f=t.GetAttribute(a,p)}h.attributes.push(n(e,t,a,d,m,f))}return l===e.TRIANGULAR_MESH&&(h.index=function(e,t,n){var i=3*n.num_faces(),r=4*i,a=e._malloc(r);t.GetTrianglesUInt32Array(n,r,a);var o=new Uint32Array(e.HEAPF32.buffer,a,i).slice(),s={};return s.array=o,s.itemSize=1,e._free(a),s}(e,t,a)),e.destroy(a),h}(t,i,s,o),l=c.attributes.map(e=>e.array.buffer);c.index&&l.push(c.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:c},l)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(s),t.destroy(i)}})}}},zn.taskCache=new WeakMap,zn.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},zn.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},zn.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},zn.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};const Vn=new zn(Ze);Object.defineProperty(b,"dracoPath",{get:()=>b._dracoPath,set(e){b._dracoPath=e,e&&Vn.setDecoderPath(e)}});const Wn=new Gn(Ze);function jn(e,t){return null===Wn.ktx2Loader&&b.basisPath&&Wn.setKTX2Loader($e),null===Wn.dracoLoader&&b.dracoPath&&Wn.setDRACOLoader(Vn),new Promise((n,i)=>{Wn.load(e,e=>{t(e),n()},null,e=>{const t=e.target;t&&404===t.status?(console.error("404: "+t.responseURL+"  "),n()):(console.error(e),i())})})}function Jn(){return[...new Set(b.chunks.map(e=>e.path))].map(e=>jn(e,t=>{!function(e,t){let n,r=B.chunks[e]=t,a=b.chunks.filter(t=>t.path===e)[0];if(void 0===r)return void console.error("   -  path "+a.path);if(n=a.partial?r.scene.getObjectByName(a.parent):r.scene,!n)return void console.error("  "+a.path+"   -   "+a.parent);let o=Qn(n,!0);a.name&&(o.name=a.name),void 0!==a.visible&&(o.visible=a.visible),a.position&&(o.position.x=a.position.x,o.position.y=a.position.y,o.position.z=a.position.z),a.scale&&(o.scale.x=a.scale.x,o.scale.y=a.scale.y,o.scale.z=a.scale.z),a.rotation&&(o.rotation.x=a.rotation.x,o.rotation.y=a.rotation.y,o.rotation.z=a.rotation.z),a.quaternion&&(o.quaternion.x=a.quaternion.x,o.quaternion.y=a.quaternion.y,o.quaternion.z=a.quaternion.z,o.quaternion.w=a.quaternion.w),Ft(o,r.animations),r.animations.forEach(e=>{new Lt(o,[e],e.duration)}),i.add(o)}(e,t)}))}Wn.setMeshoptDecoder(Hn);const Yn=new n.SMAAImageLoader(Ze);function Xn(e){return new Promise((n,r)=>{let a=[jn(b.mainScenePath,e=>{b.debug&&console.log(e),Ln(e)}),(Nn=new t.PMREMGenerator(et),Nn.compileEquirectangularShader(),new Promise((e,t)=>{b.envMapPath?Un.load(b.envMapPath,t=>{let n=Nn.fromEquirectangular(t);i.environment=n.texture,t.dispose(),Nn.dispose(),e()},void 0,t):e()})),new Promise((e,t)=>{b.smaaAntialias?Yn.load(([t,n])=>{B.smaa.search=t,B.smaa.area=n,e()},t):e()})];a=a.concat(Jn()),a=a.concat(b.audios.map(e=>new Promise((t,n)=>{Pn.load(e,n=>{B.audios[e]=n,t()},void 0,n)}))),Promise.all(a).then(()=>{e(),n()}).catch(e=>{r(e)})})}function qn(e,t){e.traverse(e=>{e.castShadow=t})}function Kn(e,t){e.traverse(e=>{e.receiveShadow=t})}function Zn(e){Object.keys(b).forEach(t=>{e[t]&&(b[t]=e[t])})}var $n={value:!0};e.Audio=Zt,e.AudioEffect=$t,e.Effect=Pt,e.Krono=class{constructor(e){Zn(e),e.editor&&(window[b.editorVariableName]=this),s.canvas=e.canvasContainer,s.scroll=e.scrollContainer,l(),this.scrollPercentage=dt,this.config=b,this.assets=B,this.chunks=M,this.effectsList=Bn,this.effectsKeyedList=Cn,this.audios=Kt,this.animationMixers=Tt,this.animationMixersScrollUpdaters=ct,this.initEffect=wn,this.changeCamera=d,this.changeKeyframes=Dn,this.removeAllEffects=Sn,this.suspendAudioContext=A,this.resumeAudioContext=g,this.updateCameraFrustum=p,this.setShadowCasting=qn,this.setShadowReceiving=Kn,this.onLoad=e.onLoad,Ze.onProgress=e.onProgress,b.browserAntialias&&b.msaaAntialias&&console.error('"config.browserAntialias" and "config.msaaAntialias" is both setted to true. You need to use just one, usage of both is bad for performance. For details see "core/config.ts".'),et=new t.WebGLRenderer({alpha:b.alpha,antialias:b.browserAntialias,powerPreference:"high-performance"}),et.setSize(c.canvas.width,c.canvas.height),et.outputEncoding=t.sRGBEncoding,et.debug.checkShaderErrors=b.debug,$e.detectSupport(et),function(){const e=et.getContext();let i=0;et.capabilities.isWebGL2&&b.msaaAntialias&&(i=Math.min(b.msaaSamples,e.getParameter(e.MAX_SAMPLES))),nt=new n.EffectComposer(et,{frameBufferType:t.HalfFloatType,multisampling:i}),nt.addPass(r)}(),s.canvas.appendChild(et.domElement),window.addEventListener("resize",St,!1),new Fn(St).observe(s.canvas),s.scroll.addEventListener("scroll",pt,!1),Ct.initListeners(),b.debug&&(window.addEventListener("keypress",bt,!1),s.canvas.addEventListener("touchend",_t,!1)),window.addEventListener("pointerup",()=>{Bt.updateObjectsToIntersect()}),St(),pt()}load(){return Xn(this.afterLoadInit.bind(this))}enable(){b.enabled=!0}disable(){b.enabled=!1}afterLoadInit(){this.scene=i,this.camera=h,this.defaultCamera=u,this.renderer=et,this.effects=At,this.raycasting=Bt,this.optimizations=it,this.stats=ot,this.bounds=c,this.pointer=Ct,this.effectComposer=nt,this.renderPass=r,this.postEffects=gt,Rn.call(this),this.keyframesScrollUpdater=ct.filter(e=>e instanceof Mn)[0],this.onLoad&&this.onLoad()}changeConfig(e){Zn(e)}addMaterialToUpdate(e){_n.push(e)}removeMaterialToUpdate(e){const t=_n.indexOf(e);t>-1&&_n.splice(t,1)}},e.PostEffect=dn,Object.defineProperty(e,"__esModule",$n)}(t,ob,sb)}));var lb=!1;if("undefined"!=typeof window){var ub={get passive(){lb=!0}};window.addEventListener("testPassive",null,ub),window.removeEventListener("testPassive",null,ub)}var hb="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),db=[],fb=!1,pb=-1,mb=void 0,Ab=void 0,gb=function(e){return db.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},vb=function(e){var t=e||window.event;return!!gb(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},yb=function(e,t){if(e){if(!db.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};db=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(db),[n]),hb?(e.ontouchstart=function(e){1===e.targetTouches.length&&(pb=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-pb;!gb(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?vb(e):e.stopPropagation())}(t,e)},fb||(document.addEventListener("touchmove",vb,lb?{passive:!1}:void 0),fb=!0)):function(e){if(void 0===Ab){var t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(Ab=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===mb&&(mb=document.body.style.overflow,document.body.style.overflow="hidden")}(t)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},Eb=function(e){e?(db=db.filter((function(t){return t.targetElement!==e})),hb?(e.ontouchstart=null,e.ontouchmove=null,fb&&0===db.length&&(document.removeEventListener("touchmove",vb,lb?{passive:!1}:void 0),fb=!1)):db.length||(void 0!==Ab&&(document.body.style.paddingRight=Ab,Ab=void 0),void 0!==mb&&(document.body.style.overflow=mb,mb=void 0))):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")};var xb={audios:[],keyframes:[{uuid:"30516660-66B1-48AB-844E-0F89CB233AC4",name:"",percentage:0,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:60}}]},{uuid:"1DF170C2-D5C9-44ED-88C8-444BA3711074",name:"",percentage:.04253214638971316,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:60}}]},{uuid:"031AB83E-CF2D-40A2-AC18-88AADA165865",name:"",percentage:.04253214638971316,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:150}}]},{uuid:"B9FA4989-4589-439E-B9AA-374B22D39444",name:"",percentage:.21167161226508407,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:150}}]},{uuid:"F585C5F1-0892-4C8F-8534-E15C594215FE",name:"",percentage:.21278864156438526,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:100}}]},{uuid:"D1950811-4841-43D3-AC14-71B4A8181233",name:"",percentage:.2197056376118161,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:100}}]},{uuid:"646D1E35-BF96-4859-8C34-A26A6B238886",name:"",percentage:.22157790721863949,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:200}}]},{uuid:"444AFCDC-1A16-40C5-B1DC-8940B47402DF",name:"",percentage:.3332119825254837,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:200}}]},{uuid:"FA243AE2-030F-46BF-B9D3-46A0EEC596E8",name:"",percentage:.33700852922820884,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:400}}]},{uuid:"0D7BB0CF-84ED-4DE5-9D5E-D764B82C87DD",name:"",percentage:.7342937382983149,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:400}}]},{uuid:"CE670F5E-1D99-4F0D-9A6C-171ED9FC2A7E",name:"",percentage:.7366340753068442,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:500}}]},{uuid:"82941A21-5D13-46F0-8712-E1B20DDEDE45",name:"",percentage:.844445600166424,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:500}}]},{uuid:"2D3E59E0-63D4-4894-933B-55FE7227CAD3",name:"",percentage:.8457457873933847,effects:[{uuid:"7C7A6290-691A-427B-96E8-E2800535F678",name:"DistanceCameraEffect",effectData:{enabled:!0,near:.1,far:1100}}]}]},bb={audios:[],keyframes:[{uuid:"4BF09D24-3437-448B-A38B-9C5E320A8DCC",name:"",percentage:0,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.27190000000000003,color:{type:"color",value:[0,0,.27450980392156865]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.49,threshold:1,smoothing:1,kernelSize:"3",blendFunction:"16",blendOpacity:.22}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:1}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:625,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.1,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:3.749,mapping:"1"}}]},{uuid:"1854959E-5FDD-45E2-8A76-7359D99C59D6",name:"",percentage:.016335227272727272,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.06557,color:{type:"color",value:[0,.23529411764705882,.7019607843137254]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1,threshold:1,smoothing:1,kernelSize:"3",blendFunction:"16",blendOpacity:.22}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:1}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.59,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:625,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:6.29,mapping:"1"}}]},{uuid:"672AED3D-2438-479A-B626-F3BCE1D378D7",name:"",percentage:.04027777777777778,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.06556999683380127,color:{type:"color",value:[0,.12156862765550612,.32156863808631897]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1,threshold:1,smoothing:1,kernelSize:"3",blendFunction:"16",blendOpacity:.22}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:1}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:3.14,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:625,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:7.291,mapping:"1"}}]},{uuid:"F85F240B-4AE4-438D-AFCB-B831DB729CD2",name:"",percentage:.0453125,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.05252016344159764,color:{type:"color",value:[0,.12156862765550613,.32156863808631897]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:4.864919253872209,threshold:.8749217082007775,smoothing:.6873042829273552,kernelSize:"3",blendFunction:"16",blendOpacity:.42429452551275526}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:1}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:625,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.695062662049607,mapping:"1"}}]},{uuid:"8181C42C-FF3A-4180-8692-15CFA8BA6A1B",name:"",percentage:.04738005050505051,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[.003921568859368563,.003921568859368563,.11764705926179886]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1,threshold:1,smoothing:1,kernelSize:"3",blendFunction:"16",blendOpacity:.21999999880790713}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:.2}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:625,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.5950000286102295,mapping:"1"}}]},{uuid:"2D203A87-A850-4367-96AB-100B480585C8",name:"",percentage:.08323863636363636,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000476837158,color:{type:"color",value:[1,.1882352977991104,.1882352977991104]},position:{type:"vector",value:[3.8499999046325684,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.049999952316284,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.900000095367432,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[.003921568859368563,.003921568859368563,.11764705926179886]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:110.5}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1,threshold:1,smoothing:1,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:-.006,y:.001,blendFunction:"13",blendOpacity:.03}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:625,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:-1,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.5950000286102295,mapping:"1"}}]},{uuid:"276D8713-1081-4FDB-A6AB-C63BA0CE7DB0",name:"",percentage:.12734375,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[.003921568859368563,.003921568859368563,.11764705926179886]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1,threshold:1,smoothing:1,kernelSize:"3",blendFunction:"16",blendOpacity:.21999999880790713}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:.2}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:625,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.59500002861023,mapping:"1"}}]},{uuid:"6283D53A-72C4-4B88-B68C-0A60C4B2ED8A",name:"",percentage:.13686868686868686,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.6500000000000001,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.0035900000000000003,color:{type:"color",value:[.1803921568627451,0,.27450980392156865]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.6500000000000001,threshold:.55,smoothing:.45,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:.2}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:776,blendFunction:"16",blendOpacity:.12}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.021,mapping:"1"}}]},{uuid:"715B86FD-B927-45AF-9D4B-3EDDB5AB82A9",name:"",percentage:.14551767676767677,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.6500000000000001,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.00683,color:{type:"color",value:[.1803921568627451,0,.27450980392156865]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.6500000000000001,threshold:.55,smoothing:.45,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:.2}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:776,blendFunction:"16",blendOpacity:.12}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.8300000000000001,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.021,mapping:"1"}}]},{uuid:"BD5BEF4B-4D30-46FC-9060-CDFFAA67B0D6",name:"",percentage:.1921875,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.649999976158142,color:{type:"color",value:[1,.18823529411764706,.18823529411764706]},position:{type:"vector",value:[3.85,1,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-7.9,5.5,0]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.006829999852925539,color:{type:"color",value:[.18039216101169586,0,.27450981736183167]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.649999976158142,threshold:.550000011920929,smoothing:.44999998807907104,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:775.9999999999999,blendFunction:"16",blendOpacity:.11999999731779099}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.8299999833106994,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.020999999716877934,mapping:"1"}}]},{uuid:"D01AA72B-22E7-4FD5-8B7F-4B1B062B0B4D",name:"",percentage:.2007733585858586,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.8017678930269716,color:{type:"color",value:[1,.5602154092671605,.5602154092671605]},position:{type:"vector",value:[4.646781422963571,7.336309308054097,-.037941970736516166]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.9117408924125348,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-3.916093227398073,4.589392860629848,-1.0623751466996878]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.027070000000000004,color:{type:"color",value:[.05838268568270256,.014879204515259944,.08108015583655531]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.39791497860277053,threshold:.3602901610652452,smoothing:.6776518181519621,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0017588394869631238,y:.00024116060803177866,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:945.9800263666926,blendFunction:"16",blendOpacity:.3248866274220106}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3367543891780629,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.39966084776595395,mapping:"1"}}]},{uuid:"32F32EC9-FD75-422C-81D9-7E0572DB6690",name:"",percentage:.203515625,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.85,color:{type:"color",value:[1,.6784313725490196,.6784313725490196]},position:{type:"vector",value:[4.9,9.35,-.05]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.55,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-2.6500000000000004,4.3,-1.4000000000000001]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14243,color:{type:"color",value:[.0196078431372549,.0196078431372549,.0196078431372549]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.30000000000000004,smoothing:.75,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.002,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:.39}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.18,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.52,mapping:"1"}}]},{uuid:"115BDB70-62BA-42A3-BEE7-B66C910A6E87",name:"",percentage:.20901199494949496,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.850000023841858,color:{type:"color",value:[1,.6784313917160034,.6784313917160034]},position:{type:"vector",value:[4.900000095367432,9.350000381469727,-.05000000074505806]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.550000011920929,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-2.6500000953674316,4.300000190734863,-1.3999999761581423]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14242999255657196,color:{type:"color",value:[.019607843831181526,.019607843831181526,.019607843831181526]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.30000001192092896,smoothing:.7500000000000001,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0020000000949949026,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:.3899999856948853}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.18000000715255737,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.5199999809265137,mapping:"1"}}]},{uuid:"480E74CF-803E-4508-9D26-05E85B987FCE",name:"",percentage:.21309974747474747,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.35,color:{type:"color",value:[1,0,0]},position:{type:"vector",value:[4.900000095367432,9.350000381469727,-.05000000074505806]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.2,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-2.6500000953674316,4.300000190734863,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14242999255657196,color:{type:"color",value:[.01568627450980392,0,.03529411764705882]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:7.3500000000000005,threshold:.55,smoothing:.4,kernelSize:"3",blendFunction:"16",blendOpacity:.21999999880790713}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0020000000949949026,y:-.047,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.5700000000000001,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.287,mapping:"1"}}]},{uuid:"87EAAC82-0726-4E25-93A5-860E2D35B0BD",name:"",percentage:.220703125,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.3499999046325684,color:{type:"color",value:[1,0,0]},position:{type:"vector",value:[4.900000095367432,9.350000381469727,-.05000000074505806]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.200000047683716,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-2.6500000953674316,4.300000190734864,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14242999255657196,color:{type:"color",value:[.01568627543747425,0,.03529411926865578]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:7.349999904632568,threshold:.550000011920929,smoothing:.4000000059604645,kernelSize:"3",blendFunction:"16",blendOpacity:.2199999988079071}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0020000000949949026,y:-.003,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.51,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.75,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.2869999408721924,mapping:"1"}}]},{uuid:"74BBD770-D564-41AA-AAEB-A10F0D890323",name:"",percentage:.22265625,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.3499999046325684,color:{type:"color",value:[1,0,0]},position:{type:"vector",value:[4.900000095367432,9.350000381469727,-.05000000074505806]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4000000000000001,color:{type:"color",value:[.12549019607843137,.22745098039215686,.6352941176470588]},position:{type:"vector",value:[-2.6500000953674316,4.300000190734863,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.027070000000000004,color:{type:"color",value:[.027450980392156862,.5568627450980392,.43137254901960786]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:89}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:10.73,threshold:.30000000000000004,smoothing:.65,kernelSize:"3",blendFunction:"16",blendOpacity:.27}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.003,y:-.002,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:1.2,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.75,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.9020000000000001,mapping:"1"}}]},{uuid:"669106FB-1292-44FE-AF86-CB1DA9E7F037",name:"",percentage:.22578125,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.35000000000000003,color:{type:"color",value:[1,.3254901960784314,.3254901960784314]},position:{type:"vector",value:[.25,5.65,-9.1]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.6000000000000001,color:{type:"color",value:[1,1,.8627450980392157]},position:{type:"vector",value:[-4.2,-.8,-3.25]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:31e-5,color:{type:"color",value:[.058823529411764705,.03137254901960784,.5098039215686274]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:2.73,threshold:.4547431080034272,smoothing:.49525689852245836,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513841336106}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.002381027684405298,y:-.0026189724366666367,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.29,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.604,mapping:"1"}}]},{uuid:"940CEFC4-71A5-47F9-97DC-D456C5B2FFCD",name:"",percentage:.23207070707070707,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.3499999940395355,color:{type:"color",value:[.8941176533699036,.9215686321258546,.7019608020782471]},position:{type:"vector",value:[.25,5.650000095367432,-9.100000381469727]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.2000000476837158,color:{type:"color",value:[.8627451062202454,.8627451062202454,1]},position:{type:"vector",value:[-2.6500000953674316,4.300000190734864,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.00045000000000000004,color:{type:"color",value:[.05882352963089943,.0313725508749485,.5098039507865906]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57.00000000000001}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.41999998688697815,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.002381027676165104,y:-.002618972444906831,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.28999999165534973,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.6039999723434448,mapping:"1"}}]},{uuid:"3B7F7532-1959-48EB-B944-4DA46885CAFB",name:"",percentage:.24259785353535354,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.3499999940395355,color:{type:"color",value:[.8941176533699036,.9215686321258545,.7019608020782471]},position:{type:"vector",value:[-2.0500000000000003,-7.25,3.35]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.2000000476837158,color:{type:"color",value:[.8627451062202454,.8627451062202454,1]},position:{type:"vector",value:[-2.6500000953674316,4.300000190734863,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.00232,color:{type:"color",value:[0,.5490196078431373,.8117647058823529]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.41999998688697815,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.002381027676165104,y:-.002618972444906831,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:-.01,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.6039999723434448,mapping:"1"}}]},{uuid:"3B3F8B08-6BD6-474F-BE2A-D75824CCFD05",name:"",percentage:.25907512626262624,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.3499999940395355,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[.25,-1.4000000000000001,1.9500000000000002]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.9500000000000001,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-10,-6.5,5.050000000000001]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.0023199999704957004,color:{type:"color",value:[0,.5490196347236633,.8117647171020508]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:999.9999999999999,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:3.057,mapping:"1"}}]},{uuid:"C42BB3F4-E9EA-4B32-BBB7-EB3B994E1D44",name:"",percentage:.2665088383838384,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.3499999940395355,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[.25,-1.4000000000000001,1.9500000000000002]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.9500000000000001,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[10,-6.5,5.050000000000001]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.0023199999704957004,color:{type:"color",value:[0,.5490196347236633,.8117647171020508]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:999.9999999999999,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:3.057,mapping:"1"}}]},{uuid:"BF383907-4332-4496-9A1D-513C2A2886BF",name:"",percentage:.2915561868686869,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.8841149625011128,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-8.874464135195351,-1.845095787631086,1.9500000476837158]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.10431795689238849,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[10,-6.5,5.050000190734863]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.00289,color:{type:"color",value:[0,.07774169338239584,.12055709544697693]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05000000074505806,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:3.056999921798706,mapping:"1"}}]},{uuid:"6B0CA0A6-6F94-4A22-B722-169F2B7A5EAB",name:"",percentage:.295703125,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.9500000000000001,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-10,-1.9000000000000001,1.9500000000000002]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[10,-6.5,5.050000190734864]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.018150000000000003,color:{type:"color",value:[0,.0196078431372549,.03529411764705882]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05000000074505806,threshold:.45474311709404,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:3.056999921798706,mapping:"1"}}]},{uuid:"E41E09CE-532B-43F6-8EF2-8C7FBC96FBD7",name:"",percentage:.308822601010101,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.949999988079071,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-10,-1.899999976158142,1.9500000476837158]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[10,-6.5,5.050000190734863]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.018149999901652336,color:{type:"color",value:[0,.019607843831181526,.03529411926865578]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:56.99999999999999}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05000000074505806,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:0,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:3.056999921798706,mapping:"1"}}]},{uuid:"325D1731-EFC8-4591-B619-505B5016F2E2",name:"",percentage:.3125473484848485,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.2,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[10,1.35,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.6000000000000001,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[4.6000000000000005,1.35,5.050000190734863]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.00909,color:{type:"color",value:[0,0,0]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:21.5}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05000000074505806,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.07,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.22,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.5170000000000001,mapping:"1"}}]},{uuid:"3EE183CA-2C90-46C9-9A55-4EEE35073CBC",name:"",percentage:.32529987373737373,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.2000000029802322,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[9.999999999999998,1.3500000238418577,-9.999999999999998]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.6000000238418579,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[4.599999904632568,1.3500000238418577,5.050000190734862]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.009089999832212925,color:{type:"color",value:[0,0,0]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:21.499999999999996}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05000000074505805,threshold:.4547431170940399,smoothing:.49525690078735346,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.2000000029802322}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.07000000029802322,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.2199999988079071,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.5169999599456787,mapping:"1"}}]},{uuid:"E7DFA192-E64C-46B8-98CF-24E62324A14F",name:"",percentage:.344140625,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[.9450980392156862,.13725490196078433,1]},position:{type:"vector",value:[9.999999999999998,1.3500000238418577,-9.999999999999998]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.3000000000000003,color:{type:"color",value:[.3333333333333333,.3764705882352941,1]},position:{type:"vector",value:[4.599999904632568,1.3500000238418577,5.050000190734862]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.10407000000000001,color:{type:"color",value:[.050980392156862744,.00784313725490196,.13333333333333333]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:.05000000074505805,threshold:.4547431170940399,smoothing:.49525690078735346,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.2000000029802322}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.07000000029802322,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.2199999988079071,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.5169999599456787,mapping:"1"}}]},{uuid:"2DC06B78-C3BA-4A27-A07D-1BAF72D8BDB1",name:"",percentage:.3466066919191919,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.6000000000000001,color:{type:"color",value:[1,.12549019607843137,.12549019607843137]},position:{type:"vector",value:[-4.800000000000001,-.9500000000000001,-5.9]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.55,color:{type:"color",value:[.8823529411764706,.9803921568627451,.17254901960784313]},position:{type:"vector",value:[-.65,-6.2,1.9500000000000002]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.010100000000000001,color:{type:"color",value:[1,.13725490196078433,.3215686274509804]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:3.34,threshold:.45474311709403986,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.001,y:.001,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.11,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.03,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000000000001,mapping:"1"}}]},{uuid:"700F17B8-F37B-4066-9E31-845165889105",name:"",percentage:.3557607323232323,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.1696908296612483,color:{type:"color",value:[.8549019607843137,.5333333333333333,.5333333333333333]},position:{type:"vector",value:[-4.5,-6.025525230227968,-4.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.55,color:{type:"color",value:[.4549019607843137,.611764705882353,.8392156862745098]},position:{type:"vector",value:[4.255586202818675,-2.2,5.95]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.010099999606609344,color:{type:"color",value:[.5971846778690042,.1788008814854638,.6340666211697654]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:3.3399999141693115,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.25,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"C623633A-3E98-496E-9443-849E93E6C4BA",name:"",percentage:.3664614898989899,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9000000000000001,color:{type:"color",value:[1,.12549019607843137,.6901960784313725]},position:{type:"vector",value:[-6.800000000000001,-9.1,-4.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.1,color:{type:"color",value:[.792156862745098,0,.792156862745098]},position:{type:"vector",value:[10,-10,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.010099999606609344,color:{type:"color",value:[.12549019607843137,.22745098039215686,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:3.3399999141693115,threshold:.4547431170940399,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.2000000029802322}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.10999999940395355,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"56C973FF-EA09-45F1-A258-B51F32AF3F77",name:"",percentage:.37503156565656565,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.75,color:{type:"color",value:[.12549019607843137,.5882352941176471,1]},position:{type:"vector",value:[-2.0500000000000003,-10,10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.8,color:{type:"color",value:[.7921568751335144,0,.7921568751335144]},position:{type:"vector",value:[-.05,.1,-1.9000000000000001]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.010220000000000002,color:{type:"color",value:[.12549019607843137,1,.22745098039215686]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:12.58,threshold:.25,smoothing:.49525690078735346,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.68,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447743,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"BE219B59-2917-4F1B-A5DF-A3F17097CE52",name:"",percentage:.39310290404040404,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.8611796742536624,color:{type:"color",value:[.125490203499794,.5882353186607361,1]},position:{type:"vector",value:[-2.995026984667713,-3.8573244885204154,-1.1179647746368833]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.3274864692746868,color:{type:"color",value:[.4019381057411888,.44035861168604207,.35179826344747234]},position:{type:"vector",value:[2.4515419679332426,-2.7072859989048754,2.0468773995551306]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.019586885566884715,color:{type:"color",value:[.3607843137254902,.32941176470588235,.6078431372549019]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:12.579999923706055,threshold:.25,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.17,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"CBCA5CDA-5B77-4FEB-8859-B395ED1D4F88",name:"",percentage:.4002840909090909,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.901955983179935,color:{type:"color",value:[.6392156862745098,.12549019607843137,1]},position:{type:"vector",value:[-3.3416254194769435,-1.604435079010941,-5.195592775839847]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.154187310581519,color:{type:"color",value:[.2588213581970806,.6018646636257919,.1902922115077225]},position:{type:"vector",value:[3.36900819672547,-3.736886970978693,3.4944352936944805]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.023022287293494634,color:{type:"color",value:[.6542400100034467,.23579400690699856,.5268277767423875]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:12.579999923706055,threshold:.25,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:1.09,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"EC3C789E-DECE-488D-863B-4FB0B9AC3661",name:"",percentage:.40784406565656567,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000000000002,color:{type:"color",value:[.125490203499794,.588235318660736,1]},position:{type:"vector",value:[-3.75,1.05,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.9500000000000001,color:{type:"color",value:[.09019607843137255,.792156862745098,0]},position:{type:"vector",value:[4.45,-4.95,5.2]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.027070000000000004,color:{type:"color",value:[1,.12549019607843137,.43137254901960786]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:12.579999923706055,threshold:.25,smoothing:.49525690078735346,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.6800000071525574,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447743,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"225B948A-974D-41E3-B304-C550C16F9053",name:"",percentage:.41934974747474746,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000476837156,color:{type:"color",value:[.12549019607843137,.2784313725490196,1]},position:{type:"vector",value:[-2.35,-10,1.8]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.4,color:{type:"color",value:[0,.792156862745098,.41568627450980394]},position:{type:"vector",value:[7.65,-10,8.6]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.02707000076770782,color:{type:"color",value:[.4823529411764706,.12549019607843137,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:12.579999923706055,threshold:.25,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.37,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:999.9999999999999,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"C1E9A60A-5A5D-488E-BBA1-42393249182E",name:"",percentage:.44422348484848484,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000476837158,color:{type:"color",value:[.125490203499794,.27843138575553894,1]},position:{type:"vector",value:[-2.3499999046325684,-10,1.7999999523162842]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.4000000059604645,color:{type:"color",value:[0,.7921568751335144,.4156862795352936]},position:{type:"vector",value:[7.650000095367432,-10,8.600000381469727]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.027070000767707825,color:{type:"color",value:[.48235294222831726,.125490203499794,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:12.579999923706056,threshold:.25,smoothing:.4952569007873535,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.3700000047683716,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0010000467300415,mapping:"1"}}]},{uuid:"09A1129F-7BD8-4DC4-900B-13D382A1DCD6",name:"",percentage:.4515625,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000476837158,color:{type:"color",value:[.8901960784313725,.11764705882352941,.8431372549019608]},position:{type:"vector",value:[-3.482948630218546,.5390574449473071,-4.418043915075556]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.4000000059604645,color:{type:"color",value:[0,.7921568751335144,.2689660689398079]},position:{type:"vector",value:[8.071562242402898,-10,-1.2013232433478365]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.08792779031283553,color:{type:"color",value:[.2549019607843137,.17254901960784313,.5294117647058824]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:12.985753876556409,threshold:.22365235795807367,smoothing:.28697514242708666,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.36,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.0747734413065513,mapping:"1"}}]},{uuid:"41859F7E-3946-4DBE-855A-ABC3A8EEE529",name:"",percentage:.457717803030303,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000476837158,color:{type:"color",value:[.12549019607843137,1,.792156862745098]},position:{type:"vector",value:[-4.5,10,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.4000000059604645,color:{type:"color",value:[0,.792156862745098,.13725490196078433]},position:{type:"vector",value:[8.450000000000001,-10,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14256000000000002,color:{type:"color",value:[0,.21568627450980393,.11372549019607843]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:13.35,threshold:.2,smoothing:.1,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.85,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.141,mapping:"1"}}]},{uuid:"985B77AB-714E-4446-9699-B566D914F24C",name:"",percentage:.4706439393939394,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000476837158,color:{type:"color",value:[.125490203499794,1,.7921568751335144]},position:{type:"vector",value:[-8.65,-7.6000000000000005,-3.75]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.1,color:{type:"color",value:[.792156862745098,0,.792156862745098]},position:{type:"vector",value:[10,7.800000000000001,7.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14256000518798828,color:{type:"color",value:[0,.21568627655506134,.11372549086809158]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:13.350000381469727,threshold:.20000000298023224,smoothing:.10000000149011612,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.8500000238418579,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.1410000324249268,mapping:"1"}}]},{uuid:"2AC67F0E-F3D6-43FD-BB6A-CBADE922D824",name:"",percentage:.48420138888888886,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000476837158,color:{type:"color",value:[.4823529411764706,.12549019607843137,1]},position:{type:"vector",value:[-8.649999618530273,-7.599999904632569,-3.75]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0999999046325684,color:{type:"color",value:[.792156862745098,0,0]},position:{type:"vector",value:[9.35,3.5,7.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14256000518798828,color:{type:"color",value:[0,.21568627450980393,.06274509803921569]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:3.5,threshold:.20000000298023224,smoothing:.2,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:1.1400000000000001,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.1410000324249268,mapping:"1"}}]},{uuid:"B4F066D5-DE12-4096-A6C6-D070554A1CCD",name:"",percentage:.49812184343434346,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.9500000476837158,color:{type:"color",value:[.48235294222831726,.125490203499794,1]},position:{type:"vector",value:[-8.649999618530273,-7.5999999046325675,-3.7499999999999996]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0999999046325684,color:{type:"color",value:[.7921568751335143,0,0]},position:{type:"vector",value:[9.350000381469725,3.5,7.499999999999999]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.14256000518798828,color:{type:"color",value:[0,.2156862765550613,.062745101749897]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:3.5,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:1.139999985694885,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:999.9999999999999,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.029999999329447746,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.1410000324249268,mapping:"1"}}]},{uuid:"D74ACBD1-3466-4906-99C0-64FA7EAE36C3",name:"",percentage:.514251893939394,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.9500000000000001,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.35,-.35000000000000003,-1.4000000000000001]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0999999046325684,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000000000002,6.1000000000000005,1.9500000000000002]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.056380000000000006,color:{type:"color",value:[0,0,0]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.01,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.15,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.1410000324249268,mapping:"1"}}]},{uuid:"BBA390D8-A7DB-419E-B1B8-535EF41D3A3A",name:"",percentage:.533080808080808,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.949999988079071,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.350000023841858,-.3499999940395355,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0999999046325684,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837156,6.0999999046325675,1.9500000476837156]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.056379999965429306,color:{type:"color",value:[0,0,0]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.26,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.15000000596046448,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.1410000324249268,mapping:"1"}}]},{uuid:"62C2DABD-A620-4609-B1E2-C78DCB24CCE2",name:"",percentage:.5391414141414141,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.949999988079071,color:{type:"color",value:[1,.5490196078431373,.14901960784313725]},position:{type:"vector",value:[-7.25,-10,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.3,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837156,2.6,7.95]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.049800000000000004,color:{type:"color",value:[.0196078431372549,0,0]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.15000000596046448,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.5170000000000001,mapping:"1"}}]},{uuid:"C14B3F8E-A17B-47BD-AEFC-B2241CE24897",name:"",percentage:.5533933080808081,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.949999988079071,color:{type:"color",value:[1,.5490196078431373,.14901960784313725]},position:{type:"vector",value:[-7.25,-10,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.3,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837156,2.6,7.95]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.056379999965429306,color:{type:"color",value:[.027450980392156862,0,0]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.15000000596046448,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.5170000000000001,mapping:"1"}}]},{uuid:"3F931017-BA6D-4173-89E6-C9601646A418",name:"",percentage:.5588699494949495,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.949999988079071,color:{type:"color",value:[1,.5490196078431373,.14901960784313725]},position:{type:"vector",value:[-7.25,-10,-1.399999976158142]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.3,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837156,2.6,7.95]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.056379999965429306,color:{type:"color",value:[0,.03529411764705882,.011764705882352941]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.15000000596046448,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.5170000000000001,mapping:"1"}}]},{uuid:"FD51EE7B-DD83-4F05-B94E-714238C8555B",name:"",percentage:.5954387626262626,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.949999988079071,color:{type:"color",value:[1,.5490196347236632,.14901961386203763]},position:{type:"vector",value:[-.65,1.35,-1.1]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.2999999523162842,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265136]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.056379999965429306,color:{type:"color",value:[0,.03529411926865578,.0117647061124444]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.15000000596046448,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.5169999599456787,mapping:"1"}}]},{uuid:"AB6CFB60-04AD-4B33-AD4C-9E64C2F753B6",name:"",percentage:.6249368686868687,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.949999988079071,color:{type:"color",value:[1,.5490196347236633,.1490196138620377]},position:{type:"vector",value:[-.6499999761581421,1.350000023841858,-1.100000023841858]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.2999999523162842,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265138]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.056379999965429306,color:{type:"color",value:[0,.03529411926865578,.0117647061124444]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:2.57,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.29,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.672,mapping:"1"}}]},{uuid:"4DDDC28D-6D0B-4852-8A29-205A666929BB",name:"",percentage:.6959122474747474,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.05,color:{type:"color",value:[.23921568627450981,.4,.13333333333333333]},position:{type:"vector",value:[-.2,2.9000000000000004,-.9500000000000001]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265138]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.12298,color:{type:"color",value:[0,.03529411926865578,.0117647061124444]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.1,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.672,mapping:"1"}}]},{uuid:"16FF1CFB-65B8-44FE-8517-5E868397CFB9",name:"",percentage:.721875,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.108415338992601,color:{type:"color",value:[.26535775078757023,.4206172004748779,.16311373242047605]},position:{type:"vector",value:[-.20000000298023224,2.9000000953674316,-.949999988079071]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.599999904632569,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.11931391778605595,color:{type:"color",value:[.03436199119871134,.0684433342516913,.0457224385832645]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57.00000000000001}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1000.0000000000001,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.019656379648658552,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.6005613538125436,mapping:"1"}}]},{uuid:"54B3F294-D946-4EFE-8640-C34908CD2833",name:"",percentage:.7253472222222223,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.75,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-.20000000298023224,2.9000000953674316,-.949999988079071]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.016290000000000002,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.0010000000474974513,y:.0010000000474974513,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.01,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.593,mapping:"1"}}]},{uuid:"FA52FEAE-0806-4DB0-8116-425E0E03A769",name:"",percentage:.7393781565656565,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-.20000000298023224,2.9000000953674316,-.949999988079071]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.1300000000000001,threshold:.20000000298023224,smoothing:.20000000298023224,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.289,y:.043000000000000003,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.09,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:1.1320000000000001,mapping:"1"}}]},{uuid:"019E3937-6126-4A6F-895C-B63DBCAA330C",name:"",percentage:.7892834595959596,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-.20000000298023224,2.9000000953674316,-.949999988079071]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:9.66,threshold:.30000000000000004,smoothing:.30000000000000004,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.289,y:.043000000000000003,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.09,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.672,mapping:"1"}}]},{uuid:"759F6850-637E-4364-8E62-9E7380272AD7",name:"",percentage:.807421875,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.049999952316284,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-.20000000298023224,2.9000000953674316,-.949999988079071]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.599999904632568,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:9.65999984741211,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.289000004529953,y:.0430000014603138,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.09000000357627869,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"939EFDC6-460E-40FF-B076-F861BD3DD740",name:"",percentage:.8222064393939394,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000000000002,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-.20000000298023224,2.9000000953674316,-.949999988079071]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.599999904632568,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:60}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.35000000000763976,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.32,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"251C8B3D-264D-4FFB-BCA4-59F816DB9988",name:"",percentage:.8455334595959596,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4500000476837158,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-.20000000298023224,2.9000000953674316,-.949999988079071]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.300000011920929,smoothing:.300000011920929,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:0,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1000.0000000000001,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"9813B8BC-7F1B-4FF4-814B-B5C90414B13F",name:"",percentage:.8559501262626262,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.65,color:{type:"color",value:[.4,.13333333333333333,.2549019607843137]},position:{type:"vector",value:[9.8,-.05,-1.9000000000000001]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.22,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"4AE22186-3959-48A6-A009-36F006CC8755",name:"",percentage:.8645359848484848,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.7000000000000002,color:{type:"color",value:[.4,.13333333333333333,.22745098039215686]},position:{type:"vector",value:[6.300000000000001,1.2000000000000002,10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[1.9500000476837158,2.5999999046325684,7.949999809265137]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[1,1,1]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.2000000029802322}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.2199999988079071,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:999.9999999999999,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.6719999313354488,mapping:"1"}}]},{uuid:"108889EE-1FEA-4F14-9D02-12D556FA49EA",name:"",percentage:.8713541666666667,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.75,color:{type:"color",value:[.4000000059604645,.13333334028720856,.22745098173618317]},position:{type:"vector",value:[10,10,5.65]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.75,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[3.35,.45,3.0500000000000003]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:0,color:{type:"color",value:[.06274509803921569,0,.2823529411764706]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.2199999988079071,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"4FB08CB5-8D60-4E52-BE6B-41183F3D97EA",name:"",percentage:.8735006313131313,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.75,color:{type:"color",value:[.4000000059604645,.13333334028720856,.22745098173618317]},position:{type:"vector",value:[10,10,5.65]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.75,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[3.35,.45,3.0500000000000003]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.00101,color:{type:"color",value:[.06274509803921569,0,.2823529411764706]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.2199999988079071,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"5316963F-5F6E-4A7E-BE1B-2F9E9AA253AD",name:"",percentage:.8769097222222222,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.75,color:{type:"color",value:[.4000000059604645,.13333334028720856,.22745098173618317]},position:{type:"vector",value:[.75,1.05,4.3]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:.5,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-2.2,.6000000000000001,1.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.0010100000072270632,color:{type:"color",value:[.0196078431372549,0,.13333333333333333]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:4.57,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.14,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.31999999284744257,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"4059B25C-4630-4C7B-820D-99E6943EAAD7",name:"",percentage:.88125,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.6,color:{type:"color",value:[.13333333333333333,.3058823529411765,.4]},position:{type:"vector",value:[4.9,6.75,2.45]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.5,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-2.6500000000000004,-1.25,-2.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.00787,color:{type:"color",value:[.0196078431372549,0,.13333333333333333]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.34,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.14,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.31999999284744257,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"E0C528AF-1B49-4EE4-88B5-8F8FB495C6B1",name:"",percentage:.8875631313131314,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.600000023841858,color:{type:"color",value:[.13333334028720856,.30588236451148987,.4000000059604645]},position:{type:"vector",value:[-7.45,.45,-.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.5,color:{type:"color",value:[1,1,1]},position:{type:"vector",value:[-2.6500000953674316,-1.25,-2.5]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.007200000000000001,color:{type:"color",value:[.00392156862745098,.058823529411764705,.10588235294117647]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.340000033378601,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.14000000059604645,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"ED032860-F2DF-4138-8FD2-433FF66560FC",name:"",percentage:.9022411616161616,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.1500000000000001,color:{type:"color",value:[.13333334028720856,.30588236451148987,.4000000059604645]},position:{type:"vector",value:[-4.5,-7.6000000000000005,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.5,color:{type:"color",value:[1,0,.6470588235294118]},position:{type:"vector",value:[-2.8000000000000003,-5.45,-.35000000000000003]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.007200000000000001,color:{type:"color",value:[.00392156862745098,.058823529411764705,.10588235294117647]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.340000033378601,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.14000000059604645,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"326D16A8-7CBA-4DD0-AE25-A4AF62E523CE",name:"",percentage:.9069760101010101,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.149999976158142,color:{type:"color",value:[.13333334028720856,.30588236451148987,.4000000059604645]},position:{type:"vector",value:[-4.5,-7.5999999046325675,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.5,color:{type:"color",value:[1,0,.6470588445663452]},position:{type:"vector",value:[-2.799999952316284,-5.449999809265137,-.3499999940395355]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.007199999876320362,color:{type:"color",value:[.003921568859368563,.05882352963089943,.10588235408067703]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:56.99999999999999}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.340000033378601,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.14000000059604645,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"0048BC61-FAA3-4452-9D55-5BDC29B4819B",name:"",percentage:.9114583333333334,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.1499999761581423,color:{type:"color",value:[.13333334028720856,.30588236451148987,.40000000596046453]},position:{type:"vector",value:[-4.500000000000001,-7.599999904632568,-10.000000000000002]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.5,color:{type:"color",value:[1,0,.6470588445663452]},position:{type:"vector",value:[4.3,-4.65,-.65]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.007199999876320362,color:{type:"color",value:[.003921568859368563,.05882352963089943,.10588235408067703]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.340000033378601,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023227}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.14000000059604645,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474427,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"7C4C94AA-8287-4309-871D-5B67A23F39BF",name:"",percentage:.92421875,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.149999976158142,color:{type:"color",value:[.13333334028720856,.30588236451148987,.4000000059604645]},position:{type:"vector",value:[-4.5,-7.5999999046325675,-10]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.5,color:{type:"color",value:[1,0,.6470588445663452]},position:{type:"vector",value:[4.300000190734862,-4.650000095367431,-.6499999761581421]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.007199999876320362,color:{type:"color",value:[.003921568859368563,.05882352963089943,.10588235408067703]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:56.99999999999999}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:1.340000033378601,threshold:.30000001192092896,smoothing:.30000001192092896,kernelSize:"3",blendFunction:"16",blendOpacity:.2390513867139816}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.14000000059604645,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:2.671999931335449,mapping:"1"}}]},{uuid:"54E2B41B-88A2-4F23-8471-BEBAC7F3AC7A",name:"",percentage:.9399463383838383,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.7529411764705882,.00784313725490196,.00784313725490196]},position:{type:"vector",value:[-2.35,.6000000000000001,-4.05]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:3,color:{type:"color",value:[.7058823529411765,0,1]},position:{type:"vector",value:[4.300000190734863,-10,-.05]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.027070000000000004,color:{type:"color",value:[0,0,0]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:3.5,threshold:.35000000000000003,smoothing:.55,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.21,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.3199999928474426,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:10,mapping:"1"}}]},{uuid:"4F002A09-1722-44D6-A560-E6ED4DD0161D",name:"",percentage:.9663825757575758,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:1.4000000000000001,color:{type:"color",value:[0,0,1]},position:{type:"vector",value:[-4.65,-8.8,-9.9]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:0,color:{type:"color",value:[.7058823529411765,0,1]},position:{type:"vector",value:[-2.6500000000000004,-10,-5.6000000000000005]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.027070000000000004,color:{type:"color",value:[0,.00784313725490196,.0196078431372549]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:18.740000000000002,threshold:0,smoothing:.65,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:.007,y:.009000000000000001,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:.21,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.35000000000000003,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:5.598,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.8240000000000001,mapping:"1"}}]},{uuid:"6EE6309A-044C-41CB-A501-FEC29DDAD447",name:"",percentage:.9702754142409314,effects:[{uuid:"B229027E-1019-42B7-B148-9BB0E6A2B974",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.5500000000000003,color:{type:"color",value:[.8823529481887817,1,0]},position:{type:"vector",value:[-4.650000095367432,1.0499999523162842,3.049999952316284]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"74437805-354F-4EFC-8183-9F5886F1D767",name:"DirectionalLightEffect",effectData:{enabled:!0,intensity:2.0500000000000003,color:{type:"color",value:[.4117647058823529,1,0]},position:{type:"vector",value:[7.300000000000001,-2.1,-2.5500000000000003]},castShadow:!1,bias:0,normalBias:0,radius:1,mapSize:{type:"vector",value:[512,512]},shadowAutoUpdate:!0}},{uuid:"BCE40417-64EF-4639-AF30-A1199824C56C",name:"FogEffect",effectData:{enabled:!0,density:.10616999864578247,color:{type:"color",value:[0,.007843137718737125,.019607843831181526]}}},{uuid:"199A5778-6E6D-48A3-B38C-EAC203E25960",name:"FovCameraEffect",effectData:{enabled:!0,fov:57}},{uuid:"0BFA49A7-5618-4CEC-8C49-19ED2F653496",name:"BloomPostEffect",effectData:{enabled:!0,intensity:0,threshold:0,smoothing:.6499999761581421,kernelSize:"3",blendFunction:"16",blendOpacity:.23905138671398163}},{uuid:"5BDD1FE6-897A-4431-8D4B-DE118CDE5466",name:"ChromaticAberrationPostEffect",effectData:{enabled:!0,x:0,y:0,blendFunction:"13",blendOpacity:.20000000298023224}},{uuid:"65B899E5-A451-4F68-8AE5-1968B3EED95A",name:"HuePostEffect",effectData:{enabled:!0,hue:-.03,blendFunction:"13",blendOpacity:1}},{uuid:"29297E66-6C70-4938-B348-86279A9AAB52",name:"NoisePostEffect",effectData:{enabled:!0,granularity:1e3,blendFunction:"16",blendOpacity:0}},{uuid:"646F8476-DB1C-495E-ACEA-F63EFAA2E21D",name:"SaturationPostEffect",effectData:{enabled:!0,saturation:.25999999046325684,blendFunction:"13",blendOpacity:1}},{uuid:"7989870A-8C7C-423A-AC26-B726E9AC5068",name:"ToneMappingEffect",effectData:{enabled:!1,exposure:4.673999786376953,mapping:"1"}},{uuid:"A5605F1C-5DBC-4D5B-A69E-1934B4423135",name:"ToneMappingEffect",effectData:{enabled:!0,exposure:.9010000228881836,mapping:"1"}}]}]};function Bb(e){return e*(Math.PI/180)}function Cb(e,t,n){return new ut(`rgb(${e}, ${t}, ${n})`)}const wb={"02":[" "," "," "," "," "],"03":["  ,     ","      ","   ","  ","    "],"01":["  ","   ","","",""],"04":[" "," ,   ","    ","   ","      "],"05":[" -","  ","   ","  ","  "],"06":["  ","  "," ","","  "]},Mb={"02_Hero":"      ?","03_Future":"      ?","01_Colorful":"     ?","04_Superpowers":"   ?","05_Dream":"   ?","06_Olympic":"      ?"},Db={hero:{percentage:.2079601433049709,position:{x:17,y:56,z:-47},rotation:{x:Bb(0),y:Bb(0),z:Bb(90)}},future:{percentage:.31605463502015224,position:{x:-50.6193,y:55.5133,z:-174.715}},colorful:{percentage:.5133788625167935,position:{x:-159.531,y:209.956,z:-179.909},rotation:{x:Bb(0),y:Bb(0),z:Bb(-90)}},superpowers:{percentage:.7030620241827138,position:{x:-266.721,y:309.642,z:-180.153},rotation:{x:Bb(0),y:Bb(0),z:Bb(90)}},dream:{percentage:.8239476041200179,position:{x:-393.251,y:309.021,z:-140.498},rotation:{x:Bb(0),y:Bb(0),z:Bb(90)}},olympic:{percentage:.9702754142409314,position:{x:-656.321,y:-464.23,z:-152.732},rotation:{x:Bb(0),y:Bb(0),z:Bb(90)}}},Sb=[[Cb(255,0,0),Cb(0,0,0)],[Cb(82,40,231),Cb(240,94,43)],[Cb(255,107,78),Cb(142,222,12)],[Cb(251,42,42),Cb(0,182,121)],[Cb(249,139,255),Cb(0,243,255)],[Cb(0,255,119),Cb(255,255,62)]];return class{constructor(e={assetsPath:null,canvasContainer:null,scrollContainer:null,scrollMessageElement:null,onProgress:null,onAnswer:null,onScrollEnd:null,afterInitStart:null,afterSceneLoaded:null}){this.lowQuality=!1,this.totalResourcesCount=91,this.isiOS=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),this.isScrollEnd=!1,this.onAnswerPointerUpScrollPercentage=.012,this.iOSScrollY=0,this.isScrollDisabled=!1,this.answersToSend=[null,null,null,null,null,null],this.afterInitStart=e.afterInitStart,this.afterSceneLoaded=e.afterSceneLoaded,this.assetsPath=e.assetsPath,this.afterInitStart&&this.afterInitStart();let t=[xb,bb,(n=this.assetsPath,{audios:[{uuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",name:"01",path:n+"aac/01.m4a"},{uuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",name:"02",path:n+"aac/02.m4a"},{uuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",name:"03",path:n+"aac/03.m4a"},{uuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",name:"04",path:n+"aac/04.m4a"},{uuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",name:"05",path:n+"aac/05.m4a"},{uuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",name:"06",path:n+"aac/06.m4a"},{uuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",name:"07",path:n+"aac/07.m4a"}],keyframes:[{uuid:"19E73CF0-1800-41C2-ACE5-A584AB7A5513",name:"",percentage:0,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"51DAEF30-EB5D-4D6C-9D0E-C952E4C8D04C",name:"",percentage:.04192598355190042,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"B70A0442-F1CA-4776-BC3E-194AA7262768",name:"",percentage:.043954212047121584,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"F64740CC-4B98-4021-8A78-EEE835A6B6D2",name:"",percentage:.20985218937541675,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.0499999523162842,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"90832DEB-02B7-44C9-A278-7C33D66E1991",name:"",percentage:.21871527006001334,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.1300000000000001,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"09DBF940-9120-4D8E-AF73-EB39D9EB545A",name:"",percentage:.3386233766233766,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.1299999952316284,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"F5C78698-4840-44E6-AE20-356924ED331D",name:"",percentage:.34384415584415584,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"541B79DE-98EA-408F-B247-88A8E3327F56",name:"",percentage:.5345454545454545,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"61E1084E-5F8E-4428-9EFA-2949F96C921D",name:"",percentage:.5414545454545454,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"11C0475C-EBA5-4EB7-92D0-68A2FB29CFEB",name:"",percentage:.728025974025974,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"B465A555-A6DA-4F6D-ACE2-CC6EA565EED0",name:"",percentage:.7396103896103896,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"14E185AD-7D93-41B9-8B48-73510C7AC7EE",name:"",percentage:.8465714285714285,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]},{uuid:"BDFEE7E0-ADDC-4C58-95AB-8E1282BC6B0B",name:"",percentage:.8614025974025974,effects:[{uuid:"B94AB3B3-156D-4E99-B234-F3330E8070AD",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"5D2C79AA-62F1-49C9-928E-BA0AAD4C2F94",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"FE504AE1-7BD5-45CB-AB27-49DC481FEAB3",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"8BCBE2A9-F058-4562-BA75-8816F3D1298D",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"D8F809F7-70BD-49C2-8006-B95507AFA414",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"214935D0-4424-4BE6-88A8-C652D3888DDE",name:"PlayAudioEffect",effectData:{enabled:!1,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"6E54D6BB-D186-4C0D-AA2D-5643E1DE633E",name:"PlayAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"4E5ACACF-9EAF-473B-B1C6-D68CAD7D3160",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"C429D80E-F14A-4A16-98BF-02B4CAE882C7",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"E7778087-D464-402A-8FE4-1DE5720F0876",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"6C776D25-9AEB-499E-848B-5F59FBFA65B9",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3ECF5A7F-B988-429A-8FAF-9D4DB5A8A38D",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"77DA23FC-87A4-4232-A760-1A9A804CA1E8",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"B80AFD2E-2C40-46D0-B968-00C357F5CCBF",name:"LoopAudioEffect",effectData:{enabled:!0,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}},{uuid:"C81D34E5-05B8-4766-8BB6-B7E5F0D0ABFB",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"20B4EF8E-93A0-456A-BA67-E619BC5912AD",meshName:""}},{uuid:"325D6B87-1313-43F6-9BFD-329C9CC529A4",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"860C11F7-B017-4B82-9FEE-9F1AF12C90E1",meshName:""}},{uuid:"4E91899F-7759-4287-962A-025395489B9F",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"350868E0-3F8B-44A1-A18E-8B5095BC89BB",meshName:""}},{uuid:"FF07A7CC-A89B-4487-9A59-59A6DFCDBAD1",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"325DECF8-949C-4466-B2C5-09276A1D78F4",meshName:""}},{uuid:"3339A0ED-CE5C-4D5B-BFD7-4009CD8E3B35",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"B03A218B-2EC5-4AE8-B2DE-973A83219613",meshName:""}},{uuid:"AFD316E4-A723-4D02-9435-8A0CC2EDF7EF",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:0,audioUuid:"060172AA-8312-4EFB-8BE3-9EB723286A5E",meshName:""}},{uuid:"AEBA0BB4-EACD-41AE-90F7-24B26BBB76AA",name:"VolumeAudioEffect",effectData:{enabled:!0,volume:1.05,audioUuid:"BB9C29B4-19CA-4BE7-89AE-D957C3CA8DD2",meshName:""}}]}]})];var n;let i=[this.assetsPath+"aac/01.m4a",this.assetsPath+"aac/02.m4a",this.assetsPath+"aac/03.m4a",this.assetsPath+"aac/04.m4a",this.assetsPath+"aac/05.m4a",this.assetsPath+"aac/06.m4a",this.assetsPath+"aac/07.m4a"];location.search.includes("blank")&&(t=null),this.krono=new cb.Krono({canvasContainer:e.canvasContainer,scrollContainer:e.scrollContainer,mainScenePath:this.assetsPath+"gltf/Camera_animation.glb",debug:!!location.search.includes("debug"),editor:!0,debugFlightSpeed:40,keyframes:t,audios:i,onLoad:this.onLoad.bind(this),onProgress:this.onProgress.bind(this),chunks:[{path:this.assetsPath+"gltf/00_Gate.glb"},{path:this.assetsPath+"gltf/01_Colorful/01_Colorful.glb",position:Db.colorful.position,rotation:Db.colorful.rotation},{path:this.assetsPath+"gltf/01_Colorful/01_Colorful_Question.glb",position:new z(Db.colorful.position.x+.331,Db.colorful.position.y,Db.colorful.position.z),rotation:Db.colorful.rotation,name:"01_Colorful_Question"},{path:this.assetsPath+"gltf/01_Colorful/01_Colorful_Flying_Scene_Characters.glb",position:Db.colorful.position,rotation:Db.colorful.rotation},{path:this.assetsPath+"gltf/01_Colorful/01_Colorful_Background.glb",position:Db.colorful.position,rotation:Db.colorful.rotation},{path:this.assetsPath+"gltf/02_Hero/02_Hero.glb",position:Db.hero.position,rotation:Db.hero.rotation},{path:this.assetsPath+"gltf/02_Hero/02_Hero_Question.glb",position:new z(Db.hero.position.x-.5,Db.hero.position.y,Db.hero.position.z),rotation:Db.hero.rotation,name:"02_Hero_Question"},{path:this.assetsPath+"gltf/02_Hero/02_Hero_Background.glb",position:Db.hero.position,rotation:Db.hero.rotation},{path:this.assetsPath+"gltf/03_Future/03_Future.glb",position:Db.future.position},{path:this.assetsPath+"gltf/03_Future/03_Future_Background.glb",position:Db.future.position},{path:this.assetsPath+"gltf/03_Future/03_Future_Rigid_Bodies.glb",position:Db.future.position},{path:this.assetsPath+"gltf/03_Future/03_Future_Question.glb",position:new z(Db.future.position.x,Db.future.position.y+.3,Db.future.position.z),name:"03_Future_Question"},{path:this.assetsPath+"gltf/03_Future/03_Future_Flying_Scene_Characters.glb",position:Db.future.position},{path:this.assetsPath+"gltf/04_Superpowers/04_Superpowers.glb",position:Db.superpowers.position,rotation:Db.superpowers.rotation},{path:this.assetsPath+"gltf/04_Superpowers/04_Superpowers_Background.glb",position:Db.superpowers.position,rotation:Db.superpowers.rotation},{path:this.assetsPath+"gltf/04_Superpowers/04_Superpowers_Question.glb",position:new z(Db.superpowers.position.x,Db.superpowers.position.y-1,Db.superpowers.position.z+1),rotation:Db.superpowers.rotation,name:"04_Superpowers_Question"},{path:this.assetsPath+"gltf/04_Superpowers/04_Superpowers_Mutations.glb",position:Db.superpowers.position,rotation:Db.superpowers.rotation},{path:this.assetsPath+"gltf/04_Superpowers/04_Superpowers_Flying_Scene_Characters.glb",position:Db.superpowers.position,rotation:Db.superpowers.rotation},{path:this.assetsPath+"gltf/04_Superpowers/04_Superpowers_Flowers.glb",position:Db.superpowers.position,rotation:Db.superpowers.rotation},{path:this.assetsPath+"gltf/04_Superpowers/04_Superpowers_Blood_Cells.glb",position:Db.superpowers.position,rotation:Db.superpowers.rotation},{path:this.assetsPath+"gltf/05_Dream/05_Dream.glb",position:Db.dream.position,rotation:Db.dream.rotation},{path:this.assetsPath+"gltf/05_Dream/05_Dream_Background.glb",position:Db.dream.position,rotation:Db.dream.rotation},{path:this.assetsPath+"gltf/05_Dream/05_Dream_Question.glb",position:new z(Db.dream.position.x+.9,Db.dream.position.y+.1,Db.dream.position.z),rotation:Db.dream.rotation,name:"05_Dream_Question"},{path:this.assetsPath+"gltf/06_Olympic/06_Olympic.glb",position:Db.olympic.position,rotation:Db.olympic.rotation},{path:this.assetsPath+"gltf/06_Olympic/06_Olympic_Background.glb",position:Db.olympic.position,rotation:Db.olympic.rotation},{path:this.assetsPath+"gltf/06_Olympic/06_Olympic_Scene_Characters.glb",position:Db.olympic.position,rotation:Db.olympic.rotation},{path:this.assetsPath+"gltf/06_Olympic/06_Olympic_Scene_Ring_Characters.glb",position:Db.olympic.position,rotation:Db.olympic.rotation},{path:this.assetsPath+"gltf/06_Olympic/06_Olympic_Question.glb",position:new z(Db.olympic.position.x+2,Db.olympic.position.y+.25,Db.olympic.position.z),rotation:Db.olympic.rotation,name:"06_Olympic_Question"}]}),this.canvasContainer=e.canvasContainer,this.scrollContainer=e.scrollContainer,this.scrollMessageElement=e.scrollMessageElement,this._onProgress=e.onProgress,this._onAnswer=e.onAnswer,this._onScrollEnd=e.onScrollEnd}enable(){this.krono.enable()}disable(){this.krono.disable()}load(){this.krono.load()}onLoad(){this.krono.optimizations.enabled=!1,window.scrollTo(0,0),this.lowQuality&&(this.krono.optimizations.setPixelRatio(.75),this.krono.optimizations.convertMaterialsToBasic()),this.krono.scene.background=new ut(16777215),this.krono.camera.fov=120,this.krono.camera.far=1350,this.krono.camera.updateProjectionMatrix(),this.addListenersToAnswers(),this.krono.raycasting.updateObjectsToIntersect(),requestAnimationFrame(this.tick.bind(this)),this.scrollContainer.addEventListener("scroll",()=>{this.krono.scrollPercentage.y<=.04?this.scrollMessageElement.classList.remove("hidden"):this.scrollMessageElement.classList.add("hidden"),this.krono.scrollPercentage.y<=.9998&&(this.isScrollEnd=!1)},!1),this.suspendAudioContext(),this.afterSceneLoaded&&this.afterSceneLoaded()}tick(){requestAnimationFrame(this.tick.bind(this)),this.onScroll()}onScroll(){const e=this.krono.scrollPercentage.y,t=Object.values(Db).map(e=>e.percentage),n=t.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t);if(e>n&&null===this.answersToSend[t.indexOf(n)]){const e=this.getScrollHeight()*n;location.search.includes("blank")||window.scrollTo(0,e),this.lockScroll()}this.krono.scrollPercentage.y>=1&&!this.isScrollEnd&&this.onScrollEnd()}onScrollEnd(){this.isScrollEnd=!0,this._onScrollEnd()}getScrollHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-this.krono.bounds.canvas.height}suspendAudioContext(){this.krono.suspendAudioContext()}resumeAudioContext(){this.krono.resumeAudioContext()}addListenersToAnswers(){const e=[],t=Object.keys(wb);t.forEach(t=>{for(let n=1;n<6;n++)e.push(`${t}_Answer_${n}_Mat`)}),e.forEach(e=>{const n=function(e,t){let n=null;return e.traverse(e=>{var i;(null===(i=e.material)||void 0===i?void 0:i.name)!==t||(n=e)}),n}(this.krono.scene,e);n.addEventListener("pointerenter",this.onAnswerPointerEnter.bind(this)),n.addEventListener("pointerleave",this.onAnswerPointerLeave.bind(this)),n.addEventListener("pointerdown",this.onAnswerPointerEnter.bind(this)),n.addEventListener("pointerup",this.onAnswerPointerUp.bind(this));const i=n.material.name.split("_")[0],r=t.indexOf(i);Sb[r][1]})}onProgress(e,t,n){let i=t/this.totalResourcesCount;i>1&&(i=1),this._onProgress&&this._onProgress(i)}onAnswerPointerEnter(e){if(!this.isScrollDisabled)return;const t=e.target,n=t.material.name.split("_"),i=Object.keys(wb),r=n[0],a=i.indexOf(r);Sb[a][0];this.canvasContainer.style.cursor="pointer",t.material.transparent=!0,t.material.opacity=.75}onAnswerPointerLeave(e){if(!this.isScrollDisabled)return;const t=e.target,n=t.material.name.split("_"),i=Object.keys(wb),r=n[0],a=i.indexOf(r);Sb[a][1];this.canvasContainer.style.cursor="default",t.material.transparent=!1,t.material.opacity=1}onAnswerPointerUp(e){if(!this.isScrollDisabled)return;const t=e.target.material.name.split("_"),n=Object.keys(wb),i=t[0],r=t[2],a=n.indexOf(i);this.answersToSend[a]=wb[i][parseInt(r)-1],this.unlockScroll();const o=this.getScrollHeight()*(this.krono.scrollPercentage.y+this.onAnswerPointerUpScrollPercentage);this.scrollContainer.scrollTo(0,o),setTimeout(()=>{const e=Object.keys(Mb)[n.indexOf(i)]+"_Question";this.krono.scene.getObjectByName(e).visible=!1},1e3),this._onAnswer(a,Object.values(Mb)[a],this.answersToSend[a])}lockScroll(){setTimeout(()=>{this.isScrollDisabled=!0},2500),yb(this.canvasContainer,{allowTouchMove:e=>"canvas-container"===e.id})}unlockScroll(){this.isScrollDisabled=!1,Eb(this.canvasContainer)}}}));
